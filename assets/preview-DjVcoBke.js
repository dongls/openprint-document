const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mock-kUJsravU.js","assets/utils-BNf-qKKy.js","assets/vue-DBh96Ghl.js","assets/utils-FAH5tsUN.css"])))=>i.map(i=>d[i]);
var Er=Object.defineProperty;var En=t=>{throw TypeError(t)};var wr=(t,e,n)=>e in t?Er(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var T=(t,e,n)=>wr(t,typeof e!="symbol"?e+"":e,n),xt=(t,e,n)=>e.has(t)||En("Cannot "+n);var x=(t,e,n)=>(xt(t,e,"read from private field"),n?n.call(t):e.get(t)),ce=(t,e,n)=>e.has(t)?En("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Qe=(t,e,n,r)=>(xt(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),et=(t,e,n)=>(xt(t,e,"access private method"),n);var wn=(t,e,n,r)=>({set _(i){Qe(t,e,i,n)},get _(){return x(t,e,r)}});import{C as yr,ag as rn,ah as sn,aA as xe,J as jt,am as Nr,aB as F,u as pe,p as on,v as je,i as Mt,b as re,P as _r,m as Ye,D as dt,t as br,w as $t,aC as ot,a as tt,N as qt,O as vt,n as Dr,E as yn,aD as Gn,F as Yt,r as st,B as Ue,o as Ar,S as Sr,V as Nn,q as Tr,G as Zt,L as Rr,aE as Or,U as Ir,_ as Ct,I as Xt,as as Pr,x as Lr,aF as zn,h as he,T as Cr,W as kr,A as xr,Q as Mr,Y as $r,ax as qr,aw as _n,aG as bn,aH as Dn,at as Fr,au as Hr,av as Ur}from"./utils-BNf-qKKy.js";import{d as lt,h as Ne,c as Ve,a as Me,b as se,n as te,t as Nt,e as W,D as _t,u as Wn,s as bt,g as jn,J as Br,i as X,f as An,F as Vr,w as Gr,y as zr,B as Sn,C as Wr,U as jr,N as Yr,r as Ft,j as Zr,S as Xr}from"./vue-DBh96Ghl.js";const ue=Object.freeze({CREATED:0,RENDERING:1,PAGED:2,READY:3,UNMOUNT:4}),Et=Object.freeze({CREATED:0,INIT:1,PAGING:2,PAGED:3,READY:4}),Jt=Object.freeze({CREATED:0,MOUNDTED:1}),oe={UNDEFINED:0,PENDING:1,DONE:2},we={PENDING:-1,HIDDEN:0,VISIBLE:1},nt=[25,50,75,100,125,150,200,300,400],Jr=["class","className","style"],ye=Object.freeze({DOCUMENT:"quickprint-document",PAGE:"quickprint-page",PAPER:"quickprint-paper",PRINT_HIDDEN:"quickprint-hidden",GUIDDE_LINE:"quickprint-guide-line"}),Tn=Promise.resolve(),Kr=2e3,Qr=48;let Kt=0,wt=0;function ei(){Kt=0,wt=0}function qe(){return Kt<=Kr?(Kt++,Tn):wt<Qr?(wt++,Tn):new Promise(t=>{wt=0,setTimeout(t)})}function ti(t){return t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97)}function ni(t){return t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123}function Qt(t){return t==null?"":typeof t=="string"?t.trim():Array.isArray(t)?t.map(Qt).join(" "):typeof t=="object"?Object.keys(t).filter(e=>t[e]).join(" "):""}function Yn(t,e){if(e!=null){if(e instanceof Element){t.appendChild(e);return}if(Array.isArray(e)){for(const n of e)Yn(t,n);return}t.textContent+=e}}function ri(t,e){if(!(e==null||typeof e!="object"))for(const n of Object.keys(e)){const r=e[n];if(r==null)continue;const i=yr(n);t.style.setProperty(i,r)}}function ii(t,e){if(Qt(e)=="")return;const r=t.className==""?"":" ";t.className+=r+Qt(e)}function Zn(t,e,n){switch(e){case"class":case"className":ii(t,n);break;case"style":ri(t,n);break;case"children":n!=null&&Yn(t,n);break;case"innerHTML":break;default:if(e[0]==="@")return si(t,e,n);e in t&&(t[e]=n),n==null?t.removeAttribute(e):t.setAttribute(e,n)}}function si(t,e,n){Reflect.set(t,e.slice(1),n)}function oi(t,e,n){const r=t(e);if(r==null)return null;for(const i of Object.keys(e??{}))(ti(i)||ni(i)||Jr.includes(i))&&Zn(r,i,e[i]);return r}function ui(t,e,n){const r=document.createElement(t);if(r==null)return null;for(const i of Object.keys(e??{}))Zn(r,i,e[i]);return r}function J(t,e,n){return typeof t=="function"?oi(t,e):ui(t,e)}function Rn(){return{display:!1,postion:0,height:0,offsetTop:0,offsetHeight:0,defines:[],children:[]}}var Rt,Se;const Ot=class Ot{constructor(e,n,r){ce(this,Rt,rn(sn.PRINT_PAGE));ce(this,Se,Object.create(null));T(this,"fid");T(this,"define");T(this,"pageNum",-1);T(this,"pageTotal",-1);T(this,"extra",!1);T(this,"paper");T(this,"header");T(this,"footer");T(this,"children",[]);T(this,"fixed",[]);T(this,"parent");T(this,"element");T(this,"rendering");T(this,"state",Et.CREATED);this.fid=r,this.define=e,this.paper=this.createPaper(e,n),this.header=this.createHeader(),this.footer=this.createFooter(),xe(this,"parent",null),xe(this,"element",null),xe(this,"rendering",0)}static create(e,n,r="0000"){return new Ot(e,n,r)}get id(){return"@"+x(this,Rt)}get index(){return this.parent==null?-1:this.parent.pages.findIndex(e=>e.id===this.id)}get defines(){const e=new Set,n=this.header,r=this.footer;return n.display&&n.defines.length>0&&n.defines.forEach(i=>e.add(i.id)),r.display&&r.defines.length>0&&r.defines.forEach(i=>e.add(i.id)),this.define.children.filter(i=>!e.has(i.id)).sort(jt.sort)}get style(){const{offsetWidth:e,offsetHeight:n}=this.paper;return{width:e+"px",height:n+"px"}}createPageHeader(){const e=this.header;if(e.display!==!0)return null;const n={top:e.offsetTop+"px"},r=[ye.GUIDDE_LINE,ye.PRINT_HIDDEN];return[...e.children.map(i=>i.createElement()),J("div",{class:r,style:n})]}createPageFooter(){const e=this.footer;if(e.display!==!0)return null;const n={top:e.offsetTop+"px"},r=[ye.GUIDDE_LINE,ye.PRINT_HIDDEN];return[...e.children.map(i=>i.createElement()),J("div",{class:r,style:n})]}render(){return J("div",{id:this.id,class:ye.PAGE,"data-index":this.index+1,children:J("div",{class:ye.PAPER,children:[this.createPageHeader(),this.createPageFooter()]})})}createElement(){return this.element?this.element:(this.element=this.render(),this.element)}async mount(e){this.state=Et.PAGED,await this.onPaged()}async mountChild(e){if(this.element==null||e.element==null)return!1;const n=this.element.querySelector(".quickprint-paper");return n==null?!1:(n.appendChild(e.element),await qe(),await e.mount(e.element),!0)}async replaceChild(e,n){if(this.element==null||e.element==null)return!1;const r=this.element.querySelector(".quickprint-paper");return r==null?!1:(n==null?r.removeChild(e.element):r.replaceChild(n,e.element),await qe(),await e.mount(n),!0)}beginPaging(){this.state=Et.PAGING}onCreated(){const e=[...this.header.children,...this.children,...this.footer.children,...this.fixed];return Promise.allSettled(e.map(n=>n.onCreated()))}onPaged(){const e=this.children.map(n=>typeof n.onPaged=="function"?n.onPaged():Promise.resolve());return Promise.allSettled(e)}onFinshed(){const e=this.children.map(n=>typeof n.onFinished=="function"?n.onFinished():Promise.resolve());return Promise.allSettled(e)}setParent(e){this.parent=e}appendMany(e){for(let n=0,r=e.length;n<r;n++)this.append(e[n])}append(e){e.setParent(this),this.children.push(e),x(this,Se)[e.id]=e}appendToHeader(e){e.setParent(this),this.header.children.push(e),x(this,Se)[e.id]=e}appendToFooter(e){e.setParent(this),this.footer.children.push(e),x(this,Se)[e.id]=e}appendToFixed(e){e.setParent(this),this.fixed.push(e),x(this,Se)[e.id]=e}createPaper(e,n){return{size:n.size,width:n.width,height:n.height,orientation:e.orientation,offsetWidth:Math.round(n.width),offsetHeight:Math.round(n.height)}}createHeader(){const e=this.define.header;if(e.display!==!0)return Rn();const n=e.height??0;return{display:!0,postion:n,height:n,offsetTop:Math.round(n),offsetHeight:Math.round(n),defines:this.define.children.filter(r=>r.top+r.height<=n),children:[]}}createFooter(){const e=this.define.footer;if(e.display!==!0)return Rn();const n=e.height??0,i=Math.floor(Nr(this.paper.height))-n;return{display:!0,postion:i,height:n,offsetTop:Math.round(i),offsetHeight:Math.round(n),defines:this.define.children.filter(s=>s.top>=i),children:[]}}clone(){const e=new Ot(this.define,this.paper,this.fid);e.rendering=0;for(const n of this.header.children){const r=n.clone();e.appendToHeader(r)}for(const n of this.footer.children){const r=n.clone();e.appendToFooter(r)}return e}findElement(e){const n=x(this,Se)[e];if(n)return n;for(const r of this.children){const i=r.findElement(e);if(i)return i}}filterElement(e){const n=typeof e=="string"?e:e.id;return this.children.filter(r=>r.define.id===n)}};Rt=new WeakMap,Se=new WeakMap;let Dt=Ot;var Ze=1e9,ai={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},an,U=!0,de="[DecimalError] ",$e=de+"Invalid argument: ",un=de+"Exponent out of range: ",Xe=Math.floor,Pe=Math.pow,li=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ae,ee=1e7,H=7,Xn=9007199254740991,At=Xe(Xn/H),E={};E.absoluteValue=E.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};E.comparedTo=E.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};E.decimalPlaces=E.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*H;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};E.dividedBy=E.div=function(t){return be(this,new this.constructor(t))};E.dividedToIntegerBy=E.idiv=function(t){var e=this,n=e.constructor;return C(be(e,new n(t),0,1),n.precision)};E.equals=E.eq=function(t){return!this.cmp(t)};E.exponent=function(){return Y(this)};E.greaterThan=E.gt=function(t){return this.cmp(t)>0};E.greaterThanOrEqualTo=E.gte=function(t){return this.cmp(t)>=0};E.isInteger=E.isint=function(){return this.e>this.d.length-2};E.isNegative=E.isneg=function(){return this.s<0};E.isPositive=E.ispos=function(){return this.s>0};E.isZero=function(){return this.s===0};E.lessThan=E.lt=function(t){return this.cmp(t)<0};E.lessThanOrEqualTo=E.lte=function(t){return this.cmp(t)<1};E.logarithm=E.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ae))throw Error(de+"NaN");if(n.s<1)throw Error(de+(n.s?"NaN":"-Infinity"));return n.eq(ae)?new r(0):(U=!1,e=be(ut(n,s),ut(t,s),s),U=!0,C(e,i))};E.minus=E.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Qn(e,t):Jn(e,(t.s=-t.s,t))};E.modulo=E.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(de+"NaN");return n.s?(U=!1,e=be(n,t,0,1).times(t),U=!0,n.minus(e)):C(new r(n),i)};E.naturalExponential=E.exp=function(){return Kn(this)};E.naturalLogarithm=E.ln=function(){return ut(this)};E.negated=E.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};E.plus=E.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Jn(e,t):Qn(e,(t.s=-t.s,t))};E.precision=E.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error($e+t);if(e=Y(i)+1,r=i.d.length-1,n=r*H+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};E.squareRoot=E.sqrt=function(){var t,e,n,r,i,s,o,u=this,l=u.constructor;if(u.s<1){if(!u.s)return new l(0);throw Error(de+"NaN")}for(t=Y(u),U=!1,i=Math.sqrt(+u),i==0||i==1/0?(e=ge(u.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Xe((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(s=r,r=s.plus(be(u,s,o+2)).times(.5),ge(s.d).slice(0,o)===(e=ge(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(C(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(e!="9999")break;o+=4}return U=!0,C(r,n)};E.times=E.mul=function(t){var e,n,r,i,s,o,u,l,a,f=this,d=f.constructor,w=f.d,p=(t=new d(t)).d;if(!f.s||!t.s)return new d(0);for(t.s*=f.s,n=f.e+t.e,l=w.length,a=p.length,l<a&&(s=w,w=p,p=s,o=l,l=a,a=o),s=[],o=l+a,r=o;r--;)s.push(0);for(r=a;--r>=0;){for(e=0,i=l+r;i>r;)u=s[i]+p[r]*w[i-r-1]+e,s[i--]=u%ee|0,e=u/ee|0;s[i]=(s[i]+e)%ee|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,U?C(t,d.precision):t};E.toDecimalPlaces=E.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ee(t,0,Ze),e===void 0?e=r.rounding:Ee(e,0,8),C(n,t+Y(n)+1,e))};E.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Fe(r,!0):(Ee(t,0,Ze),e===void 0?e=i.rounding:Ee(e,0,8),r=C(new i(r),t+1,e),n=Fe(r,!0,t+1)),n};E.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Fe(i):(Ee(t,0,Ze),e===void 0?e=s.rounding:Ee(e,0,8),r=C(new s(i),t+Y(i)+1,e),n=Fe(r.abs(),!1,t+Y(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};E.toInteger=E.toint=function(){var t=this,e=t.constructor;return C(new e(t),Y(t)+1,e.rounding)};E.toNumber=function(){return+this};E.toPower=E.pow=function(t){var e,n,r,i,s,o,u=this,l=u.constructor,a=12,f=+(t=new l(t));if(!t.s)return new l(ae);if(u=new l(u),!u.s){if(t.s<1)throw Error(de+"Infinity");return u}if(u.eq(ae))return u;if(r=l.precision,t.eq(ae))return C(u,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=u.s,o){if((n=f<0?-f:f)<=Xn){for(i=new l(ae),e=Math.ceil(r/H+4),U=!1;n%2&&(i=i.times(u),In(i.d,e)),n=Xe(n/2),n!==0;)u=u.times(u),In(u.d,e);return U=!0,t.s<0?new l(ae).div(i):C(i,r)}}else if(s<0)throw Error(de+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,u.s=1,U=!1,i=t.times(ut(u,r+a)),U=!0,i=Kn(i),i.s=s,i};E.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Y(i),r=Fe(i,n<=s.toExpNeg||n>=s.toExpPos)):(Ee(t,1,Ze),e===void 0?e=s.rounding:Ee(e,0,8),i=C(new s(i),t,e),n=Y(i),r=Fe(i,t<=n||n<=s.toExpNeg,t)),r};E.toSignificantDigits=E.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ee(t,1,Ze),e===void 0?e=r.rounding:Ee(e,0,8)),C(new r(n),t,e)};E.toString=E.valueOf=E.val=E.toJSON=E[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Y(t),n=t.constructor;return Fe(t,e<=n.toExpNeg||e>=n.toExpPos)};function Jn(t,e){var n,r,i,s,o,u,l,a,f=t.constructor,d=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),U?C(e,d):e;if(l=t.d,a=e.d,o=t.e,i=e.e,l=l.slice(),s=o-i,s){for(s<0?(r=l,s=-s,u=a.length):(r=a,i=o,u=l.length),o=Math.ceil(d/H),u=o>u?o+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=l.length,s=a.length,u-s<0&&(s=u,r=a,a=l,l=r),n=0;s;)n=(l[--s]=l[s]+a[s]+n)/ee|0,l[s]%=ee;for(n&&(l.unshift(n),++i),u=l.length;l[--u]==0;)l.pop();return e.d=l,e.e=i,U?C(e,d):e}function Ee(t,e,n){if(t!==~~t||t<e||t>n)throw Error($e+t)}function ge(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=H-r.length,n&&(s+=Ae(n)),s+=r;o=t[e],r=o+"",n=H-r.length,n&&(s+=Ae(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var be=function(){function t(r,i){var s,o=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+o,r[u]=s%ee|0,o=s/ee|0;return o&&r.unshift(o),r}function e(r,i,s,o){var u,l;if(s!=o)l=s>o?1:-1;else for(u=l=0;u<s;u++)if(r[u]!=i[u]){l=r[u]>i[u]?1:-1;break}return l}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*ee+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var u,l,a,f,d,w,p,D,c,h,N,R,I,G,V,O,M,$,B=r.constructor,q=r.s==i.s?1:-1,_=r.d,P=i.d;if(!r.s)return new B(r);if(!i.s)throw Error(de+"Division by zero");for(l=r.e-i.e,M=P.length,V=_.length,p=new B(q),D=p.d=[],a=0;P[a]==(_[a]||0);)++a;if(P[a]>(_[a]||0)&&--l,s==null?R=s=B.precision:o?R=s+(Y(r)-Y(i))+1:R=s,R<0)return new B(0);if(R=R/H+2|0,a=0,M==1)for(f=0,P=P[0],R++;(a<V||f)&&R--;a++)I=f*ee+(_[a]||0),D[a]=I/P|0,f=I%P|0;else{for(f=ee/(P[0]+1)|0,f>1&&(P=t(P,f),_=t(_,f),M=P.length,V=_.length),G=M,c=_.slice(0,M),h=c.length;h<M;)c[h++]=0;$=P.slice(),$.unshift(0),O=P[0],P[1]>=ee/2&&++O;do f=0,u=e(P,c,M,h),u<0?(N=c[0],M!=h&&(N=N*ee+(c[1]||0)),f=N/O|0,f>1?(f>=ee&&(f=ee-1),d=t(P,f),w=d.length,h=c.length,u=e(d,c,w,h),u==1&&(f--,n(d,M<w?$:P,w))):(f==0&&(u=f=1),d=P.slice()),w=d.length,w<h&&d.unshift(0),n(c,d,h),u==-1&&(h=c.length,u=e(P,c,M,h),u<1&&(f++,n(c,M<h?$:P,h))),h=c.length):u===0&&(f++,c=[0]),D[a++]=f,u&&c[0]?c[h++]=_[G]||0:(c=[_[G]],h=1);while((G++<V||c[0]!==void 0)&&R--)}return D[0]||D.shift(),p.e=l,C(p,o?s+Y(p)+1:s)}}();function Kn(t,e){var n,r,i,s,o,u,l=0,a=0,f=t.constructor,d=f.precision;if(Y(t)>16)throw Error(un+Y(t));if(!t.s)return new f(ae);for(U=!1,u=d,o=new f(.03125);t.abs().gte(.1);)t=t.times(o),a+=5;for(r=Math.log(Pe(2,a))/Math.LN10*2+5|0,u+=r,n=i=s=new f(ae),f.precision=u;;){if(i=C(i.times(t),u),n=n.times(++l),o=s.plus(be(i,n,u)),ge(o.d).slice(0,u)===ge(s.d).slice(0,u)){for(;a--;)s=C(s.times(s),u);return f.precision=d,e==null?(U=!0,C(s,d)):s}s=o}}function Y(t){for(var e=t.e*H,n=t.d[0];n>=10;n/=10)e++;return e}function Ht(t,e,n){if(e>t.LN10.sd())throw U=!0,n&&(t.precision=n),Error(de+"LN10 precision limit exceeded");return C(new t(t.LN10),e)}function Ae(t){for(var e="";t--;)e+="0";return e}function ut(t,e){var n,r,i,s,o,u,l,a,f,d=1,w=10,p=t,D=p.d,c=p.constructor,h=c.precision;if(p.s<1)throw Error(de+(p.s?"NaN":"-Infinity"));if(p.eq(ae))return new c(0);if(e==null?(U=!1,a=h):a=e,p.eq(10))return e==null&&(U=!0),Ht(c,a);if(a+=w,c.precision=a,n=ge(D),r=n.charAt(0),s=Y(p),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=ge(p.d),r=n.charAt(0),d++;s=Y(p),r>1?(p=new c("0."+n),s++):p=new c(r+"."+n.slice(1))}else return l=Ht(c,a+2,h).times(s+""),p=ut(new c(r+"."+n.slice(1)),a-w).plus(l),c.precision=h,e==null?(U=!0,C(p,h)):p;for(u=o=p=be(p.minus(ae),p.plus(ae),a),f=C(p.times(p),a),i=3;;){if(o=C(o.times(f),a),l=u.plus(be(o,new c(i),a)),ge(l.d).slice(0,a)===ge(u.d).slice(0,a))return u=u.times(2),s!==0&&(u=u.plus(Ht(c,a+2,h).times(s+""))),u=be(u,new c(d),a),c.precision=h,e==null?(U=!0,C(u,h)):u;u=l,i+=2}}function On(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Xe(n/H),t.d=[],r=(n+1)%H,n<0&&(r+=H),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=H;r<i;)t.d.push(+e.slice(r,r+=H));e=e.slice(r),r=H-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),U&&(t.e>At||t.e<-At))throw Error(un+n)}else t.s=0,t.e=0,t.d=[0];return t}function C(t,e,n){var r,i,s,o,u,l,a,f,d=t.d;for(o=1,s=d[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=H,i=e,a=d[f=0];else{if(f=Math.ceil((r+1)/H),s=d.length,f>=s)return t;for(a=s=d[f],o=1;s>=10;s/=10)o++;r%=H,i=r-H+o}if(n!==void 0&&(s=Pe(10,o-i-1),u=a/s%10|0,l=e<0||d[f+1]!==void 0||a%s,l=n<4?(u||l)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||l||n==6&&(r>0?i>0?a/Pe(10,o-i):0:d[f-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(s=Y(t),d.length=1,e=e-s-1,d[0]=Pe(10,(H-e%H)%H),t.e=Xe(-e/H)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=f,s=1,f--):(d.length=f+1,s=Pe(10,H-r),d[f]=i>0?(a/Pe(10,o-i)%Pe(10,i)|0)*s:0),l)for(;;)if(f==0){(d[0]+=s)==ee&&(d[0]=1,++t.e);break}else{if(d[f]+=s,d[f]!=ee)break;d[f--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(U&&(t.e>At||t.e<-At))throw Error(un+Y(t));return t}function Qn(t,e){var n,r,i,s,o,u,l,a,f,d,w=t.constructor,p=w.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new w(t),U?C(e,p):e;if(l=t.d,d=e.d,r=e.e,a=t.e,l=l.slice(),o=a-r,o){for(f=o<0,f?(n=l,o=-o,u=d.length):(n=d,r=a,u=l.length),i=Math.max(Math.ceil(p/H),u)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,u=d.length,f=i<u,f&&(u=i),i=0;i<u;i++)if(l[i]!=d[i]){f=l[i]<d[i];break}o=0}for(f&&(n=l,l=d,d=n,e.s=-e.s),u=l.length,i=d.length-u;i>0;--i)l[u++]=0;for(i=d.length;i>o;){if(l[--i]<d[i]){for(s=i;s&&l[--s]===0;)l[s]=ee-1;--l[s],l[i]+=ee}l[i]-=d[i]}for(;l[--u]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,U?C(e,p):e):new w(0)}function Fe(t,e,n){var r,i=Y(t),s=ge(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Ae(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ae(-i-1)+s,n&&(r=n-o)>0&&(s+=Ae(r))):i>=o?(s+=Ae(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+Ae(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=Ae(r))),t.s<0?"-"+s:s}function In(t,e){if(t.length>e)return t.length=e,!0}function er(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error($e+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return On(o,s.toString())}else if(typeof s!="string")throw Error($e+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,li.test(s))On(o,s);else throw Error($e+s)}if(i.prototype=E,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=er,i.config=i.set=ci,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function ci(t){if(!t||typeof t!="object")throw Error(de+"Object expected");var e,n,r,i=["precision",1,Ze,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Xe(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error($e+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error($e+n+": "+r);return this}var an=er(ai);ae=new an(1);const ve=an,j={of(t){return new ve(t)},sum(...t){let e=new ve(0);for(const n of t)e=e.plus(n);return e},toFormat(t,e,n,r){const i=t.toFixed(e,n);if(r==null)return i;const s=r.groupSize??3,o=r.groupSeparator??",",[u,l]=i.split("."),a=[];for(let f=u.length;f>0;f-=s)a.unshift(u.slice(Math.max(0,f-s),f));return a.join(o)+(l?`.${l}`:"")},round(t,e,n){return j.of(t).toDecimalPlaces(e,n).toNumber()}};function fi(t){switch(t){case F.Equal:return"==";case F.NotEqual:return"!=";case F.Lte:return"<=";case F.Gte:return">=";case F.LogicalAnd:return"&&";case F.LogicalOr:return"||";case F.Power:return"**";case F.Nullish:return"??";case F.Group:return"()";default:return String.fromCharCode(t)}}function fe(t){return/^-?(?:0|[1-9]\d*)(?:\.\d+)?$/.test(t)}function rt(t){return t==null}const ct=new Map;function hi(t,e){const n=ct.get(t);if(n==null)throw new Error(`不支持的函数：${t}`);return n(...e)}function tr(){return new Error("Unexpected end of input")}function Q(t){return new Error(`Unexpected end of input at position ${t.start}, near \`${fi(t.value)}\``)}function di(t,e,n){switch(t.value){case F.Plus:{if(t.left==null||t.right==null)throw Q(t);return typeof e=="string"||typeof n=="string"?e+n:fe(e)&&fe(n)?j.of(e).plus(n).toNumber():Number.NaN}case F.Minus:{if(t.left==null&&t.right==null)throw Q(t);return t.left==null&&t.right?-n:fe(e)&&fe(n)?j.of(e).minus(n).toNumber():Number.NaN}case F.Asterisk:{if(t.left==null||t.right==null)throw Q(t);return fe(e)&&fe(n)?j.of(e).times(n).toNumber():Number.NaN}case F.Slash:{if(t.left==null||t.right==null)throw Q(t);return fe(e)&&fe(n)?j.of(e).div(n).toNumber():Number.NaN}case F.Percent:{if(t.left==null||t.right==null)throw Q(t);return fe(e)&&fe(n)?j.of(e).mod(n).toNumber():Number.NaN}case F.Power:{if(t.left==null||t.right==null)throw Q(t);return fe(e)&&fe(n)?j.of(e).pow(n).toNumber():Number.NaN}case F.Equal:{if(t.left==null||t.right==null)throw Q(t);return rt(e)&&rt(n)?!0:e===n}case F.NotEqual:{if(t.left==null||t.right==null)throw Q(t);return rt(e)&&rt(n)?!1:e!==n}case F.Lt:{if(t.left==null||t.right==null)throw Q(t);return e<n}case F.Lte:{if(t.left==null||t.right==null)throw Q(t);return e<=n}case F.Gt:{if(t.left==null||t.right==null)throw Q(t);return e>n}case F.Gte:{if(t.left==null||t.right==null)throw Q(t);return e>=n}case F.LogicalAnd:{if(t.left==null||t.right==null)throw Q(t);return e&&n}case F.LogicalOr:{if(t.left==null||t.right==null)throw Q(t);return e||n}case F.LogicalNot:{if(t.right==null)throw Q(t);return!n}case F.Nullish:{if(t.left==null||t.right==null)throw Q(t);return rt(e)?n:e}default:throw Q(t)}}function pi(t,e){const r=(t.children??[]).map(i=>i==null?null:_e(i,e));return hi(t.value,r)}function mi(t,e){var n;return e==null||typeof e!="object"?null:(n=e.data)==null?void 0:n[t.value]}function gi(t,e){var n;return e==null||typeof e!="object"?null:(n=e.scope)==null?void 0:n[t.value]}function vi(t,e){if(t.left==null||t.right==null||t.condition==null)throw tr();return _e(t.condition,e)?(t.result=_e(t.left,e),t.result):(t.result=_e(t.right,e),t.result)}function _e(t,e){switch(t.type){case pe.NULL:return null;case pe.UNDEFINED:return;case pe.NUMBER:return Number(t.value);case pe.STRING:return String(t.value);case pe.TEMPLATE:{const r=(Array.isArray(t.value)?t.value:[t.value]).map(i=>_e(i,e));return t.result=r.join(""),t.result}case pe.BOOLEAN:return!!t.value;case pe.VARIABLE:return t.result=mi(t,e),t.result;case pe.REFERENCE:return t.result=gi(t,e),t.result;case pe.FUNCTION:return t.result=pi(t,e),t.result;case pe.OPERATOR:{if(t.isQuestion)return vi(t,e);if(t.isGroup){if(t.right==null)throw Q(t);return t.result=_e(t.right,e),t.result}const n=t.left?_e(t.left,e):null,r=t.right?_e(t.right,e):null;return t.result=di(t,n,r),t.result}default:throw tr()}}function Ei(t,e){return _e(t,e??{})}const nr="Resolve Element Value Pending Error",rr="ElementValueError";function L(t){const e=Object.create(null);return e.state=oe.DONE,e.raw=t,e}function Ge(){const t=Object.create(null);return t.state=oe.PENDING,t}function kt(){const t=new Error(nr);return t.name=rr,t}function wi(t){return t instanceof Error&&t.name===rr&&t.message===nr}function yi(t,e){const n=typeof e=="string"?on(e)?je(e):null:e;if(n==null)return L();switch(n.value){case Mt.PAGE_NUMBER:{const r=t.doc;return r==null?L():r.isPaged?L(t.pageNum):Ge()}case Mt.PAGE_TOTAL:{const r=t.doc;return r==null?L():r.isPaged?L(r.pages.length):Ge()}case Mt.ROW_INDEX:{const r=t.doc;if(r==null)return L();if(r.isPaged){if(t.type!==re.TABLE_CELL)return L();const i=t.parent;return i==null?L():L(i.rowIndex)}return Ge()}default:return L()}}function Ni(t,e){const n=typeof e=="string"?on(e)?je(e):null:e;if(n==null)return L();switch(n.value){case _r.ELEMENT_VALUR:return t.isProcessValueDone?L(t.getRawValue()):Ge();default:return L()}}function _i(t,e,n){const r=typeof e=="string"?je(e):e,i=t.parent;if(i==null||!i.isBindVariable)return L(ot(n,r.value));const s=je(i.define.ds.value);return r.path.startsWith(s.path+".")?i.rowData==null?L():L(ot(i.rowData,r.value)):L(ot(n,r.value))}async function bi(t,e){const n=t.define;if(n.ds==null)return L();const r=n.ds,i=r.value;return Ye(i)?L():r.type===dt.TEMPLATE?Di(t,i):r.type===dt.VARIABLE?ln(t,i,e):r.type===dt.FORMULA?ir(t,i,e):r.type===dt.CODE?Ai(i,t):{state:oe.DONE,raw:r.value}}function ln(t,e,n,r=!1){const i=je(e);switch(i.varType){case $t.DS:return t.type===re.TABLE_CELL?_i(t,i,n):t.type===re.TABLE_ROW?L(t.rowData):L(ot(n,r?i.path:i.value));case $t.BUILTIN:return yi(t,i);case $t.SPECIAL:return Ni(t,i);default:return L()}}function Di(t,e){return console.log("todo template:"+e),L()}function ir(t,e,n){try{const r=br.compile(e),i={data:{},scope:{}};for(const o of r.variable){const u=ln(t,o.value,n);if(u.state===oe.PENDING)return Ge();Reflect.set(i.data,o.value,u.raw)}for(const o of r.reference)Reflect.set(i.scope,o.value,{value:o.value,element:t});const s=Ei(r.root,i);return L(s)}catch(r){return wi(r)?Ge():(console.log(r),L())}}async function Ai(t,e){try{const r=new Function("element",`return (${t})(element)`)(e);if(r instanceof Promise){const i=await r;return L(i)}return L(r)}catch(n){return console.log(n),L()}}function Pn(){const t=document.createElement("span"),e="important";return t.style.visibility="hidden",t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.zIndex="-1",t.style.setProperty("line-height","1",e),t.style.setProperty("font-family","宋体",e),t.style.setProperty("padding","0",e),t.textContent="水",t}function Si(){const t=Pn();t.style.fontSize="6px",document.body.appendChild(t);const e=Pn();e.style.fontSize="12px",document.body.appendChild(e);const n=t.clientHeight<e.clientHeight;return document.body.removeChild(t),document.body.removeChild(e),n}let sr=function(){const t=Si();return sr=function(){return t},t};const Ti=/Chrome/.test(navigator.userAgent);function or(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var me={},Ln;function ur(){if(Ln)return me;Ln=1;var t=/^([+-])?0*(\d+)(\.(\d+))?$/,e=/^([+-])?0*(\d+)(\.(\d+))?e(([+-])?(\d+))$/i,n=me.e2ten=function(i){var s=e.exec(i.toString());if(!s)return i;var o=s[2],u=s[4]||"",l=s[5]?+s[5]:0;if(l>0){var a=u.substr(0,l);a=a.length<l?a+new Array(l-a.length+1).join("0"):a,u=u.substr(l),o+=a}else{l=-l;var f=o.length-l;f=f<0?0:f;var d=o.substr(f,l);d=d.length<l?new Array(l-d.length+1).join("0")+d:d,o=o.substring(0,f),u=d+u}return o=o==""?"0":o,(s[1]=="-"?"-":"")+o+(u?"."+u:"")};me.getNumbResult=function(i){var s=t.exec(i.toString());if(!s&&e.test(i.toString())&&(s=t.exec(n(i.toString()))),s)return{int:s[2],decimal:s[4],minus:s[1]=="-",num:s.slice(1,3).join("")}},me.centerArray=function i(s,o){if(s.splice.apply(s,[0,o.length].concat(o.splice(0,o.length))),arguments.length>2){var u=[].slice.call(arguments,2);u.unshift(s),i.apply(null,u)}return s};var r=me.hasAttr=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)};return me.extend=function(i){for(var s,o=arguments[0]||{},u=Array.prototype.slice.call(arguments,1),l=0;l<u.length;l++){var a=u[l];for(s in a)r(a,s)&&(o[s]=a[s])}return o},me.getDigit=function(i){return i>=5?(i-4)*4+4:i},me.unshiftZero=function(i,s){if(s==null&&(s=1),!(s<=0))for(;s--;)i.unshift(0)},me.clearZero=function(i,s,o){if(i==null)return"";var u=~"*.?+$^[](){}|\\/".indexOf(s)?"\\"+s:s,l=new RegExp("^"+u+"+"),a=new RegExp(u+"+$"),f=new RegExp(u+"{2}","g");return i=i.toString(),o=="^"&&(i=i.replace(l,"")),(!o||o=="$")&&(i=i.replace(a,"")),(!o||o=="nto1")&&(i=i.replace(f,s)),i},me}var Ut,Cn;function Ri(){if(Cn)return Ut;Cn=1;var t=ur();function e(i,s){var o=t.getNumbResult(i);if(!o)return i;s=s||{};var u=this.ch,l=this.ch_u,a=this.ch_f||"",f=this.ch_d||".",d=u.charAt(0),w=o.int,p=o.decimal,D=o.minus,c="",h="",N=D?a:"",R=function M($,B,q){$=t.getNumbResult($).int;var _="",P=arguments.length>1?arguments[1]:s.tenMin,Re=$.length;if(Re==1)return u.charAt(+$);if(Re<=4)for(var b=0,v=Re;v--;){var m=+$.charAt(b);_+=P&&Re==2&&b==0&&m==1?"":u.charAt(m),_+=m&&v?l.charAt(v):"",b++}else{for(var y=$.length/4>>0,g=$.length%4;g==0||!l.charAt(3+y);)g+=4,y--;var S=$.substr(0,g),A=$.substr(g);_=M(S,P)+l.charAt(3+y)+(A.charAt(0)=="0"?d:"")+M(A,A.length>4?P:!1)}return _=t.clearZero(_,d),_};if(p){p=t.clearZero(p,"0","$");for(var I=0;I<p.length;I++)h+=u.charAt(+p.charAt(I));h=h?f+h:""}if(c=R(w),s.ww&&l.length>5){var G=l.charAt(4),V=l.charAt(5),O=c.lastIndexOf(V);~O&&(c=c.substring(0,O).replace(new RegExp(V,"g"),G+G)+c.substring(O))}return N+c+h}function n(i,s){i=i.toString();var o=i.split(this.ch_d),u=o[0].replace(this.ch_f,""),l=o[1],a=!!~o[0].indexOf(this.ch_f),f=this.ch_u.charAt(1),d=this.ch_u.charAt(4),w=this.ch_u.charAt(5);u=u.replace(new RegExp(d+"{2}(?!"+d+")","g"),w);for(var p=u.split(""),D=0,c=0,h=[],N=[],R=[],I=0;I<p.length;I++){var G=p[I],V=0,O=0;if(~(V=this.ch.indexOf(G)))V>0&&R.unshift(V);else if(~(O=this.ch_u.indexOf(G))){var M=t.getDigit(O);D>O?(t.unshiftZero(R,M),t.centerArray(N,R)):O>=c?(I==0&&(R=[1]),t.centerArray(h,N,R),h.length>0&&t.unshiftZero(h,M),c=O):(R.length==0&&f==G&&(R=[1]),t.centerArray(N,R),t.unshiftZero(N,t.getDigit(O)),D=O)}}t.centerArray(h,N,R).reverse(),h.length==0&&h.push(0);var $=0;if(l){h.push("."),$="0.";for(var I=0;I<l.length;I++)$+=this.ch.indexOf(l.charAt(I)),h.push(this.ch.indexOf(l.charAt(I)));$=+$}return a&&h.unshift("-"),s&&s.outputString?h.join(""):parseFloat(h.join(""))}function r(i,s){var o={ww:!0,complete:!1,outSymbol:!0,unOmitYuan:!1,forceZheng:!1},u=t.getNumbResult(i),l=this.ch.charAt(0);if(s=typeof s=="object"?s:{},!u)return i;s=t.extend(o,s);var a=u.int,f=u.decimal||"",d=s.outSymbol?this.m_t:"",w=u.minus?this.ch_f:"",p="";if(s.complete){for(var D=1;D<this.m_u.length;D++)p+=e.call(this,f.charAt(D-1)||"0")+this.m_u.charAt(D);w+=e.call(this,a,s)+this.m_u.charAt(0)}else{var c=s.unOmitYuan||a!=="0";if(f=f.substr(0,this.m_u.length-1),f=t.clearZero(f,"0","$"),f)for(var h,D=0;D<this.m_u.length-1;D++)f.charAt(D)&&f.charAt(D)!="0"&&(p+=e.call(this,f.charAt(D))+this.m_u.charAt(D+1),h=!1),f.charAt(D)==="0"&&!h&&((D!=0||a!=="0")&&(p+=l),h=!0);(c||!p)&&(w+=e.call(this,a,s)+this.m_u.charAt(0)),s.forceZheng?(p==""||p.charAt(p.length-1)!==this.m_u[2])&&(p+=this.m_z):w+=u.decimal?"":this.m_z,s.forceZheng}return d+w+p}return Ut={CL:e,unCL:n,toMoney:r},Ut}var Bt,kn;function Oi(){if(kn)return Bt;kn=1;var t=Ri(),e=ur();function n(r,i){return{encodeS:function(s,o){return o=e.extend({ww:!0,tenMin:!0},o),t.CL.call(r,s,o)},encodeB:function(s,o){return o=e.extend({ww:!0},o),t.CL.call(i,s,o)},decodeS:function(){return t.unCL.apply(r,arguments)},decodeB:function(){return t.unCL.apply(i,arguments)},toMoney:function(s,o){return o=e.extend({ww:!0},o),t.toMoney.call(i,s,o)}}}return Bt=n,Bt}var Vt,xn;function Ii(){return xn||(xn=1,Vt={ch:"零一二三四五六七八九",ch_u:"个十百千万亿",ch_f:"负",ch_d:"点"}),Vt}var Gt,Mn;function Pi(){return Mn||(Mn=1,Gt={ch:"零壹贰叁肆伍陆柒捌玖",ch_u:"个拾佰仟万亿",ch_f:"负",ch_d:"点",m_t:"人民币",m_z:"整",m_u:"元角分"}),Gt}var zt,$n;function Li(){if($n)return zt;$n=1;var t=Oi(),e={s:Ii(),b:Pi()};return zt=t(e.s,e.b),zt}var Ci=Li();const ki=or(Ci);var yt={exports:{}},xi=yt.exports,qn;function Mi(){return qn||(qn=1,function(t,e){(function(n,r){t.exports=r()})(xi,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",u="minute",l="hour",a="day",f="week",d="month",w="quarter",p="year",D="date",c="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,R={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(b){var v=["th","st","nd","rd"],m=b%100;return"["+b+(v[(m-20)%10]||v[m]||v[0])+"]"}},I=function(b,v,m){var y=String(b);return!y||y.length>=v?b:""+Array(v+1-y.length).join(m)+b},G={s:I,z:function(b){var v=-b.utcOffset(),m=Math.abs(v),y=Math.floor(m/60),g=m%60;return(v<=0?"+":"-")+I(y,2,"0")+":"+I(g,2,"0")},m:function b(v,m){if(v.date()<m.date())return-b(m,v);var y=12*(m.year()-v.year())+(m.month()-v.month()),g=v.clone().add(y,d),S=m-g<0,A=v.clone().add(y+(S?-1:1),d);return+(-(y+(m-g)/(S?g-A:A-g))||0)},a:function(b){return b<0?Math.ceil(b)||0:Math.floor(b)},p:function(b){return{M:d,y:p,w:f,d:a,D,h:l,m:u,s:o,ms:s,Q:w}[b]||String(b||"").toLowerCase().replace(/s$/,"")},u:function(b){return b===void 0}},V="en",O={};O[V]=R;var M="$isDayjsObject",$=function(b){return b instanceof P||!(!b||!b[M])},B=function b(v,m,y){var g;if(!v)return V;if(typeof v=="string"){var S=v.toLowerCase();O[S]&&(g=S),m&&(O[S]=m,g=S);var A=v.split("-");if(!g&&A.length>1)return b(A[0])}else{var k=v.name;O[k]=v,g=k}return!y&&g&&(V=g),g||!y&&V},q=function(b,v){if($(b))return b.clone();var m=typeof v=="object"?v:{};return m.date=b,m.args=arguments,new P(m)},_=G;_.l=B,_.i=$,_.w=function(b,v){return q(b,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var P=function(){function b(m){this.$L=B(m.locale,null,!0),this.parse(m),this.$x=this.$x||m.x||{},this[M]=!0}var v=b.prototype;return v.parse=function(m){this.$d=function(y){var g=y.date,S=y.utc;if(g===null)return new Date(NaN);if(_.u(g))return new Date;if(g instanceof Date)return new Date(g);if(typeof g=="string"&&!/Z$/i.test(g)){var A=g.match(h);if(A){var k=A[2]-1||0,z=(A[7]||"0").substring(0,3);return S?new Date(Date.UTC(A[1],k,A[3]||1,A[4]||0,A[5]||0,A[6]||0,z)):new Date(A[1],k,A[3]||1,A[4]||0,A[5]||0,A[6]||0,z)}}return new Date(g)}(m),this.init()},v.init=function(){var m=this.$d;this.$y=m.getFullYear(),this.$M=m.getMonth(),this.$D=m.getDate(),this.$W=m.getDay(),this.$H=m.getHours(),this.$m=m.getMinutes(),this.$s=m.getSeconds(),this.$ms=m.getMilliseconds()},v.$utils=function(){return _},v.isValid=function(){return this.$d.toString()!==c},v.isSame=function(m,y){var g=q(m);return this.startOf(y)<=g&&g<=this.endOf(y)},v.isAfter=function(m,y){return q(m)<this.startOf(y)},v.isBefore=function(m,y){return this.endOf(y)<q(m)},v.$g=function(m,y,g){return _.u(m)?this[y]:this.set(g,m)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(m,y){var g=this,S=!!_.u(y)||y,A=_.p(m),k=function(Ie,ie){var De=_.w(g.$u?Date.UTC(g.$y,ie,Ie):new Date(g.$y,ie,Ie),g);return S?De:De.endOf(a)},z=function(Ie,ie){return _.w(g.toDate()[Ie].apply(g.toDate("s"),(S?[0,0,0,0]:[23,59,59,999]).slice(ie)),g)},K=this.$W,ne=this.$M,le=this.$D,He="set"+(this.$u?"UTC":"");switch(A){case p:return S?k(1,0):k(31,11);case d:return S?k(1,ne):k(0,ne+1);case f:var Oe=this.$locale().weekStart||0,Je=(K<Oe?K+7:K)-Oe;return k(S?le-Je:le+(6-Je),ne);case a:case D:return z(He+"Hours",0);case l:return z(He+"Minutes",1);case u:return z(He+"Seconds",2);case o:return z(He+"Milliseconds",3);default:return this.clone()}},v.endOf=function(m){return this.startOf(m,!1)},v.$set=function(m,y){var g,S=_.p(m),A="set"+(this.$u?"UTC":""),k=(g={},g[a]=A+"Date",g[D]=A+"Date",g[d]=A+"Month",g[p]=A+"FullYear",g[l]=A+"Hours",g[u]=A+"Minutes",g[o]=A+"Seconds",g[s]=A+"Milliseconds",g)[S],z=S===a?this.$D+(y-this.$W):y;if(S===d||S===p){var K=this.clone().set(D,1);K.$d[k](z),K.init(),this.$d=K.set(D,Math.min(this.$D,K.daysInMonth())).$d}else k&&this.$d[k](z);return this.init(),this},v.set=function(m,y){return this.clone().$set(m,y)},v.get=function(m){return this[_.p(m)]()},v.add=function(m,y){var g,S=this;m=Number(m);var A=_.p(y),k=function(ne){var le=q(S);return _.w(le.date(le.date()+Math.round(ne*m)),S)};if(A===d)return this.set(d,this.$M+m);if(A===p)return this.set(p,this.$y+m);if(A===a)return k(1);if(A===f)return k(7);var z=(g={},g[u]=r,g[l]=i,g[o]=n,g)[A]||1,K=this.$d.getTime()+m*z;return _.w(K,this)},v.subtract=function(m,y){return this.add(-1*m,y)},v.format=function(m){var y=this,g=this.$locale();if(!this.isValid())return g.invalidDate||c;var S=m||"YYYY-MM-DDTHH:mm:ssZ",A=_.z(this),k=this.$H,z=this.$m,K=this.$M,ne=g.weekdays,le=g.months,He=g.meridiem,Oe=function(ie,De,Ke,ht){return ie&&(ie[De]||ie(y,S))||Ke[De].slice(0,ht)},Je=function(ie){return _.s(k%12||12,ie,"0")},Ie=He||function(ie,De,Ke){var ht=ie<12?"AM":"PM";return Ke?ht.toLowerCase():ht};return S.replace(N,function(ie,De){return De||function(Ke){switch(Ke){case"YY":return String(y.$y).slice(-2);case"YYYY":return _.s(y.$y,4,"0");case"M":return K+1;case"MM":return _.s(K+1,2,"0");case"MMM":return Oe(g.monthsShort,K,le,3);case"MMMM":return Oe(le,K);case"D":return y.$D;case"DD":return _.s(y.$D,2,"0");case"d":return String(y.$W);case"dd":return Oe(g.weekdaysMin,y.$W,ne,2);case"ddd":return Oe(g.weekdaysShort,y.$W,ne,3);case"dddd":return ne[y.$W];case"H":return String(k);case"HH":return _.s(k,2,"0");case"h":return Je(1);case"hh":return Je(2);case"a":return Ie(k,z,!0);case"A":return Ie(k,z,!1);case"m":return String(z);case"mm":return _.s(z,2,"0");case"s":return String(y.$s);case"ss":return _.s(y.$s,2,"0");case"SSS":return _.s(y.$ms,3,"0");case"Z":return A}return null}(ie)||A.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(m,y,g){var S,A=this,k=_.p(y),z=q(m),K=(z.utcOffset()-this.utcOffset())*r,ne=this-z,le=function(){return _.m(A,z)};switch(k){case p:S=le()/12;break;case d:S=le();break;case w:S=le()/3;break;case f:S=(ne-K)/6048e5;break;case a:S=(ne-K)/864e5;break;case l:S=ne/i;break;case u:S=ne/r;break;case o:S=ne/n;break;default:S=ne}return g?S:_.a(S)},v.daysInMonth=function(){return this.endOf(d).$D},v.$locale=function(){return O[this.$L]},v.locale=function(m,y){if(!m)return this.$L;var g=this.clone(),S=B(m,y,!0);return S&&(g.$L=S),g},v.clone=function(){return _.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},b}(),Re=P.prototype;return q.prototype=Re,[["$ms",s],["$s",o],["$m",u],["$H",l],["$W",a],["$M",d],["$y",p],["$D",D]].forEach(function(b){Re[b[1]]=function(v){return this.$g(v,b[0],b[1])}}),q.extend=function(b,v){return b.$i||(b(v,P,q),b.$i=!0),q},q.locale=B,q.isDayjs=$,q.unix=function(b){return q(1e3*b)},q.en=O[V],q.Ls=O,q.p={},q})}(yt)),yt.exports}var $i=Mi();const qi=or($i);function Fi(t){switch(t){case qt.FLOOR:return ve.ROUND_FLOOR;case qt.CEIL:return ve.ROUND_CEIL;case qt.BANKER_ROUND:return ve.ROUND_HALF_EVEN;default:return ve.ROUND_HALF_UP}}function Hi(t,e){if(t==null)return"";const n=e.format,r=Fi(e.round),i=e.showZero===!1;switch(n){case tt.FIXED:{const s=e.precision;if(s==null||s<0)return t.toString();const o=typeof t=="number"?j.of(t):t;return o.eq(0)&&i?"":o.toFixed(s,r)}case tt.THOUSAND:{const s=typeof t=="number"?j.of(t):t;return s.eq(0)&&i?"":j.toFormat(s,2,r,{groupSize:3})}case tt.TEN_THOUSAND:{const s=typeof t=="number"?j.of(t):t;return s.eq(0)&&i?"":j.toFormat(s,2,r,{groupSize:4})}case tt.DAXIE:{const s=typeof t=="number"?j.of(t):t;return s.eq(0)&&i?"":ki.toMoney(s.toFixed(2,r),{outSymbol:!1})}case tt.PERCENTAGE:{const s=typeof t=="number"?j.of(t):t;return s.eq(0)&&i?"":s.times(100).toFixed(2,ve.ROUND_HALF_UP)+"%"}default:return typeof t=="number"?t==0&&i?"":t.toString():t.eq(0)&&i?"":t.toString()}}function Ui(t,e){const n=e.format;return n==null?t:qi(t).format(n)}function Bi(t,e){const n=t.attributes;switch(t.display){case re.NUMBER:return Hi(e,n);case re.DATE:return Ui(e,n);default:return e}}const Fn=Object.create(null);var It,ze;const Pt=class Pt{constructor(e){ce(this,It,rn(sn.PRINT_ELEMENT));ce(this,ze,Object.create(null));T(this,"define");T(this,"children",[]);T(this,"atomized",!1);T(this,"extra",!1);T(this,"parent");T(this,"offsetTop",0);T(this,"offsetLeft",0);T(this,"offsetWidth",0);T(this,"offsetHeight",0);T(this,"element");T(this,"zIndex");T(this,"state",Jt.CREATED);T(this,"visibility",we.PENDING);T(this,"value",{state:oe.UNDEFINED});this.define=e,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.zIndex=e.zIndex,xe(this,"parent",null),xe(this,"element",null)}static register(e,n){Fn[e]=n}static create(e){const n=Fn[e.type]??Pt;return new n(e)}get id(){return"@"+x(this,It)}get type(){return this.define.type}get page(){let e=this.parent;for(;e;){if(e instanceof Dt)return e;e=e.parent}return null}get doc(){var e;return(e=this.page)==null?void 0:e.parent}get isChanged(){return this.offsetTop!=this.define.offsetTop||this.offsetHeight!=this.define.offsetHeight}get offsetBottom(){var r,i;const e=((r=this.element)==null?void 0:r.offsetTop)??0,n=((i=this.element)==null?void 0:i.offsetHeight)??0;return e+n}get pageNum(){var e;return((e=this.page)==null?void 0:e.pageNum)??-1}get isBindVariable(){return this.define.isBindVariable}get content(){const e=this.format()??"",n=this.define.attributes.prefix??"",r=this.define.attributes.suffix??"";return`${n}${e}${r}`}get isOverflowAuto(){return this.define.attributes.overflow===vt.AUTO}get isOverflowScale(){return this.define.attributes.overflow===vt.SCALE}get isOverflowHidden(){const e=this.define.attributes.overflow;return e==null||e===vt.HIDDEN}get isProcessValueDone(){return this.value.state===oe.DONE}get isHidden(){return this.visibility===we.HIDDEN}async processValue(){var e,n,r;if(!this.isProcessValueDone)switch(this.value=await bi(this,(e=this.doc)==null?void 0:e.data),this.value.state){case oe.DONE:(n=this.doc)==null||n.removeDependency(this);break;case oe.PENDING:(r=this.doc)==null||r.addDependency(this,{state:oe.PENDING});break}}getRawValue(){if(this.value.state===oe.DONE)return this.value.raw}format(){return Bi(this.define,this.getRawValue())}async onCreated(){await Promise.allSettled(this.children.map(e=>e.onCreated())),await this.processValue(),this.visibility=this.checkVisibility()}__createElement__(){return typeof this.render=="function"?this.render():null}createElement(){return this.element?this.element:(this.element=this.__createElement__(),this.element)}createContent(){const e=this.content;return Dr(e)?null:J("div",{class:"quickprint-content",children:J("span",{children:this.content})})}async updateElement(){const e=this.parent;if(e==null)return!1;await this.processValue(),this.visibility=this.checkVisibility();const n=this.__createElement__();return await e.replaceChild(this,n)}async mountChild(e){var n;return this.element==null||e.element==null?!1:(this.element.appendChild(e.element),await qe(),await e.mount(e.element),this.offsetHeight=((n=this.element)==null?void 0:n.offsetHeight)??0,!0)}async replaceChild(e,n){var r;return this.element==null||e.element==null?!1:(n==null?this.element.removeChild(e.element):this.element.replaceChild(n,e.element),await qe(),await e.mount(n),this.offsetHeight=((r=this.element)==null?void 0:r.offsetHeight)??0,!0)}async mount(e){e!=null&&(this.checkOverflow()&&await this.processOverflow(),this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.state=Jt.MOUNDTED,this.element=e)}setParent(e){this.parent=e}appendMany(e){for(let n=0,r=e.length;n<r;n++)this.append(e[n])}append(e){e.setParent(this),this.children.push(e),x(this,ze)[e.id]=e}clone(){const e=Pt.create(this.define),n=this.children.map(r=>r.clone());return e.appendMany(n),e}checkOverflow(){if(this.element==null)return!1;const e=this.element.querySelector(".quickprint-content");if(e==null)return!1;const n=e.parentElement;return n==null?!1:n.offsetHeight<e.offsetHeight}processOverflow(){return this.isOverflowScale?sr()?this.processOverflowScaleByFont():this.processOverflowScaleByTransform():this.isOverflowHidden?this.processOverflowHidden():Promise.resolve()}processOverflowHidden(){var n;const e=(n=this.element)==null?void 0:n.querySelector(".quickprint-layout");return e==null||(e.style.alignItems="flex-start"),Promise.resolve()}async processOverflowScaleByFont(){console.log("scale font")}async processOverflowScaleByTransform(){console.log("scale transform")}findElement(e){const n=x(this,ze)[e];if(n)return n;for(const r of this.children){const i=r.findElement(e);if(i)return i}}findElementFromDefine(e){return this.children.find(n=>n.define.id===e)}createElements(){Qe(this,ze,this.children.reduce((e,n)=>(e[n.id]=n,e),Object.create(null)))}checkVisibility(){var i,s,o;const e=this.define;if(e.visibility==null||e.visibility.type===yn.VISIBLE)return we.VISIBLE;if(e.visibility.type===yn.HIDDEN)return we.HIDDEN;const n=e.visibility.condition;if(Ye(n))return we.VISIBLE;const r=ir(this,n,(i=this.doc)==null?void 0:i.data);switch(r.state){case oe.DONE:return(s=this.doc)==null||s.removeDependency(this),r.raw?we.VISIBLE:we.HIDDEN;case oe.PENDING:return(o=this.doc)==null||o.addDependency(this,{state:oe.PENDING}),we.PENDING;default:return we.PENDING}}};It=new WeakMap,ze=new WeakMap;let Z=Pt;function pt(t,e){return e.exclude==null?!0:!e.exclude.includes(t)}function ft(t){var s;const e={};if(!Ti)return e;const n=t.define,r=n.style.fontFamily;return(r==null||r===Yt.SONG)&&((s=n.style)==null?void 0:s.fontWeight)===700&&(e["quickprint-patch-song-blod"]=!0),e}function ar(t,e){const n=[];if(e&&e!=Yt.DEFAULT&&n.push(`"${e}"`),t&&t!==Yt.DEFAULT&&n.push(`"${t}"`),n.length!=0)return n.join(",")}function Vi(t){if(t.underline===!0)return{textDecorationLine:"underline",textDecorationStyle:t.underlineStyle,textDecorationColor:t.underlineColor}}function Gi(t){if(t==null)return{};const e=t.style??{},n={};return e.textAlign&&(n.textAlign=e.textAlign),e.textAlignLast&&(n.textAlignLast=e.textAlignLast),n}function zi(t){if(t==null)return{};const e=t.style??{};return e.verticalAlign==Nn.MIDDLE||e.verticalAlign==null?{display:"flex",alignItems:"center"}:e.verticalAlign==Nn.BOTTOM?{display:"flex",alignItems:"end"}:{}}function Wi(t){if(t==null)return{};const e=t.style??{};if(e.padding==null)return{};const n={};return e.padding.top&&(n.paddingTop=e.padding.top),e.padding.right&&(n.paddingRight=e.padding.right),e.padding.bottom&&(n.paddingBottom=e.padding.bottom),e.padding.left&&(n.paddingLeft=e.padding.left),n}function en(t){if(t==null)return{};const e=t.style??{};if(e.border==null||e.border===Ue.NONE)return{};const n={},r=e.borderWidth??1,i=e.borderStyle??Ar.SOLID,s=e.borderColor??Sr.BLACK;return e.border==Ue.ALL?{borderTop:`${r}px ${i} ${s}`,borderRight:`${r}px ${i} ${s}`,borderBottom:`${r}px ${i} ${s}`,borderLeft:`${r}px ${i} ${s}`}:(e.border&Ue.TOP&&(n.borderTop=`${r}px ${i} ${s}`),e.border&Ue.RIGHT&&(n.borderRight=`${r}px ${i} ${s}`),e.border&Ue.BOTTOM&&(n.borderBottom=`${r}px ${i} ${s}`),e.border&Ue.LEFT&&(n.borderLeft=`${r}px ${i} ${s}`),n)}function cn(t,e={}){const n={},r=t.define.style??{},i=ar(r.fontFamily,r.enFontFamily);i&&(n.fontFamily=i);const s=Vi(r);return s&&st(n,s),r.fontSize&&(n.fontSize=r.fontSize),r.fontWeight&&(n.fontWeight=r.fontWeight),r.color&&(n.color=r.color),r.lineHeight&&(n.lineHeight=r.lineHeight),r.highlightColor&&(n["--quickprint-variable-highlight-color"]=r.highlightColor),r.backgroundColor&&(n.backgroundColor=r.backgroundColor),r.fontStyle&&(n.fontStyle=r.fontStyle),r.rotate&&(n.transform=`rotate(${r.rotate}deg)`),r.textIndent&&(n.textIndent=r.textIndent),r.padding&&st(n,Wi(t.define)),st(n,Gi(t.define)),st(n,zi(t.define)),n}function fn(t,e={}){const n={};if(pt("top",e)&&(n.top=t.offsetTop+"px"),pt("left",e)&&(n.left=t.offsetLeft+"px"),pt("width",e)&&(n.width=t.offsetWidth+"px"),pt("height",e)){const r=t.define.attributes.overflow===vt.AUTO?"min-height":"height";n[r]=t.offsetHeight+"px"}return t.zIndex&&(n.zIndex=t.zIndex),n}function hn(t,e={}){return Gn(fn(t,e),cn(t,e),en(t.define))}class ji extends Z{get style(){return hn(this)}get className(){return{"quickprint-element":!0,"quickprint-text":!0,"quickprint-layout":!0,"quickprint-line-through":this.define.style.lineThrough,...ft(this)}}render(){return this.isHidden?null:J("div",{id:this.id,class:this.className,style:this.style,children:this.createContent()})}}class Yi extends Z{get style(){return fn(this)}get className(){return{"quickprint-element":!0,"quickprint-text":!0,"quickprint-layout":!0,...ft(this)}}processConstNode(e){var i;const n=e.dataset.value;if(Ye(n))return;const r=ln(this,n,(i=this.doc)==null?void 0:i.data);e.textContent=r.raw}process(e){for(const n of Array.from(e.childNodes))if(n instanceof HTMLElement&&n.contentEditable==="false"&&n.matches(".is-const-node")){this.processConstNode(n);continue}return e}render(){if(this.isHidden)return null;const e=this.getRawValue(),n=document.createElement("span");return n.className="quickprint-content",n.innerHTML=e,J("div",{id:this.id,class:this.className,style:this.style,children:this.process(n)})}}class Zi extends Z{get style(){return hn(this)}get className(){return{"quickprint-element":!0,"quickprint-number":!0,"quickprint-layout":!0,"quickprint-line-through":this.define.style.lineThrough,...ft(this)}}render(){return this.isHidden?null:J("div",{id:this.id,class:this.className,style:this.style,children:this.createContent()})}}class Xi extends Z{get style(){return hn(this)}get className(){return{"quickprint-element":!0,"quickprint-date":!0,"quickprint-layout":!0,"quickprint-line-through":this.define.style.lineThrough,...ft(this)}}render(){return this.isHidden?null:J("div",{id:this.id,class:this.className,style:this.style,children:this.createContent()})}}class lr extends Z{constructor(){super(...arguments);T(this,"rendering",0)}get style(){return{...Gn(fn(this),cn(this)),height:void 0}}get className(){return"quickprint-element quickprint-table"}getTableBody(){return this.element==null?null:this.element.querySelector("tbody")}render(){if(this.isHidden)return null;const i=this.define.columns.map(s=>J("col",{width:s}));return J("div",{id:this.id,class:this.className,style:this.style,children:J("table",{children:[J("colgroup",{children:i}),J("tbody",{})]})})}async mountChild(n){var i;if(n.element==null)return!1;const r=this.getTableBody();return r==null?!1:(r.appendChild(n.element),await qe(),await n.mount(n.element),this.offsetHeight=((i=this.element)==null?void 0:i.offsetHeight)??0,!0)}async replaceChild(n,r){var s;if(this.element==null||n.element==null)return!1;const i=this.getTableBody();return i==null?!1:(r==null?i.removeChild(n.element):i.replaceChild(r,n.element),await qe(),await n.mount(r),this.offsetHeight=((s=this.element)==null?void 0:s.offsetHeight)??0,!0)}onPaged(){const n=this.children.filter(i=>i.define.isBody),r=this.children.map(i=>(i.define.isBody&&(i.rowIndex=n.findIndex(s=>s.id===i.id)),typeof i.onPaged=="function"?i.onPaged():Promise.resolve()));return Promise.allSettled(r)}splitRows(n){const r=this.children.slice(n),i=this.getTableBody();if(this.children.length=n,this.createElements(),i)for(const s of r){if(s.element==null)break;i.removeChild(s.element)}return r}}class Ji extends Z{constructor(){super(...arguments);T(this,"repeatIndex",-1);T(this,"rowData");T(this,"rowIndex",-1)}get style(){return{}}get className(){return"quickprint-table-row"}get isOverflowAuto(){return this.children.some(n=>n.isOverflowAuto)}get index(){var n;return((n=this.parent)==null?void 0:n.children.findIndex(r=>r.id===this.id))??-1}render(){const n=this.children.map(r=>r.createElement());return J("tr",{id:this.id,class:this.className,style:this.style,children:n})}async mount(n){if(n!=null){for(const r of this.children)await r.mount(r.element);this.offsetWidth=n.offsetWidth,this.offsetHeight=n.offsetHeight,this.state=Jt.MOUNDTED}}onPaged(){const n=this.children.map(r=>typeof r.onPaged=="function"?r.onPaged():Promise.resolve());return Promise.allSettled(n)}}class dn extends Z{get style(){var r;const e=en((r=this.define.parent)==null?void 0:r.parent),n=en(this.define);return{"--quickprint-cell-width":this.offsetWidth+"px","--quickprint-cell-height":this.offsetHeight+"px",...st(e,n)}}get className(){const e=this.parent;return{"quickprint-table-cell":!0,"quickprint-auto-height":(e==null?void 0:e.isOverflowAuto)===!0,"quickprint-fixed-height":(e==null?void 0:e.isOverflowAuto)!==!0,"quickprint-line-through":this.define.style.lineThrough,...ft(this)}}get isCollapsed(){return this.define.attributes.colspan===0||this.define.attributes.rowspan===0}render(){if(this.isCollapsed)return null;const n=this.define.attributes,r=this.isHidden?null:J("div",{class:"quickprint-layout",style:cn(this),children:this.createContent()});return J("td",{id:this.id,class:this.className,style:this.style,rowspan:n.rowspan,colspan:n.colspan,children:r})}}Z.register(re.TEXT,ji);Z.register(re.PARAGRAPH,Yi);Z.register(re.NUMBER,Zi);Z.register(re.DATE,Xi);Z.register(re.TABLE,lr);Z.register(re.TABLE_ROW,Ji);Z.register(re.TABLE_CELL,dn);function Ki(t){return Number(t)}function Qi(t){return Math.abs(t)}function es(t){return Math.trunc(t)}function ts(...t){return Math.min(...t)}function ns(...t){return Math.max(...t)}function rs(t,e){return j.round(t,e??0,ve.ROUND_CEIL)}function is(t,e){return j.round(t,e??0,ve.ROUND_FLOOR)}function ss(t,e,n){return j.round(t,e??0,n??ve.ROUND_HALF_UP)}function os(t){t.set("NUMBER",Ki),t.set("ABS",Qi),t.set("TRUNC",es),t.set("MIN",ts),t.set("MAX",ns),t.set("CEIL",rs),t.set("FLOOR",is),t.set("ROUND",ss)}function us(t){return String(t)}function as(t){return String(t).length}function ls(t){return String(t).toLowerCase()}function cs(t){return String(t).toUpperCase()}function fs(t){const e=String(t);return e[0].toUpperCase()+e.slice(1)}function hs(t){return String(t).trim()}function ds(t,e,n){return String(t).replace(e,n)}function ps(t,e,n){return String(t).replaceAll(e,n)}function ms(t,e,n){return String(t).slice(e,n)}function gs(t,e,n){return String(t).includes(String(e),n)}function vs(t,e,n){return String(t).indexOf(String(e),n)}function Es(t,e,n){return String(t).lastIndexOf(String(e),n)}function ws(t,e,n){return String(t).startsWith(String(e),n)}function ys(t,e,n){return String(t).endsWith(String(e),n)}function Ns(t){t.set("STRING",us),t.set("LENGTH",as),t.set("LOWER",ls),t.set("UPPER",cs),t.set("TRIM",hs),t.set("UPPER_FIRST",fs),t.set("REPLACE",ds),t.set("REPLACE_ALL",ps),t.set("SLICE",ms),t.set("INCLUDES",gs),t.set("INDEX_OF",vs),t.set("LAST_INDEX_OF",Es),t.set("STARTS_WITH",ws),t.set("ENDS_WITH",ys)}function _s(t,e,n){return t?e:n}function bs(t,e){return Number.isNaN(t)?e:t}function Ds(t,e){return Number.isNaN(t)||t==null?e:t}function As(t,...e){for(let r=0;r<e.length;r+=2){const i=e[r],s=e[r+1];if(i===t)return s}return e.length%2===0?void 0:e[e.length-1]}function cr(t){return Number.isNaN(t)}function Ss(t){return Number.isInteger(t)}function fr(t){return typeof t=="number"}function hr(t){return typeof t=="string"}function Ts(t){return typeof t=="boolean"}function dr(t){return t===null}function pr(t){return t===void 0}function mr(t){return dr(t)||pr(t)}function Rs(t){return mr(t)?!0:hr(t)?t.length==0:fr(t)?!cr(t):!1}function Os(t){t.set("IF",_s),t.set("IFNA",bs),t.set("IFERROR",Ds),t.set("IS_NAN",cr),t.set("IS_INTEGER",Ss),t.set("IS_NUMBER",fr),t.set("IS_STRING",hr),t.set("IS_BOOLEAN",Ts),t.set("IS_NULL",dr),t.set("IS_UNDEFINED",pr),t.set("IS_NULLISH",mr),t.set("IS_EMPTY",Rs),t.set("SWITCH",As)}function gr(t,e){return t.children.reduce((n,r)=>{const i=r.findElementFromDefine(e);if(i==null)return n;if(!i.isProcessValueDone)throw kt();const s=i.getRawValue(),o=s==null?0:Number(s);return n.push(Tr(o)?o:0),n},[])}function pn(t,e){var r;const n=(r=t.parent)==null?void 0:r.parent;if(!(n==null||n.type!==re.TABLE))return gr(n,e)}function mn(t,e){var i,s;const n=(i=t.parent)==null?void 0:i.parent;if(n==null||n.type!==re.TABLE)return;const r=(s=n.doc)==null?void 0:s.pages.reduce((o,u)=>o.concat(u.filterElement(n.define.id)),[]);if(r!=null)return r.reduce((o,u)=>o.concat(gr(u,e)),[])}function Is(t,e){if(!t.doc.isPaged)throw kt();const r=t.page,i=r.pageNum<r.pageTotal?pn(t,e):mn(t,e);return i==null||i.length==0?0:j.sum(...i).toNumber()}function Ps(t,e){const n=t.element,r=t.value;if(!(n instanceof dn))return;const i=n.doc;if(i==null)return;if(i.isFirstRount)throw kt();if(e===2)return Is(n,r);const s=e==1?pn(n,r):mn(n,r);return s==null||s.length==0?0:j.sum(...s).toNumber()}function Ls(t,e){const n=t.element,r=t.value;if(!(n instanceof dn))return;const i=n.doc;if(i==null)return;if(i.isFirstRount)throw kt();const s=e==1?pn(n,r):mn(n,r);return s==null||s.length==0?0:j.sum(...s).div(s.length).toNumber()}function Cs(t){t.set("COL_SUM",Ps),t.set("COL_AVG",Ls)}os(ct);Ns(ct);Os(ct);Cs(ct);const ks=".quickprint-document{padding:40px 0;box-sizing:border-box;font-family:宋体;font-size:9pt;line-height:1.15;color:#000;word-break:break-all;min-width:calc(var(--quickprint-paper-width) * var(--quickprint-doc-scale) + 80px)}.quickprint-document *{box-sizing:border-box}.quickprint-document-multi-view{display:grid;column-gap:36px;row-gap:36px;justify-content:center;grid-template-rows:auto;grid-template-columns:repeat(auto-fill,calc(var(--quickprint-paper-width) * var(--quickprint-doc-scale)))}.quickprint-document-multi-view .quickprint-page{margin:0!important}.quickprint-guide-line{position:absolute;left:0;right:0;z-index:999;border-top:1px dashed #ddd;-webkit-user-select:none;user-select:none;pointer-events:none;display:none}.quickprint-page{position:relative;width:calc(var(--quickprint-paper-width) * var(--quickprint-doc-scale));height:calc(var(--quickprint-paper-height) * var(--quickprint-doc-scale));margin:0 auto;background-color:#fff;box-shadow:#0000000f 0 0 10px,#0000000a 0 0 0 1px;page-break-inside:avoid;page-break-after:always}.quickprint-paper{width:var(--quickprint-paper-width);height:var(--quickprint-paper-height);transform:scale(var(--quickprint-doc-scale));transform-origin:top left}.quickprint-page:after{content:attr(data-index);position:absolute;bottom:-24px;left:calc(50% - 50px);width:100px;line-height:20px;text-align:center;font-size:12px;color:#606266}.quickprint-page+.quickprint-page{margin-top:50px}.quickprint-document-debug .quickprint-guide-line{display:block}.quickprint-element{position:absolute;padding:2px}.quickprint-line-through .quickprint-content{text-decoration:line-through}.quickprint-text{word-break:break-all}.quickprint-table>table{border-collapse:collapse;table-layout:fixed}.quickprint-table-cell{padding:0}.quickprint-layout{padding:2px;width:calc(var(--quickprint-cell-width) - (1px / var(--quickprint-dpr, 1)))}.quickprint-table-cell.quickprint-auto-height .quickprint-layout{min-height:calc(var(--quickprint-cell-height) - (1px / var(--quickprint-dpr, 1)))}.quickprint-table-cell.quickprint-fixed-height .quickprint-layout{word-break:break-all;overflow:hidden;height:calc(var(--quickprint-cell-height) - (1px / var(--quickprint-dpr, 1)))}.quickprint-number{word-break:normal}.quickprint-content{white-space:pre-line;min-width:100%}.quickprint-content>span{background-color:var(--quickprint-variable-highlight-color, transparent)}",xs="@media print{@page{margin:0}html,body{margin:0!important;padding:0!important;color:#000}.quickprint-page{margin:0!important;box-shadow:none!important}.quickprint-page:after{display:none}.quickprint-hidden{display:none}.quickprint-document{--quickprint-doc-scale: 1 !important;padding:0!important;display:block!important;min-width:auto!important}.quickprint-patch-song-blod{text-shadow:0 0 currentColor,0 0 currentColor}}";function Hn(){return ks}function Ms(){return xs}var Lt,We,at,Le,Ce,ke,Te,tn,nn;const vn=class vn{constructor(e,n){ce(this,Te);ce(this,Lt,rn(sn.PRINT_DOCUMENT));ce(this,We);ce(this,at);ce(this,Le,Object.create(null));ce(this,Ce,0);T(this,"define");T(this,"data");T(this,"state");T(this,"pages",[]);T(this,"element");T(this,"rendering");T(this,"renderState",ue.CREATED);T(this,"devicePixelRatio",window.devicePixelRatio);ce(this,ke,[]);const{promise:r,resolve:i}=Promise.withResolvers();Qe(this,at,r),Qe(this,We,i),this.define=e,this.state=n,xe(this,"element",null),xe(this,"rendering",0),this.state.renderState=ue.CREATED,this.state.scale=100,this.watchDevicePixelRatio(),this.injectElementStyle()}static create(e,n={}){const r=e instanceof Zt?e:Zt.create(e);return new vn(r,n)}get id(){return"@"+x(this,Lt)}get style(){const e=this.state.scale??100,n=this.define.style;return{"--quickprint-dpr":this.devicePixelRatio,"--quickprint-doc-scale":e/100,"--quickprint-paper-width":this.define.paper.width+"mm","--quickprint-paper-height":`calc(${this.define.paper.height}mm - 1px)`,fontFamily:ar(n==null?void 0:n.fontFamily,n==null?void 0:n.enFontFamily),fontSize:n==null?void 0:n.fontSize,lineHeight:n==null?void 0:n.lineHeight}}get isPaged(){return this.renderState===ue.PAGED||this.renderState===ue.READY}get isFirstRount(){return x(this,Ce)===0}onCreated(){return Promise.allSettled(this.pages.map(e=>e.onCreated()))}onBeforeUnmount(e){x(this,ke).indexOf(e)>=0||x(this,ke).push(e)}unmount(){for(const e of x(this,ke))typeof e=="function"&&e();x(this,ke).length=0,this.renderState=ue.UNMOUNT,this.element=null}render(){return J("div",{class:ye.DOCUMENT,style:this.style})}createElement(){return this.element=this.render(),this.element}async mountChild(e){return this.element==null||e.element==null?!1:(this.element.appendChild(e.element),!0)}async mount(){this.state.total=this.pages.length;const e=this.pages.map(n=>n.onFinshed());await Promise.allSettled(e),et(this,Te,nn).call(this,ue.PAGED),await et(this,Te,tn).call(this),et(this,Te,nn).call(this,ue.READY),typeof x(this,We)=="function"&&(x(this,We).call(this),Reflect.deleteProperty(this,"readyResolve"))}append(e){this.pages.push(e),e.setParent(this)}appendMany(e){for(let n=0,r=e.length;n<r;n++)this.append(e[n])}insert(e,n){this.pages.splice(n,0,e),e.setParent(this)}ready(){return x(this,at)}injectElementStyle(){const e=document.createElement("style");e.textContent=Hn(),document.head.appendChild(e)}async print(){return await this.ready(),new Promise(e=>{var s;const n=new Blob(this.genPrintHtml(),{type:"text/html"}),r=URL.createObjectURL(n),i=document.createElement("iframe");i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.visibility="hidden",i.style.zIndex="-100",i.src=r,document.body.appendChild(i),i.onload=function(){var o;(o=i.contentWindow)==null||o.print()},(s=i.contentWindow)==null||s.addEventListener("afterprint",()=>{URL.revokeObjectURL(r),setTimeout(()=>document.body.removeChild(i),2e3),e()})})}genPrintHtml(){var r;const e=this.define.name,n=((r=this.element)==null?void 0:r.outerHTML)??"";return["<!DOCTYPE html><html><head>",'<meta charset="UTF-8">','<meta name="viewport" content="width=device-width, initial-scale=1.0">',`<title>${e}</title>`,`<style>${Hn()}</style>`,`<style>${Ms()}</style>`,"</head><body>",n,"</body></html>"]}enableMuiltView(){if(this.element==null||this.state.viewMode==="multiple")return!1;this.state.viewMode="multiple",this.element.classList.add("quickprint-document-multi-view")}enableSingleView(){if(this.element==null||this.state.viewMode==="single")return!1;this.state.viewMode="single",this.element.classList.remove("quickprint-document-multi-view")}toggleViewMode(){return this.state.viewMode==="multiple"?this.enableSingleView():this.enableMuiltView()}zoomIn(){if(this.element==null)return!1;const e=this.state.scale??100,n=nt.indexOf(e);if(n<0)return this.resetZoom(),!1;if(n==0)return!1;const r=nt[n-1];this.state.scale=r,this.element.style.setProperty("--quickprint-doc-scale",`${r/100}`)}zoomOut(){if(this.element==null)return!1;const e=this.state.scale??100,n=nt.indexOf(e);if(n<0)return this.resetZoom(),!1;if(n>=nt.length-1)return!1;const r=nt[n+1];this.state.scale=r,this.element.style.setProperty("--quickprint-doc-scale",`${r/100}`)}resetZoom(){if(this.element==null)return!1;const e=100;this.state.scale=e,this.element.style.setProperty("--quickprint-doc-scale",`${e/100}`)}addDependency(e,n){x(this,Le)[e.id]={element:e,...n}}removeDependency(e){delete x(this,Le)[e.id]}watchDevicePixelRatio(){const e=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),n=this.updateDevicePixelRatio.bind(this);e.addEventListener("change",n),window.addEventListener("resize",n),this.onBeforeUnmount(()=>{e.removeEventListener("change",n),window.removeEventListener("resize",n)})}updateDevicePixelRatio(){this.devicePixelRatio=window.devicePixelRatio,this.element!=null&&this.element.style.setProperty("--quickprint-dpr",this.devicePixelRatio+"")}toggleDebug(){this.state.debug=this.state.debug!==!0,this.element!=null&&this.element.classList.toggle("quickprint-document-debug")}findElement(e){for(const n of this.pages){const r=n.findElement(e);if(r)return r}}};Lt=new WeakMap,We=new WeakMap,at=new WeakMap,Le=new WeakMap,Ce=new WeakMap,ke=new WeakMap,Te=new WeakSet,tn=async function(){for(const n of Object.values(x(this,Le))){const r=n.element;await r.processValue(),r.isProcessValueDone&&(this.removeDependency(r),await r.updateElement())}if(Object.keys(x(this,Le)).length==0){Rr.debug("Document",`已完成第计算, 共${x(this,Ce)+1}轮`);return}wn(this,Ce)._++,!(x(this,Ce)>=100)&&await et(this,Te,tn).call(this)},nn=function(e){this.renderState=e,this.state.renderState=e};let St=vn;function Tt(t){const e=Z.create(t),n=t.children.map(r=>Z.create(r));return e.appendMany(n),e}async function $s(t,e={}){const n=t.define.pages.map(a=>r(a));t.data=e,t.appendMany(n),await t.onCreated(),t.renderState=ue.RENDERING,t.state.renderState=ue.RENDERING;function r(a){const f=Dt.create(a,t.define.paper);i(f);for(const d of f.defines){const w=o(d);w.define.isFixed?f.appendToFixed(w):f.append(w)}return s(f),f.state=Et.INIT,f}function i(a){if(!(a.header.display!=!0||a.header.defines.length==0))for(const f of a.header.defines)a.appendToHeader(o(f))}function s(a){if(!(a.footer.display!=!0||a.footer.defines.length==0))for(const f of a.footer.defines)a.appendToFooter(o(f))}function o(a){switch(a.type){case"Table":return u(a);default:return Z.create(a)}}function u(a){const f=Z.create(a),d=a.children;for(const w of d){if(w.isRepeat){f.appendMany(l(w));continue}f.append(Tt(w))}return f}function l(a){const f=je(a.ds.value),d=ot(e,f.value);return Or(d).map((w,p)=>{const D=Tt(a);return D.repeatIndex=p,D.rowData=w,D})}return t}function qs(t,e,n){let r=null,i=1;async function s(){const c=e.rendering,h=e.pages[c];return h==null?e.mount():(h.beginPaging(),h.createElement()==null?(e.rendering+=1,s()):(await e.mountChild(h),await u(h),await l(h),h.fid!==r&&(i=1),h.pageNum=i++,await h.onPaged(),e.rendering+=1,e.state.total=e.pages.length,s()))}function o(c,h){const N=c.children[c.rendering-1];return N==null?c.extra?c.header.offsetHeight+4:h.offsetTop:!N.isChanged||jt.isIsolated(N.define,h.define)?h.offsetTop:N.offsetBottom+h.define.top-N.define.top-N.define.height}async function u(c){const h=c.children[c.rendering];return h==null?void 0:(h.offsetTop=o(c,h),h.createElement()==null?(c.rendering+=1,u(c)):(await a(c,h),c.rendering+=1,u(c)))}async function l(c){for(const h of c.fixed)h.createElement(),await c.mountChild(h)}function a(c,h){switch(h.define.type){case re.TABLE:return p(c,h);case re.TEXT:return D(c,h);default:return c.mountChild(h)}}async function f(c,h){const N=h.children[h.rendering];if(N==null)return;if(N.createElement()==null)return h.rendering+=1,f(c,h);await h.mountChild(N);const I=Ir.mm_to_px(c.paper.offsetHeight)-c.footer.offsetHeight;if(h.offsetBottom>I){const G=d(c,h,I);return e.insert(G,c.index+1),f(c,h)}return h.rendering+=1,f(c,h)}function d(c,h,N){const R=h.define.footer.map(B=>Tt(B)),I=N-R.reduce((B,q)=>B+q.offsetHeight,0),G=w(h,I),V=h.splitRows(G);h.appendMany(R),h.atomized=!0,h.rendering=G;const O=c.clone(),M=new lr(h.define),$=h.define.header.map(B=>Tt(B));M.extra=!0,M.appendMany($),M.appendMany(V),O.append(M);for(let B=c.rendering+1,q=c.children.length;B<q;B++){const _=c.children[B];jt.isIsolated(_.define,h.define)||(O.append(_),Reflect.set(c.children,B,null))}return c.children=c.children.filter(B=>B!=null),O}function w(c,h){let N=c.offsetTop;for(let R=0;R<c.children.length;R++){if(N+=c.children[R].offsetHeight,N==h)return R;if(N>h)return R-1}return c.children.length-1}async function p(c,h){return await c.mountChild(h),f(c,h)}function D(c,h){return c.mountChild(h)}return async function(){ei(),await qe(),await $s(e,n);const c=e.createElement();return c&&t.appendChild(c),r=e.pages[0].fid,s()}}function Fs(t){const e=Date.now(),n=St.create(t.define,t.state);return qs(t.container,n,t.data??{})().then(()=>{n.state.renderTime=Date.now()-e}),n}const Hs=lt({__name:"DocState",props:{state:{type:Object,required:!0}},setup(t){const e=t,n=Ne(()=>e.state.renderState===ue.READY),r=Ne(()=>e.state.renderState===ue.READY?"已就绪":e.state.renderState===ue.RENDERING?`正在生成(${e.state.total??0}页)...`:"正在生成...");return(i,s)=>(Me(),Ve("div",null,[s[0]||(s[0]=se("span",null,"文档：",-1)),se("span",{class:te({[i.classes.finished]:n.value})},Nt(r.value),3)]))}}),Us="_finished_7h37m_2",Bs={finished:Us},Vs={classes:Bs},Gs=Ct(Hs,[["__cssModules",Vs]]),zs="_toolbar_3etac_1",Ws="_button_3etac_9",js="_actived_3etac_33",Ys="_divider_3etac_46",Be={toolbar:zs,button:Ws,actived:js,divider:Ys},Zs=["viewMode","debug","space","print"],Xs=lt({props:{doc:{type:St},buttons:{type:Array,required:!0}},setup(t){function e(){var l;(l=t.doc)==null||l.print()}function n(){var l;(l=t.doc)==null||l.toggleViewMode()}function r(){var a;const l={[Be.button]:!0,[Be.actived]:((a=t.doc)==null?void 0:a.state.viewMode)==="multiple"};return W("button",{type:"button",title:"切换单页/多页视图",class:l,onClick:n},[W(Xt,{icon:"icon-multi-page"},null),W("span",null,[_t("多页")])])}function i(){return W("button",{type:"button",class:Be.button,onClick:e,title:"打印 Ctrl + P"},[W(Xt,{icon:"icon-printer"},null),W("span",null,[_t("打印")])])}function s(){return W("div",{class:Be.divider},null)}function o(){return W("div",{class:"quickprint-is-fill-w"},null)}function u(l){if(typeof l=="function")return l(Be,t.doc);switch(l){case"viewMode":return r();case"print":return i();case"divider":return s();case"space":return o();default:return null}}return function(){return W("div",{class:Be.toolbar},[t.buttons.map(u)])}}}),Js={key:1,class:"quickprint-is-fill-w"},Ks=lt({__name:"index",props:{define:{type:Object,required:!0},data:{type:Object,required:!0},buttons:{type:Array,default(){return Zs}}},emits:["mock"],setup(t,{emit:e}){const n=t,r=Wn("classes"),i=bt(),s=bt(),o=jn({}),u=Ne(()=>o.renderState===ue.READY),l=Ne(()=>{const c=o.renderTime??0;if(c<=6e4)return`${c/1e3}秒`;const h=Math.floor(c/1e3),N=h%60,R=(h-N)/60;return N==0?`${R}分`:`${R}分${N}秒`}),a=Ne(()=>o.total??"--"),f=Ne(()=>({"quickprint-is-scrollable":!0,"quickprint-is-scroll-y":!0,[r.body]:!0}));function d(){var c;(c=s.value)==null||c.zoomIn()}function w(){var c;(c=s.value)==null||c.zoomOut()}function p(c){var h,N;c.deltaY>0?(h=s.value)==null||h.zoomIn():(N=s.value)==null||N.zoomOut()}function D(){var c;(c=s.value)==null||c.toggleDebug()}return Br(()=>{const c=Fs({container:i.value,define:Zt.create(n.define),state:o,data:n.data});s.value=c,document.title=c?`${c.define.name} - QuickPrint`:"QuickPrint"}),(c,h)=>{var N;return Me(),Ve("div",{class:te(X(r).preview),onWheel:Gr(p,["ctrl","prevent"])},[se("div",{class:te([X(ye).PRINT_HIDDEN,X(r).header])},[se("div",{class:te(X(r).headerLeft)},[An(c.$slots,"headerLeft")],2),W(X(Xs),{doc:s.value,buttons:t.buttons},null,8,["doc","buttons"]),se("div",{class:te(X(r).headerRight)},[An(c.$slots,"headerRight")],2)],2),se("div",{class:te(f.value),ref_key:"containerRef",ref:i},null,2),se("div",{class:te([X(ye).PRINT_HIDDEN,X(r).footer])},[W(Gs,{state:o,class:te(X(r).status)},null,8,["state","class"]),u.value?(Me(),Ve(Vr,{key:0},[se("div",{class:te(X(r).status)},"用时："+Nt(l.value),3),h[0]||(h[0]=se("div",{class:"quickprint-is-fill-w"},null,-1)),se("button",{type:"button",class:te({"quickprint-text-btn":!0,"quickprint-is-selected":(N=s.value)==null?void 0:N.state.debug}),title:"调试模式",onClick:D},[W(X(Xt),{icon:"icon-bug"})],2),h[1]||(h[1]=se("button",{type:"button",class:"quickprint-text-btn"},"快捷键",-1)),se("div",{class:te(X(r).divider)},null,2),se("div",{class:te(X(r).status)},"第1页，共"+Nt(a.value)+"页",3),se("div",{class:te(X(r).divider)},null,2)],64)):(Me(),Ve("div",Js)),W(X(Pr),{class:te(X(r).zoom),scale:o.scale,onZoomIn:d,onZoomOut:w},null,8,["class","scale"])],2)],34)}}}),Qs="_preview_117vl_2",eo="_header_117vl_14",to="_headerLeft_117vl_23",no="_headerRight_117vl_29",ro="_body_117vl_35",io="_footer_117vl_54",so="_status_117vl_74",oo="_divider_117vl_80",uo="_zoom_117vl_87",ao={preview:Qs,header:eo,headerLeft:to,headerRight:no,body:ro,footer:io,status:so,divider:oo,zoom:uo},lo={classes:ao},co=Ct(Ks,[["__cssModules",lo]]),fo=lt({__name:"component",props:{ds:{type:Object,required:!0},options:{type:Array,default(){return[]}},local:{type:Array,default:null}},setup(t){const e=t,n=Wn("classes"),r=Lr(),i=zn(e.local??[]),s=jn(e.ds.fields.map(a=>l(a))),o=[{label:"文本",value:he.STRING},{label:"数字",value:he.NUMBER},{label:"日期",value:he.DATE},{label:"对象",value:he.OBJECT},{label:"数组",value:he.ARRAY}],u=[{name:"$index"},{name:"$expand"},{name:"type",title:"类型",width:60,formatter(a,f){var w;const d=a[f.name];return((w=o.find(p=>p.value===d))==null?void 0:w.label)??d}},{name:"name",title:"名称",width:150},{name:"title",title:"标题",width:150},{name:"func",title:"数据",width:200,render(a,f){if(a.type===he.OBJECT)return null;if(a.type===he.ARRAY)return Sn(W("input",{type:"number","onUpdate:modelValue":w=>a.total=w,placeholder:"默认生成10-500行数据",min:"0",step:"1",class:n.input},null),[[Wr,a.total]]);const d=e.options.find(w=>w.classify===a.type);return d==null?null:Sn(W("select",{"onUpdate:modelValue":w=>a.func=w,class:n.select},[W("option",{value:"",class:n.placeholder},[_t("请选择")]),d.rules.map(w=>W("option",{value:w.func,key:w.func},[w.name]))]),[[jr,a.func]])}}];function l(a,f){const d=f?`${f}.${a.name}`:a.name,w=a.children?a.children.map(D=>l(D,a.name)):void 0,p=i[d];return{type:a.type,name:a.name,title:a.title,children:w,$expand:!0,func:(p==null?void 0:p.func)??"",total:p==null?void 0:p.total}}return r==null||r.useHandle("confirm",()=>zr(s)),(a,f)=>(Me(),Ve("div",{class:te(X(n).ds)},[W(X(Cr),{columns:u,data:s},null,8,["data"])],2))}}),ho="_ds_6a9ph_2",po="_placeholder_6a9ph_8",mo="_select_6a9ph_12",go="_input_6a9ph_13",vo={ds:ho,placeholder:po,select:mo,input:go},Eo={classes:vo},wo=Ct(fo,[["__cssModules",Eo]]);let mt=null,it=null;const Un=490;function vr(){return mt!=null?Promise.resolve(mt):xr(()=>import("./mock-kUJsravU.js"),__vite__mapDeps([0,1,2,3])).then(t=>(mt=t.default,mt))}function Bn(t,e){switch(e){case he.DATE:return t.randDate();case he.NUMBER:return t.randDecimal();case he.STRING:return t.randName();default:return null}}function yo(t){if((t==null?void 0:t.total)==null)return Un;const e=Number(t.total);return Number.isNaN(e)||!Number.isFinite(e)||e<=0?Un:Math.round(e)}function Wt(t,e,n){if(n==null||Ye(n.func))return Bn(t,e.type);const r=t[n.func];return typeof r!="function"?Bn(t,e.type):r(n)}function No(t,e,n){if(it)return it;const r={ds:e,options:t.rules,local:n},i={pinnable:!1,mask:!0,top:"15vh",width:"720px",height:"600px",minWidth:720,minHeight:600,resizeMode:Mr.RESIZE_ONLY,menus:[{label:"确定",handler:s=>s.dispatchConfirm()}]};return it=$r("创建模拟数据",Yr(wo,r),i).promisify(),it.finally(()=>{it=null})}async function Vn(t,e){if(t==null)return[];const n=await vr(),r=await No(n,t,e).catch(kr);return Array.isArray(r)?r:[]}async function gt(t,e){if(t==null||!Array.isArray(e)||e.length==0)return{};const n=await vr(),r=zn(e);return t.fields.reduce((i,s)=>{const o=r[s.name];if(s.name==""||s.name==null)return i;if(s.type===he.OBJECT){const u=s.children??[];return i[s.name]=u.reduce((l,a)=>{if(Ye(a.name))return l;const f=`${s.name}.${a.name}`;return l[a.name]=Wt(n,a,r[f]),l},{}),i}if(s.type===he.ARRAY){const u=s.children??[],l=yo(o),a=10+Math.round(Math.random()*l);return i[s.name]=Array(a).fill("").map(()=>u.reduce((f,d)=>{if(Ye(d.name))return f;const w=`${s.name}.${d.name}`;return f[d.name]=Wt(n,d,r[w]),f},{})),i}return i[s.name]=Wt(n,s,o),i},{})}const _o=lt({__name:"index",setup(t){const e={INIT:0,LOADED_CASE:1,LOADED_DATA:2,READY:3},n=bt(),r=bt(),i=Ft(0),s=Ft(!1),o=Ne(()=>{var h;return`${((h=n.value)==null?void 0:h.id)??Date.now()}-${i.value}`}),u=Ft(e.INIT),l=Ne(()=>["viewMode","debug","space",s.value?p:null,"print"]),a=Ne(()=>u.value===e.INIT?"正在加载...":u.value===e.LOADED_CASE?"已加载模板，正在准备数据...":u.value===e.LOADED_DATA?"开始渲染模板":"");function f(){const h=new URLSearchParams(window.location.search).get("id");return on(h)&&(h==="local"||_n.some(N=>N.id===h))?h:_n[0].id}async function d(c){var I,G,V,O;if(c==null)return{};if(c.data)return s.value=!1,c.data;const h=bn(c.id);if(Array.isArray(h)&&h.length>0)return gt((I=c.define)==null?void 0:I.ds,h);const N=c.rules;if(Array.isArray(N)&&N.length>0)return gt((G=c.define)==null?void 0:G.ds,N);const R=await Vn((V=n.value)==null?void 0:V.ds);return Dn(R,c.id),gt((O=c.define)==null?void 0:O.ds,R)}async function w(){if(n.value==null)return;const c=n.value.id;if(c==null||c=="")return;const h=bn(c),N=await Vn(n.value.ds,h);Dn(N,n.value.id),r.value=await gt(n.value.ds,N),i.value++}function p(c){return W("button",{type:"button",class:c.button,onClick:w},[W("span",null,[_t("模拟数据")])])}async function D(){u.value=e.INIT,s.value=!0;const c=await qr(f());n.value=(c==null?void 0:c.define)??{},u.value=e.LOADED_CASE,r.value=await d(c),u.value=e.LOADED_DATA,u.value=e.READY}return D(),(c,h)=>u.value<=e.LOADED_DATA?(Me(),Ve("div",{key:0,class:te(c.classes.logs)},Nt(a.value),3)):(Me(),Zr(X(co),{define:n.value,data:r.value,buttons:l.value,key:o.value,class:te(c.classes.preview),onMock:w},null,8,["define","data","buttons","class"]))}}),bo="_preview_17t3s_7",Do="_logs_17t3s_11",Ao={preview:bo,logs:Do},So={classes:Ao},To=Ct(_o,[["__cssModules",So]]),gn=Xr(To),Ro=Fr();gn.use(Hr,{zIndex:Ro});gn.mount("#app");Ur(gn._context);
