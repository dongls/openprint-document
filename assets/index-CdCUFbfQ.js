const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/component-DsYiz_EM.js","assets/vue-CkTdP4ip.js","assets/utils-CQcnvd7j.js","assets/utils-BWxIAY5I.css","assets/component-DeuFE7qm.js","assets/component-DVhZYvzc.css"])))=>i.map(i=>d[i]);
var ps=Object.defineProperty;var Mo=o=>{throw TypeError(o)};var ms=(o,t,n)=>t in o?ps(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var X=(o,t,n)=>ms(o,typeof t!="symbol"?t+"":t,n),eo=(o,t,n)=>t.has(o)||Mo("Cannot "+n);var Me=(o,t,n)=>(eo(o,t,"read from private field"),n?n.call(o):t.get(o)),Qe=(o,t,n)=>t.has(o)?Mo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(o):t.set(o,n),yt=(o,t,n,e)=>(eo(o,t,"write to private field"),e?e.call(o,n):t.set(o,n),n),xe=(o,t,n)=>(eo(o,t,"access private method"),n);import{D as ve,E as Ot,N as tn,a as kt,b as G,c as ze,P as vo,d as kn,e as xo,f as Rn,g as In,O as ln,h as re,i as fn,S as Pt,Q as sn,B as Ue,j as wn,L as Fe,I as K,_ as F,k as ll,s as Bn,l as gs,m as fe,n as sl,p as Cn,C as Pe,o as ue,q as yo,r as il,t as Lt,u as _s,v as hs,w as bs,x as ft,y as rl,V as Dt,z as On,A as pt,F as al,G as cl,H as ul,J as Ee,K as $e,M as vs,T as ys,R as Ie,U as st,W as ke,X as We,Y as tt,Z as Es,$ as Ss,a0 as Ts,a1 as nt,a2 as an,a3 as j,a4 as se,a5 as he,a6 as Oe,a7 as Rt,a8 as hn,a9 as Mt,aa as le,ab as It,ac as ot,ad as mt,ae as ks,af as gt,ag as de,ah as dl,ai as Le,aj as Ft,ak as Ln,al as to,am as ut,an as dt,ao as Kt,ap as bn,aq as At,ar as Rs,as as Is,at as fl,au as ws,av as pl,aw as vn,ax as ml,ay as Nt,az as qt,aA as Cs,aB as Os,aC as Ls,aD as Ds,aE as Ns,aF as pn,aG as Bs,aH as Po,aI as ye,aJ as no,aK as oo,aL as As,aM as Ms,aN as xs,aO as Ps,aP as qs,aQ as Fs,aR as Vs,aS as qo,aT as zs,aU as Us}from"./utils-CQcnvd7j.js";import{r as pe,o as An,d as q,c as I,a as E,b as u,e as f,f as Ye,n as d,u as we,s as me,g as De,h as R,i as ne,j as W,k as Y,w as ae,T as gl,m as Bt,l as un,p as Wt,t as Fo,F as oe,q as ce,v as Q,x as _l,y as hl,z as bl,A as jt,B as Eo,C as Se,D as Re,E as Ae,G as ge,H as Hs,I as vl,J as lo,K as Dn,L as Xe,M as Gs,N as Ws,O as js,P as Xs}from"./vue-CkTdP4ip.js";const yl="@quickprint_drag_mode",El="@quickprint_drop_data",Mn="@quickprint_operate",Ze="@quickprint_element",So="@quickprint_element_type",Sl="@quickprint_resize_flag",He=160,xn=32,Qt=[50,75,100,125,150,200,300,400];var nn=(o=>(o[o.TOP=1]="TOP",o[o.BOTTOM=2]="BOTTOM",o[o.LEFT=4]="LEFT",o[o.RIGHT=8]="RIGHT",o))(nn||{}),xt=(o=>(o[o.NONE=0]="NONE",o[o.TOP=1]="TOP",o[o.BOTTOM=2]="BOTTOM",o[o.LEFT=4]="LEFT",o[o.RIGHT=8]="RIGHT",o[o.BOTTOM_RIGHT=10]="BOTTOM_RIGHT",o))(xt||{});const lt={SINGLE:0,MULTIPLE:1},qe=Object.freeze({INSERT:0,MOVE:1}),To=Object.freeze({DRAG_ELEMENT:0,SELECTION:1}),ee=Object.freeze({CANVAS:"quickprint-is-canvas",DRAGGABLE:"quickprint-is-draggable",DRAGGING:"quickprint-is-dragging",RESIZEABLE:"quickprint-is-resizeable",RESIZEABLE_INDICATOR:"quickprint-is-resizeable-indicator",RESIZING:"quickprint-is-resizing",DROPPABLE:"quickprint-is-droppable",ELEMENT:"quickprint-is-element",ELEMENT_EDITOR:"quickprint-is-element-editor",PAGE:"quickprint-is-page",PAPER:"quickprint-is-paper",SCROLLABLE:"quickprint-is-scrollable",SELECTABLE:"quickprint-is-selectable",SELECTED:"quickprint-is-selected",GUIDE_LINE:"quickprint-is-guideline"}),be=Object.freeze({NONE:0,ELEMENT:1,PAGE:2}),Tl=[{label:"固定值",value:ve.CONST},{label:"变量",value:ve.VARIABLE},{label:"公式",value:ve.FORMULA,detail:"使用内置的公式生成数据"},{label:"自定义",value:ve.CODE,detail:"使用Javascript代码生成数据"}],Ys=[{label:"显示",value:Ot.VISIBLE,detail:"元素总是可见"},{label:"隐藏",value:Ot.HIDDEN,detail:"元素在打印时隐藏"},{label:"满足条件时显示",value:Ot.CONDITION,detail:"元素只在满足指定条件后显示"}],Zs=[{label:"四舍五入",value:tn.ROUND},{label:"向下舍入",value:tn.FLOOR},{label:"向上舍入",value:tn.CEIL},{label:"四舍六入",value:tn.BANKER_ROUND}],$s=[{label:"原始值",value:kt.NONE},{label:"固定位数",value:kt.FIXED},{label:"金额千位",value:kt.THOUSAND},{label:"金额万位",value:kt.TEN_THOUSAND},{label:"金额大写",value:kt.DAXIE},{label:"百分比",value:kt.PERCENTAGE}],Ks=[{label:"显示",value:!0},{label:"隐藏",value:!1}],Qs=[{label:"默认",value:void 0},{label:"文本",value:G.TEXT},{label:"数字",value:G.NUMBER},{label:"日期",value:G.DATE}],_e={LAYOUT:0,COORD:1,SIZE:2,POSITION:3,VISIBILITY:5,OVERFLOW:6,PRINT_MODE:7,BASIC:100,PREFIX:101,SUFFIX:102,DISPLAY:103,ATTRIBUTES:200,DATASOURCE:300},kl=[{label:"年-月",value:ze.YEAR_MONTH,detail:"示例：2024-12"},{label:"年月",value:ze.YEAR_MONTH_CHS,detail:"示例：2024年12月"},{label:"年-月-日",value:ze.YEAR_MONTH_DAY,detail:"示例：2024-12-01"},{label:"年月日",value:ze.YEAR_MONTH_DAY_CHS,detail:"示例：2024年12月01日"},{label:"年-月-日 时:分",value:ze.DATETIME_SHORT,detail:"示例：2024-12-01 12:00"},{label:"年-月-日 时:分:秒",value:ze.DATETIME,detail:"示例：2024-12-01 12:00:00"},{label:"时:分:秒",value:ze.TIME,detail:"示例：12:00:00"},{label:"时:分",value:ze.TIME_SHORT,detail:"示例：12:00"},{label:"年",value:ze.YEAR,detail:"示例：2024"},{label:"月",value:ze.MONTH,detail:"示例：12"},{label:"日",value:ze.DAY,detail:"示例：01"}];kl.forEach(o=>o.detail=`模板：${o.value}
${o.detail}`);const Js=[{label:"元素值",value:vo.ELEMENT_VALUR}],ei=[{label:"基于纸张",value:kn.PAPER},{label:"基于内容",value:kn.CONTENT}],Rl=[{label:"纵向",value:xo.PORTRAIT},{label:"横向",value:xo.LANDSCAPE}],ti=[{label:"当前位置",value:Rn.DEFAULT,detail:"元素按当前位置进行定位，参与分页。如果之前的元素尺寸变化，会进行相应调整"},{label:"固定位置",value:Rn.FIXED,detail:"元素会在固定位置显示，不参与分页"}],ni=[{label:"单次打印",value:In.ONCE,detail:"元素只打印一次"},{label:"每页打印",value:In.EACH,detail:"元素将每页打印一次"}],oi=[{label:"按内容调整高度",value:ln.AUTO,detail:"元素内容溢出时，将会根据内容自动调整元素高度"},{label:"隐藏溢出内容",value:ln.HIDDEN,detail:"元素内容溢出时，内容将会被隐藏"},{label:"缩放内容",value:ln.SCALE,detail:"元素内容溢出时，会对内容进行缩放，确保内容全部显示",disabled:!0}],po=[{label:"页码",value:fn.PAGE_NUMBER,type:re.NUMBER},{label:"总页数",value:fn.PAGE_TOTAL,type:re.NUMBER},{label:"行序号",value:fn.ROW_INDEX,type:re.NUMBER},{label:"当前时间",value:fn.CURRENT_DATE,type:re.DATE}],li=["[0.3.pageNumber]","'[0.3.pageNumber]/[0.3.pageTotal]'","'第[0.3.pageNumber]页/共[0.3.pageTotal]页'"],si=[{label:"原始尺寸",value:Pt.NATURAL,detail:"图片原始尺寸"},{label:"填充",value:Pt.FILL,detail:"不保持纵横比缩放图片，图片填满容器"},{label:"裁切",value:Pt.COVER,detail:"保持纵横比缩放图片，只保证图片的短边能完全显示出来，可能会裁切图片"},{label:"包含",value:Pt.CONTAIN,detail:"保持纵横比缩放图片，使图片的长边能完全显示出来，可保证图片完整显示"}],ii=[{label:"快速响应码",short:"QR Code",value:sn.QRCODE,detail:"最常见的二维码形式"},{label:"汉信码",short:"Han Xin Code",value:sn.HANXIN},{label:"数据矩阵码",short:"Data Matrix Code",value:sn.DATA_MATRIX}],ri=[{label:"EAN-8",value:Ue.EAN_8},{label:"EAN-13",value:Ue.EAN_13},{label:"UPC-A",value:Ue.UPC_A},{label:"UPC-E",value:Ue.UPC_E},{label:"CODE-39",value:Ue.CODE_39},{label:"CODE-128",value:Ue.CODE_128},{label:"ITF-14",value:Ue.ITF_14},{label:"GS1-128",value:Ue.GS1_128},{label:"Codabar",value:Ue.CODABAR,short:"库德巴码"},{label:"Interleaved 2 of 5",value:Ue.INTERLEAVED2OF5,short:"交叉25码"}],ai=[{label:"显示",value:!0},{label:"隐藏",value:!1}];function Il(o,t){return t=="body"?document.body:t=="parent"?o.parentElement:o.closest("."+t)}function ci(o,t){const n=o.getBoundingClientRect(),e=t.getBoundingClientRect();return!(n.top>e.bottom||n.right<e.left||n.bottom<e.top||n.left>e.right)}function wl(o){return o.isSelected?o.type===G.PARAGRAPH?52:o.type===G.TABLE?32:20:20}function ui(){const o=pe(window.devicePixelRatio),t=()=>o.value=window.devicePixelRatio,n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);return n.addEventListener("change",t),window.addEventListener("resize",t),An(()=>{n.removeEventListener("change",t),window.removeEventListener("resize",t)}),o}class di{constructor(t,n,e){X(this,"originalEvent");X(this,"target");X(this,"ghost");X(this,"container");X(this,"paths",[]);X(this,"dropTarget");X(this,"top",0);X(this,"left",0);X(this,"deltaX");X(this,"deltaY");X(this,"moved",!1);this.originalEvent=t,this.ghost=n,this.target=n,this.container=e;const s=n.getBoundingClientRect();this.deltaX=s.left-t.clientX,this.deltaY=s.top-t.clientY}init(t=1){const n=this.target.getBoundingClientRect(),e=this.container.getBoundingClientRect();this.top=(n.top-e.top)/t,this.left=(n.left-e.left)/t,this.ghost.setPointerCapture(this.originalEvent.pointerId)}}var zt,Ut,_t,Cl,Ol,Ll;const Ct=class Ct extends wn{constructor(n={}){var e,s,i;super();Qe(this,_t);X(this,"context",null);X(this,"selector");X(this,"scale");X(this,"onDragStart");Qe(this,zt);Qe(this,Ut);this.selector={container:((e=n.selector)==null?void 0:e.container)??ee.PAGE,element:((s=n.selector)==null?void 0:s.element)??ee.DRAGGABLE,droppable:((i=n.selector)==null?void 0:i.droppable)??ee.DROPPABLE},this.onDragStart=xe(this,_t,Cl).bind(this),this.scale=n.scale,yt(this,zt,xe(this,_t,Ol).bind(this)),yt(this,Ut,xe(this,_t,Ll).bind(this))}normalizeScale(){if(this.scale==null)return 1;const n=typeof this.scale=="function"?this.scale(this.context):this.scale;return n<=0?1:n/100}reset(){this.context!=null&&(window.removeEventListener("pointermove",Me(this,zt)),window.removeEventListener("pointerup",Me(this,Ut)),this.context=null)}};zt=new WeakMap,Ut=new WeakMap,_t=new WeakSet,Cl=function(n){if(n.button!==0)return;const e=n.target.closest("."+this.selector.element);if(e==null)return Fe.warn(Ct.TAG_NAME,"未找到的可拖拽元素");const s=this.selector.container,i=Il(e,s);this.context=new di(n,e,i);const l=this.createEvent("before-dragstart",this.context);if(this.dispatch(l).defaultPrevented)return Fe.warn(Ct.TAG_NAME,"已取消拖拽");if(this.context.container==null)return Fe.warn(Ct.TAG_NAME,"未找到的拖拽元素的容器");this.context.init(this.normalizeScale());const r=this.createEvent("dragstart",this.context);if(this.dispatch(r).defaultPrevented)return Fe.warn(Ct.TAG_NAME,"已取消拖拽");n.stopPropagation(),n.preventDefault(),window.addEventListener("pointermove",Me(this,zt)),window.addEventListener("pointerup",Me(this,Ut))},Ol=function(n){const e=this.context;if(e==null)return;const s=e.container.getBoundingClientRect(),i=document.elementsFromPoint(n.clientX,n.clientY),l=Array.from(i).filter(c=>!(c===e.ghost||c===e.target||e.ghost.contains(c))),r=this.normalizeScale();e.originalEvent=n,e.paths=l,e.dropTarget=l.find(c=>c.matches("."+ee.DROPPABLE)),e.top=(n.clientY+e.deltaY-s.top)/r,e.left=(n.clientX+e.deltaX-s.left)/r,!this.dispatch(this.createEvent("dragging",e)).defaultPrevented&&(e.ghost.style.top=e.top+"px",e.ghost.style.left=e.left+"px")},Ll=function(n){const e=this.context;if(e==null)return;n.preventDefault(),e.originalEvent=n;const s=this.createEvent("dragend",e);this.dispatch(s).defaultPrevented||this.reset()},X(Ct,"TAG_NAME","quickprint-draggable");let mo=Ct;const fi=q({__name:"HelpTitle",props:{title:{type:String,required:!0}},setup(o,{expose:t}){t();const n={Icon:K};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),pi="_help_1l6l8_2",mi={help:pi},gi=["title"];function _i(o,t,n,e,s,i){return E(),I("span",{title:n.title,class:d(o.classes.help)},[u("span",null,[Ye(o.$slots,"default")]),f(e.Icon,{icon:"icon-question-circle"})],10,gi)}const hi={classes:mi},bi=F(fi,[["render",_i],["__cssModules",hi],["__file","/home/dongls/work/quickprint/packages/web/components/HelpTitle.vue"]]),vi=q({__name:"Popover",props:{width:{type:Number,default:null},disabled:{type:Boolean,default:!1}},emits:["show","close"],setup(o,{expose:t,emit:n}){const e=o,s=n,i=we("classes"),l=pe(!1),r=me(),c=me(),a=De({minWidth:0,top:0,left:0,visible:!1}),p=R(()=>({minWidth:e.width==null?a.minWidth+"px":e.width+"px",top:a.top+"px",left:a.left+"px",visibility:a.visible?"visible":"hidden",zIndex:ll()}));async function g(){if(l.value)return _();e.disabled||(l.value=!0,s("show"),await Bn(),m())}function _(){b(),l.value=!1,s("close")}function v(V){if(!(V.target instanceof Node))return;const Z=r.value;if(Z&&Z.contains(V.target))return V.preventDefault();const L=c.value;if(L&&L.contains(V.target))return V.preventDefault();_()}function y(){const V=r.value,Z=c.value;if(Z==null||V==null)return;const L=V.getBoundingClientRect(),T=Z.getBoundingClientRect(),M=e.width==null?L.width:e.width;let P=L.bottom+1;P+T.height>window.innerHeight&&L.top>T.height&&(P=L.top-T.height-1);let N=L.left;N+T.width>window.innerWidth&&(N=window.innerWidth-T.width-2),a.minWidth=M,a.top=P,a.left=N,a.visible=!0}function h(V){const Z=V.target;if(!(Z instanceof HTMLElement))return;const L=r.value;L==null||!Z.contains(L)||_()}function S(V){if(V.key!=="Escape")return;const Z=c.value;if(Z!=null){const L=Z.style.zIndex;if(Number(L)<gs())return}V.preventDefault(),_()}function m(){window.addEventListener("click",v,{capture:!0}),window.addEventListener("contextmenu",_,{capture:!0}),window.addEventListener("scroll",h,{capture:!0,passive:!0}),window.addEventListener("resize",y),window.addEventListener("keydown",S)}function b(){window.removeEventListener("click",v,!0),window.removeEventListener("contextmenu",_,!0),window.removeEventListener("scroll",h,!0),window.removeEventListener("resize",y),window.removeEventListener("keydown",S)}t({close:_});const w={props:e,emit:s,classes:i,isShow:l,referenceRef:r,popoverRef:c,state:a,popoverStyle:p,showPopover:g,closePopover:_,handleOutsideClick:v,updatePopoverPosition:y,handleScroll:h,handleKeydown:S,bindPopoverEvents:m,cleanPopoverEvents:b};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),yi="_reference_1arli_2",Ei="_popover_1arli_7",Si={reference:yi,popover:Ei};function Ti(o,t,n,e,s,i){return E(),I("div",{class:d(e.classes.reference),onClick:ae(e.showPopover,["stop"]),ref:"referenceRef",tabindex:"0"},[Ye(o.$slots,"default"),e.isShow?(E(),ne(gl,{key:0,to:"body"},[u("div",{class:d(e.classes.popover),onVnodeMounted:e.updatePopoverPosition,onMousedown:t[0]||(t[0]=ae(()=>{},["prevent"])),style:Y(e.popoverStyle),ref:"popoverRef"},[Ye(o.$slots,"popover")],38)])):W("v-if",!0)],2)}const ki={classes:Si},Dl=F(vi,[["render",Ti],["__cssModules",ki],["__file","/home/dongls/work/quickprint/packages/web/components/Popover.vue"]]),Ri=q({__name:"Select",props:Bt({modelValue:{type:[String,Number,Array]},options:{type:Array,default(){return[]}},size:{type:String,default:"default"},button:{type:Boolean,default:!1},width:{type:String,default:"100%"},popoverWidth:{type:Number,default:null},placeholder:{type:String,default:"请选择"},title:{type:String,default:null},border:{type:String,default:"auto"},appearance:{type:String,default:"auto"},clearable:{type:Boolean,default:!1},teleport:{type:String,default:"body"},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:Bt(["select","update:modelValue"],["update:modelValue"]),setup(o,{expose:t,emit:n}){t();const e=n,s=o,i=we("classes"),l=me(),r=me(),c=un(o,"modelValue"),a=pe(),p=pe(!1),g=De({width:0,top:0,left:0,visible:!1,scrollable:!1}),_=R(()=>s.teleport==="none"),v=R(()=>s.teleport=="none"?"body":s.teleport),y=R(()=>{const H={label:"",options:[]},$=[H];for(const J of s.options){if(Array.isArray(J.options)){$.push({label:J.label,options:J.options});continue}H.options.push(J)}return $}),h=R(()=>y.value.reduce((H,$)=>H.concat($.options),[])),S=R(()=>{if(s.multiple!==!0){const $=Lo();return $?$.label:s.button?s.title:fe(s.modelValue)?s.placeholder:s.modelValue}const H=Do();return H.length>0?H.map($=>$.label).join(","):s.button?s.title:s.placeholder}),m=R(()=>s.clearable!==!0?!1:s.modelValue!=null),b=R(()=>({"quickprint-form-control":!0,"quickprint-form-control-small":s.size==="small"||s.button,"quickprint-form-hidden-border":s.button||s.border==="none","quickprint-form-disabled":s.disabled,[i.mini]:s.size==="mini",[i.select]:!0,[i.appearance]:s.appearance!=="none"&&!m.value,[i.button]:s.button,[i.showClearIcon]:m.value,[i.text]:s.size==="text"})),w=R(()=>({width:s.width})),V=R(()=>g.visible?{width:s.popoverWidth==null?g.width+"px":s.popoverWidth+"px",top:g.top+"px",left:g.left+"px",visibility:"visible",zIndex:ll()}:{minWidth:s.popoverWidth==null?g.width+"px":s.popoverWidth+"px",visibility:"hidden"}),Z=R(()=>({[i.content]:!0,[i.placeholder]:sl(s.modelValue)}));async function L(){if(s.disabled)return;const H=h.value;if(H.length===0)return;if(p.value)return T();const $=l.value;$!=null&&(g.width=$.getBoundingClientRect().width,g.visible=!1,a.value=H.find(J=>J.value===s.modelValue),p.value=!0,await Bn(),No())}function T(){Bo(),p.value=!1}function M(H){O(),rt()}function P(H){H.disabled!==!0&&(a.value=H)}function N(H){if(s.disabled==!0||H.disabled===!0)return;if(s.multiple!==!0){c.value=H.value,e("select",H),T();return}const $=Array.isArray(c.value)?c.value:[],J=$.findIndex(Ce=>Ce===H.value);J>=0?$.splice(J,1):$.push(H.value),c.value=$,e("select",$)}function C(H){if(!(H.target instanceof Node))return;const $=l.value;if($&&$.contains(H.target))return H.preventDefault();const J=r.value;if(J&&J.contains(H.target))return H.preventDefault();T()}async function O(){const H=l.value,$=r.value;if($==null||H==null)return;await Wt();const J=H.getBoundingClientRect(),Ce=$.getBoundingClientRect();let $t=J.bottom+1;$t+Ce.height>window.innerHeight&&J.top>Ce.height&&($t=J.top-Ce.height-1);let Qn=J.left;Qn+Ce.width>window.innerWidth&&(Qn=window.innerWidth-Ce.width-2),g.width=Ce.width,g.top=$t,g.left=Qn,g.visible=!0;const Jn=$.querySelector("."+i.list);g.scrollable=Jn?Jn.scrollHeight>Jn.clientHeight:!1}function B(H){const $=H.target;if(!($ instanceof HTMLElement))return;const J=l.value;J==null||!$.contains(J)||T()}function x(){const H=h.value,$=Fo(a.value);if($==null){a.value=te(0),rt();return}const J=H.indexOf($);if(J==0)return A();const Ce=te(J-1);Ce!=null&&(a.value=Ce,rt())}function k(){const H=h.value,$=Fo(a.value);if($==null){a.value=z(0),rt();return}const J=H.indexOf($);if(J>=H.length-1){D();return}const Ce=te(J+1);Ce!=null&&(a.value=Ce,rt())}function D(){a.value=z(0),rt()}function A(){const H=h.value;a.value=te(H.length-1),rt()}function U(){c.value=void 0,T()}function z(H){const J=h.value[H];return J==null?null:J.disabled===!0?z(H+1):J}function te(H){const J=h.value[H];return J==null?null:J.disabled===!0?te(H-1):J}function Ne(H){switch(H.key){case"Enter":H.preventDefault(),a.value&&N(a.value);return;case"Escape":H.preventDefault(),T();return;case"ArrowUp":H.preventDefault(),x();return;case"ArrowDown":H.preventDefault(),k();return;case"Home":H.preventDefault(),D();return;case"End":H.preventDefault(),A();return}}function vt(H){if(s.disabled)return;const $=l.value;$!=null&&document.activeElement===$&&(p.value||(H.stopPropagation(),L()))}function Kn(H){if(s.multiple!==!0)return s.modelValue===H.value;const $=s.modelValue;return Array.isArray($)?$.includes(H.value):!1}async function rt(){if(a.value==null)return;await Wt();const H=r.value;if(H==null)return;const $=H.querySelector("."+i.hover);$&&$.scrollIntoView({block:"nearest"})}function Lo(){const H=h.value,$=Array.isArray(s.modelValue)?s.modelValue[0]:s.modelValue;return H.find(J=>J.value===$)}function Do(){const H=h.value;return(Array.isArray(s.modelValue)?s.modelValue:[s.modelValue]).filter(J=>J).map(J=>{const Ce=H.find($t=>$t.value===J);return Ce||{value:J,label:J}})}function No(){window.addEventListener("mousedown",C,{capture:!0}),window.addEventListener("pointerdown",C,{capture:!0}),window.addEventListener("contextmenu",T,{capture:!0}),window.addEventListener("scroll",B,{capture:!0,passive:!0}),window.addEventListener("resize",O),window.addEventListener("keydown",Ne)}function Bo(){window.removeEventListener("mousedown",C,!0),window.removeEventListener("pointerdown",C,!0),window.removeEventListener("contextmenu",T,!0),window.removeEventListener("scroll",B,!0),window.removeEventListener("resize",O),window.removeEventListener("keydown",Ne)}const Ao={emit:e,props:s,classes:i,selectRef:l,popoverRef:r,value:c,hovered:a,isShow:p,state:g,teleportDisabled:_,teleportTo:v,normalizedGroups:y,normalizedOptions:h,displayValue:S,displayClearIcon:m,className:b,style:w,popoverStyle:V,inputClassName:Z,showPopover:L,closePopover:T,updateDom:M,showDetail:P,pick:N,handleOutsideClick:C,updatePopoverPosition:O,handleScroll:B,toPrev:x,toNext:k,toFirst:D,toLast:A,clearValue:U,getNextOption:z,getPrevOption:te,handleKeydown:Ne,handleEnter:vt,isSelected:Kn,showHoveredOption:rt,findSingleOption:Lo,findMultiOptions:Do,bindPopoverEvents:No,cleanPopoverEvents:Bo,Icon:K};return Object.defineProperty(Ao,"__isScriptSetup",{enumerable:!1,value:!0}),Ao}}),Ii="_button_g23yb_2",wi="_select_g23yb_7",Ci="_appearance_g23yb_16",Oi="_content_g23yb_31",Li="_placeholder_g23yb_37",Di="_popover_g23yb_41",Ni="_list_g23yb_51",Bi="_option_g23yb_80",Ai="_label_g23yb_95",Mi="_icon_g23yb_102",xi="_hover_g23yb_106",Pi="_detail_g23yb_117",qi="_short_g23yb_127",Fi="_selected_g23yb_133",Vi="_disabled_g23yb_137",zi="_showClearIcon_g23yb_142",Ui="_clearIcon_g23yb_146",Hi="_text_g23yb_159",Gi="_mini_g23yb_171",Wi="_groupLabel_g23yb_183",ji={button:Ii,select:wi,appearance:Ci,content:Oi,placeholder:Li,popover:Di,list:Ni,option:Bi,label:Ai,icon:Mi,hover:xi,detail:Pi,short:qi,selected:Fi,disabled:Vi,showClearIcon:zi,clearIcon:Ui,text:Hi,mini:Gi,groupLabel:Wi},Xi=["title","onKeydown"],Yi=["onMouseover","onClick"];function Zi(o,t,n,e,s,i){var l;return E(),I("div",{class:d(e.className),title:n.title,style:Y(e.style),onClick:ae(e.showPopover,["stop"]),onKeydown:_l(ae(e.handleEnter,["prevent"]),["enter"]),ref:"selectRef",tabindex:"0"},[o.$slots.selected?Ye(o.$slots,"selected",{key:0,option:e.findSingleOption(),options:e.findMultiOptions()}):Ye(o.$slots,"option",{key:1,option:e.findSingleOption(),options:e.findMultiOptions()},()=>[u("div",{class:d(e.inputClassName)},[u("span",null,Q(e.displayValue),1),e.displayClearIcon?(E(),ne(e.Icon,{key:0,icon:"icon-close",onClick:ae(e.clearValue,["stop"]),size:"12px",class:d(e.classes.clearIcon)},null,8,["class"])):W("v-if",!0)],2)]),e.isShow?(E(),ne(gl,{key:2,to:e.teleportTo,disabled:e.teleportDisabled},[u("div",{class:d(e.classes.popover),onClick:t[0]||(t[0]=ae(()=>{},["stop"])),onVnodeMounted:e.updateDom,onMousedown:t[1]||(t[1]=ae(()=>{},["prevent"])),style:Y(e.popoverStyle),ref:"popoverRef"},[u("div",{class:d(e.classes.list)},[(E(!0),I(oe,null,ce(e.normalizedGroups,r=>(E(),I(oe,null,[r.label?(E(),I("div",{key:0,class:d(e.classes.groupLabel)},Q(r.label),3)):W("v-if",!0),(E(!0),I(oe,null,ce(r.options,c=>{var a;return E(),I("div",{key:c.value,class:d({[e.classes.option]:!0,[e.classes.disabled]:c.disabled===!0,[e.classes.selected]:e.isSelected(c),[e.classes.hover]:((a=e.hovered)==null?void 0:a.value)==c.value}),style:Y(c.style),onMouseover:p=>e.showDetail(c),onClick:p=>e.pick(c)},[Ye(o.$slots,"option",{option:c},()=>[u("div",{class:d(e.classes.label)},[c.icon?(E(),ne(e.Icon,{key:0,icon:c.icon,class:d(e.classes.icon)},null,8,["icon","class"])):W("v-if",!0),u("span",null,Q(c.label),1)],2),c.short?(E(),I("div",{key:0,class:d(e.classes.short)},Q(c.short),3)):W("v-if",!0)])],46,Yi)}),128))],64))),256))],2),(l=e.hovered)!=null&&l.detail&&e.state.visible?(E(),I("div",{key:0,class:d(e.classes.detail)},Q(e.hovered.detail),3)):W("v-if",!0)],38)],8,["to","disabled"])):W("v-if",!0)],46,Xi)}const $i={classes:ji},ie=F(Ri,[["render",Zi],["__cssModules",$i],["__file","/home/dongls/work/quickprint/packages/web/components/Select.vue"]]),Ki="_tree_1p28f_1",Qi="_node_1p28f_5",Ji="_content_1p28f_11",er="_space_1p28f_27",tr="_expand_1p28f_28",nr="_active_1p28f_47",or="_children_1p28f_55",at={tree:Ki,node:Qi,content:Ji,space:er,expand:tr,active:nr,children:or},Nl=Symbol(),Bl=q({emits:["nodeClick","nodeHover"],props:{node:{type:Object,required:!0}},setup(o,{emit:t}){const n=bl(Nl),e=R(()=>Array.isArray(o.node.children)&&o.node.children.length>0),s=R({get(){const h=n==null?void 0:n.state[o.node.value];return h==null?!1:h.expand},set(h){const S=n==null?void 0:n.state[o.node.value];S!=null&&(S.expand=h)}});function i(h){h.preventDefault(),s.value=!s.value}function l(){if(!e.value)return f("div",{class:at.space},null);const h={[at.expand]:!0,[at.active]:s.value};return f("div",{onMousedown:y,onClick:i,class:h},[f(K,{icon:"icon-right",size:"12px"},null)])}function r(){return typeof(n==null?void 0:n.content)=="function"?n.content({node:o.node}):f("span",null,[o.node.label])}function c(){return f("div",{class:at.content,onClick:p,onMouseenter:_},[r()])}function a(){if(!e.value||!s.value)return;const h=o.node.children.map(S=>f(Bl,{node:S,onNodeClick:g,onNodeHover:v},null));return f("div",{class:at.children},[h])}function p(){t("nodeClick",o.node)}function g(h){t("nodeClick",h)}function _(){t("nodeHover",o.node)}function v(h){t("nodeHover",h)}function y(h){h.preventDefault()}return function(){return f("div",{class:at.subTree},[f("div",{class:at.node},[l(),c()]),a()])}}}),lr=q({props:{data:{type:Array,required:!0}},emits:["nodeClick","nodeHover"],setup(o,{slots:t,emit:n}){const e=l();function s(c){n("nodeClick",c)}function i(c){n("nodeHover",c)}function l(){const c=De({}),a=function(p,g){for(const _ of p)g[_.value]={expand:_.expand!==!1},_.children&&a(_.children,g)};return a(o.data,c),c}function r(c){return typeof t.default=="function"?t.default(c):null}return hl(Nl,{state:e,content:r}),function(){const c=o.data.map(a=>f(Bl,{node:a,onNodeClick:s,onNodeHover:i},null));return f("div",{class:at.tree},[c])}}});function mn(o){const t=Math.pow(10,Math.max(0,2));return Math.round(o*t)/t}const so={A:10,B:11,C:12,D:13,E:14,F:15},Vo={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"};function sr(o){return typeof o=="string"&&o.includes(".")&&Number.parseFloat(o)===1}function ir(o){return typeof o=="string"&&o.includes("%")}function Vt(o,t){sr(o)&&(o="100%");const n=ir(o);return o=Math.min(t,Math.max(0,Number.parseFloat(`${o}`))),n&&(o=Number.parseInt(`${o*t}`,10)/100),Math.abs(o-t)<1e-6?1:o%t/Number.parseFloat(t)}function Et(o){return o.length===2?(so[o[0].toUpperCase()]||+o[0])*16+(so[o[1].toUpperCase()]||+o[1]):so[o[1].toUpperCase()]||+o[1]}function zo(o,t,n){o=Vt(o,255),t=Vt(t,255),n=Vt(n,255);const e=Math.max(o,t,n),s=Math.min(o,t,n);let i;const l=e,r=e-s,c=e===0?0:r/e;if(e===s)i=0;else{switch(e){case o:{i=(t-n)/r+(t<n?6:0);break}case t:{i=(n-o)/r+2;break}case n:{i=(o-t)/r+4;break}}i/=6}return{h:i*360,s:c*100,v:l*100}}const rr=function(o,t,n){t=t/100,n=n/100;let e=t;const s=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,e*=s<=1?s:2-s;const i=(n+t)/2,l=n===0?2*e/(s+e):2*t/(n+t);return{h:o,s:l*100,v:i*100}},ar=function(o,t,n){return[o,t*n/((o=(2-t)*n)<1?o:2-o)||0,o/2]};function io(o,t,n){o=Vt(o,360)*6,t=Vt(t,100),n=Vt(n,100);const e=Math.floor(o),s=o-e,i=n*(1-t),l=n*(1-s*t),r=n*(1-(1-s)*t),c=e%6,a=[n,l,i,i,r,n][c],p=[r,n,n,l,i,i][c],g=[i,i,r,n,n,l][c];return{r:Math.round(a*255),g:Math.round(p*255),b:Math.round(g*255)}}function yn(o){o=Math.min(Math.round(o),255);const t=Math.floor(o/16),n=o%16;return`${Vo[t]||t}${Vo[n]||n}`}function cr({r:o,g:t,b:n}){return Number.isNaN(+o)||Number.isNaN(+t)||Number.isNaN(+n)?"":`#${yn(o)}${yn(t)}${yn(n)}`}class Pn{constructor(t){X(this,"h",0);X(this,"s",100);X(this,"v",100);X(this,"a",100);t&&this.setColor(t)}setColor(t){const n=this.processColor(t);n!=null&&(this.setHue(n.h),this.setSaturation(n.s),this.setValue(n.v),this.setAlpha(n.a))}setHue(t){this.h=mn(t)}setSaturation(t){this.s=mn(t)}setValue(t){this.v=mn(t)}setAlpha(t){this.a=mn(t)}processColor(t){return t==null||t==""?null:t.startsWith("#")?this.processHEX(t):t.startsWith("rgb")?this.processRGB(t):t.startsWith("hsl")?this.processHSL(t):this.processHSV(t)}processHSV(t){const n=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(s=>s!=="").map((s,i)=>i>2?Number.parseFloat(s):Number.parseInt(s,10)),e=n.length===4?n[3]*100:100;return{h:n[0],s:n[1],v:n[2],a:e}}processHEX(t){const n=t.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(n))return null;let e,s,i,l=100;n.length===3?(e=Et(n[0]+n[0]),s=Et(n[1]+n[1]),i=Et(n[2]+n[2])):(n.length===6||n.length===8)&&(e=Et(n.slice(0,2)),s=Et(n.slice(2,4)),i=Et(n.slice(4,6))),n.length===8&&(l=Et(n.slice(6))/255*100);const{h:r,s:c,v:a}=zo(e,s,i);return{h:r,s:c,v:a,a:l}}processRGB(t){const n=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(e=>e!=="").map((e,s)=>s>2?Number.parseFloat(e):Number.parseInt(e,10));if(n.length>=3){const e=n.length===4?n[3]*100:100,{h:s,s:i,v:l}=zo(n[0],n[1],n[2]);return{h:s,s:i,v:l,a:e}}return null}processHSL(t){const n=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(e=>e!=="").map((e,s)=>s>2?Number.parseFloat(e):Number.parseInt(e,10));if(n.length>=3){const e=n.length===4?n[3]*100:100,{h:s,s:i,v:l}=rr(n[0],n[1],n[2]);return{h:s,s:i,v:l,a:e}}return null}toString(t){switch(t){case"hsl":{const n=ar(this.h,this.s/100,this.v/100);return`hsla(${this.h},${Math.round(n[1]*100)}%,${Math.round(n[2]*100)}%,${this.a/100})`}case"hex":return`${cr(io(this.h,this.s,this.v))}${yn(this.a*255/100)}`;case"rgb":{const{r:n,g:e,b:s}=io(this.h,this.s,this.v);return`rgba(${n},${e},${s},${this.a/100})`}default:return`hsva(${this.h},${Math.round(this.s)}%,${Math.round(this.v)}%,${this.a/100})`}}toRGB(){return this.toString("rgb")}toHSL(){return this.toString("hsl")}toHEX(){return this.toString("hex")}rgb(){return io(this.h,this.s,this.v)}}function Al(o){const t={init:!1,target:null,container:null,offsetX:0};function n(l){const r=t.container.getBoundingClientRect(),a=t.target.getBoundingClientRect().width/2;let p=l.clientX-r.left-t.offsetX;return p<-a&&(p=-a),p>r.width-a&&(p=r.width-a),p}function e(l){l.stopPropagation(),l.preventDefault();const r=l.target,c=l.currentTarget;origin==null||r==null||(t.container=c,t.target=r===c?r.firstElementChild:r,t.offsetX=r===c?t.target.offsetWidth/2:l.clientX-r.getBoundingClientRect().left,window.addEventListener("pointermove",s),window.addEventListener("pointerup",i))}function s(l){if(t.container==null||t.target==null)return;t.init||(t.target.setPointerCapture(l.pointerId),t.init=!0);const r=n(l);t.target.style.left=r+"px",o("move",r)}function i(l){if(l.preventDefault(),l.stopPropagation(),t.container&&t.target){const r=n(l);o("end",r)}t.target&&t.target.releasePointerCapture(l.pointerId),t.target=null,t.container=null,t.init=!1,window.removeEventListener("pointermove",s),window.removeEventListener("pointerup",i)}return e}function ur(o){const t={init:!1,target:null,container:null,offsetX:0,offsetY:0};function n(r){const c=t.container.getBoundingClientRect(),p=t.target.getBoundingClientRect().width/2;let g=r.clientX-c.left-t.offsetX;return g<-p&&(g=-p),g>c.width-p&&(g=c.width-p),g}function e(r){const c=t.container.getBoundingClientRect(),p=t.target.getBoundingClientRect().height/2;let g=r.clientY-c.top-t.offsetY;return g<-p&&(g=-p),g>c.height-p&&(g=c.height-p),g}function s(r){r.stopPropagation(),r.preventDefault();const c=r.target,a=r.currentTarget;origin==null||c==null||(t.container=a,t.target=c===a?c.firstElementChild:c,t.offsetX=c===a?t.target.offsetWidth/2:r.clientX-c.getBoundingClientRect().left,t.offsetY=c===a?t.target.offsetHeight/2:r.clientY-c.getBoundingClientRect().top,window.addEventListener("pointermove",i),window.addEventListener("pointerup",l))}function i(r){if(t.container==null||t.target==null)return;t.init||(t.target.setPointerCapture(r.pointerId),t.init=!0);const c=n(r),a=e(r);t.target.style.left=c+"px",t.target.style.top=a+"px",o("move",{left:c,top:a})}function l(r){if(r.preventDefault(),r.stopPropagation(),t.container&&t.target){const c=n(r),a=e(r);o("end",{top:a,left:c})}t.target&&t.target.releasePointerCapture(r.pointerId),t.target=null,t.container=null,t.init=!1,window.removeEventListener("pointermove",i),window.removeEventListener("pointerup",l)}return s}const dr=q({__name:"SvPanel",props:{modelValue:{type:Pn,required:!0}},setup(o,{expose:t}){t();const n=o,e=me(),s=me(),i=De(c()),l=R(()=>({left:i.left+"px",top:i.top+"px"})),r=ur((p,g)=>{p=="end"&&(i.top=g.top,i.left=g.left);const _=e.value,v=s.value,y=(g.left+v.offsetWidth/2)/_.offsetWidth*100,h=100-(g.top+v.offsetHeight)/_.offsetHeight*100;n.modelValue.setSaturation(y),n.modelValue.setValue(h)});function c(){const p=e.value,g=s.value;if(p==null||g==null)return{top:-6,left:-6};const _=n.modelValue.s,y=(100-n.modelValue.v)/100*p.offsetHeight,h=_/100*p.offsetWidth;return{top:y-g.offsetHeight/2,left:h-g.offsetWidth/2}}jt(()=>{const p=c();i.top=p.top,i.left=p.left});const a={props:n,svPanelRef:e,thumbRef:s,position:i,style:l,onDragStart:r,calcOffset:c};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),fr="_svPanel_1sv6o_2",pr="_thumb_1sv6o_10",mr={svPanel:fr,thumb:pr};function gr(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.svPanel),onPointerdown:t[0]||(t[0]=(...l)=>e.onDragStart&&e.onDragStart(...l)),ref:"svPanelRef"},[u("div",{class:d(o.classes.thumb),style:Y(e.style),ref:"thumbRef"},null,6)],34)}const _r={classes:mr},hr=F(dr,[["render",gr],["__cssModules",_r],["__file","/home/dongls/work/quickprint/packages/web/components/color/SvPanel.vue"]]),br=q({__name:"HueSlider",props:{modelValue:{type:Pn,required:!0}},setup(o,{expose:t}){t();const n=o,e=pe(-6),s=me(),i=me(),l=Al((a,p)=>{a=="end"&&(e.value=p);const g=s.value,_=i.value,v=Math.round((p+_.offsetWidth/2)/g.offsetWidth*360);n.modelValue.setHue(v)});function r(){const a=s.value,p=i.value;if(a==null||p==null)return-6;const g=n.modelValue.h;return Math.round(g/360*a.offsetWidth)-p.offsetWidth/2}jt(()=>{e.value=r()});const c={props:n,offset:e,hueRef:s,thumbRef:i,onDragStart:l,calcOffset:r};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),vr="_hue_1ozoc_2",yr="_thumb_1ozoc_10",Er={hue:vr,thumb:yr};function Sr(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.hue),onPointerdown:t[0]||(t[0]=(...l)=>e.onDragStart&&e.onDragStart(...l)),ref:"hueRef"},[u("div",{class:d(o.classes.thumb),style:Y({left:e.offset+"px"}),ref:"thumbRef"},null,6)],34)}const Tr={classes:Er},kr=F(br,[["render",Sr],["__cssModules",Tr],["__file","/home/dongls/work/quickprint/packages/web/components/color/HueSlider.vue"]]),Rr=q({__name:"AlphaSlider",props:{modelValue:{type:Pn,required:!0}},setup(o,{expose:t}){t();const n=o,e=pe(-6),s=me(),i=me(),l=Al((a,p)=>{a=="end"&&(e.value=p);const g=s.value,_=i.value,v=Math.round((p+_.offsetWidth/2)/g.offsetWidth*100);n.modelValue.setAlpha(v)});function r(){const a=s.value,p=i.value;if(a==null||p==null)return-6;const g=n.modelValue.a;return Math.round(g/100*a.offsetWidth)-p.offsetWidth/2}jt(()=>{e.value=r()});const c={props:n,offset:e,alphaRef:s,thumbRef:i,onDragStart:l,calcOffset:r};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),Ir="_alpha_1x8jd_2",wr="_thumb_1x8jd_26",Cr={alpha:Ir,thumb:wr};function Or(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.alpha),onPointerdown:t[0]||(t[0]=(...l)=>e.onDragStart&&e.onDragStart(...l)),ref:"alphaRef"},[u("div",{class:d(o.classes.thumb),style:Y({left:e.offset+"px"}),ref:"thumbRef"},null,6)],34)}const Lr={classes:Cr},Dr=F(Rr,[["render",Or],["__cssModules",Lr],["__file","/home/dongls/work/quickprint/packages/web/components/color/AlphaSlider.vue"]]),Nr=["#FFFFFF","#000000","#485368","#2972F4","#00A3F5","#319B62","#DE3C36","#F88825","#F5C400","#9A38D7","#F2F2F2","#7F7F7F","#F3F5F7","#E5EFFF","#E5F6FF","#EAFAF1","#FFE9E8","#FFF3EB","#FFF9E3","#FDEBFF","#D8D8D8","#595959","#C5CAD3","#C7DCFF","#C7ECFF","#C3EAD5","#FFC9C7","#FFDCC4","#FFEEAD","#F2C7FF","#BFBFBF","#3F3F3F","#808B9E","#99BEFF","#99DDFF","#98D7B6","#FF9C99","#FFBA84","#FFE270","#D58EFF","#A5A5A5","#262626","#353B45","#1450B8","#1274A5","#277C4F","#9E1E1A","#B86014","#A38200","#5E2281","#939393","#0D0D0D","#24272E","#0C306E","#0A415C","#184E32","#58110E","#5C300A","#665200","#3B1551"];function Br(){try{return typeof window.EyeDropper=="function"}catch(o){return console.log(o),!1}}async function Ar(){try{return(await new EyeDropper().open()).sRGBHex}catch(o){return console.error(o),null}}const Uo={isSupport:Br,open:Ar},ro="quickprint-recent-use-colors",Mr=q({__name:"Picker",props:{modelValue:{type:String,default:null},showText:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","select"],setup(o,{expose:t,emit:n}){t();const e=n,s=o,i=[{value:"hex",label:"HEX"},{value:"rgb",label:"RGB"},{value:"hsl",label:"HSL"}],l=pe(new Pn(s.modelValue)),r=me(),c=me(),a=pe(w()),p=Uo.isSupport(),g=pe("hex"),_=R(()=>{const T=s.modelValue;return T?{backgroundColor:T}:null}),v=R(()=>{const T=l.value,{r:M,g:P,b:N}=T.rgb();return{"--hue-channel-color":`hsl(${T.h}, 100%, 50%)`,"--alpha-channel-color-a":`rgba(${M}, ${P}, ${N}, 0)`,"--alpha-channel-color-b":`rgba(${M}, ${P}, ${N}, 1)`}}),y=R({get(){return l.value.toString(g.value)},set(T){l.value.setColor(T)}});function h(){var T;(T=r.value)==null||T.close()}function S(T){T!=null&&(e("update:modelValue",T),e("select",T),V(T),h())}function m(){e("update:modelValue",void 0),e("select",void 0),h()}function b(){Uo.open().then(T=>S(T))}function w(){const T=localStorage.getItem(ro);if(T==null||T=="")return[];const M=Cn(T);return M==null?[]:Array.isArray(M)?M:[]}function V(T){const M=a.value,P=M.indexOf(T);P>=0&&M.splice(P,1),M.length>10&&M.pop(),M.unshift(T),localStorage.setItem(ro,JSON.stringify(M))}function Z(){e("update:modelValue",l.value.toString(g.value)),e("select",l.value.toString(g.value)),h()}Eo(()=>s.modelValue,()=>l.value.setColor(s.modelValue));const L={emit:e,props:s,FORMATS:i,custom:l,popoverRef:r,inputRef:c,recent:a,isSupportEyeDropper:p,RECENT_USE_KEY:ro,format:g,style:_,paletteStyle:v,formatColor:y,closePopover:h,pick:S,clearColor:m,showEyeDropper:b,getRecentColors:w,saveRecentColors:V,confirm:Z,Select:ie,Popover:Dl,Icon:K,SvPanel:hr,HueSlider:kr,AlphaSlider:Dr,get PRESET_COLORS(){return Nr}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),xr="_colorPicker_1egpm_2",Pr="_disabled_1egpm_6",qr="_colorPickerInput_1egpm_10",Fr="_colorBlock_1egpm_17",Vr="_colorValue_1egpm_26",zr="_colorPickerPanel_1egpm_31",Ur="_presetPanel_1egpm_45",Hr="_colourAtla_1egpm_49",Gr="_color_1egpm_2",Wr="_presetTools_1egpm_76",jr="_clearBtn_1egpm_82",Xr="_indicator_1egpm_83",Yr="_none_1egpm_101",Zr="_recentColors_1egpm_132",$r={colorPicker:xr,disabled:Pr,colorPickerInput:qr,colorBlock:Fr,colorValue:Vr,colorPickerPanel:zr,presetPanel:Ur,colourAtla:Hr,color:Gr,presetTools:Wr,clearBtn:jr,indicator:Xr,none:Yr,recentColors:Zr},Kr="_panel_911zv_2",Qr="_sv_911zv_7",Jr="_hua_911zv_11",ea="_sliders_911zv_15",ta="_tools_911zv_20",na="_confirm_911zv_37 quickprint-text-btn",oa="_preview_911zv_44",la="_previewColor_911zv_59",sa={panel:Kr,sv:Qr,hua:Jr,sliders:ea,tools:ta,confirm:na,preview:oa,previewColor:la},ia=["title","onClick"],ra=["title","onClick"];function aa(o,t,n,e,s,i){return E(),ne(e.Popover,{class:d(o.classes.colorPicker),onMousedown:t[7]||(t[7]=ae(()=>{},["prevent"])),ref:"popoverRef",disabled:n.disabled},{popover:Se(()=>[u("div",{class:d(o.classes.colorPickerPanel)},[u("div",{class:d(o.classes.presetPanel)},[u("div",{class:d(o.classes.presetTools)},[u("button",{type:"button",class:d(o.classes.clearBtn),onClick:e.clearColor},[u("span",{class:d(o.classes.none)},null,2),t[8]||(t[8]=u("span",null,"无颜色",-1))],2),e.isSupportEyeDropper?(E(),I("button",{key:0,type:"button",class:d(o.classes.indicator),onClick:e.showEyeDropper},[f(e.Icon,{icon:"icon-eye-dropper"}),t[9]||(t[9]=u("span",null,"拾色器",-1))],2)):W("v-if",!0)],2),u("div",{class:d(o.classes.colourAtla)},[(E(!0),I(oe,null,ce(e.PRESET_COLORS,l=>(E(),I("div",{style:Y({backgroundColor:l}),title:l,class:d(o.classes.color),onClick:r=>e.pick(l)},null,14,ia))),256))],2),u("div",{class:d(o.classes.recentColors)},"最近使用",2),u("div",{class:d(o.classes.colourAtla)},[(E(),I(oe,null,ce(10,l=>u("div",{key:l,title:e.recent[l-1],style:Y({backgroundColor:e.recent[l-1]}),class:d(o.classes.color),onClick:r=>e.pick(e.recent[l-1])},null,14,ra)),64))],2)],2),u("div",{class:d(o.pacls.panel),style:Y(e.paletteStyle)},[f(e.SvPanel,{class:d(o.pacls.sv),modelValue:e.custom,"onUpdate:modelValue":t[1]||(t[1]=l=>e.custom=l)},null,8,["class","modelValue"]),u("div",{class:d(o.pacls.sliders)},[f(e.HueSlider,{class:d(o.pacls.hua),modelValue:e.custom,"onUpdate:modelValue":t[2]||(t[2]=l=>e.custom=l)},null,8,["class","modelValue"]),f(e.AlphaSlider,{modelValue:e.custom,"onUpdate:modelValue":t[3]||(t[3]=l=>e.custom=l)},null,8,["modelValue"]),u("div",{class:d(o.pacls.preview)},[u("div",{class:d(o.pacls.previewColor),style:Y({backgroundColor:e.custom.toRGB()})},null,6)],2)],2),u("div",{class:d(o.pacls.tools)},[f(e.Select,{options:e.FORMATS,teleport:"none",modelValue:e.format,"onUpdate:modelValue":t[4]||(t[4]=l=>e.format=l),width:"42px",border:"none",size:"text"},null,8,["modelValue"]),Re(u("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=l=>e.formatColor=l),onMousedown:t[6]||(t[6]=ae(()=>{},["stop"])),class:"quickprint-form-control",style:{width:"120px"}},null,544),[[Ae,e.formatColor]]),u("button",{type:"button",class:d(o.pacls.confirm),onClick:e.confirm},"确定",2)],2)],6)],2)]),default:Se(()=>[u("div",{class:d({[o.classes.colorPickerInput]:!0,[o.classes.disabled]:n.disabled}),ref:"inputRef"},[Ye(o.$slots,"default",{},()=>[u("span",{class:d(o.classes.colorBlock),style:Y(e.style)},null,6)]),n.showText?(E(),I("div",{key:0,class:d(o.classes.colorValue),onClick:t[0]||(t[0]=ae(()=>{},["stop"]))},Q(n.modelValue),3)):W("v-if",!0)],2)]),_:3},8,["class","disabled"])}const ca={classes:$r,pacls:sa},rn=F(Mr,[["render",aa],["__cssModules",ca],["__file","/home/dongls/work/quickprint/packages/web/components/color/Picker.vue"]]),ua=q({__name:"Input",props:{modelValue:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","select"],setup(o,{expose:t,emit:n}){t();const e=n,s=o,i=R({get(){return s.modelValue},set(a){e("update:modelValue",a)}}),l=R(()=>{const a=s.modelValue;return sl(a)||a===Pe.INHERIT});function r(a){e("select",a)}const c={emit:e,props:s,color:i,isDefault:l,onSelect:r,ColorPicker:rn};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),da="_indicator_14ypk_2",fa="_disabled_14ypk_8",pa="_colorBlock_14ypk_27",ma="_colorValue_14ypk_38",ga="_colorNone_14ypk_45",_a={indicator:da,disabled:fa,colorBlock:pa,colorValue:ma,colorNone:ga};function ha(o,t,n,e,s,i){return E(),ne(e.ColorPicker,{modelValue:e.color,"onUpdate:modelValue":t[0]||(t[0]=l=>e.color=l),disabled:n.disabled,onSelect:e.onSelect},{default:Se(()=>[u("div",{class:d({[o.classes.indicator]:!0,[o.classes.disabled]:n.disabled})},[u("div",{class:d({[o.classes.colorBlock]:!0,[o.classes.colorNone]:e.isDefault}),style:Y({backgroundColor:e.color})},null,6),u("div",{class:d(o.classes.colorValue)},Q(e.isDefault?"默认":e.color),3)],2)]),_:1},8,["modelValue","disabled"])}const ba={classes:_a},qn=F(ua,[["render",ha],["__cssModules",ba],["__file","/home/dongls/work/quickprint/packages/web/components/color/Input.vue"]]);function va(o,t=0){let n=null;return function(...e){n&&clearTimeout(n),n=window.setTimeout(()=>{o.apply(this,e),n=null},t)}}function ya(o,t=0){let n=0,e=null;return function(...s){const i=Date.now();if(i-n<t){e&&clearTimeout(e),e=window.setTimeout(()=>{e=null,o.apply(this,s),n=Date.now()},t);return}e&&clearTimeout(e),o.apply(this,s),n=i}}function dn(o,t={}){const n={},e=o.style??{},s=yo(e.fontFamily,e.enFontFamily);s&&(n.fontFamily=s);const i=il(e);return i&&Object.assign(n,i),e.fontSize&&(n.fontSize=e.fontSize),e.fontWeight&&(n.fontWeight=e.fontWeight),e.color&&(n.color=e.color),e.lineHeight&&(n.lineHeight=e.lineHeight),e.highlightColor&&(n["--quickprint-variable-highlight-color"]=e.highlightColor),e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.fontStyle&&(n.fontStyle=e.fontStyle),e.textIndent&&(n.textIndent=e.textIndent),e.writingMode&&(n.writingMode=e.writingMode),ao("border",t)&&Object.assign(n,Lt(o)),Object.assign(n,_s(o)),ao("align",t)&&Object.assign(n,hs(o)),ao("padding",t)&&Object.assign(n,bs(o)),n}function ko(o,t={}){const n=[];let e=o;for(;ue.isDefineElement(e);)n.unshift(dn(e,t)),e=e.parent;return Object.assign({},...n)}function ao(o,t){return t.exclude==null?!0:!t.exclude.includes(o)}const wt={SPACE:" ",has(o,t){return typeof o!="string"?!1:o.split(wt.SPACE).includes(t)},push(o,t){if(typeof o!="string")return t;const n=o.split(wt.SPACE).filter(s=>ft(s));return n.indexOf(t)>=0?o:(n.push(t),n.join(wt.SPACE))},remove(o,t){if(typeof o!="string"||o=="")return o;const n=o.split(wt.SPACE),e=n.indexOf(t);return e<0?o:(n.splice(e,1),n.join(wt.SPACE))}};function St(o){switch(o){case"top":case 0:return{width:"borderTopWidth",color:"borderTopColor",style:"borderTopStyle"};case"right":case 1:return{width:"borderRightWidth",color:"borderRightColor",style:"borderRightStyle"};case"bottom":case 2:return{width:"borderBottomWidth",color:"borderBottomColor",style:"borderBottomStyle"};case"left":case 3:return{width:"borderLeftWidth",color:"borderLeftColor",style:"borderLeftStyle"}}}function Fn(o){var n;const t=o.ds;if(t!=null)return t.type===ve.FORMULA?{type:t.type,content:Ro(t.value,o.doc)}:t.type===ve.VARIABLE?{type:t.type,content:it(t.value,(n=o.doc)==null?void 0:n.ds)}:t.type===ve.CODE?{type:t.type,content:"自定义"}:{type:t.type,content:t.value}}function it(o,t){var _,v,y;if(fe(o))return o;const n=rl(o),e=n.path;if(e==null||e=="")return;const s=e.split(".");if(s.length==0)return e;const i=s[0];if(n.varType===Dt.BUILTIN)return((_=po.find(h=>h.value===i))==null?void 0:_.label)??i;if(n.varType===Dt.SPECIAL)return((v=Js.find(h=>h.value===i))==null?void 0:v.label)??i;if(t==null)return e;const r=(t.fields??[]).find(h=>h.name===i);if(r==null)return e;const c=s[1],a=fe(r.title)?r.name:r.title;if(c==null)return a;const p=(y=r.children)==null?void 0:y.find(h=>h.name===c);if(p==null)return`${a}.${c}`;const g=fe(p.title)?p.name:p.title;return`${a}.${g}`}function Ro(o,t){return fe(o)?void 0:On.tokenize(o).map(s=>s.type===pt.VARIABLE?`[${it(s.value,t==null?void 0:t.ds)}]`:s.type===pt.REFERENCE?`[${Ml(s.value,t)}]`:s.type===pt.TEMPLATE?(Array.isArray(s.value)?s.value:[s.value]).map(l=>l.type===pt.VARIABLE?`[${it(l.value,t==null?void 0:t.ds)}]`:l.value).join(""):On.formatTokenValue(s)).join("")}function Ml(o,t){if(t==null)return"="+o;const n=t.findElement(o);return n==null?"="+o:n.title?"="+n.title:n.ds.type===ve.VARIABLE&&n.ds.value?it(n.ds.value,t.ds):"="+o}function Ea(o){switch(rl(o).dataType){case re.OBJECT:return"对象";case re.ARRAY:return"数组";case re.STRING:return"文本";case re.NUMBER:return"数字";case re.DATE:return"日期";case re.BOOLEAN:return"布尔";default:return"未知类型"}}function Sa(o){var t;return((t=Tl.find(n=>n.value===o))==null?void 0:t.label)??o}const xl=al(()=>cl(()=>import("./component-DsYiz_EM.js"),__vite__mapDeps([0,1,2,3]))),Ta=q({__name:"Builtin",emits:["select"],setup(o,{expose:t,emit:n}){t();const e=n,s=pe(po[0].value),i=R(()=>`builtin_${ul(s.value,"_").toLowerCase()}`);function l(a){e("select",a)}function r(a){s.value=a.value}const c={emit:e,current:s,docName:i,onSelect:l,onHover:r,get BUILTIN_PARAM_OPTIONS(){return po},get Document(){return xl}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),ka="_builtin_m1n0z_2",Ra="_panel_m1n0z_11",Ia="_desc_m1n0z_17",wa="_param_m1n0z_24",Ca="_active_m1n0z_34",Oa={builtin:ka,panel:Ra,desc:Ia,param:wa,active:Ca},La=["onClick","onMouseenter"];function Da(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.builtin)},[u("div",{class:d(["quickprint-is-scrollable",o.classes.panel])},[(E(!0),I(oe,null,ce(e.BUILTIN_PARAM_OPTIONS,l=>(E(),I("div",{class:d({[o.classes.param]:!0,[o.classes.active]:l.value===e.current}),onClick:r=>e.onSelect(l),onMouseenter:r=>e.onHover(l)},[u("strong",null,Q(l.label),1),u("span",null,Q(l.value),1)],42,La))),256))],2),u("div",{class:d(["quickprint-is-scrollable",o.classes.desc])},[f(e.Document,{name:e.docName},null,8,["name"])],2)],2)}const Na={classes:Oa},Ba=F(Ta,[["render",Da],["__cssModules",Na],["__file","/home/dongls/work/quickprint/packages/designer/variable/Builtin.vue"]]),Ho=[{label:"文本",value:re.STRING},{label:"数字",value:re.NUMBER},{label:"日期",value:re.DATE},{label:"对象",value:re.OBJECT},{label:"数组",value:re.ARRAY}],Aa=q({emit:["select"],props:{doc:{type:Ee,required:!0},readonly:{type:Boolean,default:!1}},setup(o,{expose:t,emit:n}){const e=we("classes"),s=$e(),i=c(),l=r();function r(){const S=[{name:"$index"},{name:"$expand"},{name:"type",title:"类型",width:110,render(m,b,w){var V;if(o.readonly){const Z=m[b.name],L=((V=Ho.find(T=>T.value===Z))==null?void 0:V.label)??Z;return f("div",{class:w.classes.cell},[L])}return f("div",{class:w.classes.cell},[f(ie,{options:Ho,modelValue:m.type,"onUpdate:modelValue":v.bind(null,m),size:"small"},null)])}},{name:"name",title:"名称",width:180,render(m,b,w){return o.readonly?f("div",{class:w.classes.cell},[m[b.name]]):f("div",{class:w.classes.cell},[Re(f("input",{"onUpdate:modelValue":V=>m.name=V,type:"text",class:"quickprint-form-control quickprint-form-control-small",placeholder:"[必填] 请输入"},null),[[Ae,m.name]])])}},{name:"title",title:"标题",width:180,render(m,b,w){return o.readonly?f("div",{class:w.classes.cell},[m[b.name]]):f("div",{class:w.classes.cell},[Re(f("input",{"onUpdate:modelValue":V=>m.title=V,type:"text",class:"quickprint-form-control quickprint-form-control-small",placeholder:"[可选] 请输入"},null),[[Ae,m.title]])])}}];return o.readonly!==!0&&S.push({name:"operate",title:"操作",width:200,render(m,b,w){const V=[f("button",{type:"button",class:"quickprint-text-btn",onClick:p.bind(null,m,w.parent)},[f(K,{icon:"icon-subnode"},null),f("span",null,[ge("插入行")])])];return(m.type===re.ARRAY||m.type===re.OBJECT)&&V.push(f("button",{type:"button",class:"quickprint-text-btn",onClick:_.bind(null,m)},[f(K,{icon:"icon-sisternode"},null),f("span",null,[ge("插入子级")])])),V.push(f("button",{type:"button",class:"quickprint-text-btn",onClick:g.bind(null,m,w.parent)},[f(K,{icon:"icon-delete"},null),f("span",null,[ge("删除")])])),V}}),S}function c(){const S=vs(o.doc.ds.fields??[]).map(b=>{const w=b.type;return{...b,$expand:w===re.ARRAY||w===re.OBJECT}}),m=pe(S);return m.value.length==0&&m.value.push(a()),m}function a(){return{type:re.STRING,name:"",title:""}}function p(S,m){if(m){const w=m.children??[],V=w.indexOf(S);V>=0&&w.splice(V+1,0,a());return}const b=i.value.indexOf(S);b>=0&&i.value.splice(b+1,0,a())}function g(S,m){if(m){const w=m.children??[],V=w.indexOf(S);V>=0&&w.splice(V,1);return}const b=i.value.indexOf(S);b>=0&&i.value.splice(b,1),i.value.length==0&&i.value.push(a())}function _(S){S.type!==re.ARRAY&&S.type!==re.OBJECT||(S.children==null&&(S.children=[]),S.children.push(a()))}function v(S,m){S.type=m,m===re.ARRAY||m===re.OBJECT?S.$expand=!0:S.children=void 0}function y(){return{fields:i.value.map(m=>fe(m.name)?null:m.type!==re.ARRAY&&m.type!==re.OBJECT?{type:m.type,name:m.name,title:m.title}:{type:m.type,name:m.name,title:m.title,children:(m.children??[]).map(b=>fe(m.name)?null:{type:b.type,name:b.name,title:b.title}).filter(b=>b!=null)}).filter(m=>m!=null)}}function h(S,m){o.readonly===!0&&n("select",S,m)}return s==null||s.useHandle("confirm",y),t({submit:y}),function(){return f("div",{class:[e.datasource,o.readonly?e.readonly:e.form]},[f(ys,{columns:l,data:i.value,onSelect:h},null)])}}}),Ma="_form_6lybl_2",xa="_readonly_6lybl_6",Pa="_datasource_6lybl_11",qa={form:Ma,readonly:xa,datasource:Pa},Fa={classes:qa},Pl=F(Aa,[["__cssModules",Fa],["__file","/home/dongls/work/quickprint/packages/designer/variable/DataSource.vue"]]),Va=q({__name:"Detail",props:{element:{type:ue,required:!0}},setup(o,{expose:t}){t();const n=o,e=R(()=>{var i;return(i=Fn(n.element))==null?void 0:i.content}),s={props:n,ds:e,get formatElementType(){return cn},get formatDataSourceType(){return Sa}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),za="_detail_11ox4_2",Ua="_type_11ox4_10",Ha={detail:za,type:Ua},Ga={class:"quickprint-config-group"},Wa={class:"quickprint-config-section quickprint-config-inline"},ja={class:"quickprint-config-content"},Xa={class:"quickprint-config-section quickprint-config-inline"},Ya={class:"quickprint-config-content"},Za={class:"quickprint-config-id"},$a={class:"quickprint-config-section quickprint-config-inline"},Ka={class:"quickprint-config-content"},Qa={class:"quickprint-config-group"},Ja={class:"quickprint-config-group-title"};function ec(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.detail)},[u("div",Ga,[u("section",Wa,[t[0]||(t[0]=u("header",{class:"quickprint-config-header"},"类型",-1)),u("div",ja,Q(e.formatElementType(n.element.type)),1)]),u("section",Xa,[t[1]||(t[1]=u("header",{class:"quickprint-config-header"},"标识",-1)),u("div",Ya,[u("span",Za,Q(n.element.id),1)])]),u("section",$a,[t[2]||(t[2]=u("header",{class:"quickprint-config-header"},"标题",-1)),u("div",Ka,Q(n.element.title),1)])]),u("div",Qa,[u("div",Ja,[t[3]||(t[3]=u("span",null,"数据",-1)),u("span",{class:d(o.classes.type)},Q(e.formatDataSourceType(n.element.ds.type)),3)]),u("div",null,Q(e.ds),1)])],2)}const tc={classes:Ha},nc=F(Va,[["render",ec],["__cssModules",tc],["__file","/home/dongls/work/quickprint/packages/designer/variable/Reference/Detail.vue"]]),oc=q({__name:"index",props:{doc:{type:Ee,required:!0}},emits:["select"],setup(o,{expose:t,emit:n}){t();const e=n,s=o,i=c(),l=pe();function r(y){return y.reduce((h,S)=>{const m=Array.isArray(S.children)?r(S.children):[];if(ft(S.ds.value)||m.length>0){const b={value:S.id,label:S.title??S.id,data:S,children:m};return h.push(b),h}return h},[])}function c(){const y=s.doc.pages.reduce((S,m)=>S.concat(m.children),[]),h=r(y);return pe(h)}function a(y){l.value=y}function p(y){return y.title?y.title:cn(y.type)}function g(y){return v_(y.type)??"icon-zhanweifu"}function _(y){e("select",y.data)}const v={emit:e,props:s,tree:i,hovered:l,createTree:r,useTree:c,onHover:a,genElementTitle:p,genElementIcon:g,onClick:_,Detail:nc,get Icon(){return K},get Tree(){return lr}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),lc="_reference_1ekkx_2",sc="_panel_1ekkx_12",ic="_detail_1ekkx_20",rc="_title_1ekkx_25",ac="_id_1ekkx_29",cc={reference:lc,panel:sc,detail:ic,title:rc,id:ac};function uc(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.reference)},[u("div",{class:d([o.classes.panel,"quickprint-is-scrollable"])},[f(e.Tree,{data:e.tree,onNodeHover:e.onHover,onNodeClick:e.onClick},{default:Se(({node:l})=>[f(e.Icon,{icon:e.genElementIcon(l.data)},null,8,["icon"]),u("span",{class:d(o.classes.title)},Q(e.genElementTitle(l.data)),3),u("span",{class:d(o.classes.id)},"<"+Q(l.value)+">",3)]),_:1},8,["data"])],2),u("div",{class:d([o.classes.detail,"quickprint-is-scrollable"])},[e.hovered?(E(),ne(e.Detail,{element:e.hovered.data,key:e.hovered.value},null,8,["element"])):W("v-if",!0)],2)],2)}const dc={classes:cc},fc=F(oc,[["render",uc],["__cssModules",dc],["__file","/home/dongls/work/quickprint/packages/designer/variable/Reference/index.vue"]]),pc=q({__name:"index",props:{doc:{type:Ee,required:!0},value:{type:String,default:null},include:{type:Array,default(){return["ds","builtin"]}},active:{type:String,default:null}},setup(o,{expose:t}){t();const n=o,e=$e();function s(a,p){return a==null?null:p==null?`${Dt.DS}.${a.type}.${a.name}`:`${Dt.DS}.${a.type}.${p.name}.${a.name}`}function i(a,p){e==null||e.confirm({type:"ds",value:s(a,p),parent:p})}function l(a){e==null||e.confirm({type:"builtin",value:`${Dt.BUILTIN}.${a.type}.${a.value}`})}function r(a){e==null||e.confirm({type:"reference",value:a.id})}const c={props:n,winApi:e,buildValue:s,onSelectDataSource:i,onSelectBuiltin:l,onSelectReference:r,BuiltIn:Ba,DataSource:Pl,Reference:fc};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),mc={var:"_var_12wxd_2"};function gc(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.var)},[n.active==="ds"?(E(),ne(e.DataSource,{key:0,doc:n.doc,onSelect:e.onSelectDataSource,readonly:""},null,8,["doc"])):W("v-if",!0),n.active==="builtin"?(E(),ne(e.BuiltIn,{key:1,onSelect:e.onSelectBuiltin})):W("v-if",!0),n.active==="reference"?(E(),ne(e.Reference,{key:2,doc:n.doc,onSelect:e.onSelectReference},null,8,["doc"])):W("v-if",!0)],2)}const _c={classes:mc},ql=F(pc,[["render",gc],["__cssModules",_c],["__file","/home/dongls/work/quickprint/packages/designer/variable/index.vue"]]),hc=q({__name:"Document",props:{options:{type:Array,required:!0},type:{type:String,default:"function"}},emits:["select"],setup(o,{expose:t,emit:n}){var p;t();const e=o,s=n,i=pe((p=e.options[0])==null?void 0:p.value),l=R(()=>`${e.type}_${i.value.toLowerCase()}`);function r(g){s("select",g.value)}function c(g){i.value=g.value}const a={props:e,emit:s,current:i,docName:l,onSelect:r,onHover:c,get Document(){return xl}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),bc="_doc_1pdoc_2",vc="_panel_1pdoc_10",yc="_desc_1pdoc_16",Ec="_option_1pdoc_23",Sc="_active_1pdoc_33",Tc={doc:bc,panel:vc,desc:yc,option:Ec,active:Sc},kc=["onClick","onMouseenter"];function Rc(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.doc)},[u("div",{class:d(["quickprint-is-scrollable",o.classes.panel])},[(E(!0),I(oe,null,ce(n.options,l=>(E(),I("div",{key:l.value,class:d({[o.classes.option]:!0,[o.classes.active]:l.value===e.current}),onClick:r=>e.onSelect(l),onMouseenter:r=>e.onHover(l)},[u("strong",null,Q(l.label),1)],42,kc))),128))],2),u("div",{class:d(["quickprint-is-scrollable",o.classes.desc])},[f(e.Document,{name:e.docName},null,8,["name"])],2)],2)}const Ic={classes:Tc},wc=F(hc,[["render",Rc],["__cssModules",Ic],["__file","/home/dongls/work/quickprint/packages/designer/variable/Function/Document.vue"]]),Cc=q({__name:"index",props:{active:{type:String,default:null}},setup(o,{expose:t}){t();const n=o,e=$e(),s=[{label:"STRING",value:"STRING"},{label:"LENGTH",value:"LENGTH"},{label:"LOWER",value:"LOWER"},{label:"UPPER",value:"UPPER"},{label:"UPPER_FIRST",value:"UPPER_FIRST"},{label:"TRIM",value:"TRIM"},{label:"REPLACE",value:"REPLACE"},{label:"REPLACE_ALL",value:"REPLACE_ALL"},{label:"SLICE",value:"SLICE"},{label:"INCLUDES",value:"INCLUDES"},{label:"INDEX_OF",value:"INDEX_OF"},{label:"LAST_INDEX_OF",value:"LAST_INDEX_OF"},{label:"STARTS_WITH",value:"STARTS_WITH"},{label:"ENDS_WITH",value:"ENDS_WITH"}],i=[{label:"NUMBER",value:"NUMBER"},{label:"ABS",value:"ABS"},{label:"TRUNC",value:"TRUNC"},{label:"MIN",value:"MIN"},{label:"MAX",value:"MAX"},{label:"CEIL",value:"CEIL"},{label:"FLOOR",value:"FLOOR"},{label:"ROUND",value:"ROUND"},{label:"DIGIT",value:"DIGIT"},{label:"NUMBER_FORMAT",value:"NUMBER_FORMAT"}],l=[{label:"IF",value:"IF"},{label:"IFNA",value:"IFNA"},{label:"IFERROR",value:"IFERROR"},{label:"SWITCH",value:"SWITCH"},{label:"IS_NAN",value:"IS_NAN"},{label:"IS_NUMBER",value:"IS_NUMBER"},{label:"IS_INTEGER",value:"IS_INTEGER"},{label:"IS_STRING",value:"IS_STRING"},{label:"IS_BOOLEAN",value:"IS_BOOLEAN"},{label:"IS_NULL",value:"IS_NULL"},{label:"IS_UNDEFINED",value:"IS_UNDEFINED"},{label:"IS_NULLISH",value:"IS_NULLISH"},{label:"IS_EMPTY",value:"IS_EMPTY"}],r=[{label:"DATE",value:"DATE"},{label:"NOW",value:"NOW"},{label:"YEAR",value:"YEAR"},{label:"MONTH",value:"MONTH"},{label:"DAY",value:"DAY"},{label:"HOUR",value:"HOUR"},{label:"MINUTE",value:"MINUTE"},{label:"SECOND",value:"SECOND"}],c=[{label:"COL_SUM",value:"COL_SUM"},{label:"COL_AVG",value:"COL_AVG"}];function a(g){return e==null?void 0:e.confirm({type:"function",value:`${g}()`})}const p={props:n,windowApi:e,string:s,number:i,logical:l,date:r,aggregate:c,onSelect:a,Document:wc};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),Oc={function:"_function_19szx_2"};function Lc(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.function)},[n.active==="string"?(E(),ne(e.Document,{options:e.string,onSelect:e.onSelect,key:"string"})):W("v-if",!0),n.active==="number"?(E(),ne(e.Document,{options:e.number,onSelect:e.onSelect,key:"number"})):W("v-if",!0),n.active==="logical"?(E(),ne(e.Document,{options:e.logical,onSelect:e.onSelect,key:"logical"})):W("v-if",!0),n.active==="date"?(E(),ne(e.Document,{options:e.date,onSelect:e.onSelect,key:"date"})):W("v-if",!0),n.active==="aggregate"?(E(),ne(e.Document,{options:e.aggregate,onSelect:e.onSelect,key:"aggregate"})):W("v-if",!0)],2)}const Dc={classes:Oc},Nc=F(Cc,[["render",Lc],["__cssModules",Dc],["__file","/home/dongls/work/quickprint/packages/designer/variable/Function/index.vue"]]),Bc=q({__name:"Formula",props:{doc:{type:Ee,default:null}},setup(o,{expose:t}){t();const n=o,e=$e(),s=[{id:"pageNumber",name:"页码",options:a(li)}],i=pe(s[0]);function l(g){i.value=g}function r(g){return e==null?void 0:e.confirm({type:"formula",value:g})}function c(g){const _=On.tokenize(g),v=n.doc;return _.reduce((y,h)=>{if(h.type===pt.VARIABLE)return y.push({type:"highlight",value:it(h.value,v==null?void 0:v.ds)}),y;if(h.type===pt.REFERENCE)return y.push({type:"highlight",value:Ml(h.value,v)}),y;if(h.type===pt.TEMPLATE){const m=(Array.isArray(h.value)?h.value:[h.value]).map(b=>b.type===pt.VARIABLE?{type:"highlight",value:it(b.value,v.ds)}:{type:"text",value:b.value});return y.concat(m)}return y.push({type:"text",value:On.formatTokenValue(h)}),y},[])}function a(g){return g.map(_=>({nodes:c(_),value:_}))}const p={props:n,windowApi:e,list:s,current:i,onHover:l,onSelect:r,formatFormula:c,buildOptions:a};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),Ac="_formula_ms7c3_2",Mc="_left_ms7c3_12",xc="_right_ms7c3_17",Pc="_group_ms7c3_24",qc="_active_ms7c3_34",Fc="_highlight_ms7c3_39",Vc="_code_ms7c3_43",zc="_badge_ms7c3_65",Uc={formula:Ac,left:Mc,right:xc,group:Pc,active:qc,highlight:Fc,code:Vc,badge:zc},Hc=["onMouseenter"],Gc=["onClick"],Wc={key:1};function jc(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.formula)},[u("div",{class:d([o.classes.left,"quickprint-is-scrollable"])},[(E(),I(oe,null,ce(e.list,l=>u("div",{key:l.name,onMouseenter:r=>e.onHover(l),class:d({[o.classes.group]:!0,[o.classes.active]:l.id===e.current.id})},Q(l.name),43,Hc)),64))],2),u("div",{class:d(o.classes.right)},[(E(!0),I(oe,null,ce(e.current.options,(l,r)=>(E(),I("div",{key:r,class:d(o.classes.code),onClick:c=>e.onSelect(l.value)},[(E(!0),I(oe,null,ce(l.nodes,c=>(E(),I(oe,null,[c.type==="highlight"?(E(),I("span",{key:0,class:d(o.classes.highlight)},"["+Q(c.value)+"]",3)):(E(),I("span",Wc,Q(c.value),1))],64))),256)),u("span",{class:d(o.classes.badge)},"插入",2)],10,Gc))),128))],2)],2)}const Xc={classes:Uc},Yc=F(Bc,[["render",jc],["__cssModules",Xc],["__file","/home/dongls/work/quickprint/packages/designer/variable/Formula.vue"]]),Io=Ie(function(o){return We("变量",(t,n)=>f(ql,{doc:o.doc,value:o.value,active:n},null),{preset:"variable",icon:"svg:icon-var",tabs:[{label:"数据源",name:"ds",active:!0},{label:"内置变量",name:"builtin"},{label:"引用组件",name:"reference"}]}).promisify().catch(ke)}),Zc=Ie(function(o){return st("数据源",f(Pl,{doc:o},null),{preset:"variable",icon:f(K,{icon:"icon-datasource",class:"quickprint-ds-icon",size:"16px"},null),menus:[{label:"保存",handler:t=>t.dispatchConfirm()}]}).promisify().catch(ke)}),$c=Ie(function(o){const t=["ds","builtin","reference"];return We("变量",(n,e)=>f(ql,{doc:o.doc,value:o.value,include:t,active:e},null),{preset:"variable",icon:"svg:icon-var",tabs:[{label:"数据源",name:"ds",active:!0},{label:"内置变量",name:"builtin"},{label:"引用组件",name:"reference"}]}).promisify().catch(ke)}),Kc=Ie(function(){return We("函数",(o,t)=>f(Nc,{active:t},null),{preset:"variable",icon:"svg:icon-function",tabs:[{label:"文本",name:"string",active:!0},{label:"数字",name:"number"},{label:"日期",name:"date"},{label:"逻辑",name:"logical"},{label:"聚合",name:"aggregate"}]}).promisify().catch(ke)}),Qc=Ie(function(o){return st("公式",f(Yc,{doc:o.doc},null),{preset:"variable"}).promisify().catch(ke)}),Jc=q({__name:"Content",props:{element:{type:ue,required:!0},showDS:{type:Boolean,default:!0}},setup(o,{expose:t}){t();const n=o,e=Te(),s=me(),i=me(),l=pe(!1),r=R(()=>{const _=n.element.type===G.TABLE_CELL?ko(n.element,{exclude:["border"]}):dn(n.element);return _.color&&(_["--quickprint-element-var-color"]=_.color),l.value&&(_.alignItems="flex-start"),_}),c=R(()=>{const _=Fn(n.element);return _==null||_.content==null?null:[{tag:"span",content:n.element.attributes.prefix},{tag:_.type===ve.CONST?"span":"strong",content:_.content},{tag:"span",content:n.element.attributes.suffix}]});async function a(){var h;const _=await Io({doc:e.doc,value:n.element.ds.value}).catch(tt);if(_==null||(n.element.setDataSource(ve.VARIABLE,_.value),n.element.type!=G.TABLE_CELL||_.type!=="ds"))return;const v=n.element.parent;if(v==null||v.isBindVariable||((h=_.parent)==null?void 0:h.type)!==re.ARRAY)return;const y=_.parent;v.setDataSource(ve.VARIABLE,`${Dt.DS}.${y.type}.${y.name}`)}function p(){const _=s.value,v=i.value;_==null||v==null||(l.value=v.offsetHeight>_.offsetHeight)}const g={props:n,api:e,editorRef:s,contentRef:i,overflow:l,style:r,text:c,selectField:a,updateDom:p,get Icon(){return K}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),eu="_dsIcon_1d2si_2",tu="_lineThrough_1d2si_11",nu="_highlight_1d2si_15",ou={dsIcon:eu,lineThrough:tu,highlight:nu},lu={key:1};function su(o,t,n,e,s,i){return E(),I("div",{class:"quickprint-is-element-editor",style:Y(e.style),onVnodeMounted:e.updateDom,ref:"editorRef"},[u("span",{ref:"contentRef",class:d(["quickprint-is-content",{[o.classes.lineThrough]:n.element.style.lineThrough}])},[(E(!0),I(oe,null,ce(e.text,(l,r)=>(E(),I(oe,{key:r},[l.tag=="strong"?(E(),I("strong",{key:0,class:d(o.classes.highlight)},"["+Q(l.content)+"]",3)):l.tag=="span"&&l.content?(E(),I("span",lu,Q(l.content),1)):W("v-if",!0)],64))),128))],2),n.showDS&&n.element.isBindVariable?(E(),ne(e.Icon,{key:0,icon:"icon-ds",size:"11px",color:"#da7f00",class:d(o.classes.dsIcon),onClick:e.selectField,onPointerdown:t[0]||(t[0]=ae(()=>{},["stop"]))},null,8,["class"])):W("v-if",!0)],4)}const iu={classes:ou},Xt=F(Jc,[["render",su],["__cssModules",iu],["__file","/home/dongls/work/quickprint/packages/designer/elements/Content.vue"]]),ru=q({__name:"TextEditor",props:{element:{type:Es,required:!0}},setup(o,{expose:t}){t();const e={props:o,Content:Xt};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function au(o,t,n,e,s,i){return E(),ne(e.Content,{element:n.element},null,8,["element"])}const cu=F(ru,[["render",au],["__file","/home/dongls/work/quickprint/packages/designer/elements/Text/TextEditor.vue"]]),Vn=Object.freeze({title:"文本",icon:"icon-text",type:G.TEXT,editor:cu,onCreate(){return ue.create({type:G.TEXT,width:He,height:xn})}}),uu=q({__name:"NumberEditor",props:{element:{type:Ss,required:!0}},setup(o,{expose:t}){t();const e={props:o,Content:Xt};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function du(o,t,n,e,s,i){return E(),ne(e.Content,{element:n.element},null,8,["element"])}const fu=F(uu,[["render",du],["__file","/home/dongls/work/quickprint/packages/designer/elements/Number/NumberEditor.vue"]]),pu=q({__name:"RadioButton",props:Bt({modelValue:{},options:{type:Array,default(){return[]}},compacted:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o,{expose:t}){t();const n=o,e=un(o,"modelValue"),s={props:n,value:e};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),mu="_radioGroup_67myk_2",gu="_compacted_67myk_10",_u="_radio_67myk_2",hu="_selected_67myk_50",bu="_disabled_67myk_56",vu={radioGroup:mu,compacted:gu,radio:_u,selected:hu,disabled:bu},yu=["value","disabled"];function Eu(o,t,n,e,s,i){return E(),I("div",{class:d({[o.classes.radioGroup]:!0,[o.classes.compacted]:n.compacted,[o.classes.disabled]:n.disabled})},[(E(!0),I(oe,null,ce(n.options,l=>(E(),I("label",{class:d({[o.classes.radio]:!0,[o.classes.selected]:l.value===n.modelValue})},[Re(u("input",{type:"radio",value:l.value,"onUpdate:modelValue":t[0]||(t[0]=r=>e.value=r),disabled:n.disabled},null,8,yu),[[Hs,e.value]]),u("span",null,Q(l.label),1)],2))),256))],2)}const Su={classes:vu},zn=F(pu,[["render",Eu],["__cssModules",Su],["__file","/home/dongls/work/quickprint/packages/designer/components/Form/RadioButton.vue"]]),Tu=q({__name:"NumberConfig",props:{element:{type:ue,required:!0}},setup(o,{expose:t}){t();const n=o,e=R({get(){return n.element.attributes.showZero??!0},set(r){const c=n.element.attributes;c.showZero=r}}),s=R({get(){return n.element.attributes.round??tn.ROUND},set(r){const c=n.element.attributes;c.round=r}}),i=R({get(){return n.element.attributes.format??kt.NONE},set(r){const c=n.element.attributes;c.format=r}}),l={props:n,showZero:e,round:s,format:i,RadioButton:zn,get Select(){return ie},get SHOW_ZERO_OPTIONS(){return Ks},get NUMBER_FORMAT_OPTIONS(){return $s},get NUMBER_ROUND_OPTIONS(){return Zs}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),ku={class:"quickprint-config-section quickprint-config-inline"},Ru={class:"quickprint-config-content"},Iu={class:"quickprint-config-section quickprint-config-inline"},wu={class:"quickprint-config-content"},Cu={class:"quickprint-config-section quickprint-config-inline"},Ou={class:"quickprint-config-content"},Lu={class:"quickprint-config-section quickprint-config-inline"},Du={class:"quickprint-config-content"};function Nu(o,t,n,e,s,i){return E(),I(oe,null,[u("section",ku,[t[4]||(t[4]=u("header",{class:"quickprint-config-header"},"小数位数",-1)),u("div",Ru,[Re(u("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>n.element.attributes.precision=l),type:"number",step:"1",min:0,class:"quickprint-form-control quickprint-w-full",placeholder:"请输入"},null,512),[[Ae,n.element.attributes.precision]])])]),u("section",Iu,[t[5]||(t[5]=u("header",{class:"quickprint-config-header"},"舍入规则",-1)),u("div",wu,[f(e.Select,{options:e.NUMBER_ROUND_OPTIONS,modelValue:e.round,"onUpdate:modelValue":t[1]||(t[1]=l=>e.round=l),class:"quickprint-w-full"},null,8,["options","modelValue"])])]),u("section",Cu,[t[6]||(t[6]=u("header",{class:"quickprint-config-header"},"显示类型",-1)),u("div",Ou,[f(e.Select,{options:e.NUMBER_FORMAT_OPTIONS,modelValue:e.format,"onUpdate:modelValue":t[2]||(t[2]=l=>e.format=l),class:"quickprint-w-full"},null,8,["options","modelValue"])])]),u("section",Lu,[t[7]||(t[7]=u("header",{class:"quickprint-config-header"},"值为0时",-1)),u("div",Du,[f(e.RadioButton,{modelValue:e.showZero,"onUpdate:modelValue":t[3]||(t[3]=l=>e.showZero=l),options:e.SHOW_ZERO_OPTIONS,class:"quickprint-w-full"},null,8,["modelValue","options"])])])],64)}const Bu=F(Tu,[["render",Nu],["__file","/home/dongls/work/quickprint/packages/designer/elements/Number/NumberConfig.vue"]]),Un=Object.freeze({title:"数字",type:G.NUMBER,icon:"icon-number",editor:fu,config:{display:Bu},onCreate(){return ue.create({type:G.NUMBER,width:He,height:xn})}}),Au=q({__name:"DateEditor",props:{element:{type:Ts,required:!0}},setup(o,{expose:t}){t();const e={props:o,Content:Xt};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function Mu(o,t,n,e,s,i){return E(),ne(e.Content,{element:n.element},null,8,["element"])}const xu=F(Au,[["render",Mu],["__file","/home/dongls/work/quickprint/packages/designer/elements/Date/DateEditor.vue"]]),Pu=q({__name:"DateConfig",props:{element:{type:ue,required:!0}},setup(o,{expose:t}){t();const n=o,e={NONE:"NONE"},s=R(()=>[{label:"原始值",value:e.NONE},...kl]);function i(r){if(r.value==e.NONE){n.element.attributes.format=void 0;return}n.element.attributes.format=r.value}const l={props:n,SPECAL_TYPE:e,options:s,onSelect:i,get Select(){return ie}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),qu="_header_79607_2",Fu="_picker_79607_8",Vu="_placeholder_79607_15",zu={header:qu,picker:Fu,placeholder:Vu},Uu={class:"quickprint-config-section"},Hu={class:"quickprint-config-content"};function Gu(o,t,n,e,s,i){return E(),I("section",Uu,[u("header",{class:d(["quickprint-config-header",o.classes.header])},[t[1]||(t[1]=u("span",null,"格式",-1)),f(e.Select,{options:e.options,onSelect:e.onSelect,class:d(o.classes.picker),appearance:"none",size:"mini",border:"none",popoverWidth:200},{selected:Se(()=>[u("span",{class:d(o.classes.placeholder)},"预设模板",2)]),_:1},8,["options","class"])],2),u("div",Hu,[Re(u("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>n.element.attributes.format=l),class:"quickprint-form-control quickprint-w-full",placeholder:"请输入"},null,512),[[Ae,n.element.attributes.format]])])])}const Wu={classes:zu},ju=F(Pu,[["render",Gu],["__cssModules",Wu],["__file","/home/dongls/work/quickprint/packages/designer/elements/Date/DateConfig.vue"]]),Hn=Object.freeze({title:"日期",type:G.DATE,icon:"icon-date",editor:xu,config:{display:ju},onCreate(){return ue.create({type:G.DATE,width:He,height:xn})}}),Xu=q({__name:"Diagonal",props:{mode:{type:Number,default:0},labels:{type:Array,default:null},width:{type:Number,default:null},height:{type:Number,default:null}},setup(o,{expose:t}){t();const n=we("classes"),e=o,s=R(()=>e.mode===nt.TL_BR?{x1:"0",y1:"0",x2:"100%",y2:"100%"}:e.mode===nt.TR_BL?{x1:"100%",y1:"0",x2:"0",y2:"100%"}:null),i=R(()=>({[n.biagonal]:!0,[n.tlbr]:e.mode===nt.TL_BR,[n.trbl]:e.mode===nt.TR_BL})),l=R(()=>({width:e.width?`${e.width}px`:"100%",height:e.height?`${e.height}px`:"100%"})),r=R(()=>{var p,g;return(g=(p=e.labels)==null?void 0:p[0])==null?void 0:g.text}),c=R(()=>{var p,g;return(g=(p=e.labels)==null?void 0:p[1])==null?void 0:g.text}),a={classes:n,props:e,line:s,className:i,style:l,firstLabel:r,secondLabel:c};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),Yu="_biagonal_17a80_2",Zu="_firstLabel_17a80_9",$u="_secondLabel_17a80_10",Ku="_tlbr_17a80_15",Qu="_trbl_17a80_26",Ju="_line_17a80_37",ed={biagonal:Yu,firstLabel:Zu,secondLabel:$u,tlbr:Ku,trbl:Qu,line:Ju},td=["x1","y1","x2","y2"];function nd(o,t,n,e,s,i){return E(),I("div",{class:d(e.className),style:Y(e.style)},[e.line?(E(),I("svg",{key:0,class:d(e.classes.line)},[u("line",{x1:e.line.x1,y1:e.line.y1,x2:e.line.x2,y2:e.line.y2},null,8,td)],2)):W("v-if",!0),e.firstLabel?(E(),I("div",{key:1,class:d(e.classes.firstLabel)},Q(e.firstLabel),3)):W("v-if",!0),e.secondLabel?(E(),I("div",{key:2,class:d(e.classes.secondLabel)},Q(e.secondLabel),3)):W("v-if",!0)],6)}const od={classes:ed},wo=F(Xu,[["render",nd],["__cssModules",od],["__file","/home/dongls/work/quickprint/packages/designer/components/Mass/Diagonal.vue"]]),ld=q({__name:"TableCellEditor",props:{element:{type:an,required:!0}},setup(o,{expose:t}){t();const n=o,e=R(()=>n.element.isCollapsed),s=R(()=>{const y=n.element.attributes.diagonalMode;return y==null?!1:y!==nt.NONE}),i=Te(),l=we("classes"),r=R(()=>{const y=n.element,h=y.parent;return{[l.cell]:!0,[ee.SELECTED]:(h==null?void 0:h.isSelected)||y.isSelected}}),c=R(()=>{var m;const y=Lt((m=n.element.parent)==null?void 0:m.parent),h=Lt(n.element.parent),S=Lt(n.element);return{...g(n.element),..._(n.element),...Object.assign(y,h,S)}}),a=R(()=>{const y=ko(n.element,{exclude:["border","padding"]});return y.color&&(y["--quickprint-element-var-color"]=y.color),y});function p(y){y.button==0&&(y.ctrlKey?i.toggleMultiSelectedElement(n.element):i.selectElement(n.element))}function g(y){const h=y.findPrevDisplayedCell(),S=y.findNextDisplayedCell(),m=y.table,b=j(y,"left")??j(y.parent,"left")??j(m,"left"),w=j(h,"right")??j(h==null?void 0:h.parent,"right")??j(m,"right"),V=j(y,"right")??j(y.parent,"right")??j(m,"right"),Z=j(S,"left")??j(S==null?void 0:S.parent,"left")??j(m,"left"),L=Math.max(se.processLengthToPX(b)??0,se.processLengthToPX(w)??0),T=Math.max(se.processLengthToPX(V)??0,se.processLengthToPX(Z)??0);return{"--quickprint-cell-width":n.element.offsetWidth+"px","--quickprint-cell-border-left-width":L+"px","--quickprint-cell-border-right-width":T+"px"}}function _(y){var P,N;const h=y.index,S=y.table,m=(P=y.findPrevDisplayedRow())==null?void 0:P.children[h],b=(N=y.findNextDisplayedRow())==null?void 0:N.children[h],w=j(y,"top")??j(y.parent,"top")??j(S,"top"),V=j(m,"bottom")??j(m==null?void 0:m.parent,"bottom")??j(S,"bottom"),Z=j(y,"bottom")??j(y.parent,"bottom")??j(S,"bottom"),L=j(b,"top")??j(b==null?void 0:b.parent,"top")??j(S,"top"),T=Math.max(se.processLengthToPX(w)??0,se.processLengthToPX(V)??0),M=Math.max(se.processLengthToPX(Z)??0,se.processLengthToPX(L)??0);return{"--quickprint-cell-height":y.offsetHeight+"px","--quickprint-cell-border-top-width":T+"px","--quickprint-cell-border-bottom-width":M+"px"}}const v={props:n,hidden:e,showDiagonal:s,api:i,classes:l,className:r,cellStyle:c,diagonalStyle:a,onSelectCell:p,processWidthStyle:g,processHeightStyle:_,Content:Xt,Diagonal:wo,get PROP_ELEMENT(){return Ze}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),sd="_cell_10c6k_2",id="_content_10c6k_32",rd={cell:sd,content:id},ad=["colspan","rowspan"];function cd(o,t,n,e,s,i){return e.hidden?W("v-if",!0):(E(),I("td",vl({key:0,[`.${e.PROP_ELEMENT||""}`]:n.element,class:e.className,style:e.cellStyle,colspan:n.element.attributes.colspan,rowspan:n.element.attributes.rowspan,onClick:ae(e.onSelectCell,["stop"])}),[e.showDiagonal?(E(),ne(e.Diagonal,{key:0,mode:n.element.attributes.diagonalMode,labels:n.element.attributes.diagonalLabels,width:n.element.offsetWidth,height:n.element.offsetHeight,style:Y(e.diagonalStyle)},null,8,["mode","labels","width","height","style"])):(E(),ne(e.Content,{key:1,element:n.element,class:d(e.classes.content)},null,8,["element","class"]))],48,ad))}const ud={classes:rd},Fl=F(ld,[["render",cd],["__cssModules",ud],["__file","/home/dongls/work/quickprint/packages/designer/elements/Table/TableCellEditor.vue"]]);function Vl(o,t){return{type:"menu",label:"层级",icon:"icon-cengji",submenu:[{type:"menu",icon:"icon-vertical-align-top",label:"移至顶层",handler(){const n=t.page;if(n==null)return;const e=n.topZIndex;t.setZIndex(e+1),o.createSnapshot()}},{type:"menu",label:"上移一层",icon:"icon-arrowup",handler(){const n=t.zIndex;t.setZIndex(n+1),o.createSnapshot()}},{type:"menu",icon:"icon-arrowdown",label:"下移一层",handler(){const n=t.zIndex;n<=0||(t.setZIndex(n-1),o.createSnapshot())}},{type:"menu",icon:"icon-vertical-align-bottom",label:"移至底层",handler(){t.setZIndex(0),o.createSnapshot()}}]}}const dd=[{label:"微软雅黑",value:"Microsoft YaHei"},{label:"宋体",value:he.SONG},{label:"黑体",value:"黑体"},{label:"仿宋",value:"仿宋"},{label:"楷体",value:"楷体"}],zl=[{label:"Arial",value:"Arial"},{label:"Consolas",value:"Consolas"},{label:"Times",value:"Times"},{label:"Times New Roman",value:"Times New Roman"}],Ul=[{label:"默认",value:he.DEFAULT},...zl],Gn=[{label:"默认",value:he.DEFAULT},...dd,...zl],Co=[{label:"默认",value:Oe.DEFAULT},{label:"初号",value:Oe.SIZE_0+"pt",short:"56px"},{label:"小初",value:Oe.SIZE_0_S+"pt",short:"≈49.33px"},{label:"一号",value:Oe.SIZE_1+"pt",short:"≈34.67px"},{label:"小一",value:Oe.SIZE_1_S+"pt",short:"32px"},{label:"二号",value:Oe.SIZE_2+"pt",short:"≈29.33px"},{label:"小二",value:Oe.SIZE_2_S+"pt",short:"24px"},{label:"三号",value:Oe.SIZE_3+"pt",short:"≈21.33px"},{label:"小三",value:Oe.SIZE_3_S+"pt",short:"20px"},{label:"四号",value:Oe.SIZE_4+"pt",short:"≈18.67px"},{label:"小四",value:Oe.SIZE_4_S+"pt",short:"16px"},{label:"五号",value:Oe.SIZE_5+"pt",short:"14px"},{label:"小五",value:Oe.SIZE_5_S+"pt",short:"12px"},{label:"12px",value:"12px"},{label:"13px",value:"13px"},{label:"14px",value:"14px"},{label:"15px",value:"15px"},{label:"16px",value:"16px"},{label:"18px",value:"18px"},{label:"20px",value:"20px"},{label:"22px",value:"22px"},{label:"24px",value:"24px"},{label:"28px",value:"28px"},{label:"32px",value:"32px"},{label:"36px",value:"36px"},{label:"42px",value:"42px"},{label:"48px",value:"48px"},{label:"56px",value:"56px"},{label:"72px",value:"72px"}],Hl=[{label:"默认",value:Rt.DEFAULT},{label:"1.0",value:Rt.TIMES_1,short:"单倍行距"},{label:"1.1",value:Rt.TIMES_1_1},{label:"1.5",value:Rt.TIMES_1_5},{label:"2.0",value:Rt.TIMES_2,short:"两倍行距"}],fd=[{label:"无",value:hn.NONE},{label:"实线",value:Mt.SOLID},{label:"虚线",value:Mt.DASHED},{label:"点划线",value:Mt.DOTTED},{label:"双实线",value:Mt.DOUBLE},{label:"波浪线",value:Mt.WAVY}],pd=[{label:"无",value:le.NONE},{label:"实线",value:le.SOLID},{label:"虚线",value:le.DASHED},{label:"点划线",value:le.DOTTED},{label:"双实线",value:le.DOUBLE}],md=[{label:"默认",value:It.AUTO},{label:"左对齐",value:It.LEFT},{label:"居中对齐",value:It.CENTER},{label:"右对齐",value:It.RIGHT},{label:"两端对齐",value:It.JUSTIFY}],go=[{label:"顶部对齐",value:ot.TOP,icon:"icon-vertical-align-top"},{label:"垂直居中",value:ot.MIDDLE,icon:"icon-vertical-align-middl"},{label:"底部对齐",value:ot.BOTTOM,icon:"icon-vertical-align-bottom"}],_o=[{label:"左对齐",value:mt.LEFT,icon:"icon-align-left"},{label:"居中对齐",value:mt.CENTER,icon:"icon-align-center"},{label:"右对齐",value:mt.RIGHT,icon:"icon-align-right"},{label:"两端对齐",value:mt.JUSTIFY,icon:"icon-menu"}],gd=q({__name:"FontSize",props:{modelValue:{type:String,default:null},height:{type:String,default:"100%"}},emits:["update:modelValue","update:unit"],setup(o,{expose:t,emit:n}){t();const e=[{value:"px",label:"像素"},{value:"pt",label:"磅"}],s=we("classes"),i=n,l=o,r=me(),c=R(()=>({height:l.height})),a=R({get(){return gt(l.modelValue).num??void 0},set(S){if(S==""||ks(S)||S<0){_(void 0);return}const m=gt(l.modelValue);_(`${S}${m.unit}`)}}),p=R({get(){return gt(l.modelValue).unit??de.PX},set(S){const m=gt(l.modelValue);_(`${m.num}${S}`)}});function g(S){const m=S===Oe.DEFAULT?void 0:S;i("update:modelValue",m)}function _(S){i("update:modelValue",S),y()}function v(S){const m=l.modelValue;return m==null&&S.value===Oe.DEFAULT?!0:m===S.value}async function y(){await Wt();const S=document.querySelector("."+s.fontSelected);S&&S.scrollIntoView({block:"nearest"})}const h={FONT_SIZE_UNIT:e,classes:s,emit:i,props:l,scrollRef:r,style:c,fontSizeNum:a,fontSizeUnit:p,setFontSize:g,updateValue:_,isSelectFont:v,showSelected:y,get Select(){return ie},get FONT_SIZE_OPTIONS(){return Co}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),_d="_input_9oh9n_2",hd="_fontSize_9oh9n_8",bd="_fonts_9oh9n_13",vd="_option_9oh9n_25",yd="_fontSelected_9oh9n_34",Ed={input:_d,fontSize:hd,fonts:bd,option:vd,fontSelected:yd},Sd={class:"quickprint-is-row"},Td=["onClick"];function kd(o,t,n,e,s,i){return E(),I("div",{class:d(e.classes.fontSize),style:Y(e.style)},[u("div",Sd,[Re(u("input",{type:"number",step:"any",placeholder:"请输入",class:d(["quickprint-form-control",e.classes.input]),min:0,"onUpdate:modelValue":t[0]||(t[0]=l=>e.fontSizeNum=l)},null,2),[[Ae,e.fontSizeNum]]),f(e.Select,{width:"54px",options:e.FONT_SIZE_UNIT,modelValue:e.fontSizeUnit,"onUpdate:modelValue":t[1]||(t[1]=l=>e.fontSizeUnit=l)},null,8,["modelValue"])]),u("div",{class:d(["quickprint-is-fill-h quickprint-is-scrollable",e.classes.fonts]),ref:"scrollRef"},[(E(!0),I(oe,null,ce(e.FONT_SIZE_OPTIONS,l=>(E(),I("div",{key:l.value,class:d({[e.classes.option]:!0,[e.classes.fontSelected]:e.isSelectFont(l)}),onClick:r=>e.setFontSize(l.value)},[u("span",null,Q(l.label),1)],10,Td))),128))],2)],6)}const Rd={classes:Ed},Gl=F(gd,[["render",kd],["__cssModules",Rd],["__file","/home/dongls/work/quickprint/packages/designer/editor/Setting/components/FontSize.vue"]]),Id="中文字体 AbBbCc",wd=q({__name:"Font",props:{options:{type:Object,required:!0}},setup(o,{expose:t}){t();const n=o,e=R(()=>Gn.map(m=>(m.style={fontFamily:m.value==he.DEFAULT?he.SONG:m.value},m))),s=R(()=>Ul.map(m=>(m.style={fontFamily:m.value==he.DEFAULT?he.SONG:m.value},m))),i=R({get(){const m=n.options.style.fontFamily;return fe(m)?he.DEFAULT:m},set(m){n.options.style.fontFamily=m==he.DEFAULT?void 0:m}}),l=R({get(){const m=n.options.style.enFontFamily;return fe(m)?he.DEFAULT:m},set(m){n.options.style.enFontFamily=m==he.DEFAULT?void 0:m}}),r=R({get(){const m=n.options.style.color;return fe(m)?Pe.INHERIT:m},set(m){n.options.style.color=m==Pe.INHERIT?void 0:m}}),c=R({get(){const m=n.options.style.highlightColor;return fe(m)?Pe.INHERIT:m},set(m){n.options.style.highlightColor=m==Pe.INHERIT?void 0:m}}),a=R({get(){return n.options.style.fontSize},set(m){const b=fe(m)?void 0:m;n.options.style.fontSize=b}}),p=R({get(){return n.options.style.fontWeight===700},set(m){n.options.style.fontWeight=m?700:void 0}}),g=R({get(){return n.options.style.fontStyle==="italic"},set(m){n.options.style.fontStyle=m?"italic":void 0}}),_=R({get(){return n.options.style.lineThrough===!0},set(m){n.options.style.lineThrough=m?!0:void 0}}),v=R({get(){const m=n.options.style.underline;if(m==null||m===!1)return hn.NONE;const b=n.options.style.underlineStyle;return fe(b)?Mt.SOLID:b},set(m){if(m===hn.NONE){n.options.style.underline=void 0,n.options.style.underlineStyle=void 0;return}n.options.style.underline=!0,n.options.style.underlineStyle=m}}),y=R({get(){const m=n.options.style.underlineColor;return fe(m)?Pe.INHERIT:m},set(m){n.options.style.underlineColor=m==Pe.INHERIT?void 0:m}}),h=R(()=>{const m=n.options.style,b={},w=yo(m.fontFamily,m.enFontFamily);w&&(b.fontFamily=w);const V=il(m);return V&&Object.assign(b,V),m.fontSize&&(b.fontSize=m.fontSize),m.fontWeight&&(b.fontWeight=m.fontWeight),m.color&&(b.color=m.color),m.fontStyle&&(b.fontStyle=m.fontStyle),m.highlightColor&&(b["--quickprint-variable-highlight-color"]=m.highlightColor),b}),S={props:n,PREVIEW_TEXT:Id,zhFontOptions:e,enFontOptions:s,zhFont:i,enFont:l,fontColor:r,highlightColor:c,fontSize:a,fontWeight:p,italic:g,lineThrough:_,underline:v,underlineColor:y,preview:h,FontSize:Gl,get TEXT_DECORATION_LINE(){return hn},get TEXT_DECORATION_STYLE_OPTIONS(){return fd},get Select(){return ie},get ColorInput(){return qn}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),Cd="_grid2_7i8m3_1",Od="_item_7i8m3_1",Ld="_itemLabel_7i8m3_1",Dd="_fieldset_7i8m3_1",Nd="_font_7i8m3_4",Bd="_fontFamily_7i8m3_9",Ad="_config_7i8m3_16",Md="_fontSize_7i8m3_21",xd="_title_7i8m3_25",Pd="_configs_7i8m3_30",qd="_checkbox_7i8m3_36",Fd="_option_7i8m3_51",Vd="_line_7i8m3_59",zd="_preview_7i8m3_70",Ud="_lineThrough_7i8m3_85",Hd={grid2:Cd,item:Od,itemLabel:Ld,fieldset:Dd,font:Nd,fontFamily:Bd,config:Ad,fontSize:Md,title:xd,configs:Pd,checkbox:qd,option:Fd,line:Vd,preview:zd,lineThrough:Ud},Gd=["title"],Wd={key:0};function jd(o,t,n,e,s,i){return E(),I("div",{class:d(["quickprint-is-scrollable quickprint-is-fill-h",o.classes.font])},[u("div",{class:d(o.classes.fontFamily)},[u("div",{class:d(o.classes.config)},[u("div",{class:d(o.classes.title)},"中文字体",2),u("div",{class:d(o.classes.content)},[f(e.Select,{options:e.zhFontOptions,modelValue:e.zhFont,"onUpdate:modelValue":t[0]||(t[0]=l=>e.zhFont=l)},null,8,["options","modelValue"])],2)],2),u("div",{class:d(o.classes.config)},[u("div",{class:d(o.classes.title)},"颜色",2),f(e.ColorInput,{modelValue:e.fontColor,"onUpdate:modelValue":t[1]||(t[1]=l=>e.fontColor=l)},null,8,["modelValue"])],2),u("div",{class:d([o.classes.config,o.classes.fontSize])},[u("div",{class:d(o.classes.title)},"字号",2),f(e.FontSize,{modelValue:e.fontSize,"onUpdate:modelValue":t[2]||(t[2]=l=>e.fontSize=l),height:"144px"},null,8,["modelValue"])],2),u("div",{class:d(o.classes.config)},[u("div",{class:d(o.classes.title)},"西文字体",2),u("div",{class:d(o.classes.content)},[f(e.Select,{options:e.enFontOptions,modelValue:e.enFont,"onUpdate:modelValue":t[3]||(t[3]=l=>e.enFont=l)},null,8,["options","modelValue"])],2)],2),u("div",{class:d(o.classes.config)},[u("div",{class:d(o.classes.title)},"前景色",2),f(e.ColorInput,{modelValue:e.highlightColor,"onUpdate:modelValue":t[4]||(t[4]=l=>e.highlightColor=l)},null,8,["modelValue"])],2),u("div",{class:d(o.classes.config)},[u("div",{class:d(o.classes.title)},"下划线",2),u("div",{class:d(o.classes.content)},[f(e.Select,{modelValue:e.underline,"onUpdate:modelValue":t[5]||(t[5]=l=>e.underline=l),options:e.TEXT_DECORATION_STYLE_OPTIONS,width:"138px"},{option:Se(({option:l})=>[u("div",{title:l.label,class:d(o.classes.option)},[l.value==e.TEXT_DECORATION_LINE.NONE?(E(),I("div",Wd,Q(l.label),1)):(E(),I("div",{key:1,class:d(o.classes.line),style:Y({textDecorationStyle:l.value})},"--",6))],10,Gd)]),_:1},8,["modelValue","options"])],2)],2),u("div",{class:d(o.classes.config)},[u("div",{class:d(o.classes.title)},"线条颜色",2),u("div",{class:d(o.classes.content)},[f(e.ColorInput,{modelValue:e.underlineColor,"onUpdate:modelValue":t[6]||(t[6]=l=>e.underlineColor=l),class:"quickprint-w-full"},null,8,["modelValue"])],2)],2)],2),u("div",{class:d(o.classes.fieldset)},[t[13]||(t[13]=u("header",null,"效果",-1)),u("div",{class:d(o.classes.configs)},[u("label",{class:d(o.classes.checkbox)},[Re(u("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=l=>e.fontWeight=l)},null,512),[[lo,e.fontWeight]]),t[10]||(t[10]=u("span",null,"粗体",-1))],2),u("label",{class:d(o.classes.checkbox)},[Re(u("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=l=>e.italic=l)},null,512),[[lo,e.italic]]),t[11]||(t[11]=u("span",null,"斜体",-1))],2),u("label",{class:d(o.classes.checkbox)},[Re(u("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=l=>e.lineThrough=l)},null,512),[[lo,e.lineThrough]]),t[12]||(t[12]=u("span",null,"删除线",-1))],2)],2)],2),u("div",{class:d(o.classes.fieldset)},[t[14]||(t[14]=u("header",null,"预览",-1)),u("div",{class:d(o.classes.preview)},[u("span",{style:Y(e.preview)},[u("span",{class:d({[o.classes.lineThrough]:n.options.style.lineThrough})},Q(e.PREVIEW_TEXT),2)],4)],2)],2)],2)}const Xd={classes:Hd},Yd=F(wd,[["render",jd],["__cssModules",Xd],["__file","/home/dongls/work/quickprint/packages/designer/editor/Setting/Element/Font.vue"]]),Zd=q({__name:"InputWithUnit",props:{modelValue:{type:String,default:void 0},options:{type:Array,required:!0},placeholder:{type:String,default:"请输入"},defaultUnit:{type:String,default:null},min:{type:Number,default:0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{expose:t,emit:n}){t();const e=n,s=o,i=R(()=>{const p=s.defaultUnit;return s.options.some(g=>g.value===p)?p:s.options[0].value}),l=R({get(){return gt(s.modelValue).num},set(p){if(dl(p)){const _=gt(s.modelValue).unit??i.value;return c(`${p}${_}`)}c()}}),r=R({get(){return gt(s.modelValue).unit??i.value},set(p){const _=gt(s.modelValue).num??s.min;c(`${_}${p}`)}});function c(p=void 0){e("update:modelValue",p)}const a={emit:e,props:s,defUnit:i,num:l,unit:r,updateValue:c,get Select(){return ie}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),$d="_input_gtdaq_2",Kd="_unit_gtdaq_14",Qd={input:$d,unit:Kd},Jd=["placeholder","min","disabled"];function ef(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.input)},[Re(u("input",{type:"number",step:"any","onUpdate:modelValue":t[0]||(t[0]=l=>e.num=l),class:d({"quickprint-form-control":!0,"quickprint-form-disabled":n.disabled}),placeholder:n.placeholder,min:n.min,disabled:n.disabled},null,10,Jd),[[Ae,e.num]]),f(e.Select,{modelValue:e.unit,"onUpdate:modelValue":t[1]||(t[1]=l=>e.unit=l),class:d(o.classes.unit),options:n.options,width:"auto",border:"none",disabled:n.disabled},null,8,["modelValue","class","options","disabled"])],2)}const tf={classes:Qd},Yt=F(Zd,[["render",ef],["__cssModules",tf],["__file","/home/dongls/work/quickprint/packages/designer/components/Form/InputWithUnit.vue"]]),nf="永和九年，岁在癸丑，暮春之初，会于会稽山阴之兰亭，修禊事也。群贤毕至，少长咸集。此地有崇山峻岭，茂林修竹；又有清流激湍，映带左右，引以为流觞曲水，列坐其次。虽无丝竹管弦之盛，一觞一咏，亦足以畅叙幽情。是日也，天朗气清，惠风和畅，仰观宇宙之大，俯察品类之盛，所以游目骋怀，足以极视听之娱，信可乐也。",of=q({__name:"Paragraph",props:{options:{type:Object,required:!0}},setup(o,{expose:t}){t();const n=o,e=[{label:"倍",value:de.NONE},{label:"磅",value:de.PT},{label:"像素",value:de.PX}],s=[{label:"字符",value:de.EM},{label:"磅",value:de.PT},{label:"像素",value:de.PX}],i=[{label:"毫米",value:de.MM},{label:"磅",value:de.PT},{label:"像素",value:de.PX}],l=R({get(){return n.options.style.textAlign??mt.LEFT},set(b){const w=b===mt.LEFT?void 0:b;n.options.style.textAlign=w}}),r=R({get(){return n.options.style.textAlignLast??It.AUTO},set(b){const w=b===It.AUTO?void 0:b;n.options.style.textAlignLast=w}}),c=R({get(){return n.options.style.verticalAlign??ot.MIDDLE},set(b){const w=b===ot.MIDDLE?void 0:b;n.options.style.verticalAlign=w}}),a=h("paddingTop"),p=h("paddingBottom"),g=h("paddingLeft"),_=h("paddingRight"),v=R(()=>{const b=n.options.style,w={};return b.textAlign&&(w.textAlign=b.textAlign),b.textAlignLast&&(w.textAlignLast=b.textAlignLast),b.textIndent&&(w.textIndent=b.textIndent),b.lineHeight&&(w.lineHeight=b.lineHeight),Object.assign(w,S(b.verticalAlign)),w}),y=R(()=>{const b=n.options.style,w={};return w["--openprint-paragraph-preview-padding-top"]=b.paddingTop??"2px",w["--openprint-paragraph-preview-padding-right"]=b.paddingRight??"2px",w["--openprint-paragraph-preview-padding-bottom"]=b.paddingBottom??"2px",w["--openprint-paragraph-preview-padding-left"]=b.paddingLeft??"2px",w});function h(b){return R({get(){return n.options.style[b]},set(w){const V=fe(w)?void 0:w;n.options.style[b]=V}})}function S(b){return b==null?{}:b==ot.MIDDLE||b==null?{display:"flex",alignItems:"center"}:b==ot.BOTTOM?{display:"flex",alignItems:"end"}:{}}const m={props:n,PREVIEW_TEXT:nf,LINE_HEIGHT_UNITS:e,TEXT_INDENT_UNITS:s,PADDING_UNITS:i,textAlign:l,textAlignLast:r,verticalAlign:c,paddingTop:a,paddingBottom:p,paddingLeft:g,paddingRight:_,preview:v,padding:y,createPaddingProp:h,createVerticalAlign:S,get TEXT_ALIGN_OPTIONS(){return _o},get TEXT_ALIGN_LAST_OPTIONS(){return md},get VERTICAL_ALIGN_OPTIONS(){return go},get Select(){return ie},InputWithUnit:Yt};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),lf="_grid2_6gzjg_1",sf="_item_6gzjg_1",rf="_itemLabel_6gzjg_1",af="_fieldset_6gzjg_1",cf="_paragraph_6gzjg_4",uf="_preview_6gzjg_9",df="_textAlign_6gzjg_25 quickprint-is-row",ff="_configItem_6gzjg_30 quickprint-is-row",pf="_alignLast_6gzjg_35 quickprint-is-row",mf="_configItemLabel_6gzjg_45",gf="_padding_6gzjg_50",_f="_paddingItem_6gzjg_57",hf="_paddingItemLabel_6gzjg_63",bf="_previewText_6gzjg_68",vf="_paddingPreview_6gzjg_77",yf={grid2:lf,item:sf,itemLabel:rf,fieldset:af,paragraph:cf,preview:uf,textAlign:df,configItem:ff,alignLast:pf,configItemLabel:mf,padding:gf,paddingItem:_f,paddingItemLabel:hf,previewText:bf,paddingPreview:vf};function Ef(o,t,n,e,s,i){return E(),I("div",{class:d(["quickprint-is-scrollable quickprint-is-fill-h",o.classes.paragraph])},[u("div",{class:d(o.classes.textAlign)},[u("div",{class:d(o.classes.configItem)},[u("div",{class:d(o.classes.configItemLabel)},"文本对齐",2),f(e.Select,{options:e.TEXT_ALIGN_OPTIONS,modelValue:e.textAlign,"onUpdate:modelValue":t[0]||(t[0]=l=>e.textAlign=l)},null,8,["options","modelValue"])],2),u("div",{class:d(o.classes.alignLast)},[u("div",{class:d(o.classes.configItemLabel)},"最后一行",2),f(e.Select,{options:e.TEXT_ALIGN_LAST_OPTIONS,modelValue:e.textAlignLast,"onUpdate:modelValue":t[1]||(t[1]=l=>e.textAlignLast=l)},null,8,["options","modelValue"])],2)],2),u("div",{class:d(o.classes.configItem)},[u("div",{class:d(o.classes.configItemLabel)},"垂直对齐",2),f(e.Select,{options:e.VERTICAL_ALIGN_OPTIONS,modelValue:e.verticalAlign,"onUpdate:modelValue":t[2]||(t[2]=l=>e.verticalAlign=l)},null,8,["options","modelValue"])],2),u("div",{class:d(o.classes.configItem)},[u("div",{class:d(o.classes.configItemLabel)},"首行缩进",2),f(e.InputWithUnit,{modelValue:n.options.style.textIndent,"onUpdate:modelValue":t[3]||(t[3]=l=>n.options.style.textIndent=l),options:e.TEXT_INDENT_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),u("div",{class:d(o.classes.configItem)},[u("div",{class:d(o.classes.configItemLabel)},"行高",2),f(e.InputWithUnit,{modelValue:n.options.style.lineHeight,"onUpdate:modelValue":t[4]||(t[4]=l=>n.options.style.lineHeight=l),options:e.LINE_HEIGHT_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),W(` <div :class="classes.fieldset">
      <header>文字方向</header>
    </div> `),u("div",{class:d(o.classes.fieldset)},[t[9]||(t[9]=u("header",null,"内边距",-1)),u("div",{class:d(o.classes.padding)},[u("div",{class:d(o.classes.paddingItem)},[u("label",{class:d(o.classes.paddingItemLabel)},"上边距",2),f(e.InputWithUnit,{modelValue:e.paddingTop,"onUpdate:modelValue":t[5]||(t[5]=l=>e.paddingTop=l),options:e.PADDING_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),u("div",{class:d(o.classes.paddingItem)},[u("label",{class:d(o.classes.paddingItemLabel)},"下边距",2),f(e.InputWithUnit,{modelValue:e.paddingBottom,"onUpdate:modelValue":t[6]||(t[6]=l=>e.paddingBottom=l),options:e.PADDING_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),u("div",{class:d(o.classes.paddingItem)},[u("label",{class:d(o.classes.paddingItemLabel)},"左边距",2),f(e.InputWithUnit,{modelValue:e.paddingLeft,"onUpdate:modelValue":t[7]||(t[7]=l=>e.paddingLeft=l),options:e.PADDING_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),u("div",{class:d(o.classes.paddingItem)},[u("label",{class:d(o.classes.paddingItemLabel)},"右边距",2),f(e.InputWithUnit,{modelValue:e.paddingRight,"onUpdate:modelValue":t[8]||(t[8]=l=>e.paddingRight=l),options:e.PADDING_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2)],2)],2),u("div",{class:d(o.classes.fieldset)},[t[10]||(t[10]=u("header",null,"预览",-1)),u("div",{class:d(o.classes.preview),style:Y(e.preview)},[u("div",{style:Y(e.padding),class:d(o.classes.previewText)},[ge(Q(e.PREVIEW_TEXT)+" "),u("div",{class:d(o.classes.paddingPreview)},null,2)],6)],6)],2)],2)}const Sf={classes:yf},Tf=F(of,[["render",Ef],["__cssModules",Sf],["__file","/home/dongls/work/quickprint/packages/designer/editor/Setting/Element/Paragraph.vue"]]),kf=q({__name:"Border",props:{options:{type:Object,required:!0}},setup(o,{expose:t}){t();const n=we("classes"),e=o,s=[{label:"像素",value:de.PX},{label:"毫米",value:de.MM},{label:"磅",value:de.PT}],i={BORDER_TOP:0,BORDER_RIGHT:1,BORDER_BOTTOM:2,BORDER_LEFT:3,RADIUS_TOP_LEFT:4,RADIUS_TOP_RIGHT:5,RADIUS_BOTTOM_LEFT:6,RADIUS_BOTTOM_RIGHT:7},l={[i.BORDER_TOP]:"上边框",[i.BORDER_RIGHT]:"右边框",[i.BORDER_BOTTOM]:"下边框",[i.BORDER_LEFT]:"左边框",[i.RADIUS_TOP_LEFT]:"左上圆角",[i.RADIUS_TOP_RIGHT]:"右上圆角",[i.RADIUS_BOTTOM_LEFT]:"左下圆角",[i.RADIUS_BOTTOM_RIGHT]:"右下圆角"},r=pe(),c=R(()=>{const k=r.value;return k==null?"全部边框":l[k]}),a=R(()=>{const k=r.value;return k==null?!0:k<=i.BORDER_LEFT}),p=R(()=>{const k=r.value;return k==null?!0:k>=i.RADIUS_TOP_LEFT}),g=R(()=>{const k=r.value;return{[n.box]:!0,[n.highlightTopLeft]:k==i.RADIUS_TOP_LEFT,[n.highlightTopRight]:k==i.RADIUS_TOP_RIGHT,[n.highlightBottomLeft]:k==i.RADIUS_BOTTOM_LEFT,[n.highlightBottomRight]:k==i.RADIUS_BOTTOM_RIGHT}}),_=R(()=>({...w(i.BORDER_TOP),...w(i.BORDER_RIGHT),...w(i.BORDER_BOTTOM),...w(i.BORDER_LEFT),...b()})),v=R({get(){var U;const k=e.options.style,D=r.value;if(D==null||D>i.BORDER_LEFT)return k.borderWidth;const A=(U=St(D))==null?void 0:U.width;if(A!=null)return Reflect.get(k,A)},set(k){const D=e.options.style,A=r.value,U=k??void 0;if(A==null||A>i.BORDER_LEFT){D.borderWidth=U;return}const z=St(A);z!=null&&Reflect.set(D,z.width,U)}}),y=R({get(){var U;const k=e.options.style,D=r.value;if(D==null||D>i.BORDER_LEFT)return k.borderStyle??le.NONE;const A=(U=St(D))==null?void 0:U.style;return A==null?le.NONE:Reflect.get(k,A)??le.NONE},set(k){const D=e.options.style,A=r.value,U=k==null||k==le.NONE?void 0:k;if(A==null||A>i.BORDER_LEFT){D.borderStyle=U;return}const z=St(A);z!=null&&Reflect.set(D,z.style,U)}}),h=R({get(){var U;const k=e.options.style,D=r.value;if(D==null||D>i.BORDER_LEFT)return k.borderColor;const A=(U=St(D))==null?void 0:U.color;return A==null?Pe.INHERIT:Reflect.get(k,A)??Pe.INHERIT},set(k){const D=e.options.style,A=r.value,U=k??void 0;if(A==null||A>i.BORDER_LEFT){D.borderColor=U;return}const z=St(A);z!=null&&Reflect.set(D,z.color,U)}}),S=R({get(){const k=e.options.style,D=r.value;if(D==null||D<=i.BORDER_LEFT)return k.borderRadius;const A=m(D);if(A!=null)return Reflect.get(k,A)},set(k){const D=e.options.style,A=r.value,U=k??void 0;if(A==null||A<=i.BORDER_LEFT){D.borderRadius=U;return}const z=m(A);z!=null&&Reflect.set(D,z,U)}});function m(k){switch(k){case i.RADIUS_TOP_LEFT:return"borderTopLeftRadius";case i.RADIUS_TOP_RIGHT:return"borderTopRightRadius";case i.RADIUS_BOTTOM_RIGHT:return"borderBottomRightRadius";case i.RADIUS_BOTTOM_LEFT:return"borderBottomLeftRadius"}}function b(){const k=e.options.style;return{borderTopLeftRadius:k.borderTopLeftRadius??k.borderRadius,borderTopRightRadius:k.borderTopRightRadius??k.borderRadius,borderBottomRightRadius:k.borderBottomRightRadius??k.borderRadius,borderBottomLeftRadius:k.borderBottomLeftRadius??k.borderRadius}}function w(k){const D=e.options.style;if(k==null||k>i.BORDER_LEFT){const z=D.borderStyle;return z==null||z==le.NONE?{borderStyle:le.NONE}:{}}const A=St(k);if(A==null)return{};const U=Reflect.get(D,A.style)??Reflect.get(D,"borderStyle");return U==null||U===le.NONE?{}:{[A.style]:U??D.borderStyle,[A.width]:Reflect.get(D,A.width)??D.borderWidth,[A.color]:Reflect.get(D,A.color)??D.borderColor??Pe.BLACK}}function V(k){y.value=k}function Z(k){r.value=k===r.value?void 0:k}function L(){const k=e.options.style;k.borderStyle=void 0,k.borderColor=void 0,k.borderWidth=void 0,k.borderTopStyle=void 0,k.borderTopColor=void 0,k.borderTopWidth=void 0,k.borderRightStyle=void 0,k.borderRightColor=void 0,k.borderRightWidth=void 0,k.borderBottomStyle=void 0,k.borderBottomColor=void 0,k.borderBottomWidth=void 0,k.borderLeftStyle=void 0,k.borderLeftColor=void 0,k.borderLeftWidth=void 0}function T(){const k=e.options.style;k.borderTopStyle==le.NONE&&(k.borderTopStyle=void 0),k.borderRightStyle==le.NONE&&(k.borderRightStyle=void 0),k.borderBottomStyle==le.NONE&&(k.borderBottomStyle=void 0),k.borderLeftStyle==le.NONE&&(k.borderLeftStyle=void 0),k.borderStyle=le.SOLID}function M(){const k=e.options.style;k.borderStyle=void 0,k.borderRightStyle=void 0,k.borderRightColor=void 0,k.borderRightWidth=void 0,k.borderLeftStyle=void 0,k.borderLeftColor=void 0,k.borderLeftWidth=void 0,k.borderTopStyle=le.SOLID,k.borderBottomStyle=le.SOLID}function P(k){const D=e.options.style,A=m(k)??"borderRadius",U=Reflect.get(D,A);return Le(U)}function N(){const k=e.options.style;return Le(k.borderRadius)??0}function C(k){const D=Math.min(Math.max(12,P(k)??N(),O(k)),36),A={width:D+"px",height:D+"px"};return r.value==k&&(A.backgroundColor="var(--radius-highlight-background-color)"),k==i.RADIUS_TOP_LEFT&&(A.top="-6px",A.left="-6px"),k==i.RADIUS_TOP_RIGHT&&(A.top="-6px",A.right="-6px"),k==i.RADIUS_BOTTOM_RIGHT&&(A.bottom="-6px",A.right="-6px"),k==i.RADIUS_BOTTOM_LEFT&&(A.bottom="-6px",A.left="-6px"),A}function O(k){const D=e.options.style;switch(k){case i.RADIUS_TOP_LEFT:{const A=D.borderTopStyle==null||D.borderTopStyle==le.NONE?0:Le(D.borderTopWidth),U=D.borderLeftStyle==null||D.borderLeftStyle==le.NONE?0:Le(D.borderLeftWidth);return Math.max(A??0,U??0)}case i.RADIUS_TOP_RIGHT:{const A=D.borderTopStyle==null||D.borderTopStyle==le.NONE?0:Le(D.borderTopWidth),U=D.borderRightStyle==null||D.borderRightStyle==le.NONE?0:Le(D.borderRightWidth);return Math.max(A??0,U??0)}case i.RADIUS_BOTTOM_RIGHT:{const A=D.borderBottomStyle==null||D.borderBottomStyle==le.NONE?0:Le(D.borderBottomWidth),U=D.borderRightStyle==null||D.borderRightStyle==le.NONE?0:Le(D.borderRightWidth);return Math.max(A??0,U??0)}case i.RADIUS_BOTTOM_LEFT:{const A=D.borderBottomStyle==null||D.borderBottomStyle==le.NONE?0:Le(D.borderBottomWidth),U=D.borderLeftStyle==null||D.borderLeftStyle==le.NONE?0:Le(D.borderLeftWidth);return Math.max(A??0,U??0)}default:return 0}}function B(k){const D=e.options.style;switch(k){case i.BORDER_TOP:{const A=Math.max(6,Math.min(P(i.RADIUS_TOP_LEFT)??N()-6,32)),U=Math.max(6,Math.min(P(i.RADIUS_TOP_RIGHT)??N()-6,32)),z={left:A+"px",right:U+"px",top:"-6px",height:"12px"};if(r.value===k&&(z.backgroundColor="var(--border-highlight-background-color)"),D.borderTopStyle==null||D.borderTopStyle==le.NONE)return z;const te=Le(D.borderTopWidth);return te==null||(z.height=12+te+"px",z.top=-6-te+"px"),z}case i.BORDER_BOTTOM:{const A=Math.max(6,Math.min(P(i.RADIUS_BOTTOM_LEFT)??N()-6,32)),U=Math.max(6,Math.min(P(i.RADIUS_BOTTOM_RIGHT)??N()-6,32)),z={left:A+"px",right:U+"px",bottom:"-6px",height:"12px"};if(r.value===k&&(z.backgroundColor="var(--border-highlight-background-color)"),D.borderBottomStyle==null||D.borderBottomStyle==le.NONE)return z;const te=Le(D.borderBottomWidth);return te==null||(z.height=12+te+"px",z.bottom=-6-te+"px"),z}case i.BORDER_LEFT:{const A=Math.max(6,Math.min(P(i.RADIUS_TOP_LEFT)??N()-6,32)),U=Math.max(6,Math.min(P(i.RADIUS_BOTTOM_LEFT)??N()-6,32)),z={top:A+"px",bottom:U+"px",left:"-6px",width:"12px"};if(r.value===k&&(z.backgroundColor="var(--border-highlight-background-color)"),D.borderLeftStyle==null||D.borderLeftStyle==le.NONE)return z;const te=Le(D.borderLeftWidth);return te==null||(z.width=12+te+"px",z.left=-6-te+"px"),z}case i.BORDER_RIGHT:{const A=Math.max(6,Math.min(P(i.RADIUS_TOP_RIGHT)??N()-6,32)),U=Math.max(6,Math.min(P(i.RADIUS_BOTTOM_RIGHT)??N()-6,32)),z={top:A+"px",bottom:U+"px",right:"-6px",width:"12px"};if(r.value===k&&(z.backgroundColor="var(--border-highlight-background-color)"),D.borderRightStyle==null||D.borderRightStyle==le.NONE)return z;const te=Le(D.borderRightWidth);return te==null||(z.width=12+te+"px",z.right=-6-te+"px"),z}}}const x={classes:n,props:e,PADDING_UNITS:s,ITEM:i,ITEM_NAMES:l,selected:r,title:c,allowBorder:a,allowRadius:p,className:g,style:_,borderWidth:v,borderStyle:y,borderColor:h,borderRadius:S,getRadiusKeys:m,createBorderRadius:b,createBorderProps:w,changeBorderStyle:V,onSelect:Z,useNoBorder:L,useOuterBorder:T,useTopAndBottomBorder:M,getRadiusSize:P,getDefaultRadiusSize:N,createRadiusSize:C,getRelatedBorderWidth:O,createBorderStyle:B,InputWithUnit:Yt,get BORDER_STYLE(){return le},get BORDER_STYLE_OPTIONS(){return pd},get ColorInput(){return qn}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),Rf="_settings_12vtg_2",If="_box_12vtg_8",wf="_border_12vtg_19",Cf="_borderTitle_12vtg_30",Of="_borderRadius_12vtg_39",Lf="_borderItem_12vtg_50",Df="_borderItemLabel_12vtg_59",Nf="_borderSetting_12vtg_65",Bf="_borderSettingRight_12vtg_70",Af="_borderStyle_12vtg_76",Mf="_borderStyleOptions_12vtg_81",xf="_borderStyleTitle_12vtg_88",Pf="_option_12vtg_95",qf="_line_12vtg_114",Ff="_selected_12vtg_125",Vf="_presets_12vtg_131",zf="_noBorder_12vtg_142",Uf="_outerBorder_12vtg_143",Hf="_topBottomBorder_12vtg_144",Gf={settings:Rf,box:If,border:wf,borderTitle:Cf,borderRadius:Of,borderItem:Lf,borderItemLabel:Df,borderSetting:Nf,borderSettingRight:Bf,borderStyle:Af,borderStyleOptions:Mf,borderStyleTitle:xf,option:Pf,line:qf,selected:Ff,presets:Vf,noBorder:zf,outerBorder:Uf,topBottomBorder:Hf},Wf=["title","onClick"],jf={key:0};function Xf(o,t,n,e,s,i){return E(),I("div",{class:d(["quickprint-is-scrollable quickprint-is-fill-h",e.classes.settings])},[u("div",{class:d(e.classes.presets)},[t[15]||(t[15]=u("span",null,"预设",-1)),u("button",{type:"button",class:"quickprint-text-btn",onClick:e.useNoBorder},[u("div",{class:d(e.classes.noBorder)},null,2),t[12]||(t[12]=u("span",null,"无边框",-1))]),u("button",{type:"button",class:"quickprint-text-btn",onClick:e.useOuterBorder},[u("div",{class:d(e.classes.outerBorder)},null,2),t[13]||(t[13]=u("span",null,"外部边框",-1))]),u("button",{type:"button",class:"quickprint-text-btn",onClick:e.useTopAndBottomBorder},[u("div",{class:d(e.classes.topBottomBorder)},null,2),t[14]||(t[14]=u("span",null,"上下边框",-1))])],2),u("div",{class:d(e.className),style:Y(e.style),onClick:t[8]||(t[8]=ae(()=>{},["stop"]))},[u("div",{class:d(e.classes.borderRadius),style:Y(e.createRadiusSize(e.ITEM.RADIUS_TOP_LEFT)),onClick:t[0]||(t[0]=l=>e.onSelect(e.ITEM.RADIUS_TOP_LEFT))},null,6),u("div",{class:d(e.classes.borderRadius),style:Y(e.createRadiusSize(e.ITEM.RADIUS_TOP_RIGHT)),onClick:t[1]||(t[1]=l=>e.onSelect(e.ITEM.RADIUS_TOP_RIGHT))},null,6),u("div",{class:d(e.classes.borderRadius),style:Y(e.createRadiusSize(e.ITEM.RADIUS_BOTTOM_LEFT)),onClick:t[2]||(t[2]=l=>e.onSelect(e.ITEM.RADIUS_BOTTOM_LEFT))},null,6),u("div",{class:d(e.classes.borderRadius),style:Y(e.createRadiusSize(e.ITEM.RADIUS_BOTTOM_RIGHT)),onClick:t[3]||(t[3]=l=>e.onSelect(e.ITEM.RADIUS_BOTTOM_RIGHT))},null,6),u("div",{class:d(e.classes.border),style:Y(e.createBorderStyle(e.ITEM.BORDER_TOP)),onClick:t[4]||(t[4]=l=>e.onSelect(e.ITEM.BORDER_TOP))},null,6),u("div",{class:d(e.classes.border),style:Y(e.createBorderStyle(e.ITEM.BORDER_BOTTOM)),onClick:t[5]||(t[5]=l=>e.onSelect(e.ITEM.BORDER_BOTTOM))},null,6),u("div",{class:d(e.classes.border),style:Y(e.createBorderStyle(e.ITEM.BORDER_RIGHT)),onClick:t[6]||(t[6]=l=>e.onSelect(e.ITEM.BORDER_RIGHT))},null,6),u("div",{class:d(e.classes.border),style:Y(e.createBorderStyle(e.ITEM.BORDER_LEFT)),onClick:t[7]||(t[7]=l=>e.onSelect(e.ITEM.BORDER_LEFT))},null,6),u("div",{class:d(e.classes.borderTitle)},Q(e.title),3)],6),u("div",{class:d(e.classes.borderSetting)},[u("div",{class:d(e.classes.borderStyle)},[u("label",{class:d(e.classes.borderStyleTitle)},"线型",2),u("div",{class:d(["quickprint-is-fill-h quickprint-is-scrollable",e.classes.borderStyleOptions])},[(E(!0),I(oe,null,ce(e.BORDER_STYLE_OPTIONS,l=>(E(),I("div",{key:l.value,title:l.label,class:d({[e.classes.option]:!0,[e.classes.selected]:l.value===e.borderStyle}),onClick:r=>e.changeBorderStyle(l.value)},[l.value==e.BORDER_STYLE.NONE?(E(),I("div",jf,Q(l.label),1)):(E(),I("div",{key:1,class:d(e.classes.line),style:Y({textDecorationStyle:l.value})},"--",6))],10,Wf))),128))],2)],2),u("div",{class:d(e.classes.borderSettingRight)},[u("div",{class:d(e.classes.borderItem)},[u("label",{class:d(e.classes.borderItemLabel)},"颜色",2),f(e.ColorInput,{modelValue:e.borderColor,"onUpdate:modelValue":t[9]||(t[9]=l=>e.borderColor=l),disabled:!e.allowBorder},null,8,["modelValue","disabled"])],2),u("div",{class:d(e.classes.borderItem)},[u("label",{class:d(e.classes.borderItemLabel)},"宽度",2),f(e.InputWithUnit,{modelValue:e.borderWidth,"onUpdate:modelValue":t[10]||(t[10]=l=>e.borderWidth=l),options:e.PADDING_UNITS,disabled:!e.allowBorder},null,8,["modelValue","disabled"])],2),u("div",{class:d(e.classes.borderItem)},[u("label",{class:d(e.classes.borderItemLabel)},"圆角",2),f(e.InputWithUnit,{modelValue:e.borderRadius,"onUpdate:modelValue":t[11]||(t[11]=l=>e.borderRadius=l),options:e.PADDING_UNITS,disabled:!e.allowRadius},null,8,["modelValue","disabled"])],2)],2)],2)],2)}const Yf={classes:Gf},Zf=F(kf,[["render",Xf],["__cssModules",Yf],["__file","/home/dongls/work/quickprint/packages/designer/editor/Setting/Element/Border.vue"]]),$f=q({__name:"QRCode",props:{options:{type:Object,required:!0}},setup(o,{expose:t}){t();const n=o,e=[{label:"毫米",value:de.MM},{label:"磅",value:de.PT},{label:"像素",value:de.PX}],s=a("paddingTop"),i=a("paddingBottom"),l=a("paddingLeft"),r=a("paddingRight"),c=R({get(){var g;return(g=n.options.qrcode)==null?void 0:g.barcolor},set(g){n.options.qrcode==null&&(n.options.qrcode={}),n.options.qrcode.barcolor=g}});function a(g){return R({get(){return n.options.style[g]},set(_){const v=fe(_)?void 0:_;n.options.style[g]=v}})}const p={props:n,PADDING_UNITS:e,paddingTop:s,paddingBottom:i,paddingLeft:l,paddingRight:r,barcolor:c,createPaddingProp:a,InputWithUnit:Yt,get ColorInput(){return qn}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),Kf="_grid2_59uck_1",Qf="_item_59uck_1",Jf="_itemLabel_59uck_1",ep="_fieldset_59uck_1",tp="_qrcode_59uck_4",np="_padding_59uck_9",op="_paddingItem_59uck_16",lp="_paddingItemLabel_59uck_22",sp={grid2:Kf,item:Qf,itemLabel:Jf,fieldset:ep,qrcode:tp,padding:np,paddingItem:op,paddingItemLabel:lp};function ip(o,t,n,e,s,i){return E(),I("div",{class:d(["quickprint-is-scrollable quickprint-is-fill-h",o.classes.qrcode])},[u("div",{class:d(o.classes.grid2)},[u("div",{class:d(o.classes.item)},[u("label",{class:d(o.classes.itemLabel)},"码颜色",2),f(e.ColorInput,{modelValue:e.barcolor,"onUpdate:modelValue":t[0]||(t[0]=l=>e.barcolor=l),class:"quickprint-is-fill-w"},null,8,["modelValue"])],2)],2),u("div",{class:d(o.classes.fieldset)},[t[5]||(t[5]=u("header",null,"内边距",-1)),u("div",{class:d(o.classes.padding)},[u("div",{class:d(o.classes.paddingItem)},[u("label",{class:d(o.classes.paddingItemLabel)},"上边距",2),f(e.InputWithUnit,{modelValue:e.paddingTop,"onUpdate:modelValue":t[1]||(t[1]=l=>e.paddingTop=l),options:e.PADDING_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),u("div",{class:d(o.classes.paddingItem)},[u("label",{class:d(o.classes.paddingItemLabel)},"下边距",2),f(e.InputWithUnit,{modelValue:e.paddingBottom,"onUpdate:modelValue":t[2]||(t[2]=l=>e.paddingBottom=l),options:e.PADDING_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),u("div",{class:d(o.classes.paddingItem)},[u("label",{class:d(o.classes.paddingItemLabel)},"左边距",2),f(e.InputWithUnit,{modelValue:e.paddingLeft,"onUpdate:modelValue":t[3]||(t[3]=l=>e.paddingLeft=l),options:e.PADDING_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),u("div",{class:d(o.classes.paddingItem)},[u("label",{class:d(o.classes.paddingItemLabel)},"右边距",2),f(e.InputWithUnit,{modelValue:e.paddingRight,"onUpdate:modelValue":t[4]||(t[4]=l=>e.paddingRight=l),options:e.PADDING_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2)],2)],2)],2)}const rp={classes:sp},ap=F($f,[["render",ip],["__cssModules",rp],["__file","/home/dongls/work/quickprint/packages/designer/editor/Setting/Element/QRCode.vue"]]),cp=q({__name:"Barcode",props:{options:{type:Object,required:!0}},setup(o,{expose:t}){t();const n=o,e=[{label:"毫米",value:de.MM},{label:"磅",value:de.PT},{label:"像素",value:de.PX}],s=g("paddingTop"),i=g("paddingBottom"),l=g("paddingLeft"),r=g("paddingRight"),c=R({get(){var v;return(v=n.options.qrcode)==null?void 0:v.barcolor},set(v){n.options.qrcode==null&&(n.options.qrcode={}),n.options.qrcode.barcolor=v}}),a=R({get(){var v;return(v=n.options.barcode)==null?void 0:v.width},set(v){n.options.barcode==null&&(n.options.barcode={}),n.options.barcode.width=v}}),p=R({get(){var v;return(v=n.options.barcode)==null?void 0:v.height},set(v){n.options.barcode==null&&(n.options.barcode={}),n.options.barcode.height=v}});function g(v){return R({get(){return n.options.style[v]},set(y){const h=fe(y)?void 0:y;n.options.style[v]=h}})}const _={props:n,LENGTH_UNITS:e,paddingTop:s,paddingBottom:i,paddingLeft:l,paddingRight:r,barcolor:c,width:a,height:p,createPaddingProp:g,InputWithUnit:Yt,get ColorInput(){return qn}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),up="_grid2_59uck_1",dp="_item_59uck_1",fp="_itemLabel_59uck_1",pp="_fieldset_59uck_1",mp="_qrcode_59uck_4",gp="_padding_59uck_9",_p="_paddingItem_59uck_16",hp="_paddingItemLabel_59uck_22",bp={grid2:up,item:dp,itemLabel:fp,fieldset:pp,qrcode:mp,padding:gp,paddingItem:_p,paddingItemLabel:hp};function vp(o,t,n,e,s,i){return E(),I("div",{class:d(["quickprint-is-scrollable quickprint-is-fill-h",o.classes.qrcode])},[u("div",{class:d(o.classes.grid2)},[u("div",{class:d(o.classes.item)},[u("label",{class:d(o.classes.itemLabel)},"宽度",2),f(e.InputWithUnit,{modelValue:e.width,"onUpdate:modelValue":t[0]||(t[0]=l=>e.width=l),options:e.LENGTH_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),u("div",{class:d(o.classes.item)},[u("label",{class:d(o.classes.itemLabel)},"高度",2),f(e.InputWithUnit,{modelValue:e.height,"onUpdate:modelValue":t[1]||(t[1]=l=>e.height=l),options:e.LENGTH_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),u("div",{class:d(o.classes.item)},[u("label",{class:d(o.classes.itemLabel)},"码颜色",2),f(e.ColorInput,{modelValue:e.barcolor,"onUpdate:modelValue":t[2]||(t[2]=l=>e.barcolor=l),class:"quickprint-is-fill-w"},null,8,["modelValue"])],2)],2),u("div",{class:d(o.classes.fieldset)},[t[7]||(t[7]=u("header",null,"内边距",-1)),u("div",{class:d(o.classes.padding)},[u("div",{class:d(o.classes.paddingItem)},[u("label",{class:d(o.classes.paddingItemLabel)},"上边距",2),f(e.InputWithUnit,{modelValue:e.paddingTop,"onUpdate:modelValue":t[3]||(t[3]=l=>e.paddingTop=l),options:e.LENGTH_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),u("div",{class:d(o.classes.paddingItem)},[u("label",{class:d(o.classes.paddingItemLabel)},"下边距",2),f(e.InputWithUnit,{modelValue:e.paddingBottom,"onUpdate:modelValue":t[4]||(t[4]=l=>e.paddingBottom=l),options:e.LENGTH_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),u("div",{class:d(o.classes.paddingItem)},[u("label",{class:d(o.classes.paddingItemLabel)},"左边距",2),f(e.InputWithUnit,{modelValue:e.paddingLeft,"onUpdate:modelValue":t[5]||(t[5]=l=>e.paddingLeft=l),options:e.LENGTH_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),u("div",{class:d(o.classes.paddingItem)},[u("label",{class:d(o.classes.paddingItemLabel)},"右边距",2),f(e.InputWithUnit,{modelValue:e.paddingRight,"onUpdate:modelValue":t[6]||(t[6]=l=>e.paddingRight=l),options:e.LENGTH_UNITS,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2)],2)],2)],2)}const yp={classes:bp},Ep=F(cp,[["render",vp],["__cssModules",yp],["__file","/home/dongls/work/quickprint/packages/designer/editor/Setting/Element/Barcode.vue"]]),Sp=q({__name:"index",props:{options:{type:Object,required:!0},active:{type:String,default:null}},setup(o,{expose:t}){t();const n=o,e=$e();function s(){e==null||e.confirm(n.options)}function i(){e==null||e.cancel()}const l={props:n,winApi:e,confirm:s,cancel:i,Font:Yd,Paragraph:Tf,Border:Zf,QRCode:ap,Barcode:Ep};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),Tp="_setting_1v5ya_2",kp="_footer_1v5ya_9",Rp={setting:Tp,footer:kp};function Ip(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.setting)},[n.active==="font"?(E(),ne(e.Font,{key:0,options:e.props.options},null,8,["options"])):W("v-if",!0),n.active==="paragraph"?(E(),ne(e.Paragraph,{key:1,options:e.props.options},null,8,["options"])):W("v-if",!0),n.active==="border"?(E(),ne(e.Border,{key:2,options:e.props.options},null,8,["options"])):W("v-if",!0),n.active=="qrcode"?(E(),ne(e.QRCode,{key:3,options:e.props.options},null,8,["options"])):W("v-if",!0),n.active=="barcode"?(E(),ne(e.Barcode,{key:4,options:e.props.options},null,8,["options"])):W("v-if",!0),u("div",{class:d(o.classes.footer)},[u("button",{type:"button",class:"quickprint-text-btn",onClick:e.cancel},"取消"),u("button",{type:"button",class:"quickprint-text-btn",onClick:e.confirm},"确定")],2)],2)}const wp={classes:Rp},Zt=F(Sp,[["render",Ip],["__cssModules",wp],["__file","/home/dongls/work/quickprint/packages/designer/editor/Setting/Element/index.vue"]]),Cp=q({__name:"Footer",emits:["confirm"],setup(o,{expose:t,emit:n}){t();const e=n,s=$e();function i(){e("confirm",function(a){s==null||s.confirm(a)})}function l(){s==null||s.cancel()}const r={emit:e,winApi:s,confirm:i,cancel:l};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),Op="_footer_1ux18_2",Lp={footer:Op};function Dp(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.footer)},[u("button",{type:"button",class:"quickprint-text-btn",onClick:e.cancel},"取消"),u("button",{type:"button",class:"quickprint-text-btn",onClick:e.confirm},"确定")],2)}const Np={classes:Lp},Wl=F(Cp,[["render",Dp],["__cssModules",Np],["__file","/home/dongls/work/quickprint/packages/designer/editor/Setting/components/Footer.vue"]]),Bp=q({__name:"Diagonal",props:{options:{type:Object,required:!0}},setup(o,{expose:t}){t();const n=o,e=R({get(){return n.options.diagonalMode??nt.NONE},set(a){const p=a==nt.NONE?void 0:a;n.options.diagonalMode=p}}),s=R({get(){var a,p;return(p=(a=n.options.diagonalLabels)==null?void 0:a[0])==null?void 0:p.text},set(a){const p=n.options;p.diagonalLabels==null&&(p.diagonalLabels=[]),p.diagonalLabels[0]==null&&(p.diagonalLabels[0]={}),p.diagonalLabels[0].text=a}}),i=R({get(){var a,p;return(p=(a=n.options.diagonalLabels)==null?void 0:a[1])==null?void 0:p.text},set(a){const p=n.options;p.diagonalLabels==null&&(p.diagonalLabels=[]),p.diagonalLabels[1]==null&&(p.diagonalLabels[1]={}),p.diagonalLabels[1].text=a}});function l(a){e.value=a}function r(a){a(n.options)}const c={props:n,diagonalMode:e,firstLabel:s,secondLabel:i,selectBiagonal:l,submit:r,Diagonal:wo,Footer:Wl,get TABLE_CELL_BIAGONAL_MODE(){return nt}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),Ap="_setting_1u7dq_2",Mp="_main_1u7dq_6",xp="_cell_1u7dq_10",Pp="_diagonal_1u7dq_25",qp="_selected_1u7dq_29",Fp="_label_1u7dq_34",Vp="_text_1u7dq_41",zp={setting:Ap,main:Mp,cell:xp,diagonal:Pp,selected:qp,label:Fp,text:Vp};function Up(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.setting)},[u("div",{class:d(o.classes.main)},[u("div",{class:d(["quickprint-is-row",o.classes.diagonal])},[u("div",{class:d({[o.classes.cell]:!0,[o.classes.selected]:e.diagonalMode===e.TABLE_CELL_BIAGONAL_MODE.NONE}),onClick:t[0]||(t[0]=l=>e.selectBiagonal(e.TABLE_CELL_BIAGONAL_MODE.NONE))},null,2),u("div",{class:d({[o.classes.cell]:!0,[o.classes.selected]:e.diagonalMode===e.TABLE_CELL_BIAGONAL_MODE.TL_BR}),onClick:t[1]||(t[1]=l=>e.selectBiagonal(e.TABLE_CELL_BIAGONAL_MODE.TL_BR))},[f(e.Diagonal,{mode:e.TABLE_CELL_BIAGONAL_MODE.TL_BR,labels:n.options.diagonalLabels},null,8,["mode","labels"])],2),u("div",{class:d({[o.classes.cell]:!0,[o.classes.selected]:e.diagonalMode===e.TABLE_CELL_BIAGONAL_MODE.TR_BL}),onClick:t[2]||(t[2]=l=>e.selectBiagonal(e.TABLE_CELL_BIAGONAL_MODE.TR_BL))},[f(e.Diagonal,{mode:e.TABLE_CELL_BIAGONAL_MODE.TR_BL,labels:n.options.diagonalLabels},null,8,["mode","labels"])],2)],2),u("div",{class:d(o.classes.label)},[u("div",{class:d(o.classes.text)},"顶部文本",2),Re(u("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>e.firstLabel=l),class:"quickprint-form-control quickprint-is-fill-w",placeholder:"请输入"},null,512),[[Ae,e.firstLabel]])],2),u("div",{class:d(o.classes.label)},[u("div",{class:d(o.classes.text)},"底部文本",2),Re(u("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>e.secondLabel=l),class:"quickprint-form-control quickprint-is-fill-w",placeholder:"请输入"},null,512),[[Ae,e.secondLabel]])],2)],2),f(e.Footer,{onConfirm:e.submit})],2)}const Hp={classes:zp},Gp=F(Bp,[["render",Up],["__cssModules",Hp],["__file","/home/dongls/work/quickprint/packages/designer/editor/Setting/Element/Diagonal.vue"]]);function jl(o){return De({style:Ln(o.style??{})})}function Wp(o,t){o.style=Object.assign({},o.style,t.style)}function Xl(o){if(Array.isArray(o)&&o.length>1)return De({style:{}});const t=Array.isArray(o)?o[0]:o;return De({width:t.width,height:t.height,diagonalMode:t.attributes.diagonalMode,diagonalLabels:Ln(t.attributes.diagonalLabels??[]),style:Ln(t.style??{})})}const jp=Ie(function(o){return We("表格",(t,n)=>f(Zt,{options:jl(o),active:n},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"字体",name:"font",active:!0},{label:"段落",name:"paragraph"},{label:"边框",name:"border"}]}).promisify().then(t=>Wp(o,t)).catch(ke)}),Xp=Ie(function(o){return We("表格行",(t,n)=>f(Zt,{options:jl(o),active:n},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"字体",name:"font",active:!0},{label:"段落",name:"paragraph"},{label:"边框",name:"border"}]}).promisify().catch(ke)}),Yp=Ie(function(o){return We("单元格",(t,n)=>f(Zt,{options:Xl(o),active:n},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"字体",name:"font",active:!0},{label:"段落",name:"paragraph"},{label:"边框",name:"border"}]}).promisify().catch(ke)}),Zp=Ie(function(o){return st("斜线表头",f(Gp,{options:Xl(o)},null),{width:"360px",top:"15vh",resizeMode:Ft.DISABLED}).promisify().catch(ke)}),$p=q({__name:"TextDirection",props:{options:{type:Object,required:!0}},setup(o,{expose:t}){t();const n=o,e=R(()=>n.options.style.writingMode??to.HORIZONTAL_TB);function s(r){n.options.style.writingMode=r===to.HORIZONTAL_TB?void 0:r}function i(r){r(n.options)}const l={props:n,writingMode:e,select:s,confirm:i,get WRITING_MODE(){return to},Footer:Wl};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),Kp="_textDirection_qsmbx_2",Qp="_grid_qsmbx_16",Jp="_item_qsmbx_24",em="_horizontalTb_qsmbx_36 _item_qsmbx_24",tm="_verticalLr_qsmbx_45 _item_qsmbx_24",nm="_verticalRl_qsmbx_54 _item_qsmbx_24",om="_sidewaysRl_qsmbx_63 _item_qsmbx_24",lm="_sidewaysLr_qsmbx_72 _item_qsmbx_24",sm="_preview_qsmbx_81",im="_selected_qsmbx_89",rm={textDirection:Kp,grid:Qp,item:Jp,horizontalTb:em,verticalLr:tm,verticalRl:nm,sidewaysRl:om,sidewaysLr:lm,preview:sm,selected:im},am={style:{overflow:"hidden"}};function cm(o,t,n,e,s,i){return E(),I("div",am,[u("div",{class:d(o.classes.textDirection)},[u("div",{class:d(o.classes.grid)},[u("div",{title:"水平排版，从左到右",class:d({[o.classes.horizontalTb]:!0,[o.classes.selected]:e.writingMode===e.WRITING_MODE.HORIZONTAL_TB}),onClick:t[0]||(t[0]=l=>e.select(e.WRITING_MODE.HORIZONTAL_TB))},t[5]||(t[5]=[u("p",null,"文字abc",-1)]),2),u("div",{title:"垂直排版，从上到下，从左到右",class:d({[o.classes.verticalLr]:!0,[o.classes.selected]:e.writingMode===e.WRITING_MODE.VERTICAL_LR}),onClick:t[1]||(t[1]=l=>e.select(e.WRITING_MODE.VERTICAL_LR))},t[6]||(t[6]=[u("p",null,"文字abc文字abc",-1),u("p",null,"文字abc→",-1)]),2),u("div",{title:"垂直排版，从上到下，从右到左",class:d({[o.classes.verticalRl]:!0,[o.classes.selected]:e.writingMode===e.WRITING_MODE.VERTICAL_RL}),onClick:t[2]||(t[2]=l=>e.select(e.WRITING_MODE.VERTICAL_RL))},t[7]||(t[7]=[u("p",null,"文字abc文字abc",-1),u("p",null,"文字abc→",-1)]),2),u("div",{title:"垂直排版，从上到下，从右到左",class:d({[o.classes.sidewaysRl]:!0,[o.classes.selected]:e.writingMode===e.WRITING_MODE.SIDEWAYS_RL}),onClick:t[3]||(t[3]=l=>e.select(e.WRITING_MODE.SIDEWAYS_RL))},t[8]||(t[8]=[u("p",null,"文字abc文字abc",-1),u("p",null,"文字abc→",-1)]),2),u("div",{title:"垂直排版，从下到上，从左到右",class:d({[o.classes.sidewaysLr]:!0,[o.classes.selected]:e.writingMode===e.WRITING_MODE.SIDEWAYS_LR}),onClick:t[4]||(t[4]=l=>e.select(e.WRITING_MODE.SIDEWAYS_LR))},t[9]||(t[9]=[u("p",null,"文字abc文字abc",-1),u("p",null,"文字abc→",-1)]),2)],2),u("div",{class:d(o.classes.preview)},t[10]||(t[10]=[u("p",null,"文字abc文字abc",-1),u("p",null,"文字abc文字abc",-1),u("p",null,"文字abc→",-1)]),2)],2),f(e.Footer,{onConfirm:e.confirm})])}const um={classes:rm},dm=F($p,[["render",cm],["__cssModules",um],["__file","/home/dongls/work/quickprint/packages/designer/editor/Setting/Element/TextDirection.vue"]]);function Wn(o){const t=Array.isArray(o)?o:[o];if(t.length!==1)return De({style:{}});const n=t[0],e={style:Ln(n.style??{})};return n.type===G.QRCODE&&(e.qrcode={barcolor:n.attributes.barcolor}),n.type===G.BARCODE&&(e.barcode={barcolor:n.attributes.barcolor,scale:n.attributes.scale,width:n.attributes.width,height:n.attributes.height}),De(e)}const fm=Ie(function(o){return We("元素属性",(t,n)=>f(Zt,{options:Wn(o),active:n},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"字体",name:"font",active:!0},{label:"段落",name:"paragraph"},{label:"边框",name:"border"}]}).promisify()}),Yl=Ie(function(o){return st("文字方向",f(dm,{options:Wn(o)},null),{width:"424px",height:"285px",top:"15vh",resizeMode:Ft.DISABLED}).promisify()}),pm=Ie(function(o){return We("二维码属性",(t,n)=>f(Zt,{options:Wn(o),active:n},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"属性",name:"qrcode",active:!0},{label:"边框",name:"border"}]}).promisify()}),mm=Ie(function(o){return We("条形码属性",(t,n)=>f(Zt,{options:Wn(o),active:n},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"属性",name:"barcode",active:!0},{label:"边框",name:"border"}]}).promisify()});function gm(o,t,n){const e={menus:[...Zl(t),{type:"menu",label:"行设置",icon:"icon-table-row",handler(){const s=t.getSelectedElements(),i=s[0];i!=null&&Xp(i).then(l=>{if(l!=null)for(const r of s)r.style=Object.assign({},r.style,l.style)})}},{type:"divider"},$l(t),Kl(t),{type:"divider"},Ql(t),Vl(t.getDesignApi(),t.getTable())]};ut.open(o.clientX,o.clientY,e)}function _m(o,t){const e=t.getDesignApi().getSelectedElements();if(t.isSelectTableRow())return gm(o,t,e[0]);const s=t.getSelectedCells(),i={menus:[...Zl(t),{type:"menu",label:"单元格设置",icon:"icon-border",handler(){Yp(s).then(r=>{if(r!=null)for(const c of s)c.style=Object.assign({},c.style,r.style)})}},{type:"menu",label:"斜线表头",icon:"icon-diagonal",handler(){Zp(s).then(r=>{if(r!=null)for(const c of s)r.diagonalMode&&(c.attributes.diagonalMode=r.diagonalMode),r.diagonalLabels&&(c.attributes.diagonalLabels=r.diagonalLabels)})}},{type:"menu",label:"文字方向",icon:"icon-text-direction",handler(){Yl(s)}},{type:"divider"}]},l=[];return s.length>=2&&l.push({type:"menu",label:"合并单元格",icon:"icon-merge-cells",handler:t.mergeCells,disabled(){const r=s.map(a=>a.parent).filter(a=>a!=null);return new Set(r.map(a=>a.attributes.type)).size>1?!0:new Set(r.map(a=>a.ds.value).filter(a=>ft(a))).size>1}}),s.some(r=>r.hasSpan)&&l.push({type:"menu",label:"拆分单元格",icon:"icon-solit-cells",handler:t.splitCells}),s.length===1&&s[0].noSpan&&l.push({type:"menu",label:"拆分列",icon:"icon-split-column",handler:t.splitByColumn},{type:"menu",label:"拆分行",icon:"icon-split-row",handler:t.splitByRow}),l.length>0&&i.menus.push(...l,{type:"divider"}),i.menus.push($l(t),Kl(t),{type:"divider"},Ql(t),Vl(t.getDesignApi(),t.getTable())),ut.open(o.clientX,o.clientY,i)}function Zl(o){return[{type:"menu",label:"选中表格",icon:"icon-aim",handler:o.selectTable},{type:"menu",label:"表格设置",icon:"icon-table",handler(){jp(o.getTable())}}]}function $l(o){return{type:"menu",label:"插入",icon:"icon-plus-square",submenu:[{type:"menu",label:"左侧插入列",icon:"icon-insert-column-left",handler:o.insertColumnLeft,disabled:o.isSelectTableRow},{type:"menu",label:"右侧插入列",icon:"icon-insert-column-right",handler:o.insertColumnRight,disabled:o.isSelectTableRow},{type:"menu",label:"上侧插入行",icon:"icon-insert-row-above",handler:o.insertRowTop},{type:"menu",label:"下侧插入行",icon:"icon-insert-row-below",handler:o.inserRowBottom}]}}function Kl(o){return{type:"menu",label:"删除",icon:"icon-delete",submenu:[{type:"menu",label:"删除列",icon:"icon-deletecolumn",handler:o.deleteColumns,disabled:o.isSelectTableRow},{type:"menu",label:"删除行",icon:"icon-deleterow",handler:o.deleteRows},{type:"menu",label:"数据源",icon:"icon-datasource",handler:o.deleteDataSource}]}}function Ql(o){return{type:"menu",label:"自动调整",icon:"icon-auto-resize",submenu:[{type:"menu",label:"根据纸张调整列宽",handler:o.autoReiszeColumnByPaper},{type:"menu",label:"均分表格宽度",handler:o.avgTableWidth},{type:"menu",label:"均分表格高度",handler:o.avgTableHeight},{type:"menu",label:"将其他行设为相同高度",handler:o.setOtherRowSameHeight,disabled(){const t=o.getSelectedCells();return!!(t.length!==1||t[0].hasRowSpan)}},{type:"menu",label:"将其他列设为相同宽度",handler:o.setOtherColSameWidth,disabled(){if(o.isSelectTableRow())return!0;const t=o.getSelectedCells();return!!(t.length!==1||t[0].hasColSpan)}}]}}function hm(o,t){function n(){return o.element}function e(){return t.getSelectedElements(n())}function s(){const T=n();return e().filter(P=>{var C;if(P.type!==G.TABLE_CELL)return!1;const N=(C=P.parent)==null?void 0:C.parent;return N==null?!1:N.id==T.id}).sort(an.sort)}function i(){return t.selectElement(n())}function l(){const T=s();if(T.length===0)return!1;const M=dt.toArea(T);return n().insertColumn(M.colStart,0),t.createSnapshot(),!0}function r(){const T=s();if(T.length===0)return!1;const M=dt.toArea(T);return n().insertColumn(M.colEnd,1),t.createSnapshot(),!0}function c(){if(L()){const P=e()[0];return n().inserRow(P.index,0),t.createSnapshot(),!0}const T=s();if(T.length===0)return!1;const M=dt.toArea(T);return n().inserRow(M.rowStart,0),t.createSnapshot(),!0}function a(){if(L()){const P=e()[0];return n().inserRow(P.index,1),t.createSnapshot(),!0}const T=s();if(T.length===0)return!1;const M=dt.toArea(T);return n().inserRow(M.rowEnd,1),t.createSnapshot(),!0}function p(){var U,z;const T=n(),M=T.page;if(M==null)return;const P=T.doc,N=Le((U=P==null?void 0:P.margins)==null?void 0:U.left)??38,C=Le((z=P==null?void 0:P.margins)==null?void 0:z.right)??38,O=T.columns,B=O.reduce((te,Ne)=>te+Ne,0),x=se.mm_to_px(M.width)-N-C,k=[];for(const te of O){const Ne=Math.round(te/B*x);k.push(Ne)}const D=k.reduce((te,Ne)=>te+Ne,0),A=x-D;k[k.length-1]+=A,T.setColumns(k),T.updateBoxSize(),t.createSnapshot()}function g(){const T=n(),M=T.columns,P=M.reduce((B,x)=>B+x,0),N=Math.floor(P/M.length),C=new Array(M.length).fill(N),O=P-C.reduce((B,x)=>B+x,0);C[C.length-1]+=O,T.setColumns(C),T.updateBoxSize(),t.createSnapshot()}function _(){const T=n(),M=Math.round(T.height/T.children.length);T.children.forEach((P,N)=>T.setRowHeight(N,M)),T.updateBoxSize(),t.createSnapshot()}function v(){const T=e()[0];if(T==null)return;const M=T.type===G.TABLE_ROW?T:T.parent;if(!ue.isDefineElement(M)||M.type!=G.TABLE_ROW)return;const P=n(),N=M.height;P.children.forEach(C=>C.setRowHeight(N)),P.updateBoxSize(),t.createSnapshot()}function y(){const T=e()[0];if(T==null)return;const M=n(),P=T.width,N=M.attributes.colgroup.map(C=>P);M.setColumns(N),M.updateBoxSize(),t.createSnapshot()}function h(){const T=s();if(T.length<2)return;const P=n().mergeCells(T);t.selectElement(P),t.createSnapshot()}function S(){const T=s();if(T.length==0)return;n().splitCells(T),t.createSnapshot()}function m(){const T=s()[0];if(T==null)return;n().removeColumn(T.index),t.resetSelectedElement(),t.createSnapshot()}function b(){if(L()){const N=e()[0];n().removeRow(N.index),t.resetSelectedElement(),t.createSnapshot();return}const T=s();if(T.length==0)return;const M=dt.toArea(T),P=n();for(let N=M.rowEnd;N>=M.rowStart;N--)P.removeRow(N);t.resetSelectedElement(),t.createSnapshot()}function w(){e().forEach(M=>M.resetDS()),t.createSnapshot()}function V(){const T=e();if(T.length!=1)return;const M=T[0];if(M.hasSpan)return;const P=M.index,N=n();N.insertColumn(P,1,!0);for(const C of N.children){const O=C.children[P];if(O.id===M.id)continue;const B=C.children[P+1];if(O.hasSpan){N.mergeRightCell(O,B);continue}if(O.isCollapsed){const x=N.find(O.attributes.control);x&&N.mergeRightCell(x,B);continue}N.mergeCells([O,B])}t.selectElement(M),t.createSnapshot()}function Z(){const T=e();if(T.length!=1)return;const M=T[0];if(M.hasSpan)return;const P=M.parent;if(P==null)return;const N=n();N.inserRow(P.index,1);const C=N.children[P.index+1];for(let O=0;O<P.children.length;O++){const B=P.children[O];if(B.id===M.id)continue;const x=C.children[O];if(B.hasSpan){N.mergeBottomCell(B,x);continue}if(B.isCollapsed){const k=N.find(B.attributes.control);k&&N.mergeBottomCell(k,x);continue}N.mergeCells([B,x])}t.selectElement(M),t.createSnapshot()}function L(){const T=e();return T.length==1&&T[0].type==G.TABLE_ROW}return{getDesignApi(){return t},getTable:n,getSelectedElements:e,getSelectedCells:s,selectTable:i,insertColumnLeft:l,insertColumnRight:r,insertRowTop:c,inserRowBottom:a,autoReiszeColumnByPaper:p,avgTableWidth:g,avgTableHeight:_,setOtherRowSameHeight:v,setOtherColSameWidth:y,mergeCells:h,splitCells:S,splitByColumn:V,splitByRow:Z,deleteColumns:m,deleteRows:b,deleteDataSource:w,isSelectTableRow:L}}function bm(o,t,n){const s={moved:!1,left:0,colIndex:0,target:null,container:null};function i(p){return p<=0?null:o.getTable().getColumnLeft(p-1)}function l(p){const g=o.getTable(),_=g.attributes.colgroup.length;return p>=_?null:g.getColumnLeft(p+1)}function r(p,g){if(!(p.target instanceof Element))return;const _=p.target.closest("."+t.colResize);if(_==null)return;const v=_.closest("."+t.layer);v!=null&&(p.stopPropagation(),p.preventDefault(),s.left=_.offsetLeft,s.colIndex=g,s.target=_,s.container=v,s.target.setPointerCapture(p.pointerId),window.addEventListener("pointermove",c),window.addEventListener("pointerup",a))}function c(p){if(s.target==null||s.container==null)return;const g=s.container.getBoundingClientRect(),_=o.getDesignApi().state.scale/100,v=i(s.colIndex),y=l(s.colIndex);let h=p.clientX-g.left;v!=null&&h<=v*_+4&&(h=v*_+4),y!=null&&h>=y*_-4&&(h=y*_-4),s.left=h/_,s.target.style.left=h/_+"px",s.moved=!0}function a(p){s.moved&&n.onResizeEnd(s.colIndex,Math.round(s.left)),s.left=0,s.target=null,s.container=null,window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",a)}return r}function vm(o,t,n){const s={moved:!1,top:0,rowIndex:0,target:null,container:null};function i(p){return p<=0?null:o.getTable().getRowTop(p-1)}function l(p){const g=o.getTable(),_=g.children.length;return p>=_?null:g.getRowTop(p+1)}function r(p,g){if(!(p.target instanceof Element))return;const _=p.target.closest("."+t.rowResize);if(_==null)return;const v=_.closest("."+t.layer);v!=null&&(p.stopPropagation(),p.preventDefault(),s.top=_.offsetTop,s.rowIndex=g,s.target=_,s.container=v,s.target.setPointerCapture(p.pointerId),window.addEventListener("pointermove",c),window.addEventListener("pointerup",a))}function c(p){if(s.target==null||s.container==null)return;const g=o.getDesignApi().state.scale/100,_=s.container.getBoundingClientRect(),v=i(s.rowIndex),y=l(s.rowIndex);let h=p.clientY-_.top;v!=null&&h<=v*g+4&&(h=v*g+4),y!=null&&h>=y*g-4&&(h=y*g-4),s.moved=!0,s.top=h/g,s.target.style.top=h/g+"px"}function a(p){s.moved&&n.onResizeEnd(s.rowIndex,Math.round(s.top)),s.top=0,s.target=null,s.container=null,window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",a)}return r}const ym=q({__name:"TableEditor",props:{element:{type:dt,required:!0}},setup(o,{expose:t}){t();const n=o,e=Te(),s=we("classes"),i=hm(n,e),l=De({colIndex:-1,rowIndex:-1,silence:!1}),r=R(()=>n.element.attributes.colgroup??[]),c=bm(i,s,{onResizeEnd:b,onResizeStart:m}),a=vm(i,s,{onResizeEnd:w,onResizeStart:m});function p(C){return{left:(n.element.attributes.colgroup??[]).slice(0,C).reduce((B,x)=>B+x,0)+"px"}}function g(C){return{top:(n.element.children??[]).slice(0,C).reduce((x,k)=>x+k.height,0)-1+"px"}}function _(C){const O=n.element.attributes.colgroup??[],B=O.slice(0,C).reduce((D,A)=>D+A,0),x=C===0?0:1,k=C>0&&C<O.length?-1:0;return{left:B+x+"px",width:O[C]+k+"px"}}function v(C){const O=n.element.children??[],B=O.slice(0,C).reduce((D,A)=>D+A.height,0),x=C===0?0:1,k=C>0&&C<O.length?-1:0;return{top:B+x+"px",height:O[C].height+k+"px"}}function y(C){e.selectElement(C)}function h(C){const O=[];for(const B of n.element.children){const x=B.children[C];x.isColCollapsed||O.push(x)}e.multiSelectElements(O)}async function S(C){const O=C.target.closest("td");if(O==null)return;const B=Reflect.get(O,Ze);if(B==null)return;const x=e.getSelectedElements(n.element);(x.length==0||x.length==1&&x[0].type===G.TABLE_CELL||x.length>1&&x.findIndex(k=>k.id===B.id)<0)&&(e.selectElement(B),await Wt()),_m(C,i)}function m(){l.silence=!0}function b(C,O){l.silence=!1;const B=n.element.attributes.colgroup??[];if(C==0){const U=n.element.left,z=n.element.calculateCoord(U+O),te=B[0]-(z-U);n.element.setLeft(z),n.element.setColWidth(0,te),n.element.updateBoxSize(),e.createSnapshot();return}if(C==B.length){const U=C-1,z=B.slice(0,U).reduce((Ne,vt)=>Ne+vt,0),te=O-z;n.element.setColWidth(C-1,te),n.element.updateBoxSize(),e.createSnapshot();return}const x=C-1,k=B[x]+B[C],D=O-B.slice(0,x).reduce((U,z)=>U+z,0),A=k-D;n.element.setColWidth(x,D),n.element.setColWidth(C,A),n.element.updateBoxSize(),e.createSnapshot()}function w(C,O){l.silence=!1;const B=n.element.children;if(C==0){const U=n.element.top,z=n.element.calculateCoord(U+O),te=B[0].height-(z-U);n.element.setTop(z),n.element.setRowHeight(C,te),n.element.updateBoxSize(),e.createSnapshot();return}if(C==B.length){const U=C-1,z=B.slice(0,U).reduce((Ne,vt)=>Ne+vt.height,0),te=O-z;n.element.setRowHeight(C-1,te),n.element.updateBoxSize(),e.createSnapshot();return}const x=C-1,k=B[x].height+B[C].height,D=O-B.slice(0,x).reduce((U,z)=>U+z.height,0),A=k-D;n.element.setRowHeight(x,D),n.element.setRowHeight(C,A),n.element.updateBoxSize(),e.createSnapshot()}function V(){l.rowIndex=-1,l.colIndex=-1}function Z(C){const O=C.target.closest("td");if(O==null)return;const B=Reflect.get(O,Ze);if(B==null||!(B instanceof an))return;const x=O.getBoundingClientRect(),k=C.clientX-x.left,D=B.index;if(!B.hasColSpan)return k<x.width/2?D:B.getNextColIndex();const A=n.element.attributes.colgroup,U=A[D]/2;if(k>=0&&k<=U)return D;const z=B.offsetWidth,te=z-A[D+B.colspan-1]/2;if(k>=te&&k<=z)return B.getNextColIndex()+1}function L(C){const O=C.target.closest("td");if(O==null)return;const B=Reflect.get(O,Ze);if(B==null||!(B instanceof an))return;const x=B.parent;if(x==null)return;const k=O.getBoundingClientRect(),D=C.clientY-k.top,A=x.index;if(!B.hasRowSpan)return D<k.height/2?A:B.getNextRowIndex();const U=x.height/2;if(D>=0&&D<=U)return A;const z=n.element.children.slice(x.index,x.index+B.rowspan),te=z.reduce((vt,Kn)=>vt+Kn.height,0),Ne=te-z[z.length-1].height;if(D>=Ne&&D<=te)return B.getNextRowIndex()+1}function T(C){l.silence||(l.colIndex=Z(C)??-1,l.rowIndex=L(C)??-1)}function M(){const C=n.element;C.insertColumn(C.colSize-1,1)}function P(){const C=n.element;C.inserRow(C.rowSize-1,1)}const N={props:n,api:e,classes:s,TableEditorApi:i,resizeLine:l,colgroup:r,onColumnResize:c,onRowResize:a,createColumnStyle:p,createRowStyle:g,createColIndicatorStyle:_,createRowIndicatorStyle:v,onSelectRow:y,onSelectCol:h,onContextmenu:S,onResizeStart:m,onColumnResizeEnd:b,onRowResizeEnd:w,resetTableLine:V,processColIndex:Z,processRowIndex:L,updateTableLine:T,addNewCol:M,addNewRow:P,CellEditor:Fl,get Icon(){return K}};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),Em="_tableEditor_5qbkt_2",Sm="_table_5qbkt_2",Tm="_layer_5qbkt_33",km="_colResize_5qbkt_43",Rm="_rowResize_5qbkt_66",Im="_colIndicator_5qbkt_89",wm="_rowIndicator_5qbkt_95",Cm="_indicator_5qbkt_114",Om="_addCol_5qbkt_151",Lm="_addRow_5qbkt_166",Dm={tableEditor:Em,table:Sm,layer:Tm,colResize:km,rowResize:Rm,colIndicator:Im,rowIndicator:wm,indicator:Cm,addCol:Om,addRow:Lm},Nm=["width"],Bm=["onClick"],Am=["onClick"];function Mm(o,t,n,e,s,i){return E(),I("div",{class:d(e.classes.tableEditor),onContextmenu:ae(e.onContextmenu,["stop","prevent"]),onClick:t[3]||(t[3]=ae(()=>{},["stop"])),onMouseleave:e.resetTableLine},[u("table",{class:d(e.classes.table),onMousemove:e.updateTableLine},[u("colgroup",null,[(E(!0),I(oe,null,ce(e.colgroup,(l,r)=>(E(),I("col",{key:r,width:l},null,8,Nm))),128))]),u("tbody",null,[(E(!0),I(oe,null,ce(n.element.children,l=>(E(),I("tr",{key:l.id},[(E(!0),I(oe,null,ce(l.children,r=>(E(),ne(e.CellEditor,{key:r.id,element:r},null,8,["element"]))),128))]))),128))])],34),u("div",{class:d(e.classes.layer)},[e.resizeLine.colIndex>=0?(E(),I("div",{key:0,title:"调整列宽",class:d(e.classes.colResize),style:Y(e.createColumnStyle(e.resizeLine.colIndex)),onPointerdown:t[0]||(t[0]=ae(l=>e.onColumnResize(l,e.resizeLine.colIndex),["stop","prevent"]))},null,38)):W("v-if",!0),e.resizeLine.rowIndex>=0?(E(),I("div",{key:1,title:"调整行高",class:d(e.classes.rowResize),style:Y(e.createRowStyle(e.resizeLine.rowIndex)),onPointerdown:t[1]||(t[1]=ae(l=>e.onRowResize(l,e.resizeLine.rowIndex),["stop","prevent"]))},null,38)):W("v-if",!0),(E(!0),I(oe,null,ce(e.colgroup,(l,r)=>(E(),I("div",{title:"选中此列",key:r,style:Y(e.createColIndicatorStyle(r)),class:d(e.classes.colIndicator),onClick:ae(c=>e.onSelectCol(r),["stop"])},null,14,Bm))),128)),(E(!0),I(oe,null,ce(n.element.children,(l,r)=>(E(),I("div",{title:"选中此行",key:r,style:Y(e.createRowIndicatorStyle(r)),class:d(e.classes.rowIndicator),onClick:ae(c=>e.onSelectRow(l),["stop"])},null,14,Am))),128)),n.element.isSelected?(E(),I("button",{key:2,onClick:ae(e.addNewCol,["stop"]),type:"button",class:d(["quickprint-text-btn",e.classes.addCol]),title:"添加列"},[f(e.Icon,{icon:"icon-plus",size:"14px"})],2)):W("v-if",!0),n.element.isSelected?(E(),I("button",{key:3,onClick:ae(e.addNewRow,["stop"]),type:"button",class:d(["quickprint-text-btn",e.classes.addRow]),title:"添加行"},[f(e.Icon,{icon:"icon-plus",size:"14px"})],2)):W("v-if",!0)],2),u("div",{class:d(e.classes.indicator),onPointerdown:t[2]||(t[2]=(...l)=>e.api.onDragStart&&e.api.onDragStart(...l)),title:"选中/拖动表格"},null,34)],34)}const xm={classes:Dm},Pm=F(ym,[["render",Mm],["__cssModules",xm],["__file","/home/dongls/work/quickprint/packages/designer/elements/Table/TableEditor.vue"]]),qm=q({__name:"TableConfig",props:{element:{type:dt,required:!0}},setup(o,{expose:t}){t();const n=o,e=R({get(){return n.element.attributes.rowMode??Kt.CONST},set(l){n.element.attributes.rowMode=l===Kt.CONST?void 0:l}}),s=[{label:"固定行数",value:Kt.CONST,detail:"按照画布中设计打印固定行数，并依此拆分表格"},{label:"忽略空白行",value:Kt.IGNORE_BLANK,detail:"不固定行数，忽略表格中的空白行"},{label:"打印空白行",value:Kt.PRINT_BLANK,detail:"不固定行数，打印表格中的空白行"}],i={props:n,rowType:e,options:s,get Select(){return ie}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),Fm={class:"quickprint-config-section quickprint-config-inline"},Vm={class:"quickprint-config-content"};function zm(o,t,n,e,s,i){return E(),I("section",Fm,[t[1]||(t[1]=u("header",{class:"quickprint-config-header"},"行模式",-1)),u("div",Vm,[f(e.Select,{options:e.options,modelValue:e.rowType,"onUpdate:modelValue":t[0]||(t[0]=l=>e.rowType=l),class:"quickprint-w-full"},null,8,["modelValue"])])])}const Um=F(qm,[["render",zm],["__file","/home/dongls/work/quickprint/packages/designer/elements/Table/TableConfig.vue"]]),Hm=q({__name:"TableRowConfig",props:{element:{type:bn,required:!0}},setup(o,{expose:t}){t();const n=o,e=[{label:"表头",value:At.HEADER},{label:"表体",value:At.BODY},{label:"表尾",value:At.FOOTER}],s=R({get(){return n.element.attributes.type??At.BODY},set(l){switch(l){case At.HEADER:n.element.asHeader();break;case At.FOOTER:n.element.asFooter();break;default:n.element.asBody()}}}),i={props:n,options:e,rowType:s,get Select(){return ie}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),Gm={class:"quickprint-config-section quickprint-config-inline"},Wm={class:"quickprint-config-content"};function jm(o,t,n,e,s,i){return E(),I("section",Gm,[t[1]||(t[1]=u("header",{class:"quickprint-config-header"},"行模式",-1)),u("div",Wm,[f(e.Select,{options:e.options,modelValue:e.rowType,"onUpdate:modelValue":t[0]||(t[0]=l=>e.rowType=l),class:"quickprint-w-full"},null,8,["modelValue"])])])}const Xm=F(Hm,[["render",jm],["__file","/home/dongls/work/quickprint/packages/designer/elements/Table/TableRowConfig.vue"]]),Ym=q({__name:"TableCellDummy",props:{element:{type:an,required:!0}},setup(o,{expose:t}){t();const n=o,e=R(()=>n.element.isCollapsed),s=R(()=>{const _=n.element.attributes.diagonalMode;return _==null?!1:_!==nt.NONE}),i=we("classes"),l=R(()=>{const _=n.element,v=_.parent;return{[i.cell]:!0,[ee.SELECTED]:(v==null?void 0:v.isSelected)||_.isSelected}}),r=R(()=>{var h;const _=Lt((h=n.element.parent)==null?void 0:h.parent),v=Lt(n.element.parent),y=Lt(n.element);return{...a(n.element),...p(n.element),...Object.assign(_,v,y)}}),c=R(()=>{const _=ko(n.element,{exclude:["border","padding"]});return _.color&&(_["--quickprint-element-var-color"]=_.color),_});function a(_){const v=_.findPrevDisplayedCell(),y=_.findNextDisplayedCell(),h=_.table,S=j(_,"left")??j(_.parent,"left")??j(h,"left"),m=j(v,"right")??j(v==null?void 0:v.parent,"right")??j(h,"right"),b=j(_,"right")??j(_.parent,"right")??j(h,"right"),w=j(y,"left")??j(y==null?void 0:y.parent,"left")??j(h,"left"),V=Math.max(se.processLengthToPX(S)??0,se.processLengthToPX(m)??0),Z=Math.max(se.processLengthToPX(b)??0,se.processLengthToPX(w)??0);return{"--quickprint-cell-width":n.element.offsetWidth+"px","--quickprint-cell-border-left-width":V+"px","--quickprint-cell-border-right-width":Z+"px"}}function p(_){var T,M;const v=_.index,y=_.table,h=(T=_.findPrevDisplayedRow())==null?void 0:T.children[v],S=(M=_.findNextDisplayedRow())==null?void 0:M.children[v],m=j(_,"top")??j(_.parent,"top")??j(y,"top"),b=j(h,"bottom")??j(h==null?void 0:h.parent,"bottom")??j(y,"bottom"),w=j(_,"bottom")??j(_.parent,"bottom")??j(y,"bottom"),V=j(S,"top")??j(S==null?void 0:S.parent,"top")??j(y,"top"),Z=Math.max(se.processLengthToPX(m)??0,se.processLengthToPX(b)??0),L=Math.max(se.processLengthToPX(w)??0,se.processLengthToPX(V)??0);return{"--quickprint-cell-height":_.offsetHeight+"px","--quickprint-cell-border-top-width":Z+"px","--quickprint-cell-border-bottom-width":L+"px"}}const g={props:n,hidden:e,showDiagonal:s,classes:i,className:l,cellStyle:r,diagonalStyle:c,processWidthStyle:a,processHeightStyle:p,Content:Xt,Diagonal:wo};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),Zm="_cell_10c6k_2",$m="_content_10c6k_32",Km={cell:Zm,content:$m},Qm=["colspan","rowspan"];function Jm(o,t,n,e,s,i){return e.hidden?W("v-if",!0):(E(),I("td",{key:0,class:d(e.className),style:Y(e.cellStyle),colspan:n.element.attributes.colspan,rowspan:n.element.attributes.rowspan},[e.showDiagonal?(E(),ne(e.Diagonal,{key:0,mode:n.element.attributes.diagonalMode,labels:n.element.attributes.diagonalLabels,width:n.element.offsetWidth,height:n.element.offsetHeight,style:Y(e.diagonalStyle)},null,8,["mode","labels","width","height","style"])):(E(),ne(e.Content,{key:1,element:n.element,class:d(e.classes.content),showDS:!1},null,8,["element","class"]))],14,Qm))}const eg={classes:Km},tg=F(Ym,[["render",Jm],["__cssModules",eg],["__file","/home/dongls/work/quickprint/packages/designer/elements/Table/TableCellDummy.vue"]]),ng=q({__name:"TableDummy",props:{element:{type:dt,required:!0}},setup(o,{expose:t}){t();const n=o,e=R(()=>n.element.attributes.colgroup??[]),s={props:n,colgroup:e,TableCellDummy:tg};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),og="_table_1kbtq_2",lg={table:og},sg=["width"];function ig(o,t,n,e,s,i){return E(),I("table",{class:d(o.classes.table)},[u("colgroup",null,[(E(!0),I(oe,null,ce(e.colgroup,(l,r)=>(E(),I("col",{key:r,width:l},null,8,sg))),128))]),u("tbody",null,[(E(!0),I(oe,null,ce(n.element.children,l=>(E(),I("tr",{key:l.id},[(E(!0),I(oe,null,ce(l.children,r=>(E(),ne(e.TableCellDummy,{key:r.id,element:r},null,8,["element"]))),128))]))),128))])],2)}const rg={classes:lg},ag=F(ng,[["render",ig],["__cssModules",rg],["__file","/home/dongls/work/quickprint/packages/designer/elements/Table/TableDummy.vue"]]),jn=Object.freeze({title:"表格",type:G.TABLE,icon:"icon-table",dummy:ag,editor:Pm,config:{attributes:Um,exclude:[_e.DISPLAY,_e.BASIC]},features:{draggable:!1,resizable:!1,contextMenu:!1},onCreate(){const o=[He,He,He],t=ue.create({type:G.TABLE});return t.style.borderStyle=le.SOLID,t.setColgroup(o),t.append(bn.createDefault(o)),t.append(bn.createDefault(o)),t.append(bn.createDefault(o)),t.updateBoxSize(),t}}),Jl=Object.freeze({title:"表格行",type:G.TABLE_ROW,icon:"icon-table-row",exposed:!1,editor:null,config:{exclude:[_e.POSITION,_e.COORD,_e.OVERFLOW],attributes:Xm}}),Oo=Object.freeze({title:"单元格",type:G.TABLE_CELL,icon:"icon-table-cell",exposed:!1,editor:Fl,config:{exclude:[_e.POSITION,_e.COORD]}});class cg{constructor(t){X(this,"__v_skip",!0);X(this,"observer");X(this,"callbacks",[]);X(this,"handler");this.handler=va((n,e)=>{for(const s of this.callbacks)s(n,e)},500),this.observer=new MutationObserver((n,e)=>this.handler(n,e)),this.observer.observe(t,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}addListener(t){return typeof t!="function"||this.callbacks.findIndex(e=>e===t)>=0?!1:(this.callbacks.push(t),!0)}removeListener(t){const n=this.callbacks.findIndex(e=>e===t);return n<0?!1:(this.callbacks.splice(n,1),!0)}cleanup(){this.observer.disconnect(),this.callbacks=[]}}function ug(o,t){switch(o){case"fontSize":return t===Oe.DEFAULT?void 0:t;case"fontFamily":return t===he.DEFAULT?void 0:t;case"lineHeight":return t===Rt.DEFAULT?void 0:t;default:return t}}const Go="texteditor-const-node",dg=Object.freeze({CONST:0});class fg{constructor(t,n={}){X(this,"__v_skip",!0);X(this,"emitter",new wn);X(this,"container");X(this,"options");X(this,"observer");X(this,"handleClick");this.container=t,this.container.contentEditable="plaintext-only",this.container.classList.add("quickprint-text-editor"),this.options=n,this.observer=new cg(t),this.handleClick=this.onClick.bind(this),Reflect.defineProperty(this,"emitter",{configurable:!1,enumerable:!1,writable:!1,value:new wn}),t.addEventListener("click",this.handleClick)}on(t,n){return this.emitter.on(t,n)}once(t,n){return this.emitter.once(t,n)}off(t,n){return this.emitter.off(t,n)}dispatch(t){return this.emitter.dispatch(t)}createEvent(t,n){return new Rs(t,n)}watch(t){return this.observer.addListener(t),()=>{this.observer!=null&&this.observer.removeListener(t)}}cleanup(){this.container.removeEventListener("click",this.handleClick),this.observer.cleanup(),this.emitter.cleanup()}getHTML(){return this.container.innerHTML}setHTML(t){return console.log("TODO: 光标"),this.container.innerHTML=t,!0}clear(){return this.container.innerHTML="",!0}focus(){this.container.focus()}blur(){this.container.blur()}getSelection(){const t=this.container,n=window.getSelection();if(n==null||!t.contains(n.anchorNode)||!t.contains(n.focusNode))return null;const e=n.getRangeAt(0);return e==null?null:{selection:n,range:e}}hasSelection(){const t=this.getSelection();return t==null?!1:!t.selection.isCollapsed}normalize(){const t=this.container;for(let n=t.childNodes.length-1;n>=0;n--){const e=t.childNodes[n];if(fe(e.textContent)){t.removeChild(e);continue}if(e instanceof HTMLElement){if(e.contentEditable==="false")continue;e.style.length===0&&e.replaceWith(e.textContent)}}return t.normalize(),t}updateHeight(){const t=this.container.scrollHeight;return this.dispatch(this.createEvent("resize",{height:t})),t}async autosize(){this.container.style.height="auto";const t=this.updateHeight();return await Bn(),this.container.style.removeProperty("height"),t}checkHeight(){const t=this.container;t.scrollHeight>t.clientHeight&&this.updateHeight()}createConstNode(t){const n=document.createElement("span");return n.contentEditable="false",n.innerText=`${t.label??t.value}`,n.className=Go,n.dataset.value=t.value,n.dataset.type=t.type+"",n}focusAfterNode(t){if(!this.container.contains(t))return!1;const n=window.getSelection();if(n==null)return!1;const e=new Range;return e.selectNode(t),n.removeAllRanges(),n.addRange(e),n.collapseToEnd(),!0}focusNode(t){if(!this.container.contains(t))return!1;const n=window.getSelection();if(n==null)return!1;const e=new Range;return e.selectNode(t),n.removeAllRanges(),n.addRange(e),!0}focusNodes(t){if(t.length==0)return!1;if(t.length==1)return this.focusNode(t[0]);const n=window.getSelection();if(n==null)return!1;const e=new Range,s=t[0],i=t[t.length-1];return!this.container.contains(s)||!this.container.contains(i)?!1:(n.removeAllRanges(),e.setStartBefore(s),e.setEndAfter(i),n.addRange(e),!0)}insertNode(t,n){var _;const e=this.getSelection();if(e==null)return!1;const{selection:s,range:i}=e;if(s.isCollapsed!=!0&&s.deleteFromDocument(),s.isCollapsed!=!0)return!1;const l=s.anchorNode;if(l==null)return!1;const r=this.container,c=this.createConstNode(t);if(typeof(n==null?void 0:n.onCreateNode)=="function"&&n.onCreateNode(c),l.parentNode===r||(_=l.parentNode)!=null&&_.contains(r))return i.insertNode(c),this.normalize(),this.focusAfterNode(c),!0;const a=l.parentNode;if(a==null)return!1;const p=a.textContent;if(p==null)return!1;if(s.anchorOffset==p.length)return r.insertBefore(c,a.nextSibling),this.normalize(),this.focusAfterNode(c),!0;const g=document.createElement("span");return g.textContent=p.slice(0,s.anchorOffset),a instanceof HTMLElement&&(g.style.cssText=a.style.cssText),a.textContent=p.slice(s.anchorOffset),r.insertBefore(c,a),r.insertBefore(g,c),this.normalize(),this.focusAfterNode(c),!0}insertText(t){const n=this.getSelection();if(n==null)return!1;const{selection:e,range:s}=n;return e.isCollapsed||e.deleteFromDocument(),s.insertNode(document.createTextNode(t)),e.collapseToEnd(),this.normalize(),!0}normalizeRange(t){const n=this.container,e=t.startContainer,s=t.endContainer,i={};return e===n?(i.startNode=n.childNodes[t.startOffset],i.startOffset=-1):(i.startNode=e.parentNode==n?e:e.parentNode,i.startOffset=t.startOffset),s===n?(i.endNode=n.childNodes[t.endOffset],i.endOffset=-1):(i.endNode=s.parentNode==n?s:s.parentNode,i.endOffset=t.endOffset),i}findNodesBetween(t,n){const e=[];let s=t.nextSibling;for(;s!=null&&s!==n;)e.push(s),s=s.nextSibling;return e}inheritStyle(t,n){if(!(n instanceof HTMLElement))return!1;const e=n.style.cssText;return fe(e)?!1:(t.style.cssText=e,!0)}extractNodesFromRange(){var p;const t=this.container,n=this.getSelection();if(n==null||n.selection.isCollapsed)return null;const s=n.range,{startNode:i,startOffset:l,endNode:r,endOffset:c}=this.normalizeRange(s);if(i===r){const g=i.textContent??"";if(i instanceof CharacterData){const y=document.createElement("span");return y.textContent=g.slice(l,c),s.deleteContents(),s.insertNode(y),[y]}const _=document.createElement("span");_.textContent=g.slice(0,l),this.inheritStyle(_,r);const v=document.createElement("span");return v.textContent=g.slice(l,c),this.inheritStyle(v,r),r.textContent=g.slice(c),t.insertBefore(v,r),t.insertBefore(_,v),[v]}const a=this.findNodesBetween(i,r);if(l>0){const g=i.textContent??"",_=document.createElement("span");_.textContent=g.slice(0,l),this.inheritStyle(_,i),i.textContent=g.slice(l),t.insertBefore(_,i)}if(c>=0&&c<=(((p=r.textContent)==null?void 0:p.length)??0)){const g=r.textContent??"";if(r instanceof HTMLElement){r.textContent=g.slice(0,c);const _=document.createElement("span");_.textContent=g.slice(c),this.inheritStyle(_,r),t.insertBefore(_,r.nextSibling),a.push(r)}else{const _=document.createElement("span");_.textContent=g.slice(0,c),t.replaceChild(_,r);const v=document.createTextNode(g.slice(c));t.insertBefore(v,r.nextSibling),a.push(_)}}return a.unshift(i),a}setStyle(t,n){const e=this.extractNodesFromRange();if(e==null||e.length==0)return!1;let s=!0;const i=ul(t),l=ug(t,n);for(let r=0;r<e.length;r++){const c=e[r];if(c instanceof HTMLElement){this.matchElementStyle(c,i,l)||(s=!1);continue}const a=document.createElement("span");a.textContent=c.textContent,this.container.replaceChild(a,c),e[r]=a,s=!1}for(const r of e){if(s||l==null){this.removeElementStyle(r,i,l);continue}this.setElementStyle(r,i,l)}return this.focusNodes(e),!0}matchElementStyle(t,n,e){const s=t.style.getPropertyValue(n);return n==="text-decoration-line"?s.includes(e):s==e}setElementStyle(t,n,e){if(n==="text-decoration-line"){const s=t.style.getPropertyValue("text-decoration-line"),i=wt.push(s,e);t.style.setProperty("text-decoration-line",i);return}t.style.setProperty(n,e)}removeElementStyle(t,n,e){if(n==="text-decoration-line"){const s=t.style.getPropertyValue("text-decoration-line"),i=wt.remove(s,e);fe(i)?t.style.removeProperty("text-decoration-line"):t.style.setProperty("text-decoration-line",i);return}t.style.removeProperty(n)}onClick(t){const n=t.target;if(n instanceof HTMLElement&&n.matches("."+Go)){t.preventDefault(),t.stopPropagation(),this.focusNode(n);return}}}const pg=q({__name:"ParagraphEditor",props:{element:{type:Is,required:!0}},setup(o,{expose:t}){t();const n=o,e=Te(),s=me(),i=R(()=>n.element.isSelected!==!0?!1:e.state.selectMode===lt.SINGLE);let l=null;const r=R(()=>Gn.map(T=>(T.style={fontFamily:T.value==he.DEFAULT?he.SONG:T.value},T)));function c(){}async function a(){if(l==null)return;const T=await Io({doc:e.doc}).catch(tt);if(T==null)return;const M=it(T.value,e.doc.ds)??T.value,P={type:dg.CONST,value:T.value,label:M};l.insertNode(P)}function p(){l==null||l.blur()}function g(){l==null||l.autosize()}function _(T){const M=n.element.ds.value,P=new fg(T);return P.on("resize",N=>{var O;const C=(O=N.detail)==null?void 0:O.height;C!=null&&n.element.setHeight(C+2)}),P.watch(()=>{const N=P.getHTML(),C=n.element.ds.value;N!==C&&(n.element.ds.value=N,P.checkHeight())}),fe(M)||P.setHTML(M),P}function v(T){l==null||l.setStyle("fontFamily",T.value)}function y(T){l==null||l.setStyle("fontSize",T.value)}function h(T){l==null||l.setStyle("lineHeight",T.value)}function S(T){l==null||l.setStyle("backgroundColor",T)}function m(T){l==null||l.setStyle("color",T)}function b(){l==null||l.setStyle("fontWeight","700")}function w(){l==null||l.setStyle("fontStyle","italic")}function V(){l==null||l.setStyle("textDecorationLine","underline")}function Z(){l==null||l.setStyle("textDecorationLine","line-through")}Eo(()=>n.element.ds.value,T=>{l==null||l.getHTML()==T||l.setHTML(T)}),jt(()=>{n.element.on("blur",p),l=_(s.value)}),An(()=>{n.element.off("blur",p),l&&l.cleanup()});const L={props:n,api:e,editorRef:s,showToolbar:i,get editor(){return l},set editor(T){l=T},fontOptions:r,onContextmenu:c,insertVar:a,onBlur:p,adjustHeight:g,createEditor:_,setFontFamily:v,setFontSize:y,setLineHeight:h,setHighlightColor:S,setFontColor:m,setFontWeight:b,setItalic:w,setUnderline:V,setThroughLine:Z,get Icon(){return K},get Select(){return ie},get ColorPicker(){return rn},get FONT_SIZE_OPTIONS(){return Co},get LINE_HEIGHT_OPTIONS(){return Hl}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),mg="_paragraph_1v2pj_2",gg="_indicator_1v2pj_6",_g="_editor_1v2pj_18",hg="_toolbar_1v2pj_44",bg="_tool_1v2pj_44",vg="_colorIcon_1v2pj_66",yg="_colorIndicator_1v2pj_86",Eg="_divider_1v2pj_95",Sg={paragraph:mg,indicator:gg,editor:_g,toolbar:hg,tool:bg,colorIcon:vg,colorIndicator:yg,divider:Eg};function Tg(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.paragraph),onPointerdown:t[2]||(t[2]=ae(()=>{},["stop"])),onContextmenu:ae(e.onContextmenu,["stop","prevent"])},[u("div",{class:d(o.classes.indicator),onPointerdown:t[0]||(t[0]=(...l)=>e.api.onDragStart&&e.api.onDragStart(...l)),title:"选中/拖动段落"},null,34),e.showToolbar?(E(),I("div",{key:0,class:d(o.classes.toolbar),onMousedown:t[1]||(t[1]=ae(()=>{},["prevent"]))},[f(e.Select,{onSelect:e.setFontFamily,title:"字体",width:"60px",options:e.fontOptions,class:d(o.classes.tool),button:""},null,8,["options","class"]),f(e.Select,{onSelect:e.setFontSize,title:"字号",width:"60px",options:e.FONT_SIZE_OPTIONS,class:d(o.classes.tool),button:""},null,8,["options","class"]),f(e.Select,{onSelect:e.setLineHeight,title:"行高",width:"60px",options:e.LINE_HEIGHT_OPTIONS,class:d(o.classes.tool),popoverWidth:120,button:""},null,8,["options","class"]),u("div",{class:d(o.classes.divider)},null,2),f(e.ColorPicker,{class:d(o.classes.tool),onSelect:e.setHighlightColor},{default:Se(()=>[u("div",{class:d(o.classes.colorIcon),title:"突出显示"},[f(e.Icon,{icon:"icon-bg-color-b",size:"15px"}),u("div",{class:d(o.classes.colorIndicator)},null,2)],2)]),_:1},8,["class"]),f(e.ColorPicker,{class:d(o.classes.tool),onSelect:e.setFontColor},{default:Se(()=>[u("div",{class:d(o.classes.colorIcon),title:"字体颜色"},[f(e.Icon,{icon:"icon-font",size:"15px"}),u("div",{class:d(o.classes.colorIndicator)},null,2)],2)]),_:1},8,["class"]),u("button",{onClick:e.setFontWeight,type:"button",title:"加粗",class:d(["quickprint-text-btn",o.classes.tool])},[f(e.Icon,{icon:"icon-font-bold",size:"16px"})],2),u("button",{onClick:e.setItalic,type:"button",title:"斜体",class:d(["quickprint-text-btn",o.classes.tool])},[f(e.Icon,{icon:"icon-italic",size:"16px"})],2),u("button",{onClick:e.setUnderline,type:"button",title:"下划线",class:d(["quickprint-text-btn",o.classes.tool])},[f(e.Icon,{icon:"icon-underline",size:"16px"})],2),u("button",{onClick:e.setThroughLine,type:"button",title:"删除线",class:d(["quickprint-text-btn",o.classes.tool])},[f(e.Icon,{icon:"icon-through-line",size:"16px"})],2),u("div",{class:d(o.classes.divider)},null,2),u("button",{class:"quickprint-text-btn",type:"button",onClick:e.insertVar},[f(e.Icon,{icon:"icon-insert-var",size:"16px"}),t[3]||(t[3]=u("span",null,"插入变量",-1))]),u("button",{class:"quickprint-text-btn",type:"button",onClick:e.adjustHeight},[f(e.Icon,{icon:"icon-colum-height",size:"16px"}),t[4]||(t[4]=u("span",null,"调整高度",-1))])],34)):W("v-if",!0),u("div",{ref:"editorRef",class:d(o.classes.editor)},null,2)],34)}const kg={classes:Sg},Rg=F(pg,[["render",Tg],["__cssModules",kg],["__file","/home/dongls/work/quickprint/packages/designer/elements/Paragraph/ParagraphEditor.vue"]]),Xn=Object.freeze({title:"段落",type:G.PARAGRAPH,icon:"icon-paragraph",features:{draggable:!1,contextMenu:!1},editor:Rg,config:{exclude:[_e.DATASOURCE,_e.BASIC,_e.OVERFLOW]},onCreate(){return ue.create({type:G.PARAGRAPH,width:He*4,height:xn*6})}}),Ig=q({__name:"ImageEditor",props:{element:{type:fl,required:!0}},setup(o,{expose:t}){t();const n=o,e=Te(),s=R(()=>{var p;const a=n.element.ds;return fe(a.value)?{type:"placeholder",value:"请上传图片"}:a.type===ve.CONST?r(a.value)?{type:"image",value:a.value}:{type:"placeholder",value:"无效的图片"}:{type:"content",value:(p=Fn(n.element))==null?void 0:p.content}}),i=R(()=>dn(n.element)),l=R(()=>ws(n.element.attributes.size));function r(a){return!!(/^https?:\/\//.test(a)||/^data:image\/(.+);base64,/.test(a))}const c={props:n,api:e,format:s,style:i,backgroundSize:l,isImage:r};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),wg="_editor_154e6_2",Cg="_image_154e6_10",Og="_highlight_154e6_14",Lg="_placeholder_154e6_30",Dg={editor:wg,image:Cg,highlight:Og,placeholder:Lg},Ng=["src"];function Bg(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.editor),style:Y(e.style)},[e.format.type==="placeholder"?(E(),I("div",{key:0,class:d(o.classes.placeholder)},Q(e.format.value),3)):W("v-if",!0),e.format.type==="content"?(E(),I("span",{key:1,class:d(o.classes.highlight)},"["+Q(e.format.value)+"]",3)):W("v-if",!0),e.format.type==="image"?(E(),I("img",{key:2,src:e.format.value,style:Y(e.backgroundSize),class:d(o.classes.image)},null,14,Ng)):W("v-if",!0)],6)}const Ag={classes:Dg},Wo=F(Ig,[["render",Bg],["__cssModules",Ag],["__file","/home/dongls/work/quickprint/packages/designer/elements/Image/ImageEditor.vue"]]),Mg=q({__name:"ImageConfig",props:{element:{type:fl,required:!0}},setup(o,{expose:t}){t();const n=o,e=R({get(){return n.element.attributes.size??Pt.NATURAL},set(i){const l=i===Pt.NATURAL?void 0:i;n.element.attributes.size=l}}),s={props:n,size:e,get IMAGE_BACKGROUND_SIZE_OPTIONS(){return si},get Select(){return ie}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),xg={class:"quickprint-config-section quickprint-config-inline"},Pg={class:"quickprint-config-content"};function qg(o,t,n,e,s,i){return E(),I("section",xg,[t[1]||(t[1]=u("header",{class:"quickprint-config-header"},"缩放模式",-1)),u("div",Pg,[f(e.Select,{options:e.IMAGE_BACKGROUND_SIZE_OPTIONS,modelValue:e.size,"onUpdate:modelValue":t[0]||(t[0]=l=>e.size=l),class:"quickprint-w-full"},null,8,["options","modelValue"])])])}const Fg=F(Mg,[["render",qg],["__file","/home/dongls/work/quickprint/packages/designer/elements/Image/ImageConfig.vue"]]),Yn=Object.freeze({title:"图片",icon:"icon-image",type:G.IMAGE,editor:Wo,dummy:Wo,config:{attributes:Fg,exclude:[_e.BASIC,_e.OVERFLOW]},contextmenu(){return["auto-resize","---","copy","delete","---","z-index"]},onCreate(){return ue.create({type:G.IMAGE,width:He,height:He})}}),co="",Vg=q({__name:"BarcodeEditor",props:{element:{type:pl,required:!0}},setup(o,{expose:t}){t();const n=o,e=we("classes"),s=R(()=>{const c=n.element.attributes,a=ft(c.width)||ft(c.height);return{"quickprint-is-element-editor":!0,[e.editor]:!0,[e.fixed]:a,[e.contain]:!a}}),i=R(()=>{const c=n.element.attributes,a=dn(n.element);return c.width&&(a["--quickprint-barcode-width"]=c.width),c.height&&(a["--quickprint-barcode-height"]=c.height),a}),l=R(()=>{const c=n.element.ds,a=n.element.attributes,p={barcolor:a.barcolor,includetext:a.showText===!0,width:se.processLengthToMM(a.width),height:se.processLengthToMM(a.height)};if(c.type===ve.CONST&&ft(c.value)){const _=vn.barcode(a.mode,c.value,p);if(ft(_))return _}const g=vn.genDefaultBarcode(a.mode);return g==null?co:vn.barcode(a.mode,g,p)??co}),r={props:n,NONE:co,classes:e,className:s,style:i,demo:l};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),zg="_editor_1vkh8_2",Ug="_barcode_1vkh8_10",Hg="_fixed_1vkh8_14",Gg="_contain_1vkh8_21",Wg={editor:zg,barcode:Ug,fixed:Hg,contain:Gg},jg=["innerHTML"];function Xg(o,t,n,e,s,i){return E(),I("div",{class:d(e.className),style:Y(e.style)},[u("span",{innerHTML:e.demo,class:d(e.classes.barcode)},null,10,jg)],6)}const Yg={classes:Wg},jo=F(Vg,[["render",Xg],["__cssModules",Yg],["__file","/home/dongls/work/quickprint/packages/designer/elements/Barcode/BarcodeEditor.vue"]]),Zg=q({__name:"BarcodeConfig",props:{element:{type:pl,required:!0}},setup(o,{expose:t}){t();const n=o,e=R({get(){return n.element.attributes.mode},set(l){n.element.attributes.mode=l}}),s=R({get(){return n.element.attributes.showText===!0},set(l){n.element.attributes.showText=l}}),i={props:n,mode:e,showText:s,RadioButton:zn,get Select(){return ie},get BARCODE_MODE_OPTIONS(){return ri},get SHOW_TEXT_OPTIONS(){return ai}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),$g={class:"quickprint-config-section quickprint-config-inline"},Kg={class:"quickprint-config-content"},Qg={class:"quickprint-config-section quickprint-config-inline"},Jg={class:"quickprint-config-content"};function e_(o,t,n,e,s,i){return E(),I(oe,null,[u("section",$g,[t[2]||(t[2]=u("header",{class:"quickprint-config-header"},"码制",-1)),u("div",Kg,[f(e.Select,{options:e.BARCODE_MODE_OPTIONS,modelValue:e.mode,"onUpdate:modelValue":t[0]||(t[0]=l=>e.mode=l),class:"quickprint-w-full"},null,8,["options","modelValue"])])]),u("section",Qg,[t[3]||(t[3]=u("header",{class:"quickprint-config-header"},"显示文本",-1)),u("div",Jg,[f(e.RadioButton,{modelValue:e.showText,"onUpdate:modelValue":t[1]||(t[1]=l=>e.showText=l),options:e.SHOW_TEXT_OPTIONS,class:"quickprint-w-full"},null,8,["modelValue","options"])])])],64)}const t_=F(Zg,[["render",e_],["__file","/home/dongls/work/quickprint/packages/designer/elements/Barcode/BarcodeConfig.vue"]]),Zn=Object.freeze({title:"条形码",icon:"icon-barcode",type:G.BARCODE,editor:jo,dummy:jo,config:{attributes:t_},contextmenu(){return["barcode-setting","auto-resize","---","copy","delete","---","z-index"]},onCreate(){return ue.create({type:G.BARCODE,width:155,height:112,attributes:{mode:Ue.EAN_13,showText:!0}})}}),uo="0",n_=q({__name:"QRCodeEditor",props:{element:{type:ml,required:!0}},setup(o,{expose:t}){t();const n=o,e=R(()=>n.element.ds.type===ve.CONST&&n.element.ds.value||uo),s=R(()=>{const r=e.value,c=n.element.attributes.mode,a=n.element.attributes.barcolor;return vn.qrcode(c,r,{barcolor:a})??""}),i=R(()=>dn(n.element,{exclude:["align"]})),l={props:n,TEXT:uo,value:e,demo:s,style:i};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),o_="_editor_ymcu8_2",l_="_qrcode_ymcu8_19",s_={editor:o_,qrcode:l_},i_=["innerHTML"];function r_(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.editor),style:Y(e.style)},[u("span",{innerHTML:e.demo,class:d(o.classes.qrcode)},null,10,i_)],6)}const a_={classes:s_},Xo=F(n_,[["render",r_],["__cssModules",a_],["__file","/home/dongls/work/quickprint/packages/designer/elements/QRCode/QRCodeEditor.vue"]]),c_=q({__name:"QRCodeConfig",props:{element:{type:ml,required:!0}},setup(o,{expose:t}){t();const n=o,e=R({get(){return n.element.attributes.mode??sn.QRCODE},set(i){const l=i===sn.QRCODE?void 0:i;n.element.attributes.mode=l}}),s={props:n,mode:e,get QRCODE_MODE_OPTIONS(){return ii},get Select(){return ie}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),u_={class:"quickprint-config-section quickprint-config-inline"},d_={class:"quickprint-config-content"};function f_(o,t,n,e,s,i){return E(),I("section",u_,[t[1]||(t[1]=u("header",{class:"quickprint-config-header"},"码制",-1)),u("div",d_,[f(e.Select,{options:e.QRCODE_MODE_OPTIONS,modelValue:e.mode,"onUpdate:modelValue":t[0]||(t[0]=l=>e.mode=l),class:"quickprint-w-full"},null,8,["options","modelValue"])])])}const p_=F(c_,[["render",f_],["__file","/home/dongls/work/quickprint/packages/designer/elements/QRCode/QRCodeConfig.vue"]]),$n=Object.freeze({title:"二维码",icon:"icon-qrcode",type:G.QRCODE,editor:Xo,dummy:Xo,config:{attributes:p_},contextmenu(){return["qrcode-setting","auto-resize","---","copy","delete","---","z-index"]},onCreate(){return ue.create({type:G.QRCODE,width:He,height:He})}}),es=[Vn,Un,Hn,jn,Oo,Jl,Xn,Yn,Zn,$n],m_=[Vn,Un,Hn,jn,Xn,Yn,Zn,$n],g_={[G.TEXT]:Vn.editor,[G.NUMBER]:Un.editor,[G.DATE]:Hn.editor,[G.TABLE]:jn.editor,[G.TABLE_CELL]:Oo.editor,[G.PARAGRAPH]:Xn.editor,[G.IMAGE]:Yn.editor,[G.BARCODE]:Zn.editor,[G.QRCODE]:$n.editor},__={[G.TEXT]:Vn.config,[G.NUMBER]:Un.config,[G.DATE]:Hn.config,[G.TABLE]:jn.config,[G.TABLE_CELL]:Oo.config,[G.TABLE_ROW]:Jl.config,[G.PARAGRAPH]:Xn.config,[G.IMAGE]:Yn.config,[G.BARCODE]:Zn.config,[G.QRCODE]:$n.config},bt=es.reduce((o,t)=>(o[t.type]=t,o),{});function h_(o){const t=es.find(n=>n.type===o);if(t==null||typeof t.onCreate!="function")throw new Error("未知的打印元素");return t.onCreate()}function b_(o){return Reflect.get(g_,o)}function Jt(o){return Reflect.get(__,o)}function Yo(o){var t;return(t=bt[o])==null?void 0:t.contextmenu}function cn(o){var t;return((t=bt[o])==null?void 0:t.title)??o}function v_(o){var t;return(t=bt[o])==null?void 0:t.icon}function y_(o){var t,n;return((n=(t=bt[o])==null?void 0:t.features)==null?void 0:n.selection)!==!1}function E_(o){var t,n;return((n=(t=bt[o])==null?void 0:t.features)==null?void 0:n.contextMenu)!==!1}function S_(o){var t,n;return((n=(t=bt[o])==null?void 0:t.features)==null?void 0:n.resizable)!==!1}function T_(o){var t,n;return((n=(t=bt[o])==null?void 0:t.features)==null?void 0:n.draggable)!==!1}function k_(o){var t;return(t=bt[o])==null?void 0:t.dummy}function Zo(o,t,n,e){const[s,i]=t.top>n.top?[n,t]:[t,n],l=s.top-e.top,r=i.bottom-s.top;return{top:l,left:o,height:r}}function $o(o,t,n,e){const[s,i]=t.left>n.left?[n,t]:[t,n],l=s.left-e.left,r=i.right-s.left;return{top:o,left:l,width:r}}function Ko(o,t){const n=o.find(c=>c.left===t.left);if(n==null||n.height==null)return o.push(t);const e=t.top+t.height,s=n.top+n.height,i=Math.min(n.top,t.top),r=Math.max(e,s)-i;n.top=i,n.height=r}function Qo(o,t){const n=o.find(c=>c.top===t.top);if(n==null||n.width==null)return o.push(t);const e=t.left+t.width,s=n.left+n.width,i=Math.min(n.left,t.left),r=Math.max(e,s)-i;n.left=i,n.width=r}function R_(o){const t=document.createElement("div");return o.appendChild(t),t}function I_(o,t){const n=[...t.querySelectorAll(":scope ."+ee.GUIDE_LINE)];for(const e of o){const s=n.shift()??R_(t);s.className=ee.GUIDE_LINE,s.style.top=e.top+"px",s.style.left=e.left+"px",s.style.height=(e.height??1)+"px",s.style.width=(e.width??1)+"px"}for(const e of n)e.remove()}function w_(o,t){const e=t.querySelectorAll(":scope ."+ee.ELEMENT),s=t.getBoundingClientRect(),i=o.getBoundingClientRect(),l=[];for(const r of e){if(o==r)continue;const c=r.getBoundingClientRect();if(Math.abs(i.left-c.left)<=1||Math.abs(i.right-c.left)<=1){const a=c.left-s.left;Ko(l,Zo(a,i,c,s))}if(Math.abs(i.left-c.right)<=1||Math.abs(i.right-c.right)<=1){const a=c.right-s.left;Ko(l,Zo(a,i,c,s))}if(Math.abs(i.top-c.top)<=1||Math.abs(i.bottom-c.top)<=1){const a=c.top-s.top;Qo(l,$o(a,i,c,s))}if(Math.abs(i.bottom-c.bottom)<=1||Math.abs(i.top-c.bottom)<=1){const a=c.bottom-s.top;Qo(l,$o(a,i,c,s))}}I_(l,t)}function C_(){const o=document.querySelectorAll("."+ee.GUIDE_LINE);for(const t of o)t.remove()}const Nn={create:ya(w_,50),clean:C_};async function O_(o){await Bn(),o&&Reflect.deleteProperty(o,Mn)}async function L_(o,t){if(await Promise.resolve(),t.dropTarget==null){t.indicatorElement&&(t.indicatorElement.style.display="none");return}if(t.indicatorElement==null){const i=document.createElement("div");i.className="quickprint-is-indicator",t.indicatorElement=i,document.body.appendChild(i)}const n=D_(o,t);if(n==null){t.indicatorElement.style.display="none";return}const e=t.indicatorElement,s=t.ghost.getBoundingClientRect();e.style.display="block",e.style.left=s.left+"px",e.style.top=s.top-wl(t.element)+"px",e.textContent=`x:${n.x},y:${n.y},w:${n.w},h:${n.h}`}function D_(o,t){const n=t.dropTarget;if(n==null)return null;const e=o.doc.useGrid;if(t.mode===qe.INSERT){const s=n.closest("."+ee.PAGE);if(s==null)return null;const i=s.getBoundingClientRect();return{x:e?qt(t.left-i.left):Math.round(t.left-i.left),y:e?qt(t.top-i.top):Math.round(t.top-i.top),w:t.element.width,h:t.element.height}}return{x:e?qt(t.left):Math.round(t.left),y:e?qt(t.top):Math.round(t.top),w:t.element.width,h:t.element.height}}function N_(o,t){const n=o.getSelectedElements();if(n.length<2)return;const e=t.diffX??0,s=t.diffY??0;for(const i of n){if(i.id===t.element.id)continue;const l=document.getElementById(i.id);l!=null&&(l.style.left=i.left+e+"px",l.style.top=i.top+s+"px")}}function B_(o,t){const n=o.getSelectedElements();if(n.length<2)return;const e=t.diffX??0,s=t.diffY??0;for(const i of n){if(i.id===t.element.id)continue;i.setLeft(i.left+e),i.setTop(i.top+s);const l=document.getElementById(i.id);l==null||l.style.removeProperty("top"),l==null||l.style.removeProperty("left")}}function A_(o){return!(o.style.rotate&&!o.isSelected)}function M_(o){const t=new mo({selector:{container:ee.DROPPABLE},scale(n){return n.mode===qe.INSERT?100:o.state.scale}});return t.on("before-dragstart",n=>{const e=n.detail;if(e==null)return n.preventDefault();const s=Reflect.get(e.target,yl),i=Reflect.get(e.target,So);s===qe.INSERT&&(e.container=o.component.queryElement("root"),e.ghost=o.component.queryElement("ghost")),e.mode=s===qe.INSERT?s:qe.MOVE,e.elementType=i,e.initDragElement=!1}),t.on("dragstart",n=>{const e=n.detail;if(e==null)return n.preventDefault();if(e.mode===qe.INSERT){const i=h_(e.elementType);e.element=i,e.ghost.style.width=i.width+"px",e.ghost.style.height=i.height+"px";return}const s=Reflect.get(e.target,Ze);if(s==null||!A_(s))return n.preventDefault();e.element=s}),t.on("dragging",n=>{const e=n.detail;e!=null&&(e.initDragElement!==!0&&(e.mode===qe.INSERT&&(e.ghost.style.display="block"),e.mode===qe.MOVE&&Reflect.set(e.target,Mn,To.DRAG_ELEMENT),e.ghost.classList.add(ee.DRAGGING),e.initDragElement=!0),e.diffX=e.left-e.element.left,e.diffY=e.top-e.element.top,L_(o,e),N_(o,e),e.dropTarget&&Nn.create(e.ghost,e.dropTarget))}),t.on("dragend",n=>{const e=n.detail;if(e==null||e.initDragElement!==!0)return;Nn.clean(),e.ghost.classList.remove(ee.DRAGGING),e.indicatorElement&&document.body.removeChild(e.indicatorElement),e.mode===qe.INSERT&&(e.ghost.style.display="none"),e.mode==qe.MOVE&&O_(e.target);const s=e.element;if(e.mode==qe.MOVE){const a=s.left,p=s.top;s.setTop(e.top),s.setLeft(e.left),e.target.style.removeProperty("top"),e.target.style.removeProperty("left"),e.diffX=s.left-a,e.diffY=s.top-p,B_(o,e),o.selectElement(s),o.createSnapshot();return}if(e.dropTarget==null)return;const i=Reflect.get(e.dropTarget,El);if(i==null)return;const l=i instanceof Nt||i instanceof ue?i:null;if(l==null)return;const r=e.dropTarget.getBoundingClientRect(),c=o.state.scale/100;s.setTop((e.top-r.top)/c),s.setLeft((e.left-r.left)/c),s.setWidth(s.width/c),s.setHeight(s.height/c),l.append(e.element),o.selectElement(s),o.createSnapshot()}),o.onDragStart=t.onDragStart,t}const Jo="quickprint-history-0000",x_=1,ct="snapshot",En="health",el="owner",Je="INDEX_OWNER",P_=15*60*1e3,q_=10*60*1e3;function F_(){const o={db:null,timer:null,promise:null};async function t(){const p=await c(En,"readwrite");if(p==null)return o.timer=i(),!1;const g=[],_=p.openCursor();_.onsuccess=async function(v){const y=v.target.result;if(y==null){n(g),o.timer=i(),Fe.debug("History","已检查无效快照");return}const h=y.value;h!=null&&Date.now()-h.timestamp>P_&&g.push(h),y.continue()},_.onerror=function(v){console.error(v),o.timer=i()}}async function n(p){const g=await Promise.allSettled(p.map(_=>e(_.owner)));for(let _=0;_<g.length;_++){const v=g[_];v.status==="rejected"||v.value!==!0||s(p[_].id)}}async function e(p){const g=await c(ct,"readwrite");return g==null?!1:new Promise(_=>{const v=g.index(Je).openCursor(IDBKeyRange.only(p));v.onsuccess=function(y){const h=y.target.result;if(h==null)return _(!0);h.delete(),h.continue()},v.onerror=function(y){console.error(y),_(!1)}})}async function s(p){const g=await c(En,"readwrite");return g==null?!1:on(g.delete(p)).then(()=>!0).catch(_=>(console.log(_),!1))}function i(){return o.timer&&clearTimeout(o.timer),setTimeout(()=>t(),q_)}function l(){return new Promise(p=>{const g=indexedDB.open(Jo,x_);g.onupgradeneeded=_=>{const y=_.target.result,h=y.createObjectStore(En,{keyPath:"id",autoIncrement:!0}),S=y.createObjectStore(ct,{keyPath:"id",autoIncrement:!0});h.createIndex(Je,el),S.createIndex(Je,el)},g.onsuccess=_=>{const v=_.target;o.db=v.result,Fe.debug("History",`已连接数据库【${Jo}】`),p(o.db)},g.onerror=function(_){console.error(_),o.db=null,p(null)}})}function r(){return o.promise==null?Promise.resolve(o.db):o.promise}async function c(p,g="readonly"){const _=await r();if(_==null)return null;try{return _.transaction(p,g).objectStore(p)}catch(v){return console.error(v),null}}function a(){o.promise=null,o.db&&(o.db.close(),o.db=null),o.timer&&(clearTimeout(o.timer),o.timer=null)}return o.promise=l(),o.timer=i(),t(),{ready:r,findStore:c,cleanup:a}}function on(o){return new Promise((t,n)=>{o.onsuccess=function(e){const s=e.target;t(s.result)},o.onerror=function(e){console.error(e),n()}})}const V_=5*60*1e3,Tt=F_();var et,Ge,Sn,ho,ts;class z_{constructor(t,n={}){Qe(this,Ge);X(this,"state");X(this,"owner");Qe(this,et);this.state=t,this.owner=n.owner??Cs(Os.HISTORY_OWNER),xe(this,Ge,ho).call(this)}get index(){return this.state.index}get count(){return this.state.count}async createSnapshot(t,n){const e=await Tt.findStore(ct,"readwrite");if(e==null)return!1;await xe(this,Ge,ts).call(this,e);const s=this.state.index+1,i={index:s,data:JSON.stringify(t),timestamp:Date.now(),owner:this.owner,action:n==null?void 0:n.action};return await on(e.put(i)).catch(tt)==null?!1:(this.state.index=s,this.state.count=s+1,!0)}async replaceSnapshot(t,n){const e=await this.getCurrentSnapshot();if(e==null||e.action!==n.action)return this.createSnapshot(t,n);const s=await Tt.findStore(ct,"readwrite");return!(s==null||(e.data=JSON.stringify(t),await on(s.put(e)).catch(tt)==null))}async getCurrentSnapshot(){const t=await Tt.findStore(ct);if(t==null)return null;const n=this.index;if(n<0)return null;const e=this.owner;return new Promise(s=>{const i=t.index(Je).openCursor(IDBKeyRange.only(e),"prev");i.onsuccess=l=>{const r=l.target.result;if(r==null)return s(null);const c=r.value;if(c.owner!=e)return r.continue();if(c.index==n)return s(c);r.continue()},i.onerror=function(l){console.error(l),s(null)}})}async getPrevSnapshot(){const t=await Tt.findStore(ct);if(t==null)return null;const n=this.state.index-1;if(n<0)return null;const e=this.owner;return new Promise(s=>{const i=t.index(Je).openCursor(IDBKeyRange.only(e),"prev");i.onsuccess=l=>{const r=l.target.result;if(r==null)return s(null);const c=r.value;if(c.owner!=e)return r.continue();if(c.index==n)return this.state.index=n,s(r.value);r.continue()},i.onerror=function(l){console.error(l),s(null)}})}async getNextSnapshot(){const t=await Tt.findStore(ct);if(t==null)return null;const n=this.state.index+1;if(n>this.state.count-1)return null;const e=this.owner;return new Promise(s=>{const i=t.index(Je).openCursor(IDBKeyRange.only(e),"next");i.onsuccess=l=>{const r=l.target.result;if(r==null)return s(null);const c=r.value;if(c.owner!=e)return r.continue();if(c.index==n)return this.state.index=n,s(r.value);r.continue()},i.onerror=function(l){console.error(l),s(null)}})}async getUsageSpace(){const t=await navigator.storage.estimate(),n=t.usage;return n==null?null:{usage:n/1024/1024,percent:t.quota?n/t.quota*100:-1}}async list(){const t=await Tt.findStore(ct);if(t==null)return[];const n=this.owner;return new Promise(e=>{const s=t.index(Je).openCursor(IDBKeyRange.only(n),"prev"),i=[];s.onsuccess=l=>{const r=l.target.result;if(r==null)return e(i);const c=r.value;if(c.owner!=n)return r.continue();i.push(c),r.continue()},s.onerror=function(l){console.error(l),e([])}})}cleanup(){Me(this,et)&&(clearTimeout(Me(this,et)),yt(this,et,null))}}et=new WeakMap,Ge=new WeakSet,Sn=function(){yt(this,et,setTimeout(()=>xe(this,Ge,ho).call(this),V_))},ho=async function(){Me(this,et)&&clearTimeout(Me(this,et));const t=await Tt.findStore(En,"readwrite");if(t==null)return xe(this,Ge,Sn).call(this);const n=await on(t.index(Je).get(this.owner)).catch(tt);if(n==null){const e={owner:this.owner,timestamp:Date.now()};return t.add(e),xe(this,Ge,Sn).call(this)}n.timestamp=Date.now(),await on(t.put(n)).catch(tt),xe(this,Ge,Sn).call(this)},ts=function(t){const n=this.state.index,e=this.state.count;if(n<0||n==e-1)return Promise.resolve(!0);const s=this.owner;return new Promise(i=>{const l=t.index(Je).openCursor(IDBKeyRange.only(s),"prev");l.onsuccess=function(r){const c=r.target.result;if(c==null)return i(!0);const a=c.value;if(a.owner!=s)return c.continue();if(a.index>n){c.delete(),c.continue();return}i(!0)},l.onerror=function(r){console.error(r),i(!1)}})};function U_(o){const t=new z_(De({index:-1,count:0}));function n(){return t.index>0}function e(){return t.index>=0&&t.index<t.count-1}function s(p){return t.createSnapshot(o.value,p)}function i(p){return t.replaceSnapshot(o.value,p)}async function l(){const p=await t.getPrevSnapshot();if(p==null)return!1;const g=Cn(p.data);return g==null?!1:(o.value=Ee.create(g),!0)}async function r(){const p=await t.getNextSnapshot();if(p==null)return!1;const g=Cn(p.data);return g==null?!1:(o.value=Ee.create(g),!0)}function c(){return t.list()}function a(){t.cleanup()}return s(),{allowRedo:e,allowUndo:n,createSnapshot:s,undo:l,redo:r,list:c,cleanup:a,replaceSnapshot:i}}class H_{constructor(t){X(this,"moved",!1);X(this,"position");X(this,"top",0);X(this,"left",0);X(this,"width",0);X(this,"height",0);X(this,"initX",0);X(this,"initY",0);X(this,"indicator");X(this,"container");X(this,"originalEvent");X(this,"target");this.indicator=t.indicator,this.container=t.container,this.target=t.target,this.originalEvent=t.event,this.position=t.position,this.initX=t.event.clientX,this.initY=t.event.clientY}init(t=1){const n=this.target.getBoundingClientRect(),e=this.container.getBoundingClientRect();this.top=(n.top-e.top)/t,this.left=(n.left-e.left)/t,this.width=n.width/t,this.height=n.height/t,this.indicator.setPointerCapture(this.originalEvent.pointerId)}}var Ht,Gt,ht,ns,os,ls;const Be=class Be extends wn{constructor(n={}){var e,s,i;super();Qe(this,ht);X(this,"context",null);X(this,"selector");X(this,"scale");X(this,"onResizeStart");Qe(this,Ht);Qe(this,Gt);this.scale=n.scale,this.selector={container:((e=n.selector)==null?void 0:e.container)??ee.PAGE,element:((s=n.selector)==null?void 0:s.element)??ee.RESIZEABLE,indicator:((i=n.selector)==null?void 0:i.indicator)??ee.RESIZEABLE_INDICATOR},this.onResizeStart=xe(this,ht,ns).bind(this),yt(this,Ht,xe(this,ht,os).bind(this)),yt(this,Gt,xe(this,ht,ls).bind(this))}normalizeScale(){if(this.scale==null)return 1;const n=typeof this.scale=="function"?this.scale(this.context):this.scale;return n<=0?1:n/100}reset(){if(this.context==null)return;const n=this.context.indicator;n&&n.releasePointerCapture(this.context.originalEvent.pointerId),window.removeEventListener("pointermove",Me(this,Ht)),window.removeEventListener("pointerup",Me(this,Gt)),this.context=null}};Ht=new WeakMap,Gt=new WeakMap,ht=new WeakSet,ns=function(n){if(n.button!==0)return;const e=n.target.closest("."+this.selector.indicator);if(e==null)return Fe.warn(Be.TAG_NAME,"未找到的可调整元素");const s=Reflect.get(e,Sl);if(s==null)return Fe.warn(Be.TAG_NAME,"未找到的可调整元素");const i=e.closest("."+this.selector.element);if(i==null)return Fe.warn(Be.TAG_NAME,"未找到的可调整元素");const l=Il(i,this.selector.container);this.context=new H_({event:n,indicator:e,target:i,container:l,position:s});const r=this.createEvent("before-resizestart",this.context);if(this.dispatch(r).defaultPrevented)return Fe.warn(Be.TAG_NAME,"已取消调整");if(this.context.container==null)return Fe.warn(Be.TAG_NAME,"未找到的调整元素的容器");this.context.init(this.normalizeScale()),n.stopPropagation(),n.preventDefault();const c=this.createEvent("resizestart",this.context);if(this.dispatch(c).defaultPrevented)return Fe.warn(Be.TAG_NAME,"已取消调整");window.addEventListener("pointermove",Me(this,Ht)),window.addEventListener("pointerup",Me(this,Gt))},os=function(n){const e=this.context;if(e==null)return;const s=e.position,i=this.normalizeScale(),l=e.container.getBoundingClientRect(),r=e.target.getBoundingClientRect();if(s&nn.TOP){const a=Math.max((r.bottom-n.clientY)/i,Be.MIN_LENGTH);e.top=(r.bottom-l.top)/i-a,e.height=a}if(s&nn.BOTTOM&&(e.height=Math.max((n.clientY-r.top)/i,Be.MIN_LENGTH)),s&nn.LEFT){const a=Math.max((r.right-n.clientX)/i,Be.MIN_LENGTH);e.left=(r.right-l.left)/i-a,e.width=a}s&nn.RIGHT&&(e.width=Math.max((n.clientX-r.left)/i,Be.MIN_LENGTH));const c=this.createEvent("resizing",e);this.dispatch(c).defaultPrevented||(e.target.style.top=e.top+"px",e.target.style.left=e.left+"px",e.target.style.width=e.width+"px",e.target.style.height=e.height+"px")},ls=function(n){const e=this.context;if(e==null)return;n.preventDefault(),e.originalEvent=n;const s=this.createEvent("resizeend",e);this.dispatch(s).defaultPrevented||this.reset()},X(Be,"TAG_NAME","quickprint-resizeable"),X(Be,"MIN_LENGTH",12);let bo=Be;async function G_(o,t){if(await Promise.resolve(),t.indicatorElement==null){const r=document.createElement("div");r.className="quickprint-is-indicator",t.indicatorElement=r,document.body.appendChild(r)}const n=o.doc.useGrid,e=n?qt(t.width):Math.round(t.width),s=n?qt(t.height):Math.round(t.height),i=t.indicatorElement,l=t.target.getBoundingClientRect();i.style.display="block",i.style.left=l.left+"px",i.style.top=l.top-wl(t.element)+"px",i.textContent=`x:${t.top},y:${t.left},w:${e},h:${s}`}function W_(o){const t=new bo({scale:()=>o.state.scale});return t.on("resizestart",n=>{const e=n.detail;if(e==null)return n.preventDefault();const s=Reflect.get(e.target,Ze);if(s==null)return n.preventDefault();e.element=s}),t.on("resizing",n=>{const e=n.detail;e!=null&&(G_(o,e),Nn.create(e.target,e.container))}),t.on("resizeend",n=>{const e=n.detail;if(e==null)return;e.indicatorElement&&document.body.removeChild(e.indicatorElement);const s=e.element;s.setTop(e.top),s.setLeft(e.left),s.setWidth(e.width),s.setHeight(e.height),e.target.style.removeProperty("top"),e.target.style.removeProperty("left"),e.target.style.removeProperty("width"),e.target.style.removeProperty("height"),o.createSnapshot(),Nn.clean()}),o.onResizeStart=t.onResizeStart,t}function j_(o){function t(l){const r=document.activeElement,c=l.target;return r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement||r.isContentEditable===!0||c.closest(".quickprint-text-editor")!=null}function n(){const l=o.doc.firstPage;if(o.state.selectMode===be.PAGE){const r=o.state.selectedPage;return r==null?l:o.doc.findPage(r)??l}if(o.state.selectMode===be.ELEMENT){const r=o.getSelectedElements()[0];return r==null?l:r.page??l}return l}function e(l){if(!(t(l)||Ls()))switch(l.key){case"Delete":case"Backspace":return l.preventDefault(),o.deleteSelectedElement();case"Y":case"y":if(l.ctrlKey)return l.preventDefault(),o.history.redo();case"Z":case"z":if(l.ctrlKey)return l.preventDefault(),o.history.undo();case"ArrowUp":case"ArrowDown":{const r=o.getSelectedElements();if(r.length==0)return;l.preventDefault(),l.stopPropagation();const c=l.key==="ArrowUp"?-1:1,a=r.map(p=>p.setTop(p.top+c,!0)?p:null).filter(p=>p!=null);a.length>0&&o.replaceSnapshot("top",a);return}case"ArrowLeft":case"ArrowRight":{const r=o.getSelectedElements();if(r.length==0)return;l.preventDefault(),l.stopPropagation();const c=l.key==="ArrowLeft"?-1:1,a=r.map(p=>p.setLeft(p.left+c,!0)?p:null).filter(p=>p!=null);a.length>0&&o.replaceSnapshot("left",a);return}case"P":case"p":if(l.ctrlKey)return l.preventDefault(),o.component.dispatchEvent("preview");case"S":case"s":if(l.ctrlKey)return l.preventDefault(),o.component.dispatchEvent("save");case"A":case"a":if(l.ctrlKey){l.preventDefault();const c=o.doc.pages.reduce((a,p)=>a.concat(p.children),[]);return o.multiSelectElements(c)}case"C":case"c":{const r=o.getSelectedElements();if(l.ctrlKey&&r.length>0)return l.preventDefault(),o.clipboard.writeElement(r)}case"V":case"v":if(l.ctrlKey)return o.clipboard.readElement().then(r=>{if(r.length==0)return;const c=n();for(const a of r)a.setLeft(a.left+8),a.setTop(a.top+8),c.append(a);o.createSnapshot()})}}function s(){window.addEventListener("keydown",e)}function i(){window.removeEventListener("keydown",e)}return{enable:s,disable:i}}const gn="openprint:element,";function X_(o){function t(){return navigator.clipboard.readText().catch(c=>(console.log(c),null))}function n(c){return navigator.clipboard.writeText(c).catch(a=>{console.log(a)})}async function e(){const c=await t();if(c==null||!c.startsWith(gn))return[];n("");const a=Cn(Ns(c.slice(gn.length)),[]);return a.length===0?[]:a.map(p=>(delete p.id,ue.create(p))).sort(ue.sort)}function s(c){const a=`${gn}${Ds(JSON.stringify(c))}`;return n(a)}async function i(){const c=await t();return typeof c=="string"&&c.startsWith(gn)}function l(){}function r(c){}return{readElement:e,writeElement:s,hasElement:i,readStyle:l,writeStyle:r}}const ss=Symbol();function Y_(){return{panel:{left:!0,right:!0},scale:100,selectedType:be.NONE,selectedPage:void 0,selectMode:lt.SINGLE,selected:[]}}function Z_(o,t){const n=De(Y_()),e=U_(o),i={get doc(){return o.value},history:e,document:o,state:n,component:t,setDocument:c,selectPage:g,selectElement:_,resetSelectedElement:v,deleteSelectedElement:y,multiSelectElements:h,toggleMultiSelectedElement:S,isSingleSelectedElement:T,isNoSelectedElement:M,zoomIn:b,zoomOut:m,toggleBackground:w,toggleElementPanel:V,toggleConfigPanel:Z,getSelectedElements:a,getSelectedPage:p,cleanup:P,replaceSnapshot:L},l=M_(i),r=W_(i);i.shortcut=j_(i),i.createSnapshot=e.createSnapshot,i.clipboard=X_();function c(N){i.document.value=N,i.history.createSnapshot()}function a(N){if(i.state.selectedType!==be.ELEMENT)return[];const C=n.selected;if(C.length==0)return[];const O=C.map(B=>i.doc.findElement(B)).filter(B=>B!=null);return N==null?O:O.filter(B=>N.contains(B))}function p(){var C;const N=n.selectedPage;if(N!=null)return(C=o.value)==null?void 0:C.findPage(N)}function g(N){return v(),n.selectedPage=N.id,n.selectedType=be.PAGE,!0}function _(N){n.selectMode=lt.SINGLE,n.selectedType=be.ELEMENT,n.selectedPage=void 0;const C=a();for(const O of C)O.id!==N.id&&O.blur();return N.focus(),n.selected=[N.id],!0}function v(){const N=a();for(const C of N)C.blur();return n.selected=[],n.selectedType=be.NONE,!0}function y(){if(n.selectedType!=be.ELEMENT||n.selected.length==0)return!1;let N=!1;const C=a();for(const O of C)O.remove()&&(N=!0);return N&&i.history.createSnapshot(),!0}function h(N){n.selectMode=lt.MULTIPLE,n.selectedType=be.ELEMENT,n.selectedPage=void 0;const C=a(),O=[];for(const B of C){if(N.some(x=>x.id===B.id)){O.push(B.id);continue}B.blur()}for(const B of N)O.includes(B.id)||B.focus();return n.selected=N.map(B=>B.id),!0}function S(N){let C=a();const O=C.findIndex(B=>B.id===N.id);return(N.type===G.TABLE_CELL&&C.some(B=>B.type!==G.TABLE_CELL)||N.type!==G.TABLE_CELL&&C.some(B=>B.type===G.TABLE_CELL))&&(C=[]),O>=0?C.splice(O,1):C.push(N),h(C)}function m(){const N=n.scale??100,C=Qt.indexOf(N);return C<0?(n.scale=100,!1):C>=Qt.length-1?!1:(n.scale=Qt[C+1],!0)}function b(){const N=n.scale??100,C=Qt.indexOf(N);return C<0?(n.scale=100,!1):C==0?!1:(n.scale=Qt[C-1],!0)}function w(){const C=i.doc.attributes.grid==null?!0:void 0;i.doc.attributes.grid=C}function V(){i.state.panel.left=!i.state.panel.left}function Z(){i.state.panel.right=!i.state.panel.right}function L(N,C){const O=C??i.doc,B=Array.isArray(O)?"element":O instanceof Ee?"document":O instanceof Nt?"page":"element",x=Array.isArray(O)?O.map(D=>D.id).join(","):O.id,k=`${B}:${x}:${N}`;return e.replaceSnapshot({action:k})}function T(){return i.state.selectedType!==be.ELEMENT?!1:i.state.selectMode==lt.SINGLE||i.state.selectMode==lt.MULTIPLE&&i.state.selected.length==1}function M(){return i.state.selectedType!==be.ELEMENT?!0:i.state.selected.length==0}function P(){l.cleanup(),r.cleanup(),e.cleanup(),i.shortcut.disable(),i.doc.cleanup()}return i.shortcut.enable(),i.selectPage(o.value.firstPage),hl(ss,i),An(P),i}function Te(){return bl(ss)}const $_=q({__name:"Ruler",props:{direction:{type:String,default:"horizontal"},canvas:{type:Object,required:!0},page:{type:Object,required:!0},scale:{type:Number,default:100}},setup(o,{expose:t}){t();const n=o,e=we("classes"),s=Te(),i=R(()=>({[e.horizontalRuler]:n.direction==="horizontal",[e.verticalRuler]:n.direction==="vertical"})),l=R(()=>{const m=n.page.id,b=s.doc.pages.find(w=>w.id===m);return b==null?0:n.direction=="horizontal"?b.width:b.height}),r=R(()=>{const m=l.value,b=[];for(let w=0;w<=m;w+=10)b.push(w/10);return b}),c=R(()=>{const m=l.value,b=[];for(let w=0;w<=m;w+=2.5)b.push(w);return b}),a=R(()=>{const m=s.getSelectedElements();return m.length==1?m[0]:null}),p=R(()=>n.direction==="horizontal"?{height:"100%",width:l.value*n.scale/100+"mm",left:n.page.left+"px",transform:`translateX(${-n.canvas.scrollLeft}px)`}:{width:"100%",height:l.value*n.scale/100+"mm",top:n.page.top+"px",transform:`translateY(${-n.canvas.scrollTop}px)`}),g=R(()=>{const m=a.value;if(m==null)return 0;if(m.type==="TableCell"){const b=m.parent;if(b==null)return 0;const w=b.parent;return b==null?0:w.top+b.offsetTop}if(m.type==="TableRow"){const b=m.parent;return b==null?0:b.top+m.offsetTop}return m.top}),_=R(()=>{const m=a.value;if(m==null)return 0;if(m.type==="TableCell"){const b=m.parent;if(b==null)return 0;const w=b.parent;return b==null?0:w.left+m.offsetLeft}if(m.type==="TableRow"){const b=m.parent;return b==null?0:b.left}return m.left});function v(m,b){return n.direction==="horizontal"?{left:m*(n.scale/100)+"mm",height:(b-2)%4==0?"8px":"4px"}:{top:m*(n.scale/100)+"mm",width:(b-2)%4==0?"8px":"4px"}}function y(m){return n.direction==="horizontal"?{left:m*(n.scale/100)+"cm"}:{top:m*(n.scale/100)+"cm"}}function h(m){return n.direction==="horizontal"?{left:_.value*(n.scale/100)+"px",width:m.width*(n.scale/100)+"px",height:"100%"}:{top:g.value*(n.scale/100)+"px",height:m.height*(n.scale/100)+"px",width:"100%"}}const S={props:n,classes:e,api:s,className:i,length:l,numbers:r,scales:c,selectedElement:a,rulerStyle:p,selectedElemenTop:g,selectedElementLeft:_,createScaleStyle:v,createNumberStyle:y,createElementStyle:h};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),K_="_horizontalRuler_170u5_2",Q_="_verticalRuler_170u5_15",J_="_ruler_170u5_27",eh="_scale_170u5_32",th="_number_170u5_46",nh="_selected_170u5_71",oh={horizontalRuler:K_,verticalRuler:Q_,ruler:J_,scale:eh,number:th,selected:nh};function lh(o,t,n,e,s,i){return E(),I("div",{class:d(e.className)},[u("div",{class:d(e.classes.ruler),style:Y(e.rulerStyle)},[e.selectedElement?(E(),I("div",{key:0,class:d(e.classes.selected),style:Y(e.createElementStyle(e.selectedElement))},null,6)):W("v-if",!0),(E(!0),I(oe,null,ce(e.scales,(l,r)=>(E(),I("div",{key:l,class:d(e.classes.scale),style:Y(e.createScaleStyle(l,r))},null,6))),128)),(E(!0),I(oe,null,ce(e.numbers,l=>(E(),I("div",{class:d(e.classes.number),style:Y(e.createNumberStyle(l))},Q(l),7))),256))],6)],2)}const sh={classes:oh},ih=F($_,[["render",lh],["__cssModules",sh],["__file","/home/dongls/work/quickprint/packages/designer/components/Mass/Ruler.vue"]]),en=8,rh=q({__name:"DragLine",props:{top:{type:Number,default:0},zoom:{type:Number,default:1},title:{type:String,default:null},disabled:{type:Boolean,default:!1},min:{type:Number,default:null},max:{type:Number,default:null}},emits:["move"],setup(o,{expose:t,emit:n}){t();const e=o,s=n,i=we("classes"),l={},r=Te(),c=R(()=>({top:Math.round(e.top*e.zoom)+"px"}));function a(y){if(y.button!=0||e.disabled===!0)return;const h=y.target.closest("."+i.dragLine);h!=null&&(y.stopPropagation(),l.init=!1,l.target=h,l.parent=h.offsetParent,l.target.setPointerCapture(y.pointerId),window.addEventListener("pointermove",p),window.addEventListener("pointerup",g))}function p(y){y.preventDefault();const h=_(l.parent);let S=y.clientY-h.top;S<0&&(S=0),S>h.height&&(S=h.height),e.min>0&&S<e.min+en&&(S=e.min+en),e.max>0&&S>e.max-en&&(S=e.max-en),l.target.style.top=S/(r.state.scale/100)+"px",l.top=S,l.init=!0}function g(y){l.init===!0&&s("move",{top:l.top/(r.state.scale/100)}),l.target.releasePointerCapture(y.pointerId),window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",g)}function _(y){return y instanceof HTMLElement?y.getBoundingClientRect():new DOMRect(0,0,window.innerWidth,window.innerHeight)}const v={props:e,emit:s,GAP:en,classes:i,context:l,api:r,style:c,onDragstart:a,dragging:p,dragend:g,getParentRect:_};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),ah="_dragLine_1m7rt_2",ch="_disabled_1m7rt_26",uh={dragLine:ah,disabled:ch},dh=["title"];function fh(o,t,n,e,s,i){return E(),I("div",{class:d({[e.classes.dragLine]:!0,[e.classes.disabled]:n.disabled}),style:Y(e.style),onPointerdown:ae(e.onDragstart,["stop"]),title:n.title},null,46,dh)}const ph={classes:uh},tl=F(rh,[["render",fh],["__cssModules",ph],["__file","/home/dongls/work/quickprint/packages/designer/editor/Page/DragLine.vue"]]),mh=q({__name:"Selection",setup(o,{expose:t}){const n=me(),e=me(),s=Dn("selectionRef"),i=me(),l=Te();let r=[];function c(){return{init:!1,initialX:0,initialY:0,top:0,left:0}}function a(){const h=[],S=e.value;if(S==null)return h;const m=p(S);if(m.length==0)return h;const b=s.value;return m.forEach(w=>{if(!ci(w,b)){w.classList.remove(ee.SELECTED);return}const V=Reflect.get(w,Ze);V instanceof ue&&(w.classList.add(ee.SELECTED),h.push(V))}),h}function p(h){if(h.matches("."+ee.ELEMENT)){const S=Reflect.get(h,Ze);if(S&&S.type===G.TABLE)return h.querySelectorAll(":scope td")}return h.querySelectorAll(`:scope .${ee.PAGE} > .${ee.SELECTABLE}`)}function g(h,S){const m=S.closest("."+ee.PAPER);if(m==null)return;h.stopPropagation(),h.preventDefault();const b=c(),w=m.getBoundingClientRect();b.initialX=h.clientX,b.initialY=h.clientY,b.top=h.clientY-w.top,b.left=h.clientX-w.left,e.value=S,i.value=b,n.value=m,r=[],window.addEventListener("pointermove",_),window.addEventListener("pointerup",v)}function _(h){const S=i.value;if(S==null)return;h.stopPropagation(),h.preventDefault();const m=s.value;if(S.init!==!0){if(Math.abs(h.clientX-S.initialX)<4&&Math.abs(h.clientY-S.initialY)<4)return;m.setPointerCapture(h.pointerId),m.style.display="block",S.init=!0}const b=Math.abs(h.clientX-S.initialX),w=Math.abs(h.clientY-S.initialY),V=h.clientX<S.initialX?-b:0,Z=h.clientY<S.initialY?-w:0;m.style.top=S.top+Z+"px",m.style.left=S.left+V+"px",m.style.width=b+"px",m.style.height=w+"px",r=a()}function v(h){const S=i.value;if(S==null)return;S.init&&(h.stopPropagation(),h.preventDefault()),r.length>0&&l.multiSelectElements(r);const m=s.value;m.releasePointerCapture(h.pointerId),m.style.display="none",i.value=void 0,window.removeEventListener("pointermove",_),window.removeEventListener("pointerup",v)}t({onSelectStart:g});const y={paperRef:n,scopeRef:e,selectionRef:s,stateRef:i,api:l,get selected(){return r},set selected(h){r=h},crateSelectionState:c,calcSelectedElements:a,findElements:p,onSelectStart:g,onSelecting:_,onSelectEnd:v};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),gh="_selection_10jfe_2",_h={selection:gh};function hh(o,t,n,e,s,i){return E(),I("div",{ref:"selectionRef",class:d(o.classes.selection),onClick:t[0]||(t[0]=ae(()=>{},["stop"]))},null,2)}const bh={classes:_h},vh=F(mh,[["render",hh],["__cssModules",bh],["__file","/home/dongls/work/quickprint/packages/designer/editor/Page/Selection.vue"]]);function yh(o,t,n){t.element.isSelected||n.selectElement(t.element);const e=n.getSelectedElements();if(e.length<=1){const c=Yo(t.element.type);if(typeof c!="function")return ut.open(o.clientX,o.clientY,{menus:nl(t,n)});const p=c(t.element).map(g=>Tn(g,n,[t.element],t.element)).filter(g=>g!=null);return ut.open(o.clientX,o.clientY,{menus:p})}if(new Set(e.map(c=>c.type)).size>1){const a=["copy","delete","---","z-index"].map(p=>Tn(p,n,e,t.element)).filter(p=>p!=null);return ut.open(o.clientX,o.clientY,{menus:a})}const i=Yo(t.element.type);if(typeof i!="function")return ut.open(o.clientX,o.clientY,{menus:nl(t,n)});const r=i(t.element).map(c=>Tn(c,n,e,t.element)).filter(c=>c!=null);return ut.open(o.clientX,o.clientY,{menus:r})}function nl(o,t){return["setting","text-direction","---","copy","delete","---","z-index"].map(e=>Tn(e,t,t.getSelectedElements(),o.element)).filter(e=>e!=null)}function Eh(o){const t=document.querySelector("#"+o.id);if(t==null)return!1;const n=t.querySelector("img,svg");if(n==null)return!1;const e=n.getBoundingClientRect(),s=se.processLengthToPX(j(o,"top"))??1,i=se.processLengthToPX(j(o,"bottom"))??1,l=se.processLengthToPX(j(o,"left"))??1,r=se.processLengthToPX(j(o,"right"))??1,c=se.processLengthToPX(o.getStyle("paddingTop"))??0,a=se.processLengthToPX(o.getStyle("paddingBottom"))??0,p=se.processLengthToPX(o.getStyle("paddingLeft"))??0,g=se.processLengthToPX(o.getStyle("paddingRight"))??0;return o.setWidth(e.width+l+r+p+g,!0),o.setHeight(e.height+s+i+c+a,!0),!0}function Tn(o,t,n,e){if(typeof o!="string")return o;switch(o){case"---":case"divider":return{type:"divider"};case"copy":return{type:"menu",label:"复制",icon:"icon-copy",detail:"Ctrl+C",handler(){t.clipboard.writeElement(n)}};case"delete":return{type:"menu",label:"删除",icon:"icon-delete",submenu:[{type:"menu",label:"元素",icon:"icon-pintu",detail:"Delete",handler(){n.forEach(s=>s.remove()),t.createSnapshot()}},{type:"menu",label:"数据源",icon:"icon-datasource",handler(){n.forEach(s=>s.resetDS()),t.createSnapshot()}}]};case"z-index":return{type:"menu",label:"层级",icon:"icon-cengji",submenu:[{type:"menu",icon:"icon-vertical-align-top",label:"移至顶层",handler(){for(const s of n)s.id!==e.id&&s.moveToTop();e.moveToTop(),t.createSnapshot()}},{type:"menu",label:"上移一层",icon:"icon-arrowup",handler(){n.forEach(s=>s.moveUp()),t.createSnapshot()}},{type:"menu",icon:"icon-arrowdown",label:"下移一层",handler(){n.forEach(s=>s.moveDown()),t.createSnapshot()}},{type:"menu",icon:"icon-vertical-align-bottom",label:"移至底层",handler(){n.forEach(s=>s.moveToBottom()),t.createSnapshot()}}]};case"setting":return{type:"menu",label:"元素属性",icon:"icon-setting",handler(){fm(n).then(s=>{for(const i of n)i.style=Object.assign({},i.style,s.style);t.createSnapshot()}).catch(ke)}};case"text-direction":return{type:"menu",label:"文字方向",icon:"icon-text-direction",handler(){Yl(n).then(s=>{for(const i of n)i.style=Object.assign({},i.style,s.style);t.createSnapshot()}).catch(ke)}};case"qrcode-setting":return{type:"menu",label:"二维码属性",icon:"icon-qrcode",handler(){pm(n).then(s=>{var i;for(const l of n)l.style=Object.assign({},l.style,s.style),l.attributes.barcolor=(i=s.qrcode)==null?void 0:i.barcolor;t.createSnapshot()}).catch(ke)}};case"barcode-setting":return{type:"menu",label:"条形码属性",icon:"icon-barcode",handler(){mm(n).then(s=>{var i,l,r;for(const c of n)c.style=Object.assign({},c.style,s.style),c.attributes.barcolor=(i=s.barcode)==null?void 0:i.barcolor,c.attributes.width=(l=s.barcode)==null?void 0:l.width,c.attributes.height=(r=s.barcode)==null?void 0:r.height;t.createSnapshot()}).catch(ke)}};case"auto-resize":return{type:"menu",label:"自动调整尺寸",icon:"icon-resize",handler(){n.map(i=>Eh(i)).some(Boolean)&&t.createSnapshot()}};default:return null}}const Sh=q({props:{element:{type:ue,required:!0}},setup(o){const t=we("classes"),n=Te(),e=R(()=>{o.element.state.key;const g=o.element,_={"--quickprint-element-top":g.top+"px","--quickprint-element-left":g.left+"px","--quickprint-element-width":g.width+"px","--quickprint-element-height":g.height+"px","z-index":g.zIndex};return l()&&(_.transform=`rotate(${g.style.rotate}deg)`),_}),s={TOP:[t.resizeTop,xt.TOP],BOTTOM:[t.resizeBottom,xt.BOTTOM],LEFT:[t.resizeLeft,xt.LEFT],RIGHT:[t.resizeRight,xt.RIGHT],BOTTOM_RIGHT:[t.resizeBottomRight,xt.BOTTOM_RIGHT]},i=[s.TOP,s.BOTTOM,s.LEFT,s.RIGHT,s.BOTTOM_RIGHT];function l(){const g=o.element;return g.style.rotate==0||g.style.rotate==null?!1:n.state.selectMode===lt.SINGLE?!g.isSelected:!0}function r(g){const _=b_(g.type);if(_==null)return f("div",{class:t.unknown},[f("span",null,[ge("未知的打印元素")])]);const v={element:g,key:g.id+"_"+g.state.key};return E_(g.type)?(v.onContextmenu=a,Xe(_,v)):Xe(_,v)}function c(g,_){_.stopPropagation();const v=_.target.closest("."+ee.ELEMENT);v&&Reflect.get(v,Mn)===To.DRAG_ELEMENT||(_.ctrlKey?n.toggleMultiSelectedElement(g):n.selectElement(g))}function a(g){g.stopPropagation(),g.preventDefault(),yh(g,o,n)}function p(){return!S_(o.element.type)||l()?null:i.map(g=>{const _={class:[ee.RESIZEABLE_INDICATOR,g[0]],["."+Sl]:g[1]};return f("div",Gs(_,{onPointerdown:n.onResizeStart}),null)})}return function(){const g=o.element,_={["."+Ze]:g,["."+So]:g.type,id:g.id,key:g.id,class:{[ee.ELEMENT]:!0,[ee.DRAGGABLE]:!0,[ee.RESIZEABLE]:!0,[ee.SELECTED]:g.state.selected,[ee.SELECTABLE]:y_(g.type),["quickprint-is-"+g.type.toLowerCase()]:!0},style:e.value,onClick:c.bind(null,g)};return f("div",_,[r(g),p()])}}}),Th="_unknown_za8zh_2",kh="_resizeTop_za8zh_12",Rh="_resizeBottom_za8zh_20",Ih="_resizeLeft_za8zh_28",wh="_resizeRight_za8zh_36",Ch="_resizeBottomRight_za8zh_44",Oh={unknown:Th,resizeTop:kh,resizeBottom:Rh,resizeLeft:Ih,resizeRight:wh,resizeBottomRight:Ch},Lh={classes:Oh},Dh=F(Sh,[["__cssModules",Lh],["__file","/home/dongls/work/quickprint/packages/designer/editor/Element/index.vue"]]),is=al(()=>cl(()=>import("./component-DeuFE7qm.js"),__vite__mapDeps([4,1,2,3,5]))),Nh=q({__name:"DocJson",props:{doc:{type:Ee,required:!0}},setup(o,{expose:t}){t();const n=o,e=$e(),s=pe(JSON.stringify(n.doc,null,"  "));e==null||e.useHandle("confirm",()=>s.value);const i={props:n,win:e,json:s,get CodeMirror(){return is}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),Bh="_json_9crpe_2",Ah={json:Bh};function Mh(o,t,n,e,s,i){return E(),ne(e.CodeMirror,{modelValue:e.json,"onUpdate:modelValue":t[0]||(t[0]=l=>e.json=l),language:"json",class:d(o.classes.json)},null,8,["modelValue","class"])}const xh={classes:Ah},Ph=F(Nh,[["render",Mh],["__cssModules",xh],["__file","/home/dongls/work/quickprint/packages/designer/components/Mass/DocJson.vue"]]),qh=Ie(function(o){return st("调试",f(Ph,{doc:o.document.value},null),{preset:"docDebug"}).promisify().catch(tt)});async function Fh(o,t,n){const e=[{type:"menu",label:"重新加载",icon:"icon-reload",detail:"Ctrl+R",handler(){window.location.reload()}},{type:"menu",label:"全部选中",icon:"icon-select-all",detail:"Ctrl+A",handler:()=>{const l=t.page.children??[];n.multiSelectElements(l)}},{type:"divider"}],s=[],i=n.getSelectedElements();i.length>0&&s.push({type:"menu",label:"复制",icon:"icon-copy",detail:"Ctrl+C",handler:()=>{n.clipboard.writeElement(i)}}),await n.clipboard.hasElement()&&s.push({type:"menu",label:"粘贴",icon:"icon-paste",detail:"Ctrl+V",async handler(){const l=o.target.closest("."+ee.PAGE);if(l==null)return;const r=await n.clipboard.readElement();if(r.length==0)return;const c=l.getBoundingClientRect(),a=o.clientX-c.left-r[0].left,p=o.clientY-c.top-r[0].top;for(const g of r)g.setLeft(g.left+a),g.setTop(g.top+p),t.page.append(g);n.createSnapshot()}}),s.length>0&&e.push(...s,{type:"divider"}),e.push({type:"menu",label:"调试",icon:"icon-bug",handler(){qh(n).then(l=>{if(l==null)return;const r=Ee.create(l);n.setDocument(r)})}},{type:"menu",label:"预览",icon:"icon-run",detail:"Ctrl+P",handler(){n.component.dispatchEvent("preview")}},{type:"menu",label:"保存",icon:"icon-save",detail:"Ctrl+S",handler(){n.component.dispatchEvent("save")}}),ut.open(o.clientX,o.clientY,{menus:e})}const Vh=q({props:{doc:{type:Ee,required:!0},page:{type:Nt,required:!0}},setup(o){const t=we("classes"),n=Te(),e=Dn("selectionRef"),s=Dn("paperRef"),i=pe(0),l=R(()=>o.page.width),r=R(()=>o.page.height);function c(b){b.stopPropagation();const w=b.target.closest("."+ee.PAPER);w&&Reflect.get(w,Mn)===To.SELECTION||(n.resetSelectedElement(),n.selectPage(o.page))}function a(){if(o.page.header.display===!1)return null;const b=o.page.header.height,w="page_header_"+i.value;return f(tl,{title:"页眉",top:b,onMove:g,key:w},null)}function p(){if(o.page.footer.display===!1)return null;const b=se.mm_to_px(r.value)-o.page.footer.height,w="page_footer_"+i.value;return f(tl,{title:"页脚",top:b,onMove:_,key:w},null)}function g(b){o.page.setHeaderHeight(b.top),i.value++}function _(b){o.page.setFooterHeight(se.mm_to_px(r.value)-b.top),i.value++}function v(b){b.stopPropagation(),b.preventDefault(),Fh(b,o,n)}function y(){const b=o.doc.margins;if(b==null)return null;const w=[];return b.top&&w.push(f("div",{title:"上边距参考线",class:t.marginHorizontalGuide,style:{top:b.top}},null)),b.bottom&&w.push(f("div",{title:"下边距参考线",class:t.marginHorizontalGuide,style:{bottom:b.bottom}},null)),b.left&&w.push(f("div",{title:"左边距参考线",class:t.marginVerticalGuide,style:{left:b.left}},null)),b.right&&w.push(f("div",{title:"右边距参考线",class:t.marginVerticalGuide,style:{right:b.right}},null)),w.length>0?w:null}function h(){const b={["."+El]:o.page,key:o.page.id,style:{width:l.value+"mm",height:r.value+"mm"},class:{[ee.PAGE]:!0,[ee.DROPPABLE]:!0,[t.grid]:o.doc.useGrid},onContextmenu:v},w=o.page.children.map(V=>f(Dh,{element:V},null));return f("div",b,[a(),w,p(),y()])}function S(b){if(b.button!==0)return;b.stopPropagation(),b.preventDefault();const V=b.target.closest("."+ee.ELEMENT);if(V==null)return m(b,s.value);const Z=Reflect.get(V,Ze);return Z==null?m(b,s.value):Z.type===G.TABLE?m(b,V):T_(Z.type)?n.onDragStart(b):m(b,s.value)}function m(b,w){var V;(V=e.value)==null||V.onSelectStart(b,w)}return function(){const b=n.state.scale/100,w={id:"@"+o.page.id,ref:"paperRef",class:{[ee.PAPER]:!0,[ee.SELECTED]:n.state.selectedPage===o.page.id},style:{width:l.value*b+"mm",height:r.value*b+"mm"},onPointerdown:S,onClick:c};return f("div",w,[h(),f(vh,{ref:"selectionRef"},null)])}}}),zh="_paper_1eq2b_2",Uh="_grid_1eq2b_12",Hh="_marginHorizontalGuide_1eq2b_19",Gh="_marginVerticalGuide_1eq2b_27",Wh={paper:zh,grid:Uh,marginHorizontalGuide:Hh,marginVerticalGuide:Gh},jh={classes:Wh},Xh=F(Vh,[["__cssModules",jh],["__file","/home/dongls/work/quickprint/packages/designer/editor/Page/index.vue"]]),Yh="icon-zhanweifu",Zh=q({__name:"Element",setup(o,{expose:t}){t();const e={api:Te(),DEF_ICON:Yh,get Icon(){return K},get BASIC_ELEMENTS(){return m_},get CLASSES(){return ee},get PROP_DRAG_MODE(){return yl},get DRAG_MODE(){return qe},get PROP_ELEMENT_TYPE(){return So}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}}),$h="_panel_1p36j_2",Kh="_header_1p36j_8",Qh="_grid_1p36j_18",Jh="_element_1p36j_30",eb="_icon_1p36j_45",tb={panel:$h,header:Kh,grid:Qh,element:Jh,icon:eb},nb={class:"quickprint-is-fill-h quickprint-is-scrollable"};function ob(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.panel)},[u("div",{class:d(o.classes.header)},"可打印元素",2),u("div",nb,[u("div",{class:d(o.classes.grid)},[(E(!0),I(oe,null,ce(e.BASIC_ELEMENTS,l=>(E(),I("div",vl({key:l.type,class:[e.CLASSES.DRAGGABLE,o.classes.element],[`.${e.PROP_DRAG_MODE||""}`]:e.DRAG_MODE.INSERT,[`.${e.PROP_ELEMENT_TYPE||""}`]:l.type,onPointerdown:t[0]||(t[0]=(...r)=>e.api.onDragStart&&e.api.onDragStart(...r))}),[f(e.Icon,{icon:l.icon??e.DEF_ICON,size:"16px",class:d(o.classes.icon)},null,8,["icon","class"]),u("span",null,Q(l.title),1)],48))),128))],2)])],2)}const lb={classes:tb},sb=F(Zh,[["render",ob],["__cssModules",lb],["__file","/home/dongls/work/quickprint/packages/designer/editor/Panel/Element.vue"]]),ib=q({__name:"SelectPath",setup(o,{expose:t}){t();const n=Te(),e=R(()=>{const r=n.state,c=[{id:n.doc.id,title:"文档",type:"document"}];if(r.selectedType===be.PAGE){const a=n.getSelectedPage();if(a!=null){const p="页面"+(a.index+1);c.push({id:a.id,title:p,type:"page",data:a})}return c}if(r.selectedType===be.ELEMENT){if(r.selectMode===lt.MULTIPLE){const g=n.getSelectedElements();if(g.length===0)return c;let _=g[0];for(;_.parent;){const v=_.parent;if(v instanceof Nt){const y="页面"+(v.index+1);return c.push({id:v.id,title:y,type:"page",data:v}),c}_=v}return c}let a=n.getSelectedElements()[0];if(a==null)return c;const p=[{id:a.id,title:cn(a.type),type:"element",data:a}];for(;a.parent;){const g=a.parent;if(g instanceof Nt){const _="页面"+(g.index+1);return p.unshift({id:g.id,title:_,type:"page",data:g}),c.concat(p)}p.unshift({id:g.id,title:cn(g.type),type:"element",data:g}),a=g}}return c}),s=R(()=>{if(n.state.selectedType!=be.ELEMENT)return;const c=n.getSelectedElements();if(c.length!=1)return;const a=c[0],p=Fn(a);if(!(p==null||!p.content))return p.type===ve.VARIABLE||p.type===ve.FORMULA?`[${p.content}]`:p.content});function i(r){if(r.type==="element")return n.selectElement(r.data);if(r.type==="page")return n.selectPage(r.data)}const l={api:n,paths:e,content:s,onSelect:i,get Icon(){return K}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),rb="_paths_fuk62_2",ab="_path_fuk62_2",cb="_icon_fuk62_28",ub="_content_fuk62_33",db={paths:rb,path:ab,icon:cb,content:ub},fb=["onClick"];function pb(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.paths)},[(E(!0),I(oe,null,ce(e.paths,(l,r)=>(E(),I(oe,{key:l.id},[r>0?(E(),ne(e.Icon,{key:0,class:d(o.classes.icon),icon:"icon-right",size:"12px"},null,8,["class"])):W("v-if",!0),u("div",{class:d(o.classes.path),onClick:c=>e.onSelect(l)},Q(l.title),11,fb)],64))),128)),e.content?(E(),I(oe,{key:0},[f(e.Icon,{class:d(o.classes.ion),icon:"icon-right",size:"12px"},null,8,["class"]),u("div",{class:d(o.classes.content)},Q(e.content),3)],64)):W("v-if",!0)],2)}const mb={classes:db},gb=F(ib,[["render",pb],["__cssModules",mb],["__file","/home/dongls/work/quickprint/packages/designer/editor/SelectPath.vue"]]),_b=q({__name:"LabelNumber",props:Bt({modelValue:{type:Number,default:null},label:{type:String,default:null},min:{type:Number,default:null},defaultValue:{type:Number,default:0},precision:{type:Number,default:null},readonly:{type:Boolean,default:!1},placeholder:{type:String,default:null}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o,{expose:t}){t();const n=o,e=un(o,"modelValue");function s(l){const c=l.target.value;if(e==null||c===""){const p=n.min?n.min:n.defaultValue;e.value=p;return}const a=Number(c);if(!Number.isNaN(a)&&(n.min!=null&&a<n.min&&(e.value=n.min),n.precision!=null)){const p=Math.pow(10,n.precision);e.value=Math.round(a*p)/p}}const i={props:n,value:e,checkNumber:s};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),hb="_labelNumber_1aifb_2",bb="_label_1aifb_2",vb="_readonly_1aifb_25",yb={labelNumber:hb,label:bb,readonly:vb},Eb=["min","readonly","placeholder"];function Sb(o,t,n,e,s,i){return E(),I("label",{class:d({[o.classes.labelNumber]:!0,[o.classes.readonly]:n.readonly})},[Re(u("input",{class:"quickprint-form-control",type:"number","onUpdate:modelValue":t[0]||(t[0]=l=>e.value=l),step:"any",min:n.min,readonly:n.readonly,placeholder:n.placeholder,onBlur:e.checkNumber},null,40,Eb),[[Ae,e.value]]),u("span",{class:d(o.classes.label)},Q(n.label),3)],2)}const Tb={classes:yb},rs=F(_b,[["render",Sb],["__cssModules",Tb],["__file","/home/dongls/work/quickprint/packages/designer/components/Form/LabelNumber.vue"]]),kb=q({__name:"PageConfig",props:{page:{type:Nt,required:!0}},setup(o,{expose:t}){t();const n=o,e=Te(),s=[{label:"显示",value:!0},{label:"隐藏",value:!1}],i=[{label:"禁止",value:pn.NONE},{label:"跟随表格",value:pn.TABLE,detail:"在尾页最后一个元素是表格，则页脚显示在表格下方"}],l=R({get(){return n.page.size.type},set(_){n.page.size.type!==_&&(n.page.size.type=_,_===kn.CONTENT&&(n.page.size.orientation=void 0),e.createSnapshot())}}),r=R({get(){return n.page.orientation},set(_){n.page.size.orientation!==_&&(n.page.size.orientation=_,e.createSnapshot())}}),c=R(()=>n.page.width),a=R({get(){return n.page.height},set(_){if(n.page.size.height===_)return;const v=Number(_);!dl(v)||v<0||(n.page.size.height=v,e.createSnapshot())}}),p=R({get(){return n.page.footer.flow??pn.NONE},set(_){n.page.footer.flow!==_&&(n.page.footer.flow=_===pn.NONE?void 0:_,e.createSnapshot())}}),g={props:n,api:e,BOOLEAN_OPTIONS:s,FLOW_OPTIONS:i,pageSizeType:l,orientation:r,contentWidth:c,contentHeight:a,flow:p,RadioButton:zn,LabelNumber:rs,get Select(){return ie},get PRINT_PAGE_SIZE(){return kn},get PRINT_PAGE_SIZE_OPTIONS(){return ei},get ORIENTATION_OPTIONS(){return Rl}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),Rb={class:"quickprint-config"},Ib={class:"quickprint-config-body quickprint-is-scrollable quickprint-is-fill-h"},wb={class:"quickprint-config-group"},Cb={class:"quickprint-config-section quickprint-config-inline"},Ob={class:"quickprint-config-content quickprint-config-inline"},Lb={class:"quickprint-config-group"},Db={class:"quickprint-config-section quickprint-config-inline"},Nb={class:"quickprint-config-content quickprint-config-inline"},Bb={class:"quickprint-config-section quickprint-config-inline"},Ab={class:"quickprint-config-content quickprint-form-inline"},Mb={class:"quickprint-config-group"},xb={class:"quickprint-config-section quickprint-config-inline"},Pb={class:"quickprint-config-content quickprint-form-inline"},qb={key:0,class:"quickprint-config-section quickprint-config-inline"},Fb={class:"quickprint-config-content quickprint-form-inline"},Vb={class:"quickprint-config-section quickprint-config-inline"},zb={class:"quickprint-config-content quickprint-form-inline"};function Ub(o,t,n,e,s,i){return E(),I("div",Rb,[t[15]||(t[15]=u("div",{class:"quickprint-config-title"},"页面配置",-1)),u("div",Ib,[u("div",wb,[t[7]||(t[7]=u("div",{class:"quickprint-config-group-title"},"页眉",-1)),u("section",Cb,[t[6]||(t[6]=u("header",{class:"quickprint-config-header"},"位置",-1)),u("div",Ob,[f(e.LabelNumber,{class:"quickprint-form-inline-item",label:"高",modelValue:n.page.header.height,readonly:""},null,8,["modelValue"]),f(e.RadioButton,{modelValue:n.page.header.display,"onUpdate:modelValue":t[0]||(t[0]=l=>n.page.header.display=l),options:e.BOOLEAN_OPTIONS,class:"quickprint-form-left-gap"},null,8,["modelValue"])])])]),u("div",Lb,[t[10]||(t[10]=u("div",{class:"quickprint-config-group-title"},"页脚",-1)),u("section",Db,[t[8]||(t[8]=u("header",{class:"quickprint-config-header"},"位置",-1)),u("div",Nb,[f(e.LabelNumber,{class:"quickprint-form-inline-item",label:"高",modelValue:n.page.footer.height,readonly:""},null,8,["modelValue"]),f(e.RadioButton,{modelValue:n.page.footer.display,"onUpdate:modelValue":t[1]||(t[1]=l=>n.page.footer.display=l),options:e.BOOLEAN_OPTIONS,class:"quickprint-form-left-gap"},null,8,["modelValue"])])]),u("section",Bb,[t[9]||(t[9]=u("header",{class:"quickprint-config-header"},"跟随",-1)),u("div",Ab,[f(e.Select,{modelValue:e.flow,"onUpdate:modelValue":t[2]||(t[2]=l=>e.flow=l),options:e.FLOW_OPTIONS},null,8,["modelValue"])])])]),u("div",Mb,[t[14]||(t[14]=u("div",{class:"quickprint-config-group-title"},"画布",-1)),u("section",xb,[t[11]||(t[11]=u("header",{class:"quickprint-config-header"},"尺寸",-1)),u("div",Pb,[f(e.RadioButton,{modelValue:e.pageSizeType,"onUpdate:modelValue":t[3]||(t[3]=l=>e.pageSizeType=l),options:e.PRINT_PAGE_SIZE_OPTIONS,class:"quickprint-w-full"},null,8,["modelValue","options"])])]),n.page.size.type===e.PRINT_PAGE_SIZE.CONTENT?(E(),I("section",qb,[t[12]||(t[12]=u("header",{class:"quickprint-config-header"},"内容",-1)),u("div",Fb,[f(e.LabelNumber,{class:"quickprint-form-inline-item",label:"宽",modelValue:e.contentWidth,readonly:""},null,8,["modelValue"]),f(e.LabelNumber,{class:"quickprint-form-inline-item",label:"高",modelValue:e.contentHeight,"onUpdate:modelValue":t[4]||(t[4]=l=>e.contentHeight=l)},null,8,["modelValue"])])])):W("v-if",!0),u("section",Vb,[t[13]||(t[13]=u("header",{class:"quickprint-config-header"},"方向",-1)),u("div",zb,[f(e.RadioButton,{modelValue:e.orientation,"onUpdate:modelValue":t[5]||(t[5]=l=>e.orientation=l),class:"quickprint-w-full",options:e.ORIENTATION_OPTIONS,disabled:n.page.size.type===e.PRINT_PAGE_SIZE.CONTENT},null,8,["modelValue","options","disabled"])])])])])])}const Hb=F(kb,[["render",Ub],["__file","/home/dongls/work/quickprint/packages/designer/editor/Config/PageConfig.vue"]]),Gb=q({__name:"InputWithLabel",props:{label:{type:String,default:null},modelValue:{type:Number,default:null},standard:{type:String,default:"px"},target:{type:String,default:"px"},placeholder:{type:String,default:"请输入"},min:{type:Number,default:1},defaultValue:{type:Number,default:0},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{expose:t,emit:n}){t();const e=o,s=n,i=Dn("inputRef"),l=R({get(){return e.standard===e.target?e.modelValue:e.standard==="px"&&e.target==="mm"?se.px_to_mm(e.modelValue):e.standard==="mm"&&e.target==="px"?se.mm_to_px(e.modelValue):0},set(_){if(!e.disabled){if(e.standard===e.target)return s("update:modelValue",_);if(e.standard==="px"&&e.target==="mm")return s("update:modelValue",se.mm_to_px(_));if(e.standard==="mm"&&e.target==="px")return s("update:modelValue",se.px_to_mm(_))}}}),r=R(()=>e.disabled!==!0&&e.clearable&&l.value!=null);function c(_){if(e.disabled)return;const y=_.target.value;if(l==null||y===""){if(e.clearable)return;const S=e.min?e.min:e.defaultValue;l.value=S;return}const h=Number(y);if(!Number.isNaN(h)){if(e.min!=null&&h<e.min){l.value=e.min;return}if(e.standard==="px"){l.value=Math.round(h);return}l.value=h}}function a(){e.disabled||s("update:modelValue",void 0)}function p(){var _;e.disabled||((_=i.value)==null||_.blur(),setTimeout(()=>{var v;return(v=i.value)==null?void 0:v.focus()},50))}const g={props:e,emit:s,inputRef:i,value:l,showClearIcon:r,checkNumber:c,clear:a,onEnter:p,get Icon(){return K}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),Wb="_inputWithLabel_1k5y2_2",jb="_clearBtn_1k5y2_7",Xb="_label_1k5y2_11",Yb="_withClear_1k5y2_31",Zb={inputWithLabel:Wb,clearBtn:jb,label:Xb,withClear:Yb},$b=["value","placeholder","disabled"];function Kb(o,t,n,e,s,i){return E(),I("label",{class:d({[o.classes.inputWithLabel]:!0,[o.classes.withClear]:n.clearable})},[u("span",{class:d(o.classes.label)},Q(n.label),3),u("input",{ref:"inputRef",class:"quickprint-form-control",type:"number",step:"any",value:e.value,placeholder:n.placeholder,disabled:n.disabled,onBlur:e.checkNumber,onKeydown:_l(e.onEnter,["enter"])},null,40,$b),e.showClearIcon?(E(),I("span",{key:0,class:d(o.classes.clearBtn),onClick:ae(e.clear,["stop"])},[f(e.Icon,{icon:"icon-close",size:"11px"})],2)):W("v-if",!0)],2)}const Qb={classes:Zb},_n=F(Gb,[["render",Kb],["__cssModules",Qb],["__file","/home/dongls/work/quickprint/packages/designer/components/Form/InputWithLabel.vue"]]),Jb=q({__name:"UnitSelect",props:Bt({modelValue:{type:String,default:"px"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o,{expose:t}){t();const n=[{label:"像素(px)",value:"px"},{label:"毫米(mm)",value:"mm"}],e=o,s=un(o,"modelValue"),i=R(()=>{var r;return((r=n.find(c=>c.value===e.modelValue))==null?void 0:r.label)??e.modelValue}),l={units:n,props:e,value:s,displayValue:i,get Select(){return ie}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),ev="_unit_135mn_2",tv="_text_135mn_8",nv="_select_135mn_25",ov={unit:ev,text:tv,select:nv};function lv(o,t,n,e,s,i){return E(),I("span",{class:d(o.classes.unit),title:"1毫米≈3.778像素，1像素≈0.265毫米"},[f(e.Select,{modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value=l),options:e.units,class:d(o.classes.select),appearance:"none",border:"none"},{selected:Se(()=>[u("span",{class:d(o.classes.text)},Q(e.displayValue),3)]),_:1},8,["modelValue","class"])],2)}const sv={classes:ov},iv=F(Jb,[["render",lv],["__cssModules",sv],["__file","/home/dongls/work/quickprint/packages/designer/components/Form/UnitSelect.vue"]]),rv=q({__name:"CopyBtn",emits:["copy"],setup(o,{expose:t,emit:n}){t();const e=n,s=pe(!1);function i(){e("copy",async function(c){await navigator.clipboard.writeText(c).catch(Bs)!==!1&&(s.value=!0,setTimeout(()=>s.value=!1,500))})}const l={emit:e,copied:s,onClick:i,get Icon(){return K}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),av="_btn_v9scw_2",cv="_message_v9scw_6",uv={btn:av,message:cv};function dv(o,t,n,e,s,i){return E(),I("button",{type:"button",class:d(["quickprint-text-btn",o.classes.btn]),title:"复制",onClick:e.onClick},[f(e.Icon,{icon:"icon-copy"}),f(Ws,{name:"quickprint-fade"},{default:Se(()=>[e.copied?(E(),I("span",{key:0,class:d(o.classes.message)},"已复制",2)):W("v-if",!0)]),_:1})],2)}const fv={classes:uv},pv=F(rv,[["render",dv],["__cssModules",fv],["__file","/home/dongls/work/quickprint/packages/designer/components/Mass/CopyBtn.vue"]]),mv=q({__name:"window",props:{code:{type:String,default:""},doc:{type:Ee,default:null},mode:{type:String,default:"code"}},setup(o,{expose:t}){t();const n=o,e=$e(),s=pe(n.code),i=me();function l(){return s.value}function r(){n.doc!=null&&$c({doc:n.doc}).then(v=>{var h;if(v==null)return;const y=v.type=="reference"?`[=${v.value}]`:`[${v.value}]`;(h=i.value)==null||h.insert(y)})}function c(v){var y;return it(v,(y=n.doc)==null?void 0:y.ds)}function a(){var v;(v=i.value)==null||v.insert(`[2.6.${vo.ELEMENT_VALUR}]`)}function p(){Kc().then(v=>{var y;v!=null&&((y=i.value)==null||y.insert(v.value))})}function g(){Qc({doc:n.doc}).then(v=>{var y;v!=null&&((y=i.value)==null||y.insert(v.value))})}e==null||e.useHandle("confirm",l);const _={props:n,win:e,value:s,codeRef:i,submit:l,useVariable:r,format:c,useElementValue:a,useFunction:p,useFormula:g,get CodeMirror(){return is},get Icon(){return K}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),gv="_window_n935p_2",_v="_toolbar_n935p_11",hv="_code_n935p_22",bv="_divider_n935p_27",vv={window:gv,toolbar:_v,code:hv,divider:bv};function yv(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.window)},[n.mode!=="code"?(E(),I("div",{key:0,class:d(o.classes.toolbar)},[n.mode=="condition"?(E(),I(oe,{key:0},[u("button",{type:"button",class:"quickprint-text-btn",onClick:e.useElementValue},[f(e.Icon,{icon:"icon-number-sign"}),t[1]||(t[1]=u("span",null,"插入元素值",-1))]),u("div",{class:d(o.classes.divider)},null,2)],64)):W("v-if",!0),u("button",{type:"button",onClick:e.useVariable,class:"quickprint-text-btn"},[f(e.Icon,{icon:"icon-insert-var"}),t[2]||(t[2]=u("span",null,"插入变量",-1))]),u("button",{type:"button",class:"quickprint-text-btn",onClick:e.useFunction},[f(e.Icon,{icon:"icon-function"}),t[3]||(t[3]=u("span",null,"插入函数",-1))]),u("button",{type:"button",class:"quickprint-text-btn",onClick:e.useFormula},[f(e.Icon,{icon:"icon-formula"}),t[4]||(t[4]=u("span",null,"插入公式",-1))])],2)):W("v-if",!0),f(e.CodeMirror,{modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value=l),language:"javascript",class:d(o.classes.code),formatVariable:e.format,autofocus:"",ref:"codeRef"},null,8,["modelValue","class"])],2)}const Ev={classes:vv},as=F(mv,[["render",yv],["__cssModules",Ev],["__file","/home/dongls/work/quickprint/packages/designer/components/CodeMirror/window.vue"]]),cs=Ie(function(o){return st("公式",f(as,{code:o==null?void 0:o.code,doc:o==null?void 0:o.doc,mode:o==null?void 0:o.mode},null),{preset:"editor"}).promisify().catch(ke)}),Sv=Ie(function(o,t){return st(o,f(as,{code:t},null),{preset:"editor"}).promisify().catch(ke)}),Tv=q({__name:"Visibility",props:{element:{type:ue,required:!0}},setup(o,{expose:t}){t();const n=o,e=R({get(){var a;return((a=n.element.visibility)==null?void 0:a.type)??Ot.VISIBLE},set(a){n.element.visibility==null&&(n.element.visibility={}),a!==Ot.CONDITION&&(n.element.visibility.condition=void 0),n.element.visibility.type=a}}),s=R({get(){var a;return((a=n.element.visibility)==null?void 0:a.condition)??""},set(a){n.element.visibility==null&&(n.element.visibility={}),n.element.visibility.condition=a}}),i=R(()=>{var a;return Ro((a=n.element.visibility)==null?void 0:a.condition,n.element.doc)}),l=R(()=>{var a;return e.value!==Ot.CONDITION?!1:!((a=n.element.visibility)!=null&&a.condition)});function r(){const a=s.value||`[2.6.${vo.ELEMENT_VALUR}]`;cs({code:a,doc:n.element.doc,mode:"condition"}).then(p=>{p!=null&&(s.value=p)})}const c={props:n,type:e,condition:s,displayValue:i,showIcon:l,openCodeEditor:r,get ELEMENT_VISIBILITY(){return Ot},get VISIBILITY_OPTIONS(){return Ys},get Icon(){return K},get Select(){return ie}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),kv="_condition_siopf_2",Rv={condition:kv},Iv={class:"quickprint-config-section quickprint-config-inline"},wv={class:"quickprint-config-content"},Cv=["value"];function Ov(o,t,n,e,s,i){return E(),I(oe,null,[u("section",Iv,[t[1]||(t[1]=u("header",{class:"quickprint-config-header"},"可见性",-1)),u("div",wv,[f(e.Select,{class:"quickprint-w-full",options:e.VISIBILITY_OPTIONS,modelValue:e.type,"onUpdate:modelValue":t[0]||(t[0]=l=>e.type=l)},null,8,["options","modelValue"])])]),e.type===e.ELEMENT_VISIBILITY.CONDITION?(E(),I("div",{key:0,class:d([o.classes.condition,"quickprint-config-section"]),onClick:e.openCodeEditor},[u("textarea",{value:e.displayValue,class:"quickprint-form-control quickprint-form-control-block quickprint-config-space quickprint-is-scrollable",rows:"3",readonly:"",placeholder:"请输入"},null,8,Cv),e.showIcon?(E(),ne(e.Icon,{key:0,icon:"icon-open-new",size:"14px"})):W("v-if",!0)],2)):W("v-if",!0)],64)}const Lv={classes:Rv},Dv=F(Tv,[["render",Ov],["__cssModules",Lv],["__file","/home/dongls/work/quickprint/packages/designer/editor/Config/Layout/Visibility.vue"]]);function Nv(o,t){return R({get(){return o.element.attributes.position??Rn.DEFAULT},set(n){if(o.element.attributes.position===n)return;const e=n===Rn.DEFAULT?void 0:n;o.element.attributes.position=e,t.createSnapshot()}})}function Bv(o,t){return R({get(){return o.element.attributes.printMode??In.ONCE},set(n){if(o.element.attributes.printMode===n)return;const e=n===In.ONCE?void 0:n;o.element.attributes.printMode=e,t.createSnapshot()}})}function Av(o,t){return R({get(){return o.element.attributes.overflow??ln.HIDDEN},set(n){if(o.element.attributes.overflow===n)return;const e=n===ln.HIDDEN?void 0:n;o.element.attributes.overflow=e,t.createSnapshot()}})}function Mv(o,t){return R({get(){const n=o.element;return n.type!==G.TABLE_CELL?o.element.width:n.hasColSpan?n.offsetWidth:n.width},set(n){o.element.width!==n&&(o.element.setWidth(n,!0),t.createSnapshot())}})}function xv(o,t){return R({get(){const n=o.element;return n.type!==G.TABLE_CELL?o.element.height:n.hasRowSpan?n.offsetHeight:n.height},set(n){o.element.height!==n&&(o.element.setHeight(n,!0),t.createSnapshot())}})}function Pv(o,t){return R({get(){return o.element.attributes.display},set(n){o.element.attributes.display!==n&&(o.element.attributes.display=n??void 0,t.createSnapshot())}})}function qv(o,t){return R({get(){return o.element.ds.type},set(n){o.element.ds.type!==n&&(o.element.ds.type=n,o.element.ds.value=void 0,t.createSnapshot())}})}const Fv=q({__name:"ImageUpload",emits:["upload"],setup(o,{expose:t,emit:n}){t();const e=n,s=me();function i(){const c=s.value;c!=null&&(c.value="",c.click())}function l(c){var _;const a=c.target;if(a==null)return;const p=(_=a.files)==null?void 0:_[0];if(p==null)return;const g=new FileReader;g.readAsDataURL(p),g.onload=function(v){var h;const y=(h=v.target)==null?void 0:h.result;typeof y=="string"&&e("upload",y)}}const r={emit:e,inputRef:s,selectFile:i,onChange:l,get Icon(){return K}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),Vv="_upload_1tbfz_2",zv="_input_1tbfz_9",Uv={upload:Vv,input:zv};function Hv(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.upload)},[u("button",{type:"button",onClick:e.selectFile,class:"quickprint-text-btn"},[f(e.Icon,{icon:"icon-upload"}),t[0]||(t[0]=u("span",null,"上传本地图片",-1))]),u("input",{type:"file",ref:"inputRef",onChange:e.onChange,accept:"image/*",class:d(o.classes.input)},null,34)],2)}const Gv={classes:Uv},Wv=F(Fv,[["render",Hv],["__cssModules",Gv],["__file","/home/dongls/work/quickprint/packages/designer/components/Form/ImageUpload.vue"]]),jv=q({__name:"Const",props:{element:{type:ue,required:!0}},setup(o,{expose:t}){t();const n=o,e=R(()=>n.element.type===G.IMAGE),s=R({get(){return n.element.ds.value},set(r){n.element.ds.value=r}});function i(r){s.value=r}const l={props:n,showUpload:e,value:s,onUpload:i,ImageUpload:Wv};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),Xv="_upload_bqfbo_6",Yv={const:"_const_bqfbo_2",upload:Xv};function Zv(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.const)},[Re(u("textarea",{"onUpdate:modelValue":t[0]||(t[0]=l=>e.value=l),class:"quickprint-form-control quickprint-form-control-block quickprint-config-space",rows:"5",placeholder:"请输入"},null,512),[[Ae,e.value]]),e.showUpload?(E(),I("div",{key:0,class:d(o.classes.upload)},[f(e.ImageUpload,{onUpload:e.onUpload})],2)):W("v-if",!0)],2)}const $v={classes:Yv},Kv=F(jv,[["render",Zv],["__cssModules",$v],["__file","/home/dongls/work/quickprint/packages/designer/editor/Config/DataSource/Const.vue"]]),Qv=q({__name:"Variable",props:{element:{type:ue,required:!0}},setup(o,{expose:t}){t();const n=o,e=Te(),s=R(()=>fe(n.element.ds.value)),i=R(()=>it(n.element.ds.value,e.doc.ds));function l(a){a.stopPropagation(),n.element.ds.value=void 0}async function r(){var _;const a=await Io({doc:e.doc,value:n.element.ds.value}).catch(tt);if(a==null||(n.element.setDataSource(ve.VARIABLE,a.value),n.element.type!=G.TABLE_CELL||a.type!=="ds"))return;const p=n.element.parent;if(p==null||p.isBindVariable||((_=a.parent)==null?void 0:_.type)!==re.ARRAY)return;const g=a.parent;p.setDataSource(ve.VARIABLE,`${Dt.DS}.${g.type}.${g.name}`)}const c={props:n,api:e,isEmpty:s,dsName:i,clearSelectedVar:l,selectField:r,get formatDataType(){return Ea},get Icon(){return K}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),Jv={class:"quickprint-config-ds-var-type"},ey=["title"];function ty(o,t,n,e,s,i){return E(),I("div",{class:"quickprint-config-ds-variable",onClick:e.selectField},[e.isEmpty?(E(),I(oe,{key:0},[t[0]||(t[0]=u("span",{class:"quickprint-config-ds-placeholder"},"请选择",-1)),f(e.Icon,{icon:"icon-open-new",size:"14px"})],64)):(E(),I(oe,{key:1},[u("span",Jv,"<"+Q(e.formatDataType(e.props.element.ds.value))+">",1),u("span",{class:"quickprint-is-fill-w quickprint-is-truncate",title:e.dsName},Q(e.dsName),9,ey),u("button",{type:"button",class:"quickprint-text-btn quickprint-config-ds-remove-var",onClick:e.clearSelectedVar},[f(e.Icon,{icon:"icon-close",size:"12px"})])],64))])}const ny=F(Qv,[["render",ty],["__file","/home/dongls/work/quickprint/packages/designer/editor/Config/DataSource/Variable.vue"]]),oy=q({__name:"Code",props:{element:{type:ue,required:!0}},setup(o,{expose:t}){t();const n=o,e=R(()=>fe(n.element.ds.value));function s(){return ft(n.element.ds.value)?n.element.ds.value:`function data(element){
  // 在此处自定义返回值
  // 支持返回Promise
  return
}`}function i(){Sv("自定义",s()).then(r=>{r!=null&&(n.element.ds.value=r)})}const l={props:n,isEmpty:e,useCode:s,openCodeEditor:i,get Icon(){return K}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),ly="_code_1az68_2",sy={code:ly},iy=["value"];function ry(o,t,n,e,s,i){return E(),I("div",{onClick:e.openCodeEditor,class:d(o.classes.code)},[u("textarea",{value:e.props.element.ds.value,class:"quickprint-form-control quickprint-form-control-block quickprint-config-space quickprint-is-scrollable",rows:"3",readonly:"",placeholder:"请输入"},null,8,iy),e.isEmpty?(E(),ne(e.Icon,{key:0,icon:"icon-open-new",size:"14px"})):W("v-if",!0)],2)}const ay={classes:sy},cy=F(oy,[["render",ry],["__cssModules",ay],["__file","/home/dongls/work/quickprint/packages/designer/editor/Config/DataSource/Code.vue"]]),uy=q({__name:"Formula",props:{element:{type:ue,required:!0}},setup(o,{expose:t}){t();const n=o,e=Te(),s=R(()=>fe(n.element.ds.value)),i=R(()=>Ro(n.element.ds.value,n.element.doc));function l(){const c=n.element.ds.value;cs({code:c,doc:e.doc,mode:"formula"}).then(a=>{a!=null&&(n.element.ds.value=a)})}const r={props:n,api:e,isEmpty:s,displayValue:i,openCodeEditor:l,get Icon(){return K}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),dy="_code_ipm2q_2",fy={code:dy},py=["value"];function my(o,t,n,e,s,i){return E(),I("div",{onClick:e.openCodeEditor,class:d(o.classes.code)},[u("textarea",{value:e.displayValue,class:"quickprint-form-control quickprint-form-control-block quickprint-config-space quickprint-is-scrollable",rows:"3",readonly:"",placeholder:"请输入"},null,8,py),e.isEmpty?(E(),ne(e.Icon,{key:0,icon:"icon-open-new",size:"14px"})):W("v-if",!0)],2)}const gy={classes:fy},_y=F(uy,[["render",my],["__cssModules",gy],["__file","/home/dongls/work/quickprint/packages/designer/editor/Config/DataSource/Formula.vue"]]);function hy(o){switch(o.ds.type){case ve.CONST:return f(Kv,{element:o},null);case ve.VARIABLE:return f(ny,{element:o},null);case ve.CODE:return f(cy,{element:o},null);case ve.FORMULA:return f(_y,{element:o},null);default:return null}}const by=q({props:{element:{type:ue,required:!0}},setup(o){const t=Te(),n=R(()=>cn(o.element.type)),e=R(()=>Qs.filter(L=>L.value!=o.element.type)),s=pe("px"),i=Mv(o,t),l=xv(o,t),r=Av(o,t),c=Nv(o,t),a=Bv(o,t),p=Pv(o,t),g=qv(o,t),_=R(()=>{const L=o.element;return L.type!==G.TABLE_CELL?!1:L.hasColSpan}),v=R(()=>{const L=o.element;return L.type!==G.TABLE_CELL?!1:L.hasRowSpan}),y=R(()=>{const L=o.element,T=L.parent;if(T===null||!(T instanceof Nt))return!1;const M=T.header;if(M.display&&L.bottom<=(M.height??0))return!1;const P=T.parent;if(P==null)return!1;const N=T.footer;return!(N.display&&L.top>=Math.floor(se.mm_to_px(P.paper.height))-(N.height??0))});function h(L,T){return T==null?!1:!!T.includes(L)}function S(){const L=Jt(o.element.type);if(h(_e.LAYOUT,L==null?void 0:L.exclude))return null;const T=o.element,M=h(_e.COORD,L==null?void 0:L.exclude)?null:f("section",{class:"quickprint-config-section quickprint-config-inline"},[f("header",{class:"quickprint-config-header"},[ge("位置")]),f("div",{class:"quickprint-config-content quickprint-form-inline"},[f(_n,{class:"quickprint-form-inline-item",label:"左",modelValue:T.left,"onUpdate:modelValue":x=>T.left=x,target:s.value},null),f(_n,{class:"quickprint-form-inline-item",label:"上",modelValue:T.top,"onUpdate:modelValue":x=>T.top=x,target:s.value},null)])]),P=h(_e.SIZE)?null:f("section",{class:"quickprint-config-section quickprint-config-inline"},[f("header",{class:"quickprint-config-header"},[f("span",null,[ge("尺寸")])]),f("div",{class:"quickprint-config-content quickprint-form-inline"},[f(_n,{class:"quickprint-form-inline-item",label:"宽",modelValue:i.value,"onUpdate:modelValue":x=>i.value=x,target:s.value,disabled:_.value},null),f(_n,{class:"quickprint-form-inline-item",label:"高",modelValue:l.value,"onUpdate:modelValue":x=>l.value=x,target:s.value,disabled:v.value},null)])]),N=h(_e.VISIBILITY,L==null?void 0:L.exclude)?null:f(Dv,{element:T},null),C=h(_e.OVERFLOW,L==null?void 0:L.exclude)?null:f("section",{class:"quickprint-config-section quickprint-config-inline"},[f("header",{class:"quickprint-config-header"},[ge("溢出时")]),f("div",{class:"quickprint-config-content"},[f(ie,{modelValue:r.value,"onUpdate:modelValue":x=>r.value=x,options:oi,class:"quickprint-w-full"},null)])]),O=h(_e.PRINT_MODE,L==null?void 0:L.exclude)?null:f("section",{class:"quickprint-config-section quickprint-config-inline"},[f("header",{class:"quickprint-config-header"},[ge("打印模式")]),f("div",{class:"quickprint-config-content"},[f(ie,{modelValue:a.value,"onUpdate:modelValue":x=>a.value=x,options:ni,class:"quickprint-w-full"},null)])]),B=h(_e.POSITION,L==null?void 0:L.exclude)||!y.value?null:f("section",{class:"quickprint-config-section quickprint-config-inline"},[f("header",{class:"quickprint-config-header"},[ge("定位模式")]),f("div",{class:"quickprint-config-content"},[f(ie,{modelValue:c.value,"onUpdate:modelValue":x=>c.value=x,options:ti,class:"quickprint-w-full"},null)])]);return f("div",{class:"quickprint-config-group"},[f("div",{class:"quickprint-config-group-title quickprint-is-row"},[f("span",{class:"quickprint-is-fill-w"},[ge("布局")]),f("span",null,[ge("单位：")]),f(iv,{modelValue:s.value,"onUpdate:modelValue":x=>s.value=x},null)]),M,P,N,C,O,B])}function m(){const L=Jt(o.element.type);if(h(_e.BASIC,L==null?void 0:L.exclude))return null;const T=o.element,M=h(_e.PREFIX,L==null?void 0:L.exclude)?null:f("section",{class:"quickprint-config-section quickprint-config-inline"},[f("header",{class:"quickprint-config-header"},[ge("前缀")]),f("div",{class:"quickprint-config-content"},[Re(f("input",{"onUpdate:modelValue":C=>T.attributes.prefix=C,type:"text",class:"quickprint-form-control quickprint-w-full",placeholder:"请输入"},null),[[Ae,T.attributes.prefix]])])]),P=h(_e.SUFFIX,L==null?void 0:L.exclude)?null:f("section",{class:"quickprint-config-section quickprint-config-inline"},[f("header",{class:"quickprint-config-header"},[ge("后缀")]),f("div",{class:"quickprint-config-content"},[Re(f("input",{"onUpdate:modelValue":C=>T.attributes.suffix=C,type:"text",class:"quickprint-form-control quickprint-w-full",placeholder:"请输入"},null),[[Ae,T.attributes.suffix]])])]),N=h(_e.DISPLAY,L==null?void 0:L.exclude)?null:f("section",{class:"quickprint-config-section quickprint-config-inline"},[f("header",{class:"quickprint-config-header"},[ge("数据类型")]),f("div",{class:"quickprint-config-content"},[f(ie,{options:e.value,modelValue:p.value,"onUpdate:modelValue":C=>p.value=C,class:"quickprint-w-full"},null)])]);return f("div",{class:"quickprint-config-group"},[f("div",{class:"quickprint-config-group-title"},[ge("基础")]),M,P,N])}function b(){const L=Jt(o.element.display);return(L==null?void 0:L.display)==null?null:Xe(L.display,{element:o.element})}function w(){const L=Jt(o.element.type);if(h(_e.ATTRIBUTES,L==null?void 0:L.exclude))return null;const T=L!=null&&L.attributes?Xe(L.attributes,{element:o.element}):null,M=b();if(T==null&&M==null)return null;const P=M!=null&&T!=null?f("div",{class:"quickprint-config-divider"},null):null;return f("div",{class:"quickprint-config-group"},[f("div",{class:"quickprint-config-group-title"},[ge("属性")]),M,P,T])}function V(){const L=Jt(o.element.type);return h(_e.DATASOURCE,L==null?void 0:L.exclude)?null:f("div",{class:"quickprint-config-group"},[f("div",{class:"quickprint-config-group-title"},[ge("数据")]),f(ie,{options:Tl,modelValue:g.value,"onUpdate:modelValue":T=>g.value=T},null),hy(o.element)])}function Z(L){L(o.element.id)}return function(){const T=o.element;return f("div",{class:"quickprint-config"},[f("div",{class:"quickprint-config-title"},[f("span",null,[n.value,ge("配置")]),null]),f("div",{class:"quickprint-config-body quickprint-is-fill-h quickprint-is-scrollable"},[f("div",{class:"quickprint-config-group"},[f("section",{class:"quickprint-config-section quickprint-config-inline"},[f("header",{class:"quickprint-config-header"},[ge("标识")]),f("div",{class:"quickprint-config-content"},[f("span",{class:"quickprint-config-id"},[T.id]),f(pv,{onCopy:Z},null)])]),f("section",{class:"quickprint-config-section quickprint-config-inline"},[f("header",{class:"quickprint-config-header"},[ge("标题")]),f("div",{class:"quickprint-config-content"},[Re(f("input",{type:"text","onUpdate:modelValue":M=>T.title=M,class:"quickprint-form-control quickprint-w-full",placeholder:"请输入"},null),[[Ae,T.title]])])])]),S(),m(),w(),V()])])}}}),vy=q({setup(){const o=Te(),t=we("classes");function n(){return f("div",{class:t.tip},[ge("未知的打印元素")])}function e(){return f("div",{class:t.tip},[ge("请先选择元素")])}function s(){const r=o.getSelectedPage()??o.doc.firstPage;return f(Hb,{page:r},null)}function i(){const r=o.getSelectedElements()[0];return r==null?e():Object.values(G).includes(r.type)===!1?n():Xe(by,{element:r,key:r.id})}function l(){const r=o.state;return r.selectedType!==be.ELEMENT?!1:r.selectMode===lt.SINGLE?!0:r.selected.length===1}return function(){return l()?i():s()}}}),yy="_tip_cdonk_2",Ey={tip:yy},Sy={classes:Ey},Ty=F(vy,[["__cssModules",Sy],["__file","/home/dongls/work/quickprint/packages/designer/editor/Config/index.vue"]]);function Ke(o,t){if(o.state.selectedType!==be.ELEMENT)return;const e=o.getSelectedElements();if(e.length===1)return e[0].getStyle(t)}function Ve(o,t,n){if(o.state.selectedType!==be.ELEMENT)return;const s=o.getSelectedElements();if(s.length!=0){for(const i of s)i.setStyle(t,n);o.createSnapshot()}}function je(o,t){if(o.state.selectedType!==be.ELEMENT)return;const e=o.getSelectedElements();if(e.length!=0){for(const s of e)s.removeStyle(t);o.createSnapshot()}}function ky(o){const t="underline";return R({get(){if(o.state.selectedType!==be.ELEMENT)return!1;const e=o.getSelectedElements();return e.length!==1?!1:e[0].getStyle(t)===!0},set(n){n?Ve(o,t,n):je(o,t)}})}function Ry(o){const t="lineThrough";return R({get(){if(o.state.selectedType!==be.ELEMENT)return!1;const e=o.getSelectedElements();return e.length!==1?!1:e[0].getStyle(t)===!0},set(n){n?Ve(o,t,n):je(o,t)}})}function Iy(o){const t="lineHeight";return R({get(){return Ke(o,t)},set(n){n===Rt.DEFAULT?je(o,t):Ve(o,t,n)}})}function wy(o){const t="highlightColor";return R({get(){return Ke(o,t)??Pe.BLACK},set(n){n===""?je(o,t):Ve(o,t,n)}})}function Cy(o){const t="backgroundColor";return R({get(){return Ke(o,t)??Pe.BLACK},set(n){n===""?je(o,t):Ve(o,t,n)}})}function Oy(o){const t="fontStyle";return R({get(){return Ke(o,t)===Po.ITALIC},set(n){n?Ve(o,t,Po.ITALIC):je(o,t)}})}function Ly(o){const t="textAlign";return R({get(){return Ke(o,t)??mt.LEFT},set(n){n===mt.LEFT?je(o,t):Ve(o,t,n)}})}function Dy(o){const t="verticalAlign";return R({get(){return Ke(o,t)??ot.MIDDLE},set(n){n===ot.MIDDLE?je(o,t):Ve(o,t,n)}})}function Ny(o){const t="fontFamily";return R({get(){return Ke(o,t)},set(n){n===he.DEFAULT?je(o,t):Ve(o,t,n)}})}function By(o){const t="fontSize";return R({get(){return Ke(o,t)},set(n){n===Oe.DEFAULT?je(o,t):Ve(o,t,n)}})}function Ay(o){const t="color";return R({get(){return Ke(o,t)??Pe.BLACK},set(n){Ve(o,t,n)}})}function My(o){const t="fontWeight";return R({get(){return Ke(o,t)===700},set(n){n?Ve(o,t,700):je(o,t)}})}const xy=q({__name:"BorderSelect",setup(o,{expose:t}){t();const n=Object.freeze({NONE:0,TOP:1,BOTTOM:2,LEFT:4,RIGHT:8,ALL:15}),e=Te(),s=R(()=>{if(e.state.selectedType!==be.ELEMENT)return null;const S=e.getSelectedElements();if(S.length!==1)return null;const m=S[0],b={};return ye(m,"top")&&(b.borderTopStyle="solid"),ye(m,"right")&&(b.borderRightStyle="solid"),ye(m,"bottom")&&(b.borderBottomStyle="solid"),ye(m,"left")&&(b.borderLeftStyle="solid"),b}),i=[{label:"上框线",value:n.TOP,icon:"icon-border-top"},{label:"下框线",value:n.BOTTOM,icon:"icon-border-bottom"},{label:"左框线",value:n.LEFT,icon:"icon-border-left"},{label:"右框线",value:n.RIGHT,icon:"icon-border-right"}];function l(h){if(e.state.selectedType!==be.ELEMENT)return!1;const m=e.getSelectedElements();if(m.length!==1)return!1;const b=m[0];switch(h){case n.TOP:return ye(b,"top");case n.RIGHT:return ye(b,"right");case n.BOTTOM:return ye(b,"bottom");case n.LEFT:return ye(b,"left");case n.ALL:return ye(b,"top")&&ye(b,"right")&&ye(b,"bottom")&&ye(b,"left");default:return!1}}function r(h){if(e.state.selectedType!==be.ELEMENT)return;const m=e.getSelectedElements();if(m.length!=0){switch(h){case n.TOP:return a(m);case n.BOTTOM:return g(m);case n.LEFT:return _(m);case n.RIGHT:return p(m);case n.ALL:return v(m)}e.createSnapshot()}}function c(){if(e.state.selectedType!==be.ELEMENT)return;const S=e.getSelectedElements();if(S.length!=0){for(const m of S)m.setStyle("borderStyle",void 0),m.setStyle("borderTopStyle",void 0),m.setStyle("borderRightStyle",void 0),m.setStyle("borderBottomStyle",void 0),m.setStyle("borderLeftStyle",void 0);e.createSnapshot()}}function a(h){const S=!h.every(m=>ye(m,"top"));for(const m of h)S?m.setStyle("borderTopStyle",le.SOLID):m.removeStyle("borderTopStyle")}function p(h){const S=!h.every(m=>ye(m,"right"));for(const m of h)S?m.setStyle("borderRightStyle",le.SOLID):m.removeStyle("borderRightStyle")}function g(h){const S=!h.every(m=>ye(m,"bottom"));for(const m of h)S?m.setStyle("borderBottomStyle",le.SOLID):m.removeStyle("borderBottomStyle")}function _(h){const S=!h.every(m=>ye(m,"left"));for(const m of h)S?m.setStyle("borderLeftStyle",le.SOLID):m.removeStyle("borderLeftStyle")}function v(h){const S=!h.every(m=>ye(m,"top")&&ye(m,"right")&&ye(m,"bottom")&&ye(m,"left"));for(const m of h){if(S){m.setStyle("borderStyle",S?"solid":void 0);continue}m.removeStyle("borderStyle"),m.removeStyle("borderTopStyle"),m.removeStyle("borderRightStyle"),m.removeStyle("borderBottomStyle"),m.removeStyle("borderLeftStyle")}}const y={BORDER_MODE:n,api:e,style:s,BORDER_TYPE_OPTIONS:i,includeBorderType:l,selectBorderType:r,clearBorder:c,toggleTopBorder:a,toggleRightBorder:p,toggleBottomBorder:g,toggleLeftBorder:_,toggleAllBorder:v,get Popover(){return Dl},get Icon(){return K}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),Py="_border_rprfx_2",qy="_borderSelect_rprfx_10",Fy="_popover_rprfx_14",Vy="_divider_rprfx_18",zy={border:Py,borderSelect:qy,popover:Fy,divider:Vy},Uy=["title","onClick"];function Hy(o,t,n,e,s,i){return E(),ne(e.Popover,null,{popover:Se(()=>[u("div",{class:d(o.classes.popover)},[u("div",null,[(E(),I("button",{type:"button",title:"全部框线",key:e.BORDER_MODE.ALL,class:d({"quickprint-text-btn":!0,[o.classes.tool]:!0,"quickprint-is-selected":e.includeBorderType(e.BORDER_MODE.ALL)}),onClick:t[0]||(t[0]=l=>e.selectBorderType(e.BORDER_MODE.ALL))},[f(e.Icon,{icon:"icon-border",size:"16px"})],2)),(E(),I("button",{type:"button",title:"无框线",key:e.BORDER_MODE.NONE,class:d({"quickprint-text-btn":!0,[o.classes.tool]:!0}),onClick:e.clearBorder},[f(e.Icon,{icon:"icon-border-none",size:"16px"})],2))]),u("div",{class:d(o.classes.divider)},[(E(),I(oe,null,ce(e.BORDER_TYPE_OPTIONS,l=>u("button",{type:"button",title:l.label,key:l.value,class:d({"quickprint-text-btn":!0,[o.classes.tool]:!0,"quickprint-is-selected":e.includeBorderType(l.value)}),onClick:r=>e.selectBorderType(l.value)},[f(e.Icon,{icon:l.icon,size:"16px"},null,8,["icon"])],10,Uy)),64))],2)],2)]),default:Se(()=>[u("div",{class:d(["quickprint-text-btn",o.classes.borderSelect]),title:"边框"},[u("div",{class:d({[o.classes.border]:!0}),style:Y(e.style)},null,6)],2)]),_:1})}const Gy={classes:zy},Wy=F(xy,[["render",Hy],["__cssModules",Gy],["__file","/home/dongls/work/quickprint/packages/designer/components/Form/BorderSelect.vue"]]),jy="_itemLabel_noxgo_1",Xy="_fieldset_noxgo_7",us={itemLabel:jy,fieldset:Xy};function Yy(o,t){var e,s;const n={width:o.width??"54px"};return f("label",{class:"quickprint-is-row"},[f("span",{class:us.itemLabel,style:n},[o.label]),(s=(e=t.slots).default)==null?void 0:s.call(e)])}function Zy(o,t){var e,s;const n=o.desc?f(bi,{title:o.desc},null):null;return f("div",{class:us.fieldset},[f("header",null,[f("span",null,[o.header]),n]),(s=(e=t.slots).default)==null?void 0:s.call(e)])}const $y={Item:Yy,Fieldset:Zy},Ky=q({__name:"Paper",props:{config:{type:Object,required:!0}},setup(o,{expose:t}){t();const n=o,e=pe("mm"),s=[{label:"磅",value:de.PT},{label:"像素",value:de.PX},{label:"毫米",value:de.MM}],i=y("top"),l=y("bottom"),r=y("left"),c=y("right"),a=R(()=>no.map(S=>({label:S.size===oo.CUSTOM?"自定义":`${S.size}(${S.width}mm ✕ ${S.height}mm)`,value:S.size})));function p(S){n.config.width=S,v()}function g(S){n.config.height=S,v()}function _(S){const m=no.find(b=>b.size===S);m!=null&&(n.config.width=m.width,n.config.height=m.height,n.config.orientation=m.orientation,n.config.margins=m.margins,n.config.size=m.size)}function v(){const S=n.config,m=no.find(b=>b.size===oo.CUSTOM?!1:b.orientation===S.orientation&&b.width===S.width&&b.height===S.height);if(m==null){S.size=oo.CUSTOM;return}S.size=m.size}function y(S){return R({get(){var m;return(m=n.config.margins)==null?void 0:m[S]},set(m){n.config.margins==null&&(n.config.margins={}),n.config.margins[S]=m}})}const h={props:n,unit:e,MARGIN_UNITS:s,topMargin:i,bottomMargin:l,leftMargin:r,rightMargin:c,options:a,onPaperWidthChange:p,onPaperHeightChange:g,onPaperChange:_,checkPaperSize:v,createMarginProp:y,RadioButton:zn,LabelNumber:rs,get Form(){return $y},InputWithUnit:Yt,get ORIENTATION_OPTIONS(){return Rl},get Select(){return ie},get LENGTH_UNIT(){return de}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),Qy="_margins_1x2w9_2",Jy={margins:Qy},eE={class:"quickprint-is-fill-h quickprint-is-scrollable quickprint-p-4"},tE={class:"quickprint-config-section"},nE={class:"quickprint-form-inline"},oE={class:"quickprint-config-section quickprint-config-inline"};function lE(o,t,n,e,s,i){return E(),I("div",eE,[u("section",tE,[t[5]||(t[5]=u("header",{class:"quickprint-config-header"},[u("span",null,"尺寸")],-1)),f(e.Select,{options:e.options,modelValue:n.config.size,"onUpdate:modelValue":e.onPaperChange,class:"quickprint-form-control-block quickprint-form-bottom-gap"},null,8,["options","modelValue"]),u("div",nE,[f(e.LabelNumber,{class:"quickprint-form-inline-item",label:"宽",modelValue:n.config.width,min:1,"onUpdate:modelValue":e.onPaperWidthChange},null,8,["modelValue"]),f(e.LabelNumber,{class:"quickprint-form-inline-item",label:"高",modelValue:n.config.height,min:1,"onUpdate:modelValue":e.onPaperHeightChange},null,8,["modelValue"])])]),u("section",oE,[t[6]||(t[6]=u("header",{class:"quickprint-config-header"},"方向",-1)),f(e.RadioButton,{modelValue:n.config.orientation,"onUpdate:modelValue":t[0]||(t[0]=l=>n.config.orientation=l),options:e.ORIENTATION_OPTIONS},null,8,["modelValue","options"])]),f(e.Form.Fieldset,{header:"参考边距",desc:"可用于标记可打印区域。请确保设打印元素在可打印区域内，避免内容被裁剪。"},{default:Se(()=>[u("div",{class:d(o.classes.margins)},[f(e.Form.Item,{label:"上边距"},{default:Se(()=>[f(e.InputWithUnit,{modelValue:e.topMargin,"onUpdate:modelValue":t[1]||(t[1]=l=>e.topMargin=l),options:e.MARGIN_UNITS,defaultUnit:e.LENGTH_UNIT.MM},null,8,["modelValue","defaultUnit"])]),_:1}),f(e.Form.Item,{label:"下边距"},{default:Se(()=>[f(e.InputWithUnit,{modelValue:e.bottomMargin,"onUpdate:modelValue":t[2]||(t[2]=l=>e.bottomMargin=l),options:e.MARGIN_UNITS,defaultUnit:e.LENGTH_UNIT.MM},null,8,["modelValue","defaultUnit"])]),_:1}),f(e.Form.Item,{label:"左边距"},{default:Se(()=>[f(e.InputWithUnit,{modelValue:e.leftMargin,"onUpdate:modelValue":t[3]||(t[3]=l=>e.leftMargin=l),options:e.MARGIN_UNITS,defaultUnit:e.LENGTH_UNIT.MM},null,8,["modelValue","defaultUnit"])]),_:1}),f(e.Form.Item,{label:"右边距"},{default:Se(()=>[f(e.InputWithUnit,{modelValue:e.rightMargin,"onUpdate:modelValue":t[4]||(t[4]=l=>e.rightMargin=l),options:e.MARGIN_UNITS,defaultUnit:e.LENGTH_UNIT.MM},null,8,["modelValue","defaultUnit"])]),_:1})],2)]),_:1})])}const sE={classes:Jy},iE=F(Ky,[["render",lE],["__cssModules",sE],["__file","/home/dongls/work/quickprint/packages/designer/editor/Setting/Document/Paper.vue"]]),rE=q({__name:"Font",props:{config:{type:Object,required:!0}},setup(o,{expose:t}){t();const n=o,e=[{label:"倍",value:de.NONE},{label:"磅",value:de.PT},{label:"像素",value:de.PX}],s=R(()=>Gn.map(g=>(g.style={fontFamily:g.value==he.DEFAULT?he.SONG:g.value},g))),i=R(()=>Ul.map(g=>(g.style={fontFamily:g.value==he.DEFAULT?he.SONG:g.value},g))),l=R({get(){return n.config.style.fontFamily??he.DEFAULT},set(g){const _=g===he.DEFAULT?void 0:g;n.config.style.fontFamily=_}}),r=R({get(){return n.config.style.enFontFamily??he.DEFAULT},set(g){const _=g===he.DEFAULT?void 0:g;n.config.style.enFontFamily=_}}),c=R({get(){return n.config.style.fontSize},set(g){const _=fe(g)?void 0:g;n.config.style.fontSize=_}}),a=R({get(){return n.config.style.lineHeight},set(g){n.config.style.lineHeight=g}}),p={props:n,LINE_HEIGHT_UNITS:e,zhFontOptions:s,enFontOptions:i,zhFont:l,enFont:r,fontSize:c,lineHeight:a,FontSize:Gl,InputWithUnit:Yt,get Select(){return ie}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),aE="_font_145qf_2",cE="_zhFont_145qf_9",uE="_enFont_145qf_16",dE="_lineHeight_145qf_23",fE="_fontSize_145qf_30",pE="_title_145qf_45",mE={font:aE,zhFont:cE,enFont:uE,lineHeight:dE,fontSize:fE,title:pE},gE={class:"quickprint-is-fill-h quickprint-is-scrollable quickprint-p-4"},_E={class:"quickprint-is-fill-h"},hE={class:"quickprint-is-fill-h"};function bE(o,t,n,e,s,i){return E(),I("div",gE,[u("section",{class:d(o.classes.font)},[u("div",{class:d(o.classes.zhFont)},[u("div",{class:d(o.classes.title)},"中文字体",2),u("div",_E,[f(e.Select,{options:e.zhFontOptions,modelValue:e.zhFont,"onUpdate:modelValue":t[0]||(t[0]=l=>e.zhFont=l)},null,8,["options","modelValue"])])],2),u("div",{class:d(o.classes.enFont)},[u("div",{class:d(o.classes.title)},"西文字体",2),u("div",hE,[f(e.Select,{options:e.enFontOptions,modelValue:e.enFont,"onUpdate:modelValue":t[1]||(t[1]=l=>e.enFont=l)},null,8,["options","modelValue"])])],2),u("div",{class:d(o.classes.lineHeight)},[u("div",{class:d(o.classes.title)},"行高",2),f(e.InputWithUnit,{modelValue:e.lineHeight,"onUpdate:modelValue":t[2]||(t[2]=l=>e.lineHeight=l),options:e.LINE_HEIGHT_UNITS},null,8,["modelValue"])],2),u("div",{class:d(o.classes.fontSize)},[u("div",{class:d(o.classes.title)},"字号",2),f(e.FontSize,{modelValue:e.fontSize,"onUpdate:modelValue":t[3]||(t[3]=l=>e.fontSize=l),height:"144px"},null,8,["modelValue"])],2)],2)])}const vE={classes:mE},yE=F(rE,[["render",bE],["__cssModules",vE],["__file","/home/dongls/work/quickprint/packages/designer/editor/Setting/Document/Font.vue"]]),EE=q({__name:"index",props:{doc:{type:Ee,required:!0},active:{type:String,default:null}},setup(o,{expose:t}){t();const n=o,e=$e(),s=De(i());function i(){const a=n.doc;return{size:a.paper.size,width:a.paper.width,height:a.paper.height,orientation:a.paper.orientation,margins:a.margins?{...a.margins}:void 0,style:{...a.style}}}function l(){e==null||e.confirm(s)}function r(){e==null||e.cancel()}const c={props:n,winApi:e,config:s,useDocumentConfig:i,confirm:l,cancel:r,Papaer:iE,Font:yE};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),SE="_setting_h98ws_2",TE="_footer_h98ws_10",kE={setting:SE,footer:TE};function RE(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.setting)},[n.active=="paper"?(E(),ne(e.Papaer,{key:0,config:e.config},null,8,["config"])):W("v-if",!0),n.active=="font"?(E(),ne(e.Font,{key:1,config:e.config},null,8,["config"])):W("v-if",!0),u("div",{class:d(o.classes.footer)},[u("button",{type:"button",class:"quickprint-text-btn",onClick:e.cancel},"取消"),u("button",{type:"button",class:"quickprint-text-btn",onClick:e.confirm},"确定")],2)],2)}const IE={classes:kE},wE=F(EE,[["render",RE],["__cssModules",IE],["__file","/home/dongls/work/quickprint/packages/designer/editor/Setting/Document/index.vue"]]),CE=Ie(function(o){return We("文档",(t,n)=>f(wE,{doc:o,active:n},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"纸张",name:"paper",active:!0},{label:"字体",name:"font"}]}).promisify().then(t=>(o.paper.size=t.size,o.paper.width=t.width,o.paper.height=t.height,o.paper.orientation=t.orientation,o.margins=t.margins,o.style=t.style,t)).catch(ke)}),OE=q({props:{toolbar:{type:Array,required:!0}},setup(o){const t=Te(),n=we("classes"),e=Ny(t),s=By(t),i=Iy(t),l=Cy(t),r=wy(t),c=Ay(t),a=My(t),p=Oy(t),g=ky(t),_=Ry(t),v=Ly(t),y=Dy(t),h=R(()=>Gn.map(O=>(O.style={fontFamily:O.value==he.DEFAULT?he.SONG:O.value},O)));function S(O){return f("button",{type:"button",class:"quickprint-text-btn",onClick:()=>O.handler(t)},[O.icon&&f(K,{icon:O.icon},null),f("span",null,[O.label])])}function m(O){O.preventDefault()}function b(){a.value=!a.value}function w(){p.value=!p.value}function V(){g.value=!g.value}function Z(){_.value=!_.value}function L(){const O=t.getSelectedElements();if(O.length==0)return;const B=Math.min(...O.map(x=>x.left));for(const x of O)x.setLeft(B,!0);t.createSnapshot()}function T(){const O=t.getSelectedElements();if(O.length==0)return;const B=O[0].page;if(B==null)return;const x=se.mm_to_px(B.width);for(const k of O)k.setLeft((x-k.width)/2);t.createSnapshot()}function M(){const O=t.getSelectedElements();if(O.length==0)return;const B=Math.max(...O.map(x=>x.left+x.width));for(const x of O)x.setLeft(B-x.width,!0);t.createSnapshot()}async function P(){const O=await Zc(t.doc);O!=null&&(t.doc.ds=t.doc.createDS(O))}function N(){CE(t.doc)}function C(O){var B,x;if(typeof O=="function")return O(t,n);if(typeof O=="object")return S(O);if(typeof O!="string")return null;switch(O){case"divider":case"---":return f("div",{class:n.divider},null);case"space":return f("div",{class:"quickprint-is-fill-w"},null);case"undo":{const k=!t.history.allowUndo();return f("button",{type:"button",title:"撤销 Ctrl + Z",class:"quickprint-text-btn",disabled:k,onClick:t.history.undo},[f(K,{icon:"icon-undo"},null)])}case"redo":{const k=!t.history.allowRedo();return f("button",{type:"button",title:"重做 Ctrl + Y",class:"quickprint-text-btn",disabled:k,onClick:t.history.redo},[f(K,{icon:"icon-redo"},null)])}case"delete":return f("button",{type:"button",class:["quickprint-text-btn",n.tool],title:"删除",onClick:t.deleteSelectedElement},[f(K,{icon:"icon-delete",size:"16px"},null)]);case"fontFamily":return f(ie,{title:"字体",width:"80px",modelValue:e.value,"onUpdate:modelValue":k=>e.value=k,options:h.value,class:n.tool,button:!0},null);case"fontSize":return f(ie,{title:"字号",width:"60px",modelValue:s.value,"onUpdate:modelValue":k=>s.value=k,options:Co,class:n.tool,button:!0},null);case"lineHeight":return f(ie,{title:"行高",width:"60px",modelValue:i.value,"onUpdate:modelValue":k=>i.value=k,options:Hl,class:n.tool,popoverWidth:120,button:!0},null);case"backgroundColor":return f(rn,{modelValue:l.value,"onUpdate:modelValue":k=>l.value=k,class:n.tool},{default:()=>[f("div",{class:n.colorIcon,title:"背景色"},[f(K,{icon:"icon-bg-color-a",size:"15px"},null),f("div",{class:n.colorIndicator,style:{backgroundColor:l.value}},null)])]});case"highlightColor":return f(rn,{modelValue:r.value,"onUpdate:modelValue":k=>r.value=k,class:n.tool},{default:()=>[f("div",{class:n.colorIcon,title:"突出显示"},[f(K,{icon:"icon-bg-color-b",size:"15px"},null),f("div",{class:n.colorIndicator,style:{backgroundColor:r.value}},null)])]});case"fontColor":return f(rn,{modelValue:c.value,"onUpdate:modelValue":k=>c.value=k,class:n.tool},{default:()=>[f("div",{class:n.colorIcon,title:"字体颜色"},[f(K,{icon:"icon-font",size:"15px"},null),f("div",{class:n.colorIndicator,style:{backgroundColor:c.value}},null)])]});case"fontWeight":{const k={"quickprint-text-btn":!0,[n.tool]:!0,"quickprint-is-selected":a.value};return f("button",{type:"button",title:"加粗",class:k,onClick:b},[f(K,{icon:"icon-font-bold",size:"16px"},null)])}case"fontStyle":{const k={"quickprint-text-btn":!0,[n.tool]:!0,"quickprint-is-selected":p.value};return f("button",{type:"button",title:"斜体",class:k,onClick:w},[f(K,{icon:"icon-italic",size:"16px"},null)])}case"underline":{const k={"quickprint-text-btn":!0,[n.tool]:!0,"quickprint-is-selected":g.value};return f("button",{type:"button",title:"下划线",class:k,onClick:V},[f(K,{icon:"icon-underline",size:"16px"},null)])}case"throughLine":{const k={"quickprint-text-btn":!0,[n.tool]:!0,"quickprint-is-selected":_.value};return f("button",{type:"button",title:"删除线",class:k,onClick:Z},[f(K,{icon:"icon-through-line",size:"16px"},null)])}case"border":return f(Wy,null,null);case"textAlign":{const k=((B=_o.find(A=>A.value===v.value))==null?void 0:B.label)??"水平对齐",D={selected({option:A}){return f(K,{icon:A==null?void 0:A.icon,class:"quickprint-is-self-center"},null)}};return f(ie,{modelValue:v.value,"onUpdate:modelValue":A=>v.value=A,options:_o,title:k,class:n.tool,width:"36px",size:"mini",button:!0},D)}case"verticalAlign":{const k=((x=go.find(A=>A.value===y.value))==null?void 0:x.label)??"垂直对齐",D={selected({option:A}){return f(K,{icon:A==null?void 0:A.icon,class:"quickprint-is-self-center"},null)}};return f(ie,{modelValue:y.value,"onUpdate:modelValue":A=>y.value=A,options:go,title:k,class:n.tool,width:"36px",size:"mini",button:!0},D)}case"alignLeft":{const k={"quickprint-text-btn":!0,[n.tool]:!0};return f("button",{type:"button",title:"左侧对齐",class:k,onClick:L},[f(K,{icon:"icon-layout-align-left",size:"16px"},null)])}case"alignCenter":{const k={"quickprint-text-btn":!0,[n.tool]:!0};return f("button",{type:"button",title:"水平居中",class:k,onClick:T},[f(K,{icon:"icon-layout-align-center",size:"16px"},null)])}case"alignRight":{const k={"quickprint-text-btn":!0,[n.tool]:!0};return f("button",{type:"button",title:"右侧对齐",class:k,onClick:M},[f(K,{icon:"icon-layout-align-right",size:"16px"},null)])}case"useGrid":{const k={"quickprint-text-btn":!0,"quickprint-is-selected":t.doc.useGrid};return f("button",{type:"button",title:"网格",class:k,onClick:t.toggleBackground},[f(K,{icon:"icon-beijing",size:"16px"},null)])}case"elementPanel":{const k={"quickprint-text-btn":!0,"quickprint-is-selected":t.state.panel.left};return f("button",{type:"button",title:"元素面板",class:k,onClick:t.toggleElementPanel},[f(K,{icon:"icon-pintu",size:"16px"},null)])}case"configPanel":{const k={"quickprint-text-btn":!0,"quickprint-is-selected":t.state.panel.right};return f("button",{type:"button",title:"配置面板",class:k,onClick:t.toggleConfigPanel},[f(K,{icon:"icon-config",size:"16px"},null)])}case"datasource":return f("button",{type:"button",class:"quickprint-text-btn",onClick:P},[f(K,{icon:"icon-datasource"},null),f("span",null,[ge("数据源")])]);case"document":return f("button",{type:"button",class:"quickprint-text-btn",onClick:N},[f(K,{icon:"icon-file-text"},null),f("span",null,[ge("文档配置")])]);default:return null}}return function(){return f("div",{class:n.toolbar,onMousedown:m},[o.toolbar.map(C)])}}}),LE="_toolbar_1bhq2_2",DE="_divider_1bhq2_8",NE="_tool_1bhq2_2",BE="_colorIcon_1bhq2_18",AE="_colorIndicator_1bhq2_38",ME={toolbar:LE,divider:DE,tool:NE,colorIcon:BE,colorIndicator:AE},xE={classes:ME},PE=F(OE,[["__cssModules",xE],["__file","/home/dongls/work/quickprint/packages/designer/editor/Toolbar/index.vue"]]);function qE(o){let t=null;const n=me(),e=De({width:0,height:0,scrollTop:0,scrollLeft:0}),s=me(),i=De({id:"",top:0,left:0,width:0,height:0});async function l(){await Wt();const v=n.value;v!=null&&(e.width=v.offsetWidth,e.height=v.offsetHeight)}function r(v){const y=v.target;e.scrollLeft=y.scrollLeft,e.scrollTop=y.scrollTop}function c(v){const h=v.target.closest("."+ee.PAPER);h!=null&&(s.value=h,p(h),a())}async function a(){await Wt();const v=s.value;v!=null&&(i.id=v.id.slice(1),i.width=v.offsetWidth,i.height=v.offsetHeight,i.top=v.offsetTop,i.left=v.offsetLeft)}function p(v){v!=null&&(s.value&&(t==null||t.unobserve(s.value)),t==null||t.observe(v))}function g(){const v=o.doc.firstPage;if(v==null)return;const y=document.querySelector("#\\@"+v.id);s.value=y,t&&y&&t.observe(y),a()}function _(v){v.some(y=>y.target.matches("."+ee.CANVAS))&&(l(),a()),v.some(y=>y.target.matches("."+ee.PAPER))&&(l(),a())}return Eo(()=>o.state.scale,()=>a()),jt(()=>{t=new ResizeObserver(_),t.observe(n.value),g(),l()}),js(()=>{t==null||t.disconnect(),t=null}),{canvasRef:n,canvasRect:e,pageRect:i,onScroll:r,onSelectPage:c}}const ds=Object.freeze(["undo","redo","delete","---","fontFamily","fontSize","lineHeight","---","backgroundColor","highlightColor","fontColor","fontWeight","fontStyle","underline","throughLine","---","border","textAlign","verticalAlign","---","alignLeft","alignCenter","alignRight","---","useGrid","elementPanel","configPanel","---","datasource","document"]),FE=q({__name:"index",props:Bt({modelValue:{type:Ee,required:!0},toolbar:{type:Array,default(){return ds}}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:Bt(["save","preview"],["update:modelValue"]),setup(o,{expose:t,emit:n}){t();const e=n,s=o,i=me(),l=me(),r=ui(),c=un(o,"modelValue"),a=Z_(c,{queryElement:w,dispatchEvent:V}),{canvasRef:p,canvasRect:g,pageRect:_,onScroll:v,onSelectPage:y}=qE(a),h=R(()=>({"--quickprint-page-scale":a.state.scale/100,"--quickprint-dpr":r.value})),S=R(()=>{const T=a.doc.style;return{fontFamily:yo(T==null?void 0:T.fontFamily,T==null?void 0:T.enFontFamily),fontSize:T==null?void 0:T.fontSize,lineHeight:T==null?void 0:T.lineHeight}});function m(){a.state.panel.left=!1}function b(){a.state.panel.right=!1}function w(T){switch(T){case"ghost":return l.value;case"root":return i.value;default:return}}function V(T,...M){e(T,...M)}function Z(T){T.deltaY>0?a.zoomIn():a.zoomOut()}const L={emit:e,props:s,rootRef:i,ghostRef:l,dpr:r,doc:c,api:a,canvasRef:p,canvasRect:g,pageRect:_,onScroll:v,onSelectPage:y,style:h,docStyle:S,closeLeftPanel:m,closeRightPanel:b,queryElement:w,dispatchEvent:V,onZoom:Z,Ruler:ih,Page:Xh,ElementPanel:sb,SelectPath:gb,Config:Ty,Toolbar:PE,get Icon(){return K},get Zoom(){return Ms},get CLASSES(){return ee},get WindowManager(){return As}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),VE="_designer_grxxm_2",zE="_header_grxxm_17",UE="_toolbar_grxxm_25",HE="_footer_grxxm_31",GE="_main_grxxm_47",WE="_left_grxxm_55",jE="_center_grxxm_63",XE="_right_grxxm_75",YE="_canvas_grxxm_83",ZE="_closePanelBtn_grxxm_96",$E="_ghost_grxxm_103",KE={designer:VE,header:zE,toolbar:UE,footer:HE,main:GE,left:WE,center:jE,right:XE,canvas:YE,closePanelBtn:ZE,ghost:$E};function QE(o,t,n,e,s,i){return E(),I("div",{class:d(o.classes.designer),ref:"rootRef",style:Y(e.style)},[u("div",{class:d(o.classes.header)},[Ye(o.$slots,"headerLeft"),f(e.Toolbar,{class:d(o.classes.toolbar),toolbar:n.toolbar},null,8,["class","toolbar"]),Ye(o.$slots,"headerRight")],2),u("div",{class:d(o.classes.main)},[e.api.state.panel.left?(E(),I("div",{key:0,class:d(o.classes.left)},[u("button",{type:"button",onClick:e.closeLeftPanel,class:d(["quickprint-text-btn",o.classes.closePanelBtn])},[f(e.Icon,{icon:"icon-close",size:"12px"})],2),f(e.ElementPanel)],2)):W("v-if",!0),u("div",{class:d([o.classes.center,e.CLASSES.CANVAS]),onWheel:ae(e.onZoom,["ctrl","stop","prevent"]),ref:"canvasRef"},[f(e.Ruler,{canvas:e.canvasRect,page:e.pageRect,scale:e.api.state.scale,direction:"horizontal"},null,8,["canvas","page","scale"]),f(e.Ruler,{canvas:e.canvasRect,page:e.pageRect,scale:e.api.state.scale,direction:"vertical"},null,8,["canvas","page","scale"]),u("div",{class:d([e.CLASSES.SCROLLABLE,o.classes.canvas]),style:Y(e.docStyle),onScroll:t[0]||(t[0]=(...l)=>e.onScroll&&e.onScroll(...l)),onClickCapture:t[1]||(t[1]=(...l)=>e.onSelectPage&&e.onSelectPage(...l))},[(E(!0),I(oe,null,ce(e.doc.pages,l=>(E(),ne(e.Page,{key:l.id,doc:e.doc,page:l},null,8,["doc","page"]))),128))],38),u("div",{class:d(o.classes.footer)},[f(e.SelectPath),f(e.Zoom,{scale:e.api.state.scale,onZoomIn:e.api.zoomIn,onZoomOut:e.api.zoomOut},null,8,["scale","onZoomIn","onZoomOut"])],2)],34),e.api.state.panel.right?(E(),I("div",{key:1,class:d(o.classes.right)},[u("button",{type:"button",onClick:e.closeRightPanel,class:d(["quickprint-text-btn",o.classes.closePanelBtn])},[f(e.Icon,{icon:"icon-close",size:"12px"})],2),f(e.Config)],2)):W("v-if",!0)],2),u("div",{ref:"ghostRef",class:d(o.classes.ghost)},null,2),f(e.WindowManager)],6)}const JE={classes:KE},eS=F(FE,[["render",QE],["__cssModules",JE],["__file","/home/dongls/work/quickprint/packages/designer/index.vue"]]),tS={default:{pinnable:!1},editor:{pinnable:!1,mask:!0,top:"15vh",width:"800px",height:"480px",resizeMode:Ft.DISABLED,menus:[{label:"确定",handler:o=>o.dispatchConfirm().catch(ke)}]},docDebug:{width:"1200px",height:"860px",menus:[{label:"保存",handler:o=>o.dispatchConfirm()}]},elementDebug:{width:"1200px",height:"860px",pinnable:!1},setting:{pinnable:!1,top:"15vh",width:"420px",height:"520px",resizeMode:Ft.DISABLED},variable:{pinnable:!1,top:"15vh",width:"840px",height:"600px",mask:!0,resizeMode:Ft.DISABLED}},nS=q({__name:"Block",props:{element:{type:ue,required:!0}},setup(o,{expose:t}){t();const n=o,e=R(()=>{n.element.state.key;const i=n.element;return{"--quickprint-element-top":i.top+"px","--quickprint-element-left":i.left+"px","--quickprint-element-width":i.width+"px","--quickprint-element-height":i.height+"px","z-index":i.zIndex}}),s={props:n,style:e};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),oS="_element_1hint_2",lS={element:oS};function sS(o,t,n,e,s,i){return E(),I("div",{style:Y(e.style),class:d(o.classes.element)},null,6)}const iS={classes:lS},rS=F(nS,[["render",sS],["__cssModules",iS],["__file","/home/dongls/work/quickprint/packages/designer/minimap/Block.vue"]]),aS=q({__name:"Element",props:{element:{type:ue,required:!0}},setup(o,{expose:t}){t();const n=o,e=R(()=>{n.element.state.key;const i=n.element;return{"--quickprint-element-top":i.top+"px","--quickprint-element-left":i.left+"px","--quickprint-element-width":i.width+"px","--quickprint-element-height":i.height+"px","z-index":i.zIndex}}),s={props:n,style:e};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),cS="_element_1l75c_2",uS={element:cS};function dS(o,t,n,e,s,i){return E(),I("div",{style:Y(e.style),class:d(o.classes.element)},[Ye(o.$slots,"default")],6)}const fS={classes:uS},pS=F(aS,[["render",dS],["__cssModules",fS],["__file","/home/dongls/work/quickprint/packages/designer/minimap/Element.vue"]]),mS=q({props:{define:{type:Ee,required:!0},blocky:{type:Boolean,default:!1}},setup(o){const t=we("classes"),n=pe(1),e=pe(!1),s=me();let i;const l=R(()=>{const a=o.define.firstPage,p={width:`${a.width}mm`,height:`${a.height}mm`};return e.value&&(p.transform=`scale(${n.value})`),p});function r(a){if(o.blocky)return f(rS,{element:a,key:a.id},null);const p=k_(a.type);return f(pS,{element:a,key:a.id},{default:()=>[p?Xe(p,{element:a,key:a.id}):f(Xt,{element:a,showDS:!1,key:a.id},null)]})}function c(){const a=s.value;if(a==null||a.parentElement==null)return;const p=a.parentElement;n.value=Math.min(p.offsetWidth/a.offsetWidth,p.offsetHeight/a.offsetHeight)}return jt(()=>{const a=s.value;a==null||a.parentElement==null||(e.value=!0,i=new ResizeObserver(()=>c()),i.observe(a.parentElement))}),An(()=>{i&&(i.disconnect(),i=void 0)}),function(){return f("div",{class:t.minimap},[f("div",{style:l.value,ref:s,class:t.paper},[o.define.firstPage.children.map(r)])])}}}),gS="_minimap_iujml_2",_S="_paper_iujml_13",hS={minimap:gS,paper:_S},bS={classes:hS},vS=F(mS,[["__cssModules",bS],["__file","/home/dongls/work/quickprint/packages/designer/minimap/index.vue"]]);function yS(o,t={}){const n=xs(t.zIndexManager);o.use(Ps,{zIndex:n,presets:tS}),qs(o._context)}const ES="0.0.0",SS={version:ES,install:yS},TS=q({__name:"SwitchCase",emits:["switch"],setup(o,{expose:t,emit:n}){t();const e=n,s=$e(),i=l();function l(){return De(Fs.map(p=>({id:p.id,name:p.name,define:null})))}function r(p){s==null||s.confirm(p)}function c(){for(const p of i)Vs(p.id).then(g=>{p.define=Ee.create(g==null?void 0:g.define)})}c();const a={emit:e,win:s,caseList:i,createList:l,switchCase:r,initialize:c,get Minimap(){return vS}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),kS="_panel_1gnat_2",RS="_item_1gnat_16",IS="_card_1gnat_21",wS="_name_1gnat_36",CS="_loading_1gnat_47",OS={panel:kS,item:RS,card:IS,name:wS,loading:CS},LS=["onClick"];function DS(o,t,n,e,s,i){return E(),I("div",{class:d([o.classes.panel,"quickprint-is-scrollable"])},[(E(!0),I(oe,null,ce(e.caseList,l=>(E(),I("div",{key:l.id,class:d(o.classes.item),onClick:r=>e.switchCase(l)},[u("div",{class:d(o.classes.card)},[l.define?(E(),ne(e.Minimap,{key:0,define:l.define,class:d(o.classes.minimap)},null,8,["define","class"])):(E(),I("div",{key:1,class:d(o.classes.loading)},"加载中...",2))],2),u("p",{class:d(o.classes.name)},Q(l.name),3)],10,LS))),128))],2)}const NS={classes:OS},BS=F(TS,[["render",DS],["__cssModules",NS],["__file","/home/dongls/work/quickprint/packages/document/designer/SwitchCase.vue"]]),AS='<div class="quickprint-md"><ul><li><s>feat: [设计器]模板预览</s></li><li>feat: [设计器]模板元素树</li><li>feat: [预览]滚动时调整页码，页码跳转</li></ul></div>',MS=q({__name:"Todo",setup(o,{expose:t}){t();const n={get Content(){return AS}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),xS="_doc_1ri3b_2",PS={doc:xS},qS=["innerHTML"];function FS(o,t,n,e,s,i){return E(),I("div",{innerHTML:e.Content,class:d(o.classes.doc)},null,10,qS)}const VS={classes:PS},zS=F(MS,[["render",FS],["__cssModules",VS],["__file","/home/dongls/work/quickprint/packages/document/designer/Todo.vue"]]),US='<div class="quickprint-md"><h2>2025-12-20</h2><ul><li>feat: [示例]银行叫号</li><li>feat: [元素]图片</li><li>feat: [元素]二维码</li><li>feat: [元素]条形码</li><li>feat: [预览]支持监听事件</li><li>feat: [设计器]支持自动调整图片、二维码、条形码的尺寸</li><li>fix: 改进图片空白提示</li></ul><h2>2025-12-10</h2><ul><li>feat: 支持设置文字方向</li><li>feat: 支持设置斜线表头</li><li>feat: 调整元素对齐方式</li><li>feat: 调试模式</li><li>feat: 单元格的宽、高会将边框尺寸计算在内</li><li>feat: [设计器]支持按<code>Ctrl</code>多选元素</li><li>fix: 修复<em>每页打印</em>选项不生效</li><li>fix: 修复表格存在行合并时，渲染有误</li></ul></div>',HS=q({__name:"ChangeLog",setup(o,{expose:t}){t();const n={get Content(){return US}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),GS="_doc_19r5b_2",WS={doc:GS},jS=["innerHTML"];function XS(o,t,n,e,s,i){return E(),I("div",{innerHTML:e.Content,class:d(o.classes.doc)},null,10,jS)}const YS={classes:WS},ZS=F(HS,[["render",XS],["__cssModules",YS],["__file","/home/dongls/work/quickprint/packages/document/designer/ChangeLog.vue"]]),ol="local",fo="quickprint-local-define",$S=q({__name:"index",setup(o,{expose:t}){t();const n=we("classes"),e=y(),s="20251224",i=[{label:"新建",icon:"icon-file-text",handler:g},{label:"加载示例",icon:"icon-import",handler:a},"---",...ds];function l(){const m=JSON.stringify(e.value);localStorage.setItem(fo,m)}function r(){l()}function c(){const m=e.value.id,b=m.startsWith("case_")?m:ol,w=`${window.location.origin}/preview.html?id=${b}`;l(),st("文档预览",Xe("iframe",{src:w,className:n.iframe}),{pinnable:!1,mask:!0,closeOnPressEsc:!0,width:Math.min(Math.max(1600,e.value.paperWidth+240),window.innerWidth-20)+"px",height:"calc(100vh - 100px)",menus:[{label:"从外部打开链接",handler(V){window.open(w,"_blank"),V.close()}}]})}function a(){const m={mask:!0,top:"5vh",width:"90vw",height:"90vh",resizeMode:Ft.DISABLED};st("请选择示例",Xe(BS),m).promisify().then(b=>p(b.id)).catch(ke)}async function p(m){const b=await qo(m,!1);b!=null&&(zs(m),e.value=Ee.create(b.define),_())}function g(){const m=Ee.createNormalDocument();e.value=m,_()}function _(){document.title=e.value.name+" - OpenPrint(开发中...)"}async function v(){const m=localStorage.getItem(fo);if(m!=null)return Ee.create(m);const b=Us(),w=await qo(b.id,!1);return w==null?Ee.createNormalDocument():Ee.create(w.define)}function y(){const m=pe();return v().then(b=>{m.value=b,_()}),m}const h=Ie(function(){return We("OpenPrint",(m,b)=>b==="done"?Xe(ZS):Xe(zS),{height:"480px",tabs:[{label:"进行中",name:"todo"},{label:"更新日志",name:"done"}]}).promisify().catch(tt)}),S={classes:n,LOCAL_ID:ol,LOCAL_KEY:fo,define:e,buildDate:s,toolbar:i,saveToLocal:l,onSave:r,preview:c,loadCase:a,switchCase:p,createBlank:g,updateDocTitle:_,loadDocument:v,useDocument:y,showTodo:h,get Icon(){return K},get Designer(){return eS}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),KS="_main_14ojw_2",QS="_iframe_14ojw_6",JS="_divider_14ojw_14",eT="_logo_14ojw_20",tT="_dev_14ojw_39",nT="_operate_14ojw_52",oT={main:KS,iframe:QS,divider:JS,logo:eT,dev:tT,operate:nT};function lT(o,t,n,e,s,i){return e.define?(E(),ne(e.Designer,{modelValue:e.define,"onUpdate:modelValue":t[1]||(t[1]=l=>e.define=l),toolbar:e.toolbar,class:d(e.classes.main),key:e.define.id,onSave:e.onSave,onPreview:e.preview},{headerLeft:Se(()=>[u("div",{class:d(e.classes.logo)},[t[2]||(t[2]=u("h1",null,"OpenPrint",-1)),u("div",{class:d(e.classes.dev),onClick:t[0]||(t[0]=(...l)=>e.showTodo&&e.showTodo(...l))},"DEV_"+Q(e.buildDate),3)],2)]),headerRight:Se(()=>[u("div",{class:d(e.classes.operate)},[u("button",{type:"button",class:"quickprint-text-btn",title:"预览",onClick:e.preview},[f(e.Icon,{icon:"icon-run"}),t[3]||(t[3]=u("span",null,"预览",-1))]),u("button",{type:"button",onClick:e.saveToLocal,class:"quickprint-text-btn",title:"保存"},[f(e.Icon,{icon:"icon-save"}),t[4]||(t[4]=u("span",null,"保存",-1))])],2)]),_:1},8,["modelValue","class"])):W("v-if",!0)}const sT={classes:oT},iT=F($S,[["render",lT],["__cssModules",sT],["__file","/home/dongls/work/quickprint/packages/document/designer/index.vue"]]),fs=Xs(iT);fs.use(SS);fs.mount("#app");
