const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/component-BzOvwT-C.js","assets/vue-B00pXJJQ.js","assets/component-BReujPS2.js","assets/utils-KGc5IHdY.js","assets/utils-BWxIAY5I.css","assets/component-DVhZYvzc.css"])))=>i.map(i=>d[i]);
var ds=Object.defineProperty;var Cl=n=>{throw TypeError(n)};var ps=(n,e,t)=>e in n?ds(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Y=(n,e,t)=>ps(n,typeof e!="symbol"?e+"":e,t),ol=(n,e,t)=>e.has(n)||Cl("Cannot "+t);var Pe=(n,e,t)=>(ol(n,e,"read from private field"),t?t.call(n):e.get(n)),nt=(n,e,t)=>e.has(n)?Cl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Et=(n,e,t,l)=>(ol(n,e,"write to private field"),l?l.call(n,t):e.set(n,t),t),Ve=(n,e,t)=>(ol(n,e,"access private method"),t);import{D as ye,E as Nt,N as cn,a as wt,b as G,c as Xe,P as bl,d as pn,e as Il,f as Mn,g as xn,O as fn,h as ie,i as _n,S as zt,Q as mn,B as Ke,j as An,L as He,I as H,_ as U,k as Kl,s as zn,l as fs,m as ce,n as Jl,p as qn,C as ze,o as me,q as yl,r as Ql,t as kn,u as ms,v as gs,w as hs,x as Jt,y as eo,V as Mt,z as $n,A as gt,F as to,G as no,H as lo,J as we,K as Qe,M as vs,T as bs,R as Ce,U as ut,W as ke,X as je,Y as st,Z as ys,$ as _s,a0 as Es,a1 as Me,a2 as Bn,a3 as se,a4 as ae,a5 as pe,a6 as Ie,a7 as kt,a8 as Ln,a9 as Pt,aa as Q,ab as Lt,ac as it,ad as ht,ae as Ts,af as vt,ag as oe,ah as oo,ai as Ne,aj as Ht,ak as Pn,al as Fe,am as mt,an as Ct,ao as ln,ap as Cn,aq as Bt,ar as Ss,as as Rs,at as so,au as ws,av as io,aw as ro,ax as ao,ay as xt,az as Ft,aA as ks,aB as Ls,aC as Cs,aD as Is,aE as Os,aF as En,aG as Ns,aH as Ol,aI as Ee,aJ as sl,aK as il,aL as Ds,aM as Ms,aN as xs,aO as As,aP as qs,aQ as $s,aR as Nl,aS as Bs,aT as Ps}from"./utils-KGc5IHdY.js";import{r as he,o as _l,d as V,c as C,a as S,b as c,e as g,f as ct,n as f,u as De,s as be,g as xe,h as w,w as re,i as b,j as ee,k as W,T as co,l as j,m as At,p as hn,q as uo,F as ne,t as fe,v as K,x as Qt,y as Dl,z as po,A as fo,B as vn,C as El,D as Se,E as Le,G as Be,H as ue,I as en,J as Vs,K as mo,L as rl,M as Oe,N as rt,O as zs,P as Fs,Q as Us,R as Hs}from"./vue-B00pXJJQ.js";const go="@quickprint_drag_mode",ho="@quickprint_drop_data",Fn="@quickprint_operate",Je="@quickprint_element",Tl="@quickprint_element_type",vo="@quickprint_resize_flag",Ge=160,bn=32,on=[50,75,100,125,150,200,300,400];var un=(n=>(n[n.TOP=1]="TOP",n[n.BOTTOM=2]="BOTTOM",n[n.LEFT=4]="LEFT",n[n.RIGHT=8]="RIGHT",n))(un||{}),Vt=(n=>(n[n.NONE=0]="NONE",n[n.TOP=1]="TOP",n[n.BOTTOM=2]="BOTTOM",n[n.LEFT=4]="LEFT",n[n.RIGHT=8]="RIGHT",n[n.BOTTOM_RIGHT=10]="BOTTOM_RIGHT",n))(Vt||{});const at={SINGLE:0,MULTIPLE:1},Ue=Object.freeze({INSERT:0,MOVE:1}),Sl=Object.freeze({DRAG_ELEMENT:0,SELECTION:1}),J=Object.freeze({CANVAS:"quickprint-is-canvas",DRAGGABLE:"quickprint-is-draggable",DRAGGING:"quickprint-is-dragging",RESIZEABLE:"quickprint-is-resizeable",RESIZEABLE_INDICATOR:"quickprint-is-resizeable-indicator",RESIZING:"quickprint-is-resizing",DROPPABLE:"quickprint-is-droppable",ELEMENT:"quickprint-is-element",ELEMENT_EDITOR:"quickprint-is-element-editor",PAGE:"quickprint-is-page",PAPER:"quickprint-is-paper",SCROLLABLE:"quickprint-is-scrollable",SELECTABLE:"quickprint-is-selectable",SELECTED:"quickprint-is-selected",GUIDE_LINE:"quickprint-is-guideline"}),ge=Object.freeze({NONE:0,ELEMENT:1,PAGE:2}),bo=[{label:"固定值",value:ye.CONST},{label:"变量",value:ye.VARIABLE},{label:"公式",value:ye.FORMULA,detail:"使用内置的公式生成数据"},{label:"自定义",value:ye.CODE,detail:"使用Javascript代码生成数据"}],Gs=[{label:"显示",value:Nt.VISIBLE,detail:"元素总是可见"},{label:"隐藏",value:Nt.HIDDEN,detail:"元素在打印时隐藏"},{label:"满足条件时显示",value:Nt.CONDITION,detail:"元素只在满足指定条件后显示"}],Ws=[{label:"四舍五入",value:cn.ROUND},{label:"向下舍入",value:cn.FLOOR},{label:"向上舍入",value:cn.CEIL},{label:"四舍六入",value:cn.BANKER_ROUND}],Xs=[{label:"原始值",value:wt.NONE},{label:"固定位数",value:wt.FIXED},{label:"金额千位",value:wt.THOUSAND},{label:"金额万位",value:wt.TEN_THOUSAND},{label:"金额大写",value:wt.DAXIE},{label:"百分比",value:wt.PERCENTAGE}],Ys=[{label:"显示",value:!0},{label:"隐藏",value:!1}],js=[{label:"默认",value:void 0},{label:"文本",value:G.TEXT},{label:"数字",value:G.NUMBER},{label:"日期",value:G.DATE}],de={LAYOUT:0,COORD:1,SIZE:2,POSITION:3,VISIBILITY:5,OVERFLOW:6,PRINT_MODE:7,BASIC:100,PREFIX:101,SUFFIX:102,DISPLAY:103,ATTRIBUTES:200,DATASOURCE:300},yo=[{label:"年-月",value:Xe.YEAR_MONTH,detail:"示例：2024-12"},{label:"年月",value:Xe.YEAR_MONTH_CHS,detail:"示例：2024年12月"},{label:"年-月-日",value:Xe.YEAR_MONTH_DAY,detail:"示例：2024-12-01"},{label:"年月日",value:Xe.YEAR_MONTH_DAY_CHS,detail:"示例：2024年12月01日"},{label:"年-月-日 时:分",value:Xe.DATETIME_SHORT,detail:"示例：2024-12-01 12:00"},{label:"年-月-日 时:分:秒",value:Xe.DATETIME,detail:"示例：2024-12-01 12:00:00"},{label:"时:分:秒",value:Xe.TIME,detail:"示例：12:00:00"},{label:"时:分",value:Xe.TIME_SHORT,detail:"示例：12:00"},{label:"年",value:Xe.YEAR,detail:"示例：2024"},{label:"月",value:Xe.MONTH,detail:"示例：12"},{label:"日",value:Xe.DAY,detail:"示例：01"}];yo.forEach(n=>n.detail=`模板：${n.value}
${n.detail}`);const Zs=[{label:"元素值",value:bl.ELEMENT_VALUR}],Ks=[{label:"基于纸张",value:pn.PAPER},{label:"基于内容",value:pn.CONTENT}],_o=[{label:"纵向",value:Il.PORTRAIT},{label:"横向",value:Il.LANDSCAPE}],Js=[{label:"当前位置",value:Mn.DEFAULT,detail:"元素按当前位置进行定位，参与分页。如果之前的元素尺寸变化，会进行相应调整"},{label:"固定位置",value:Mn.FIXED,detail:"元素会在固定位置显示，不参与分页"}],Qs=[{label:"单次打印",value:xn.ONCE,detail:"元素只打印一次"},{label:"每页打印",value:xn.EACH,detail:"元素将每页打印一次"}],ei=[{label:"按内容调整高度",value:fn.AUTO,detail:"元素内容溢出时，将会根据内容自动调整元素高度"},{label:"隐藏溢出内容",value:fn.HIDDEN,detail:"元素内容溢出时，内容将会被隐藏"},{label:"缩放内容",value:fn.SCALE,detail:"元素内容溢出时，会对内容进行缩放，确保内容全部显示",disabled:!0}],dl=[{label:"页码",value:_n.PAGE_NUMBER,type:ie.NUMBER},{label:"总页数",value:_n.PAGE_TOTAL,type:ie.NUMBER},{label:"行序号",value:_n.ROW_INDEX,type:ie.NUMBER},{label:"当前时间",value:_n.CURRENT_DATE,type:ie.DATE}],ti=["[0.3.pageNumber]","'[0.3.pageNumber]/[0.3.pageTotal]'","'第[0.3.pageNumber]页/共[0.3.pageTotal]页'"],ni=[{label:"原始尺寸",value:zt.NATURAL,detail:"图片原始尺寸"},{label:"填充",value:zt.FILL,detail:"不保持纵横比缩放图片，图片填满容器"},{label:"裁切",value:zt.COVER,detail:"保持纵横比缩放图片，只保证图片的短边能完全显示出来，可能会裁切图片"},{label:"包含",value:zt.CONTAIN,detail:"保持纵横比缩放图片，使图片的长边能完全显示出来，可保证图片完整显示"}],li=[{label:"快速响应码",short:"QR Code",value:mn.QRCODE,detail:"最常见的二维码形式"},{label:"汉信码",short:"Han Xin Code",value:mn.HANXIN},{label:"数据矩阵码",short:"Data Matrix Code",value:mn.DATA_MATRIX}],oi=[{label:"EAN-8",value:Ke.EAN_8},{label:"EAN-13",value:Ke.EAN_13},{label:"UPC-A",value:Ke.UPC_A},{label:"UPC-E",value:Ke.UPC_E},{label:"CODE-39",value:Ke.CODE_39},{label:"CODE-128",value:Ke.CODE_128},{label:"ITF-14",value:Ke.ITF_14},{label:"GS1-128",value:Ke.GS1_128},{label:"Codabar",value:Ke.CODABAR,short:"库德巴码"},{label:"Interleaved 2 of 5",value:Ke.INTERLEAVED2OF5,short:"交叉25码"}],si=[{label:"显示",value:!0},{label:"隐藏",value:!1}];function Eo(n,e){return e=="body"?document.body:e=="parent"?n.parentElement:n.closest("."+e)}function ii(n,e){const t=n.getBoundingClientRect(),l=e.getBoundingClientRect();return!(t.top>l.bottom||t.right<l.left||t.bottom<l.top||t.left>l.right)}function To(n){return n.isSelected?n.type===G.PARAGRAPH?52:n.type===G.TABLE?32:20:20}function ri(){const n=he(window.devicePixelRatio),e=()=>n.value=window.devicePixelRatio,t=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);return t.addEventListener("change",e),window.addEventListener("resize",e),_l(()=>{t.removeEventListener("change",e),window.removeEventListener("resize",e)}),n}class ai{constructor(e,t,l){Y(this,"originalEvent");Y(this,"target");Y(this,"ghost");Y(this,"container");Y(this,"paths",[]);Y(this,"dropTarget");Y(this,"top",0);Y(this,"left",0);Y(this,"deltaX");Y(this,"deltaY");Y(this,"moved",!1);this.originalEvent=e,this.ghost=t,this.target=t,this.container=l;const o=t.getBoundingClientRect();this.deltaX=o.left-e.clientX,this.deltaY=o.top-e.clientY}init(e=1){const t=this.target.getBoundingClientRect(),l=this.container.getBoundingClientRect();this.top=(t.top-l.top)/e,this.left=(t.left-l.left)/e,this.ghost.setPointerCapture(this.originalEvent.pointerId)}}var Yt,jt,bt,So,Ro,wo;const Ot=class Ot extends An{constructor(t={}){var l,o,s;super();nt(this,bt);Y(this,"context",null);Y(this,"selector");Y(this,"scale");Y(this,"onDragStart");nt(this,Yt);nt(this,jt);this.selector={container:((l=t.selector)==null?void 0:l.container)??J.PAGE,element:((o=t.selector)==null?void 0:o.element)??J.DRAGGABLE,droppable:((s=t.selector)==null?void 0:s.droppable)??J.DROPPABLE},this.onDragStart=Ve(this,bt,So).bind(this),this.scale=t.scale,Et(this,Yt,Ve(this,bt,Ro).bind(this)),Et(this,jt,Ve(this,bt,wo).bind(this))}normalizeScale(){if(this.scale==null)return 1;const t=typeof this.scale=="function"?this.scale(this.context):this.scale;return t<=0?1:t/100}reset(){this.context!=null&&(window.removeEventListener("pointermove",Pe(this,Yt)),window.removeEventListener("pointerup",Pe(this,jt)),this.context=null)}};Yt=new WeakMap,jt=new WeakMap,bt=new WeakSet,So=function(t){if(t.button!==0)return;const l=t.target.closest("."+this.selector.element);if(l==null)return He.warn(Ot.TAG_NAME,"未找到的可拖拽元素");const o=this.selector.container,s=Eo(l,o);this.context=new ai(t,l,s);const r=this.createEvent("before-dragstart",this.context);if(this.dispatch(r).defaultPrevented)return He.warn(Ot.TAG_NAME,"已取消拖拽");if(this.context.container==null)return He.warn(Ot.TAG_NAME,"未找到的拖拽元素的容器");this.context.init(this.normalizeScale());const i=this.createEvent("dragstart",this.context);if(this.dispatch(i).defaultPrevented)return He.warn(Ot.TAG_NAME,"已取消拖拽");t.stopPropagation(),t.preventDefault(),window.addEventListener("pointermove",Pe(this,Yt)),window.addEventListener("pointerup",Pe(this,jt))},Ro=function(t){const l=this.context;if(l==null)return;const o=l.container.getBoundingClientRect(),s=document.elementsFromPoint(t.clientX,t.clientY),r=Array.from(s).filter(a=>!(a===l.ghost||a===l.target||l.ghost.contains(a))),i=this.normalizeScale();l.originalEvent=t,l.paths=r,l.dropTarget=r.find(a=>a.matches("."+J.DROPPABLE)),l.top=(t.clientY+l.deltaY-o.top)/i,l.left=(t.clientX+l.deltaX-o.left)/i,!this.dispatch(this.createEvent("dragging",l)).defaultPrevented&&(l.ghost.style.top=l.top+"px",l.ghost.style.left=l.left+"px")},wo=function(t){const l=this.context;if(l==null)return;t.preventDefault(),l.originalEvent=t;const o=this.createEvent("dragend",l);this.dispatch(o).defaultPrevented||this.reset()},Y(Ot,"TAG_NAME","quickprint-draggable");let pl=Ot;const ci=["title"],ui=V({__name:"HelpTitle",props:{title:{type:String,required:!0}},setup(n){return(e,t)=>(S(),C("span",{title:n.title,class:f(e.classes.help)},[c("span",null,[ct(e.$slots,"default")]),g(H,{icon:"icon-question-circle"})],10,ci))}}),di="_help_1l6l8_2",pi={help:di},fi={classes:pi},mi=U(ui,[["__cssModules",fi]]),gi=V({__name:"Popover",props:{width:{type:Number,default:null},disabled:{type:Boolean,default:!1}},emits:["show","close"],setup(n,{expose:e,emit:t}){const l=n,o=t,s=De("classes"),r=he(!1),i=be(),a=be(),d=xe({minWidth:0,top:0,left:0,visible:!1}),m=w(()=>({minWidth:l.width==null?d.minWidth+"px":l.width+"px",top:d.top+"px",left:d.left+"px",visibility:d.visible?"visible":"hidden",zIndex:Kl()}));async function p(){if(r.value)return h();l.disabled||(r.value=!0,o("show"),await zn(),E())}function h(){N(),r.value=!1,o("close")}function y(B){if(!(B.target instanceof Node))return;const q=i.value;if(q&&q.contains(B.target))return B.preventDefault();const I=a.value;if(I&&I.contains(B.target))return B.preventDefault();h()}function _(){const B=i.value,q=a.value;if(q==null||B==null)return;const I=B.getBoundingClientRect(),L=q.getBoundingClientRect(),O=l.width==null?I.width:l.width;let $=I.bottom+1;$+L.height>window.innerHeight&&I.top>L.height&&($=I.top-L.height-1);let M=I.left;M+L.width>window.innerWidth&&(M=window.innerWidth-L.width-2),d.minWidth=O,d.top=$,d.left=M,d.visible=!0}function u(B){const q=B.target;if(!(q instanceof HTMLElement))return;const I=i.value;I==null||!q.contains(I)||h()}function v(B){if(B.key!=="Escape")return;const q=a.value;if(q!=null){const I=q.style.zIndex;if(Number(I)<fs())return}B.preventDefault(),h()}function E(){window.addEventListener("click",y,{capture:!0}),window.addEventListener("contextmenu",h,{capture:!0}),window.addEventListener("scroll",u,{capture:!0,passive:!0}),window.addEventListener("resize",_),window.addEventListener("keydown",v)}function N(){window.removeEventListener("click",y,!0),window.removeEventListener("contextmenu",h,!0),window.removeEventListener("scroll",u,!0),window.removeEventListener("resize",_),window.removeEventListener("keydown",v)}return e({close:h}),(B,q)=>(S(),C("div",{class:f(b(s).reference),onClick:re(p,["stop"]),ref_key:"referenceRef",ref:i,tabindex:"0"},[ct(B.$slots,"default"),r.value?(S(),ee(co,{key:0,to:"body"},[c("div",{class:f(b(s).popover),onVnodeMounted:_,onMousedown:q[0]||(q[0]=re(()=>{},["prevent"])),style:j(m.value),ref_key:"popoverRef",ref:a},[ct(B.$slots,"popover")],38)])):W("",!0)],2))}}),hi="_reference_1arli_2",vi="_popover_1arli_7",bi={reference:hi,popover:vi},yi={classes:bi},ko=U(gi,[["__cssModules",yi]]),_i=["title","onKeydown"],Ei=["onMouseover","onClick"],Ti=V({__name:"Select",props:At({modelValue:{type:[String,Number,Array]},options:{type:Array,default(){return[]}},size:{type:String,default:"default"},button:{type:Boolean,default:!1},width:{type:String,default:"100%"},popoverWidth:{type:Number,default:null},placeholder:{type:String,default:"请选择"},title:{type:String,default:null},border:{type:String,default:"auto"},appearance:{type:String,default:"auto"},clearable:{type:Boolean,default:!1},teleport:{type:String,default:"body"},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:At(["select","update:modelValue"],["update:modelValue"]),setup(n,{emit:e}){const t=e,l=n,o=De("classes"),s=be(),r=be(),i=hn(n,"modelValue"),a=he(),d=he(!1),m=xe({width:0,top:0,left:0,visible:!1,scrollable:!1}),p=w(()=>l.teleport==="none"),h=w(()=>l.teleport=="none"?"body":l.teleport),y=w(()=>{const F={label:"",options:[]},X=[F];for(const Z of l.options){if(Array.isArray(Z.options)){X.push({label:Z.label,options:Z.options});continue}F.options.push(Z)}return X}),_=w(()=>y.value.reduce((F,X)=>F.concat(X.options),[])),u=w(()=>{if(l.multiple!==!0){const X=nl();return X?X.label:l.button?l.title:ce(l.modelValue)?l.placeholder:l.modelValue}const F=ll();return F.length>0?F.map(X=>X.label).join(","):l.button?l.title:l.placeholder}),v=w(()=>l.clearable!==!0?!1:l.modelValue!=null),E=w(()=>({"quickprint-form-control":!0,"quickprint-form-control-small":l.size==="small"||l.button,"quickprint-form-hidden-border":l.button||l.border==="none","quickprint-form-disabled":l.disabled,[o.mini]:l.size==="mini",[o.select]:!0,[o.appearance]:l.appearance!=="none"&&!v.value,[o.button]:l.button,[o.showClearIcon]:v.value,[o.text]:l.size==="text"})),N=w(()=>({width:l.width})),B=w(()=>m.visible?{width:l.popoverWidth==null?m.width+"px":l.popoverWidth+"px",top:m.top+"px",left:m.left+"px",visibility:"visible",zIndex:Kl()}:{minWidth:l.popoverWidth==null?m.width+"px":l.popoverWidth+"px",visibility:"hidden"}),q=w(()=>({[o.content]:!0,[o.placeholder]:Jl(l.modelValue)}));async function I(){if(l.disabled)return;const F=_.value;if(F.length===0)return;if(d.value)return L();const X=s.value;X!=null&&(m.width=X.getBoundingClientRect().width,m.visible=!1,a.value=F.find(Z=>Z.value===l.modelValue),d.value=!0,await zn(),cs())}function L(){us(),d.value=!1}function O(F){A(),_t()}function $(F){F.disabled!==!0&&(a.value=F)}function M(F){if(l.disabled==!0||F.disabled===!0)return;if(l.multiple!==!0){i.value=F.value,t("select",F),L();return}const X=Array.isArray(i.value)?i.value:[],Z=X.findIndex(_e=>_e===F.value);Z>=0?X.splice(Z,1):X.push(F.value),i.value=X,t("select",X)}function D(F){if(!(F.target instanceof Node))return;const X=s.value;if(X&&X.contains(F.target))return F.preventDefault();const Z=r.value;if(Z&&Z.contains(F.target))return F.preventDefault();L()}async function A(){const F=s.value,X=r.value;if(X==null||F==null)return;await Qt();const Z=F.getBoundingClientRect(),_e=X.getBoundingClientRect();let Te=Z.bottom+1;Te+_e.height>window.innerHeight&&Z.top>_e.height&&(Te=Z.top-_e.height-1);let $t=Z.left;$t+_e.width>window.innerWidth&&($t=window.innerWidth-_e.width-2),m.width=_e.width,m.top=Te,m.left=$t,m.visible=!0;const nn=X.querySelector("."+o.list);m.scrollable=nn?nn.scrollHeight>nn.clientHeight:!1}function x(F){const X=F.target;if(!(X instanceof HTMLElement))return;const Z=s.value;Z==null||!X.contains(Z)||L()}function T(){const F=_.value,X=Dl(a.value);if(X==null){a.value=Ae(0),_t();return}const Z=F.indexOf(X);if(Z==0)return z();const _e=Ae(Z-1);_e!=null&&(a.value=_e,_t())}function R(){const F=_.value,X=Dl(a.value);if(X==null){a.value=le(0),_t();return}const Z=F.indexOf(X);if(Z>=F.length-1){k();return}const _e=Ae(Z+1);_e!=null&&(a.value=_e,_t())}function k(){a.value=le(0),_t()}function z(){const F=_.value;a.value=Ae(F.length-1),_t()}function P(){i.value=void 0,L()}function le(F){const Z=_.value[F];return Z==null?null:Z.disabled===!0?le(F+1):Z}function Ae(F){const Z=_.value[F];return Z==null?null:Z.disabled===!0?Ae(F-1):Z}function qe(F){switch(F.key){case"Enter":F.preventDefault(),a.value&&M(a.value);return;case"Escape":F.preventDefault(),L();return;case"ArrowUp":F.preventDefault(),T();return;case"ArrowDown":F.preventDefault(),R();return;case"Home":F.preventDefault(),k();return;case"End":F.preventDefault(),z();return}}function tt(F){if(l.disabled)return;const X=s.value;X!=null&&document.activeElement===X&&(d.value||(F.stopPropagation(),I()))}function as(F){if(l.multiple!==!0)return l.modelValue===F.value;const X=l.modelValue;return Array.isArray(X)?X.includes(F.value):!1}async function _t(){if(a.value==null)return;await Qt();const F=r.value;if(F==null)return;const X=F.querySelector("."+o.hover);X&&X.scrollIntoView({block:"nearest"})}function nl(){const F=_.value,X=Array.isArray(l.modelValue)?l.modelValue[0]:l.modelValue;return F.find(Z=>Z.value===X)}function ll(){const F=_.value;return(Array.isArray(l.modelValue)?l.modelValue:[l.modelValue]).filter(Z=>Z).map(Z=>{const _e=F.find(Te=>Te.value===Z);return _e||{value:Z,label:Z}})}function cs(){window.addEventListener("mousedown",D,{capture:!0}),window.addEventListener("pointerdown",D,{capture:!0}),window.addEventListener("contextmenu",L,{capture:!0}),window.addEventListener("scroll",x,{capture:!0,passive:!0}),window.addEventListener("resize",A),window.addEventListener("keydown",qe)}function us(){window.removeEventListener("mousedown",D,!0),window.removeEventListener("pointerdown",D,!0),window.removeEventListener("contextmenu",L,!0),window.removeEventListener("scroll",x,!0),window.removeEventListener("resize",A),window.removeEventListener("keydown",qe)}return(F,X)=>{var Z;return S(),C("div",{class:f(E.value),title:n.title,style:j(N.value),onClick:re(I,["stop"]),onKeydown:uo(re(tt,["prevent"]),["enter"]),ref_key:"selectRef",ref:s,tabindex:"0"},[F.$slots.selected?ct(F.$slots,"selected",{key:0,option:nl(),options:ll()}):ct(F.$slots,"option",{key:1,option:nl(),options:ll()},()=>[c("div",{class:f(q.value)},[c("span",null,K(u.value),1),v.value?(S(),ee(H,{key:0,icon:"icon-close",onClick:re(P,["stop"]),size:"12px",class:f(b(o).clearIcon)},null,8,["class"])):W("",!0)],2)]),d.value?(S(),ee(co,{key:2,to:h.value,disabled:p.value},[c("div",{class:f(b(o).popover),onClick:X[0]||(X[0]=re(()=>{},["stop"])),onVnodeMounted:O,onMousedown:X[1]||(X[1]=re(()=>{},["prevent"])),style:j(B.value),ref_key:"popoverRef",ref:r},[c("div",{class:f(b(o).list)},[(S(!0),C(ne,null,fe(y.value,_e=>(S(),C(ne,null,[_e.label?(S(),C("div",{key:0,class:f(b(o).groupLabel)},K(_e.label),3)):W("",!0),(S(!0),C(ne,null,fe(_e.options,Te=>{var $t;return S(),C("div",{key:Te.value,class:f({[b(o).option]:!0,[b(o).disabled]:Te.disabled===!0,[b(o).selected]:as(Te),[b(o).hover]:(($t=a.value)==null?void 0:$t.value)==Te.value}),style:j(Te.style),onMouseover:nn=>$(Te),onClick:nn=>M(Te)},[ct(F.$slots,"option",{option:Te},()=>[c("div",{class:f(b(o).label)},[Te.icon?(S(),ee(H,{key:0,icon:Te.icon,class:f(b(o).icon)},null,8,["icon","class"])):W("",!0),c("span",null,K(Te.label),1)],2),Te.short?(S(),C("div",{key:0,class:f(b(o).short)},K(Te.short),3)):W("",!0)])],46,Ei)}),128))],64))),256))],2),(Z=a.value)!=null&&Z.detail&&m.visible?(S(),C("div",{key:0,class:f(b(o).detail)},K(a.value.detail),3)):W("",!0)],38)],8,["to","disabled"])):W("",!0)],46,_i)}}}),Si="_button_g23yb_2",Ri="_select_g23yb_7",wi="_appearance_g23yb_16",ki="_content_g23yb_31",Li="_placeholder_g23yb_37",Ci="_popover_g23yb_41",Ii="_list_g23yb_51",Oi="_option_g23yb_80",Ni="_label_g23yb_95",Di="_icon_g23yb_102",Mi="_hover_g23yb_106",xi="_detail_g23yb_117",Ai="_short_g23yb_127",qi="_selected_g23yb_133",$i="_disabled_g23yb_137",Bi="_showClearIcon_g23yb_142",Pi="_clearIcon_g23yb_146",Vi="_text_g23yb_159",zi="_mini_g23yb_171",Fi="_groupLabel_g23yb_183",Ui={button:Si,select:Ri,appearance:wi,content:ki,placeholder:Li,popover:Ci,list:Ii,option:Oi,label:Ni,icon:Di,hover:Mi,detail:xi,short:Ai,selected:qi,disabled:$i,showClearIcon:Bi,clearIcon:Pi,text:Vi,mini:zi,groupLabel:Fi},Hi={classes:Ui},te=U(Ti,[["__cssModules",Hi]]),Gi="_tree_1p28f_1",Wi="_node_1p28f_5",Xi="_content_1p28f_11",Yi="_space_1p28f_27",ji="_expand_1p28f_28",Zi="_active_1p28f_47",Ki="_children_1p28f_55",pt={tree:Gi,node:Wi,content:Xi,space:Yi,expand:ji,active:Zi,children:Ki},Lo=Symbol(),Co=V({emits:["nodeClick","nodeHover"],props:{node:{type:Object,required:!0}},setup(n,{emit:e}){const t=po(Lo),l=w(()=>Array.isArray(n.node.children)&&n.node.children.length>0),o=w({get(){const u=t==null?void 0:t.state[n.node.value];return u==null?!1:u.expand},set(u){const v=t==null?void 0:t.state[n.node.value];v!=null&&(v.expand=u)}});function s(u){u.preventDefault(),o.value=!o.value}function r(){if(!l.value)return g("div",{class:pt.space},null);const u={[pt.expand]:!0,[pt.active]:o.value};return g("div",{onMousedown:_,onClick:s,class:u},[g(H,{icon:"icon-right",size:"12px"},null)])}function i(){return typeof(t==null?void 0:t.content)=="function"?t.content({node:n.node}):g("span",null,[n.node.label])}function a(){return g("div",{class:pt.content,onClick:m,onMouseenter:h},[i()])}function d(){if(!l.value||!o.value)return;const u=n.node.children.map(v=>g(Co,{node:v,onNodeClick:p,onNodeHover:y},null));return g("div",{class:pt.children},[u])}function m(){e("nodeClick",n.node)}function p(u){e("nodeClick",u)}function h(){e("nodeHover",n.node)}function y(u){e("nodeHover",u)}function _(u){u.preventDefault()}return function(){return g("div",{class:pt.subTree},[g("div",{class:pt.node},[r(),a()]),d()])}}}),Ji=V({props:{data:{type:Array,required:!0}},emits:["nodeClick","nodeHover"],setup(n,{slots:e,emit:t}){const l=r();function o(a){t("nodeClick",a)}function s(a){t("nodeHover",a)}function r(){const a=xe({}),d=function(m,p){for(const h of m)p[h.value]={expand:h.expand!==!1},h.children&&d(h.children,p)};return d(n.data,a),a}function i(a){return typeof e.default=="function"?e.default(a):null}return fo(Lo,{state:l,content:i}),function(){const a=n.data.map(d=>g(Co,{node:d,onNodeClick:o,onNodeHover:s},null));return g("div",{class:pt.tree},[a])}}});function Tn(n){const e=Math.pow(10,Math.max(0,2));return Math.round(n*e)/e}const al={A:10,B:11,C:12,D:13,E:14,F:15},Ml={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"};function Qi(n){return typeof n=="string"&&n.includes(".")&&Number.parseFloat(n)===1}function er(n){return typeof n=="string"&&n.includes("%")}function Gt(n,e){Qi(n)&&(n="100%");const t=er(n);return n=Math.min(e,Math.max(0,Number.parseFloat(`${n}`))),t&&(n=Number.parseInt(`${n*e}`,10)/100),Math.abs(n-e)<1e-6?1:n%e/Number.parseFloat(e)}function Tt(n){return n.length===2?(al[n[0].toUpperCase()]||+n[0])*16+(al[n[1].toUpperCase()]||+n[1]):al[n[1].toUpperCase()]||+n[1]}function xl(n,e,t){n=Gt(n,255),e=Gt(e,255),t=Gt(t,255);const l=Math.max(n,e,t),o=Math.min(n,e,t);let s;const r=l,i=l-o,a=l===0?0:i/l;if(l===o)s=0;else{switch(l){case n:{s=(e-t)/i+(e<t?6:0);break}case e:{s=(t-n)/i+2;break}case t:{s=(n-e)/i+4;break}}s/=6}return{h:s*360,s:a*100,v:r*100}}const tr=function(n,e,t){e=e/100,t=t/100;let l=e;const o=Math.max(t,.01);t*=2,e*=t<=1?t:2-t,l*=o<=1?o:2-o;const s=(t+e)/2,r=t===0?2*l/(o+l):2*e/(t+e);return{h:n,s:r*100,v:s*100}},nr=function(n,e,t){return[n,e*t/((n=(2-e)*t)<1?n:2-n)||0,n/2]};function cl(n,e,t){n=Gt(n,360)*6,e=Gt(e,100),t=Gt(t,100);const l=Math.floor(n),o=n-l,s=t*(1-e),r=t*(1-o*e),i=t*(1-(1-o)*e),a=l%6,d=[t,r,s,s,i,t][a],m=[i,t,t,r,s,s][a],p=[s,s,i,t,t,r][a];return{r:Math.round(d*255),g:Math.round(m*255),b:Math.round(p*255)}}function In(n){n=Math.min(Math.round(n),255);const e=Math.floor(n/16),t=n%16;return`${Ml[e]||e}${Ml[t]||t}`}function lr({r:n,g:e,b:t}){return Number.isNaN(+n)||Number.isNaN(+e)||Number.isNaN(+t)?"":`#${In(n)}${In(e)}${In(t)}`}class Un{constructor(e){Y(this,"h",0);Y(this,"s",100);Y(this,"v",100);Y(this,"a",100);e&&this.setColor(e)}setColor(e){const t=this.processColor(e);t!=null&&(this.setHue(t.h),this.setSaturation(t.s),this.setValue(t.v),this.setAlpha(t.a))}setHue(e){this.h=Tn(e)}setSaturation(e){this.s=Tn(e)}setValue(e){this.v=Tn(e)}setAlpha(e){this.a=Tn(e)}processColor(e){return e==null||e==""?null:e.startsWith("#")?this.processHEX(e):e.startsWith("rgb")?this.processRGB(e):e.startsWith("hsl")?this.processHSL(e):this.processHSV(e)}processHSV(e){const t=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,s)=>s>2?Number.parseFloat(o):Number.parseInt(o,10)),l=t.length===4?t[3]*100:100;return{h:t[0],s:t[1],v:t[2],a:l}}processHEX(e){const t=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(t))return null;let l,o,s,r=100;t.length===3?(l=Tt(t[0]+t[0]),o=Tt(t[1]+t[1]),s=Tt(t[2]+t[2])):(t.length===6||t.length===8)&&(l=Tt(t.slice(0,2)),o=Tt(t.slice(2,4)),s=Tt(t.slice(4,6))),t.length===8&&(r=Tt(t.slice(6))/255*100);const{h:i,s:a,v:d}=xl(l,o,s);return{h:i,s:a,v:d,a:r}}processRGB(e){const t=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(l=>l!=="").map((l,o)=>o>2?Number.parseFloat(l):Number.parseInt(l,10));if(t.length>=3){const l=t.length===4?t[3]*100:100,{h:o,s,v:r}=xl(t[0],t[1],t[2]);return{h:o,s,v:r,a:l}}return null}processHSL(e){const t=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(l=>l!=="").map((l,o)=>o>2?Number.parseFloat(l):Number.parseInt(l,10));if(t.length>=3){const l=t.length===4?t[3]*100:100,{h:o,s,v:r}=tr(t[0],t[1],t[2]);return{h:o,s,v:r,a:l}}return null}toString(e){switch(e){case"hsl":{const t=nr(this.h,this.s/100,this.v/100);return`hsla(${this.h},${Math.round(t[1]*100)}%,${Math.round(t[2]*100)}%,${this.a/100})`}case"hex":return`${lr(cl(this.h,this.s,this.v))}${In(this.a*255/100)}`;case"rgb":{const{r:t,g:l,b:o}=cl(this.h,this.s,this.v);return`rgba(${t},${l},${o},${this.a/100})`}default:return`hsva(${this.h},${Math.round(this.s)}%,${Math.round(this.v)}%,${this.a/100})`}}toRGB(){return this.toString("rgb")}toHSL(){return this.toString("hsl")}toHEX(){return this.toString("hex")}rgb(){return cl(this.h,this.s,this.v)}}function Io(n){const e={init:!1,target:null,container:null,offsetX:0};function t(r){const i=e.container.getBoundingClientRect(),d=e.target.getBoundingClientRect().width/2;let m=r.clientX-i.left-e.offsetX;return m<-d&&(m=-d),m>i.width-d&&(m=i.width-d),m}function l(r){r.stopPropagation(),r.preventDefault();const i=r.target,a=r.currentTarget;origin==null||i==null||(e.container=a,e.target=i===a?i.firstElementChild:i,e.offsetX=i===a?e.target.offsetWidth/2:r.clientX-i.getBoundingClientRect().left,window.addEventListener("pointermove",o),window.addEventListener("pointerup",s))}function o(r){if(e.container==null||e.target==null)return;e.init||(e.target.setPointerCapture(r.pointerId),e.init=!0);const i=t(r);e.target.style.left=i+"px",n("move",i)}function s(r){if(r.preventDefault(),r.stopPropagation(),e.container&&e.target){const i=t(r);n("end",i)}e.target&&e.target.releasePointerCapture(r.pointerId),e.target=null,e.container=null,e.init=!1,window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",s)}return l}function or(n){const e={init:!1,target:null,container:null,offsetX:0,offsetY:0};function t(i){const a=e.container.getBoundingClientRect(),m=e.target.getBoundingClientRect().width/2;let p=i.clientX-a.left-e.offsetX;return p<-m&&(p=-m),p>a.width-m&&(p=a.width-m),p}function l(i){const a=e.container.getBoundingClientRect(),m=e.target.getBoundingClientRect().height/2;let p=i.clientY-a.top-e.offsetY;return p<-m&&(p=-m),p>a.height-m&&(p=a.height-m),p}function o(i){i.stopPropagation(),i.preventDefault();const a=i.target,d=i.currentTarget;origin==null||a==null||(e.container=d,e.target=a===d?a.firstElementChild:a,e.offsetX=a===d?e.target.offsetWidth/2:i.clientX-a.getBoundingClientRect().left,e.offsetY=a===d?e.target.offsetHeight/2:i.clientY-a.getBoundingClientRect().top,window.addEventListener("pointermove",s),window.addEventListener("pointerup",r))}function s(i){if(e.container==null||e.target==null)return;e.init||(e.target.setPointerCapture(i.pointerId),e.init=!0);const a=t(i),d=l(i);e.target.style.left=a+"px",e.target.style.top=d+"px",n("move",{left:a,top:d})}function r(i){if(i.preventDefault(),i.stopPropagation(),e.container&&e.target){const a=t(i),d=l(i);n("end",{top:d,left:a})}e.target&&e.target.releasePointerCapture(i.pointerId),e.target=null,e.container=null,e.init=!1,window.removeEventListener("pointermove",s),window.removeEventListener("pointerup",r)}return o}const sr=V({__name:"SvPanel",props:{modelValue:{type:Un,required:!0}},setup(n){const e=n,t=be(),l=be(),o=xe(i()),s=w(()=>({left:o.left+"px",top:o.top+"px"})),r=or((a,d)=>{a=="end"&&(o.top=d.top,o.left=d.left);const m=t.value,p=l.value,h=(d.left+p.offsetWidth/2)/m.offsetWidth*100,y=100-(d.top+p.offsetHeight)/m.offsetHeight*100;e.modelValue.setSaturation(h),e.modelValue.setValue(y)});function i(){const a=t.value,d=l.value;if(a==null||d==null)return{top:-6,left:-6};const m=e.modelValue.s,h=(100-e.modelValue.v)/100*a.offsetHeight,y=m/100*a.offsetWidth;return{top:h-d.offsetHeight/2,left:y-d.offsetWidth/2}}return vn(()=>{const a=i();o.top=a.top,o.left=a.left}),(a,d)=>(S(),C("div",{class:f(a.classes.svPanel),onPointerdown:d[0]||(d[0]=(...m)=>b(r)&&b(r)(...m)),ref_key:"svPanelRef",ref:t},[c("div",{class:f(a.classes.thumb),style:j(s.value),ref_key:"thumbRef",ref:l},null,6)],34))}}),ir="_svPanel_1sv6o_2",rr="_thumb_1sv6o_10",ar={svPanel:ir,thumb:rr},cr={classes:ar},ur=U(sr,[["__cssModules",cr]]),dr=V({__name:"HueSlider",props:{modelValue:{type:Un,required:!0}},setup(n){const e=n,t=he(-6),l=be(),o=be(),s=Io((i,a)=>{i=="end"&&(t.value=a);const d=l.value,m=o.value,p=Math.round((a+m.offsetWidth/2)/d.offsetWidth*360);e.modelValue.setHue(p)});function r(){const i=l.value,a=o.value;if(i==null||a==null)return-6;const d=e.modelValue.h;return Math.round(d/360*i.offsetWidth)-a.offsetWidth/2}return vn(()=>{t.value=r()}),(i,a)=>(S(),C("div",{class:f(i.classes.hue),onPointerdown:a[0]||(a[0]=(...d)=>b(s)&&b(s)(...d)),ref_key:"hueRef",ref:l},[c("div",{class:f(i.classes.thumb),style:j({left:t.value+"px"}),ref_key:"thumbRef",ref:o},null,6)],34))}}),pr="_hue_1ozoc_2",fr="_thumb_1ozoc_10",mr={hue:pr,thumb:fr},gr={classes:mr},hr=U(dr,[["__cssModules",gr]]),vr=V({__name:"AlphaSlider",props:{modelValue:{type:Un,required:!0}},setup(n){const e=n,t=he(-6),l=be(),o=be(),s=Io((i,a)=>{i=="end"&&(t.value=a);const d=l.value,m=o.value,p=Math.round((a+m.offsetWidth/2)/d.offsetWidth*100);e.modelValue.setAlpha(p)});function r(){const i=l.value,a=o.value;if(i==null||a==null)return-6;const d=e.modelValue.a;return Math.round(d/100*i.offsetWidth)-a.offsetWidth/2}return vn(()=>{t.value=r()}),(i,a)=>(S(),C("div",{class:f(i.classes.alpha),onPointerdown:a[0]||(a[0]=(...d)=>b(s)&&b(s)(...d)),ref_key:"alphaRef",ref:l},[c("div",{class:f(i.classes.thumb),style:j({left:t.value+"px"}),ref_key:"thumbRef",ref:o},null,6)],34))}}),br="_alpha_1x8jd_2",yr="_thumb_1x8jd_26",_r={alpha:br,thumb:yr},Er={classes:_r},Tr=U(vr,[["__cssModules",Er]]),Sr=["#FFFFFF","#000000","#485368","#2972F4","#00A3F5","#319B62","#DE3C36","#F88825","#F5C400","#9A38D7","#F2F2F2","#7F7F7F","#F3F5F7","#E5EFFF","#E5F6FF","#EAFAF1","#FFE9E8","#FFF3EB","#FFF9E3","#FDEBFF","#D8D8D8","#595959","#C5CAD3","#C7DCFF","#C7ECFF","#C3EAD5","#FFC9C7","#FFDCC4","#FFEEAD","#F2C7FF","#BFBFBF","#3F3F3F","#808B9E","#99BEFF","#99DDFF","#98D7B6","#FF9C99","#FFBA84","#FFE270","#D58EFF","#A5A5A5","#262626","#353B45","#1450B8","#1274A5","#277C4F","#9E1E1A","#B86014","#A38200","#5E2281","#939393","#0D0D0D","#24272E","#0C306E","#0A415C","#184E32","#58110E","#5C300A","#665200","#3B1551"];function Rr(){try{return typeof window.EyeDropper=="function"}catch(n){return console.log(n),!1}}async function wr(){try{return(await new EyeDropper().open()).sRGBHex}catch(n){return console.error(n),null}}const Al={isSupport:Rr,open:wr},kr=["title","onClick"],Lr=["title","onClick"],ql="quickprint-recent-use-colors",Cr=V({__name:"Picker",props:{modelValue:{type:String,default:null},showText:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","select"],setup(n,{emit:e}){const t=e,l=n,o=[{value:"hex",label:"HEX"},{value:"rgb",label:"RGB"},{value:"hsl",label:"HSL"}],s=he(new Un(l.modelValue)),r=be(),i=be(),a=he(N()),d=Al.isSupport(),m=he("hex"),p=w(()=>{const I=l.modelValue;return I?{backgroundColor:I}:null}),h=w(()=>{const I=s.value,{r:L,g:O,b:$}=I.rgb();return{"--hue-channel-color":`hsl(${I.h}, 100%, 50%)`,"--alpha-channel-color-a":`rgba(${L}, ${O}, ${$}, 0)`,"--alpha-channel-color-b":`rgba(${L}, ${O}, ${$}, 1)`}}),y=w({get(){return s.value.toString(m.value)},set(I){s.value.setColor(I)}});function _(){var I;(I=r.value)==null||I.close()}function u(I){I!=null&&(t("update:modelValue",I),t("select",I),B(I),_())}function v(){t("update:modelValue",void 0),t("select",void 0),_()}function E(){Al.open().then(I=>u(I))}function N(){const I=localStorage.getItem(ql);if(I==null||I=="")return[];const L=qn(I);return L==null?[]:Array.isArray(L)?L:[]}function B(I){const L=a.value,O=L.indexOf(I);O>=0&&L.splice(O,1),L.length>10&&L.pop(),L.unshift(I),localStorage.setItem(ql,JSON.stringify(L))}function q(){t("update:modelValue",s.value.toString(m.value)),t("select",s.value.toString(m.value)),_()}return El(()=>l.modelValue,()=>s.value.setColor(l.modelValue)),(I,L)=>(S(),ee(ko,{class:f(I.classes.colorPicker),onMousedown:L[7]||(L[7]=re(()=>{},["prevent"])),ref_key:"popoverRef",ref:r,disabled:n.disabled},{popover:Se(()=>[c("div",{class:f(I.classes.colorPickerPanel)},[c("div",{class:f(I.classes.presetPanel)},[c("div",{class:f(I.classes.presetTools)},[c("button",{type:"button",class:f(I.classes.clearBtn),onClick:v},[c("span",{class:f(I.classes.none)},null,2),L[8]||(L[8]=c("span",null,"无颜色",-1))],2),b(d)?(S(),C("button",{key:0,type:"button",class:f(I.classes.indicator),onClick:E},[g(H,{icon:"icon-eye-dropper"}),L[9]||(L[9]=c("span",null,"拾色器",-1))],2)):W("",!0)],2),c("div",{class:f(I.classes.colourAtla)},[(S(!0),C(ne,null,fe(b(Sr),O=>(S(),C("div",{style:j({backgroundColor:O}),title:O,class:f(I.classes.color),onClick:$=>u(O)},null,14,kr))),256))],2),c("div",{class:f(I.classes.recentColors)},"最近使用",2),c("div",{class:f(I.classes.colourAtla)},[(S(),C(ne,null,fe(10,O=>c("div",{key:O,title:a.value[O-1],style:j({backgroundColor:a.value[O-1]}),class:f(I.classes.color),onClick:$=>u(a.value[O-1])},null,14,Lr)),64))],2)],2),c("div",{class:f(I.pacls.panel),style:j(h.value)},[g(ur,{class:f(I.pacls.sv),modelValue:s.value,"onUpdate:modelValue":L[1]||(L[1]=O=>s.value=O)},null,8,["class","modelValue"]),c("div",{class:f(I.pacls.sliders)},[g(hr,{class:f(I.pacls.hua),modelValue:s.value,"onUpdate:modelValue":L[2]||(L[2]=O=>s.value=O)},null,8,["class","modelValue"]),g(Tr,{modelValue:s.value,"onUpdate:modelValue":L[3]||(L[3]=O=>s.value=O)},null,8,["modelValue"]),c("div",{class:f(I.pacls.preview)},[c("div",{class:f(I.pacls.previewColor),style:j({backgroundColor:s.value.toRGB()})},null,6)],2)],2),c("div",{class:f(I.pacls.tools)},[g(te,{options:o,teleport:"none",modelValue:m.value,"onUpdate:modelValue":L[4]||(L[4]=O=>m.value=O),width:"42px",border:"none",size:"text"},null,8,["modelValue"]),Le(c("input",{type:"text","onUpdate:modelValue":L[5]||(L[5]=O=>y.value=O),onMousedown:L[6]||(L[6]=re(()=>{},["stop"])),class:"quickprint-form-control",style:{width:"120px"}},null,544),[[Be,y.value]]),c("button",{type:"button",class:f(I.pacls.confirm),onClick:q},"确定",2)],2)],6)],2)]),default:Se(()=>[c("div",{class:f({[I.classes.colorPickerInput]:!0,[I.classes.disabled]:n.disabled}),ref_key:"inputRef",ref:i},[ct(I.$slots,"default",{},()=>[c("span",{class:f(I.classes.colorBlock),style:j(p.value)},null,6)]),n.showText?(S(),C("div",{key:0,class:f(I.classes.colorValue),onClick:L[0]||(L[0]=re(()=>{},["stop"]))},K(n.modelValue),3)):W("",!0)],2)]),_:3},8,["class","disabled"]))}}),Ir="_colorPicker_1egpm_2",Or="_disabled_1egpm_6",Nr="_colorPickerInput_1egpm_10",Dr="_colorBlock_1egpm_17",Mr="_colorValue_1egpm_26",xr="_colorPickerPanel_1egpm_31",Ar="_presetPanel_1egpm_45",qr="_colourAtla_1egpm_49",$r="_color_1egpm_2",Br="_presetTools_1egpm_76",Pr="_clearBtn_1egpm_82",Vr="_indicator_1egpm_83",zr="_none_1egpm_101",Fr="_recentColors_1egpm_132",Ur={colorPicker:Ir,disabled:Or,colorPickerInput:Nr,colorBlock:Dr,colorValue:Mr,colorPickerPanel:xr,presetPanel:Ar,colourAtla:qr,color:$r,presetTools:Br,clearBtn:Pr,indicator:Vr,none:zr,recentColors:Fr},Hr="_panel_911zv_2",Gr="_sv_911zv_7",Wr="_hua_911zv_11",Xr="_sliders_911zv_15",Yr="_tools_911zv_20",jr="_confirm_911zv_37 quickprint-text-btn",Zr="_preview_911zv_44",Kr="_previewColor_911zv_59",Jr={panel:Hr,sv:Gr,hua:Wr,sliders:Xr,tools:Yr,confirm:jr,preview:Zr,previewColor:Kr},Qr={classes:Ur,pacls:Jr},Wt=U(Cr,[["__cssModules",Qr]]),ea=V({__name:"Input",props:{modelValue:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","select"],setup(n,{emit:e}){const t=e,l=n,o=w({get(){return l.modelValue},set(i){t("update:modelValue",i)}}),s=w(()=>{const i=l.modelValue;return Jl(i)||i===ze.INHERIT});function r(i){t("select",i)}return(i,a)=>(S(),ee(Wt,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=d=>o.value=d),disabled:n.disabled,onSelect:r},{default:Se(()=>[c("div",{class:f({[i.classes.indicator]:!0,[i.classes.disabled]:n.disabled})},[c("div",{class:f({[i.classes.colorBlock]:!0,[i.classes.colorNone]:s.value}),style:j({backgroundColor:o.value})},null,6),c("div",{class:f(i.classes.colorValue)},K(s.value?"默认":o.value),3)],2)]),_:1},8,["modelValue","disabled"]))}}),ta="_indicator_14ypk_2",na="_disabled_14ypk_8",la="_colorBlock_14ypk_27",oa="_colorValue_14ypk_38",sa="_colorNone_14ypk_45",ia={indicator:ta,disabled:na,colorBlock:la,colorValue:oa,colorNone:sa},ra={classes:ia},Xt=U(ea,[["__cssModules",ra]]);function aa(n,e=0){let t=null;return function(...l){t&&clearTimeout(t),t=window.setTimeout(()=>{n.apply(this,l),t=null},e)}}function ca(n,e=0){let t=0,l=null;return function(...o){const s=Date.now();if(s-t<e){l&&clearTimeout(l),l=window.setTimeout(()=>{l=null,n.apply(this,o),t=Date.now()},e);return}l&&clearTimeout(l),n.apply(this,o),t=s}}function yn(n,e={}){const t={},l=n.style??{},o=yl(l.fontFamily,l.enFontFamily);o&&(t.fontFamily=o);const s=Ql(l);return s&&Object.assign(t,s),l.fontSize&&(t.fontSize=l.fontSize),l.fontWeight&&(t.fontWeight=l.fontWeight),l.color&&(t.color=l.color),l.lineHeight&&(t.lineHeight=l.lineHeight),l.highlightColor&&(t["--quickprint-variable-highlight-color"]=l.highlightColor),l.backgroundColor&&(t.backgroundColor=l.backgroundColor),l.fontStyle&&(t.fontStyle=l.fontStyle),l.textIndent&&(t.textIndent=l.textIndent),l.writingMode&&(t.writingMode=l.writingMode),ul("border",e)&&Object.assign(t,kn(n)),Object.assign(t,ms(n)),ul("align",e)&&Object.assign(t,gs(n)),ul("padding",e)&&Object.assign(t,hs(n)),t}function Oo(n,e={}){const t=[];let l=n;for(;me.isDefineElement(l);)t.unshift(yn(l,e)),l=l.parent;return Object.assign({},...t)}function ul(n,e){return e.exclude==null?!0:!e.exclude.includes(n)}const It={SPACE:" ",has(n,e){return typeof n!="string"?!1:n.split(It.SPACE).includes(e)},push(n,e){if(typeof n!="string")return e;const t=n.split(It.SPACE).filter(o=>Jt(o));return t.indexOf(e)>=0?n:(t.push(e),t.join(It.SPACE))},remove(n,e){if(typeof n!="string"||n=="")return n;const t=n.split(It.SPACE),l=t.indexOf(e);return l<0?n:(t.splice(l,1),t.join(It.SPACE))}};function St(n){switch(n){case"top":case 0:return{width:"borderTopWidth",color:"borderTopColor",style:"borderTopStyle"};case"right":case 1:return{width:"borderRightWidth",color:"borderRightColor",style:"borderRightStyle"};case"bottom":case 2:return{width:"borderBottomWidth",color:"borderBottomColor",style:"borderBottomStyle"};case"left":case 3:return{width:"borderLeftWidth",color:"borderLeftColor",style:"borderLeftStyle"}}}function Hn(n,e){const t=n.ds;if(t!=null)return t.type===ye.FORMULA?{type:t.type,content:Rl(t.value,n.doc)}:t.type===ye.VARIABLE?{type:t.type,content:dt(t.value,e)}:t.type===ye.CODE?{type:t.type,content:"自定义"}:{type:t.type,content:t.value}}function dt(n,e){var h,y,_;if(ce(n))return n;const t=eo(n),l=t.path;if(l==null||l=="")return;const o=l.split(".");if(o.length==0)return l;const s=o[0];if(t.varType===Mt.BUILTIN)return((h=dl.find(u=>u.value===s))==null?void 0:h.label)??s;if(t.varType===Mt.SPECIAL)return((y=Zs.find(u=>u.value===s))==null?void 0:y.label)??s;if(e==null)return l;const i=(e.fields??[]).find(u=>u.name===s);if(i==null)return l;const a=o[1],d=ce(i.title)?i.name:i.title;if(a==null)return d;const m=(_=i.children)==null?void 0:_.find(u=>u.name===a);if(m==null)return`${d}.${a}`;const p=ce(m.title)?m.name:m.title;return`${d}.${p}`}function Rl(n,e){return ce(n)?void 0:$n.tokenize(n).map(o=>o.type===gt.VARIABLE?`[${dt(o.value,e==null?void 0:e.ds)}]`:o.type===gt.REFERENCE?`[${No(o.value,e)}]`:o.type===gt.TEMPLATE?(Array.isArray(o.value)?o.value:[o.value]).map(r=>r.type===gt.VARIABLE?`[${dt(r.value,e==null?void 0:e.ds)}]`:r.value).join(""):$n.formatTokenValue(o)).join("")}function No(n,e){if(e==null)return"="+n;const t=e.findElement(n);return t==null?"="+n:t.title?"="+t.title:t.ds.type===ye.VARIABLE&&t.ds.value?dt(t.ds.value,e.ds):"="+n}function ua(n){switch(eo(n).dataType){case ie.OBJECT:return"对象";case ie.ARRAY:return"数组";case ie.STRING:return"文本";case ie.NUMBER:return"数字";case ie.DATE:return"日期";case ie.BOOLEAN:return"布尔";default:return"未知类型"}}function da(n){var e;return((e=bo.find(t=>t.value===n))==null?void 0:e.label)??n}const Do=to(()=>no(()=>import("./component-BzOvwT-C.js"),__vite__mapDeps([0,1]))),pa=["onClick","onMouseenter"],fa=V({__name:"Builtin",emits:["select"],setup(n,{emit:e}){const t=e,l=he(dl[0].value),o=w(()=>`builtin_${lo(l.value,"_").toLowerCase()}`);function s(i){t("select",i)}function r(i){l.value=i.value}return(i,a)=>(S(),C("div",{class:f(i.classes.builtin)},[c("div",{class:f(["quickprint-is-scrollable",i.classes.panel])},[(S(!0),C(ne,null,fe(b(dl),d=>(S(),C("div",{class:f({[i.classes.param]:!0,[i.classes.active]:d.value===l.value}),onClick:m=>s(d),onMouseenter:m=>r(d)},[c("strong",null,K(d.label),1),c("span",null,K(d.value),1)],42,pa))),256))],2),c("div",{class:f(["quickprint-is-scrollable",i.classes.desc])},[g(b(Do),{name:o.value},null,8,["name"])],2)],2))}}),ma="_builtin_m1n0z_2",ga="_panel_m1n0z_11",ha="_desc_m1n0z_17",va="_param_m1n0z_24",ba="_active_m1n0z_34",ya={builtin:ma,panel:ga,desc:ha,param:va,active:ba},_a={classes:ya},Ea=U(fa,[["__cssModules",_a]]),$l=[{label:"文本",value:ie.STRING},{label:"数字",value:ie.NUMBER},{label:"日期",value:ie.DATE},{label:"对象",value:ie.OBJECT},{label:"数组",value:ie.ARRAY}],Ta=V({emit:["select"],props:{doc:{type:we,required:!0},readonly:{type:Boolean,default:!1}},setup(n,{expose:e,emit:t}){const l=De("classes"),o=Qe(),s=a(),r=i();function i(){const v=[{name:"$index"},{name:"$expand"},{name:"type",title:"类型",width:110,render(E,N,B){var q;if(n.readonly){const I=E[N.name],L=((q=$l.find(O=>O.value===I))==null?void 0:q.label)??I;return g("div",{class:B.classes.cell},[L])}return g("div",{class:B.classes.cell},[g(te,{options:$l,modelValue:E.type,"onUpdate:modelValue":y.bind(null,E),size:"small"},null)])}},{name:"name",title:"名称",width:180,render(E,N,B){return n.readonly?g("div",{class:B.classes.cell},[E[N.name]]):g("div",{class:B.classes.cell},[Le(g("input",{"onUpdate:modelValue":q=>E.name=q,type:"text",class:"quickprint-form-control quickprint-form-control-small",placeholder:"[必填] 请输入"},null),[[Be,E.name]])])}},{name:"title",title:"标题",width:180,render(E,N,B){return n.readonly?g("div",{class:B.classes.cell},[E[N.name]]):g("div",{class:B.classes.cell},[Le(g("input",{"onUpdate:modelValue":q=>E.title=q,type:"text",class:"quickprint-form-control quickprint-form-control-small",placeholder:"[可选] 请输入"},null),[[Be,E.title]])])}}];return n.readonly!==!0&&v.push({name:"operate",title:"操作",width:200,render(E,N,B){const q=[g("button",{type:"button",class:"quickprint-text-btn",onClick:m.bind(null,E,B.parent)},[g(H,{icon:"icon-subnode"},null),g("span",null,[ue("插入行")])])];return(E.type===ie.ARRAY||E.type===ie.OBJECT)&&q.push(g("button",{type:"button",class:"quickprint-text-btn",onClick:h.bind(null,E)},[g(H,{icon:"icon-sisternode"},null),g("span",null,[ue("插入子级")])])),q.push(g("button",{type:"button",class:"quickprint-text-btn",onClick:p.bind(null,E,B.parent)},[g(H,{icon:"icon-delete"},null),g("span",null,[ue("删除")])])),q}}),v}function a(){const v=vs(n.doc.ds.fields??[]).map(N=>{const B=N.type;return{...N,$expand:B===ie.ARRAY||B===ie.OBJECT}}),E=he(v);return E.value.length==0&&E.value.push(d()),E}function d(){return{type:ie.STRING,name:"",title:""}}function m(v,E){if(E){const B=E.children??[],q=B.indexOf(v);q>=0&&B.splice(q+1,0,d());return}const N=s.value.indexOf(v);N>=0&&s.value.splice(N+1,0,d())}function p(v,E){if(E){const B=E.children??[],q=B.indexOf(v);q>=0&&B.splice(q,1);return}const N=s.value.indexOf(v);N>=0&&s.value.splice(N,1),s.value.length==0&&s.value.push(d())}function h(v){v.type!==ie.ARRAY&&v.type!==ie.OBJECT||(v.children==null&&(v.children=[]),v.children.push(d()))}function y(v,E){v.type=E,E===ie.ARRAY||E===ie.OBJECT?v.$expand=!0:v.children=void 0}function _(){return{fields:s.value.map(E=>ce(E.name)?null:E.type!==ie.ARRAY&&E.type!==ie.OBJECT?{type:E.type,name:E.name,title:E.title}:{type:E.type,name:E.name,title:E.title,children:(E.children??[]).map(N=>ce(E.name)?null:{type:N.type,name:N.name,title:N.title}).filter(N=>N!=null)}).filter(E=>E!=null)}}function u(v,E){n.readonly===!0&&t("select",v,E)}return o==null||o.useHandle("confirm",_),e({submit:_}),function(){return g("div",{class:[l.datasource,n.readonly?l.readonly:l.form]},[g(bs,{columns:r,data:s.value,onSelect:u},null)])}}}),Sa="_form_6lybl_2",Ra="_readonly_6lybl_6",wa="_datasource_6lybl_11",ka={form:Sa,readonly:Ra,datasource:wa},La={classes:ka},Mo=U(Ta,[["__cssModules",La]]),Ca={class:"quickprint-config-group"},Ia={class:"quickprint-config-section quickprint-config-inline"},Oa={class:"quickprint-config-content"},Na={class:"quickprint-config-section quickprint-config-inline"},Da={class:"quickprint-config-content"},Ma={class:"quickprint-config-id"},xa={class:"quickprint-config-section quickprint-config-inline"},Aa={class:"quickprint-config-content"},qa={class:"quickprint-config-group"},$a={class:"quickprint-config-group-title"},Ba=V({__name:"Detail",props:{element:{type:me,required:!0}},setup(n){const e=n,t=w(()=>{var l,o;return(o=Hn(e.element,(l=e.element.doc)==null?void 0:l.ds))==null?void 0:o.content});return(l,o)=>(S(),C("div",{class:f(l.classes.detail)},[c("div",Ca,[c("section",Ia,[o[0]||(o[0]=c("header",{class:"quickprint-config-header"},"类型",-1)),c("div",Oa,K(b(gn)(n.element.type)),1)]),c("section",Na,[o[1]||(o[1]=c("header",{class:"quickprint-config-header"},"标识",-1)),c("div",Da,[c("span",Ma,K(n.element.id),1)])]),c("section",xa,[o[2]||(o[2]=c("header",{class:"quickprint-config-header"},"标题",-1)),c("div",Aa,K(n.element.title),1)])]),c("div",qa,[c("div",$a,[o[3]||(o[3]=c("span",null,"数据",-1)),c("span",{class:f(l.classes.type)},K(b(da)(n.element.ds.type)),3)]),c("div",null,K(t.value),1)])],2))}}),Pa="_detail_11ox4_2",Va="_type_11ox4_10",za={detail:Pa,type:Va},Fa={classes:za},Ua=U(Ba,[["__cssModules",Fa]]),Ha=V({__name:"index",props:{doc:{type:we,required:!0}},emits:["select"],setup(n,{emit:e}){const t=e,l=n,o=i(),s=he();function r(h){return h.reduce((y,_)=>{const u=Array.isArray(_.children)?r(_.children):[];if(Jt(_.ds.value)||u.length>0){const v={value:_.id,label:_.title??_.id,data:_,children:u};return y.push(v),y}return y},[])}function i(){const h=l.doc.pages.reduce((_,u)=>_.concat(u.children),[]),y=r(h);return he(y)}function a(h){s.value=h}function d(h){return h.title?h.title:gn(h.type)}function m(h){return lg(h.type)??"icon-zhanweifu"}function p(h){t("select",h.data)}return(h,y)=>(S(),C("div",{class:f(h.classes.reference)},[c("div",{class:f([h.classes.panel,"quickprint-is-scrollable"])},[g(b(Ji),{data:b(o),onNodeHover:a,onNodeClick:p},{default:Se(({node:_})=>[g(b(H),{icon:m(_.data)},null,8,["icon"]),c("span",{class:f(h.classes.title)},K(d(_.data)),3),c("span",{class:f(h.classes.id)},"<"+K(_.value)+">",3)]),_:1},8,["data"])],2),c("div",{class:f([h.classes.detail,"quickprint-is-scrollable"])},[s.value?(S(),ee(Ua,{element:s.value.data,key:s.value.value},null,8,["element"])):W("",!0)],2)],2))}}),Ga="_reference_1ekkx_2",Wa="_panel_1ekkx_12",Xa="_detail_1ekkx_20",Ya="_title_1ekkx_25",ja="_id_1ekkx_29",Za={reference:Ga,panel:Wa,detail:Xa,title:Ya,id:ja},Ka={classes:Za},Ja=U(Ha,[["__cssModules",Ka]]),Qa=V({__name:"index",props:{doc:{type:we,required:!0},value:{type:String,default:null},include:{type:Array,default(){return["ds","builtin"]}},active:{type:String,default:null}},setup(n){const e=Qe();function t(r,i){return r==null?null:i==null?`${Mt.DS}.${r.type}.${r.name}`:`${Mt.DS}.${r.type}.${i.name}.${r.name}`}function l(r,i){e==null||e.confirm({type:"ds",value:t(r,i),parent:i})}function o(r){e==null||e.confirm({type:"builtin",value:`${Mt.BUILTIN}.${r.type}.${r.value}`})}function s(r){e==null||e.confirm({type:"reference",value:r.id})}return(r,i)=>(S(),C("div",{class:f(r.classes.var)},[n.active==="ds"?(S(),ee(Mo,{key:0,doc:n.doc,onSelect:l,readonly:""},null,8,["doc"])):W("",!0),n.active==="builtin"?(S(),ee(Ea,{key:1,onSelect:o})):W("",!0),n.active==="reference"?(S(),ee(Ja,{key:2,doc:n.doc,onSelect:s},null,8,["doc"])):W("",!0)],2))}}),ec={var:"_var_12wxd_2"},tc={classes:ec},xo=U(Qa,[["__cssModules",tc]]),nc=["onClick","onMouseenter"],lc=V({__name:"Document",props:{options:{type:Array,required:!0},type:{type:String,default:"function"}},emits:["select"],setup(n,{emit:e}){var a;const t=n,l=e,o=he((a=t.options[0])==null?void 0:a.value),s=w(()=>`${t.type}_${o.value.toLowerCase()}`);function r(d){l("select",d.value)}function i(d){o.value=d.value}return(d,m)=>(S(),C("div",{class:f(d.classes.doc)},[c("div",{class:f(["quickprint-is-scrollable",d.classes.panel])},[(S(!0),C(ne,null,fe(n.options,p=>(S(),C("div",{key:p.value,class:f({[d.classes.option]:!0,[d.classes.active]:p.value===o.value}),onClick:h=>r(p),onMouseenter:h=>i(p)},[c("strong",null,K(p.label),1)],42,nc))),128))],2),c("div",{class:f(["quickprint-is-scrollable",d.classes.desc])},[g(b(Do),{name:s.value},null,8,["name"])],2)],2))}}),oc="_doc_1pdoc_2",sc="_panel_1pdoc_10",ic="_desc_1pdoc_16",rc="_option_1pdoc_23",ac="_active_1pdoc_33",cc={doc:oc,panel:sc,desc:ic,option:rc,active:ac},uc={classes:cc},sn=U(lc,[["__cssModules",uc]]),dc=V({__name:"index",props:{active:{type:String,default:null}},setup(n){const e=Qe(),t=[{label:"STRING",value:"STRING"},{label:"LENGTH",value:"LENGTH"},{label:"LOWER",value:"LOWER"},{label:"UPPER",value:"UPPER"},{label:"UPPER_FIRST",value:"UPPER_FIRST"},{label:"TRIM",value:"TRIM"},{label:"REPLACE",value:"REPLACE"},{label:"REPLACE_ALL",value:"REPLACE_ALL"},{label:"SLICE",value:"SLICE"},{label:"INCLUDES",value:"INCLUDES"},{label:"INDEX_OF",value:"INDEX_OF"},{label:"LAST_INDEX_OF",value:"LAST_INDEX_OF"},{label:"STARTS_WITH",value:"STARTS_WITH"},{label:"ENDS_WITH",value:"ENDS_WITH"}],l=[{label:"NUMBER",value:"NUMBER"},{label:"ABS",value:"ABS"},{label:"TRUNC",value:"TRUNC"},{label:"MIN",value:"MIN"},{label:"MAX",value:"MAX"},{label:"CEIL",value:"CEIL"},{label:"FLOOR",value:"FLOOR"},{label:"ROUND",value:"ROUND"},{label:"DIGIT",value:"DIGIT"},{label:"NUMBER_FORMAT",value:"NUMBER_FORMAT"}],o=[{label:"IF",value:"IF"},{label:"IFNA",value:"IFNA"},{label:"IFERROR",value:"IFERROR"},{label:"SWITCH",value:"SWITCH"},{label:"IS_NAN",value:"IS_NAN"},{label:"IS_NUMBER",value:"IS_NUMBER"},{label:"IS_INTEGER",value:"IS_INTEGER"},{label:"IS_STRING",value:"IS_STRING"},{label:"IS_BOOLEAN",value:"IS_BOOLEAN"},{label:"IS_NULL",value:"IS_NULL"},{label:"IS_UNDEFINED",value:"IS_UNDEFINED"},{label:"IS_NULLISH",value:"IS_NULLISH"},{label:"IS_EMPTY",value:"IS_EMPTY"}],s=[{label:"DATE",value:"DATE"},{label:"NOW",value:"NOW"},{label:"YEAR",value:"YEAR"},{label:"MONTH",value:"MONTH"},{label:"DAY",value:"DAY"},{label:"HOUR",value:"HOUR"},{label:"MINUTE",value:"MINUTE"},{label:"SECOND",value:"SECOND"}],r=[{label:"COL_SUM",value:"COL_SUM"},{label:"COL_AVG",value:"COL_AVG"}];function i(a){return e==null?void 0:e.confirm({type:"function",value:`${a}()`})}return(a,d)=>(S(),C("div",{class:f(a.classes.function)},[n.active==="string"?(S(),ee(sn,{options:t,onSelect:i,key:"string"})):W("",!0),n.active==="number"?(S(),ee(sn,{options:l,onSelect:i,key:"number"})):W("",!0),n.active==="logical"?(S(),ee(sn,{options:o,onSelect:i,key:"logical"})):W("",!0),n.active==="date"?(S(),ee(sn,{options:s,onSelect:i,key:"date"})):W("",!0),n.active==="aggregate"?(S(),ee(sn,{options:r,onSelect:i,key:"aggregate"})):W("",!0)],2))}}),pc={function:"_function_19szx_2"},fc={classes:pc},mc=U(dc,[["__cssModules",fc]]),gc=["onMouseenter"],hc=["onClick"],vc={key:1},bc=V({__name:"Formula",props:{doc:{type:we,default:null}},setup(n){const e=n,t=Qe(),l=[{id:"pageNumber",name:"页码",options:a(ti)}],o=he(l[0]);function s(d){o.value=d}function r(d){return t==null?void 0:t.confirm({type:"formula",value:d})}function i(d){const m=$n.tokenize(d),p=e.doc;return m.reduce((h,y)=>{if(y.type===gt.VARIABLE)return h.push({type:"highlight",value:dt(y.value,p==null?void 0:p.ds)}),h;if(y.type===gt.REFERENCE)return h.push({type:"highlight",value:No(y.value,p)}),h;if(y.type===gt.TEMPLATE){const u=(Array.isArray(y.value)?y.value:[y.value]).map(v=>v.type===gt.VARIABLE?{type:"highlight",value:dt(v.value,p.ds)}:{type:"text",value:v.value});return h.concat(u)}return h.push({type:"text",value:$n.formatTokenValue(y)}),h},[])}function a(d){return d.map(m=>({nodes:i(m),value:m}))}return(d,m)=>(S(),C("div",{class:f(d.classes.formula)},[c("div",{class:f([d.classes.left,"quickprint-is-scrollable"])},[(S(),C(ne,null,fe(l,p=>c("div",{key:p.name,onMouseenter:h=>s(p),class:f({[d.classes.group]:!0,[d.classes.active]:p.id===o.value.id})},K(p.name),43,gc)),64))],2),c("div",{class:f(d.classes.right)},[(S(!0),C(ne,null,fe(o.value.options,(p,h)=>(S(),C("div",{key:h,class:f(d.classes.code),onClick:y=>r(p.value)},[(S(!0),C(ne,null,fe(p.nodes,y=>(S(),C(ne,null,[y.type==="highlight"?(S(),C("span",{key:0,class:f(d.classes.highlight)},"["+K(y.value)+"]",3)):(S(),C("span",vc,K(y.value),1))],64))),256)),c("span",{class:f(d.classes.badge)},"插入",2)],10,hc))),128))],2)],2))}}),yc="_formula_ms7c3_2",_c="_left_ms7c3_12",Ec="_right_ms7c3_17",Tc="_group_ms7c3_24",Sc="_active_ms7c3_34",Rc="_highlight_ms7c3_39",wc="_code_ms7c3_43",kc="_badge_ms7c3_65",Lc={formula:yc,left:_c,right:Ec,group:Tc,active:Sc,highlight:Rc,code:wc,badge:kc},Cc={classes:Lc},Ic=U(bc,[["__cssModules",Cc]]),wl=Ce(function(n){return je("变量",(e,t)=>g(xo,{doc:n.doc,value:n.value,active:t},null),{preset:"variable",icon:"svg:icon-var",tabs:[{label:"数据源",name:"ds",active:!0},{label:"内置变量",name:"builtin"},{label:"引用组件",name:"reference"}]}).promisify().catch(ke)}),Oc=Ce(function(n){return ut("数据源",g(Mo,{doc:n},null),{preset:"variable",icon:g(H,{icon:"icon-datasource",class:"quickprint-ds-icon",size:"16px"},null),menus:[{label:"保存",handler:e=>e.dispatchConfirm()}]}).promisify().catch(ke)}),Nc=Ce(function(n){const e=["ds","builtin","reference"];return je("变量",(t,l)=>g(xo,{doc:n.doc,value:n.value,include:e,active:l},null),{preset:"variable",icon:"svg:icon-var",tabs:[{label:"数据源",name:"ds",active:!0},{label:"内置变量",name:"builtin"},{label:"引用组件",name:"reference"}]}).promisify().catch(ke)}),Dc=Ce(function(){return je("函数",(n,e)=>g(mc,{active:e},null),{preset:"variable",icon:"svg:icon-function",tabs:[{label:"文本",name:"string",active:!0},{label:"数字",name:"number"},{label:"日期",name:"date"},{label:"逻辑",name:"logical"},{label:"聚合",name:"aggregate"}]}).promisify().catch(ke)}),Mc=Ce(function(n){return ut("公式",g(Ic,{doc:n.doc},null),{preset:"variable"}).promisify().catch(ke)}),xc={key:1},Ac=V({__name:"Content",props:{element:{type:me,required:!0}},setup(n){const e=n,t=Re(),l=en("editorRef"),o=en("contentRef"),s=he(!1),r=w(()=>{const m=e.element.type===G.TABLE_CELL?Oo(e.element,{exclude:["border"]}):yn(e.element);return m.color&&(m["--quickprint-element-var-color"]=m.color),s.value&&(m.alignItems="flex-start"),m}),i=w(()=>{const m=Hn(e.element,t.doc.ds);return m==null||m.content==null?null:[{tag:"span",content:e.element.attributes.prefix},{tag:m.type===ye.CONST?"span":"strong",content:m.content},{tag:"span",content:e.element.attributes.suffix}]});async function a(){var y;const m=await wl({doc:t.doc,value:e.element.ds.value}).catch(st);if(m==null||(e.element.setDataSource(ye.VARIABLE,m.value),e.element.type!=G.TABLE_CELL||m.type!=="ds"))return;const p=e.element.parent;if(p==null||p.isBindVariable||((y=m.parent)==null?void 0:y.type)!==ie.ARRAY)return;const h=m.parent;p.setDataSource(ye.VARIABLE,`${Mt.DS}.${h.type}.${h.name}`)}function d(){const m=l.value,p=o.value;m==null||p==null||(s.value=p.offsetHeight>m.offsetHeight)}return(m,p)=>(S(),C("div",{class:"quickprint-is-element-editor",style:j(r.value),onVnodeMounted:d,ref_key:"editorRef",ref:l},[c("span",{ref_key:"contentRef",ref:o,class:f(["quickprint-is-content",{[m.classes.lineThrough]:n.element.style.lineThrough}])},[(S(!0),C(ne,null,fe(i.value,(h,y)=>(S(),C(ne,{key:y},[h.tag=="strong"?(S(),C("strong",{key:0,class:f(m.classes.highlight)},"["+K(h.content)+"]",3)):h.tag=="span"&&h.content?(S(),C("span",xc,K(h.content),1)):W("",!0)],64))),128))],2),n.element.isBindVariable?(S(),ee(b(H),{key:0,icon:"icon-ds",size:"11px",color:"#da7f00",class:f(m.classes.dsIcon),onClick:a,onPointerdown:p[0]||(p[0]=re(()=>{},["stop"]))},null,8,["class"])):W("",!0)],4))}}),qc="_dsIcon_1d2si_2",$c="_lineThrough_1d2si_11",Bc="_highlight_1d2si_15",Pc={dsIcon:qc,lineThrough:$c,highlight:Bc},Vc={classes:Pc},Gn=U(Ac,[["__cssModules",Vc]]),zc=V({__name:"TextEditor",props:{element:{type:ys,required:!0}},setup(n){return(e,t)=>(S(),ee(Gn,{element:n.element},null,8,["element"]))}}),Wn=Object.freeze({title:"文本",icon:"icon-text",type:G.TEXT,editor:zc,onCreate(){return me.create({type:G.TEXT,width:Ge,height:bn})}}),Fc=V({__name:"NumberEditor",props:{element:{type:_s,required:!0}},setup(n){return(e,t)=>(S(),ee(Gn,{element:n.element},null,8,["element"]))}}),Uc=["value","disabled"],Hc=V({__name:"RadioButton",props:At({modelValue:{},options:{type:Array,default(){return[]}},compacted:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=hn(n,"modelValue");return(t,l)=>(S(),C("div",{class:f({[t.classes.radioGroup]:!0,[t.classes.compacted]:n.compacted,[t.classes.disabled]:n.disabled})},[(S(!0),C(ne,null,fe(n.options,o=>(S(),C("label",{class:f({[t.classes.radio]:!0,[t.classes.selected]:o.value===n.modelValue})},[Le(c("input",{type:"radio",value:o.value,"onUpdate:modelValue":l[0]||(l[0]=s=>e.value=s),disabled:n.disabled},null,8,Uc),[[Vs,e.value]]),c("span",null,K(o.label),1)],2))),256))],2))}}),Gc="_radioGroup_67myk_2",Wc="_compacted_67myk_10",Xc="_radio_67myk_2",Yc="_selected_67myk_50",jc="_disabled_67myk_56",Zc={radioGroup:Gc,compacted:Wc,radio:Xc,selected:Yc,disabled:jc},Kc={classes:Zc},Dt=U(Hc,[["__cssModules",Kc]]),Jc={class:"quickprint-config-section quickprint-config-inline"},Qc={class:"quickprint-config-content"},eu={class:"quickprint-config-section quickprint-config-inline"},tu={class:"quickprint-config-content"},nu={class:"quickprint-config-section quickprint-config-inline"},lu={class:"quickprint-config-content"},ou={class:"quickprint-config-section quickprint-config-inline"},su={class:"quickprint-config-content"},iu=V({__name:"NumberConfig",props:{element:{type:me,required:!0}},setup(n){const e=n,t=w({get(){return e.element.attributes.showZero??!0},set(s){const r=e.element.attributes;r.showZero=s}}),l=w({get(){return e.element.attributes.round??cn.ROUND},set(s){const r=e.element.attributes;r.round=s}}),o=w({get(){return e.element.attributes.format??wt.NONE},set(s){const r=e.element.attributes;r.format=s}});return(s,r)=>(S(),C(ne,null,[c("section",Jc,[r[4]||(r[4]=c("header",{class:"quickprint-config-header"},"小数位数",-1)),c("div",Qc,[Le(c("input",{"onUpdate:modelValue":r[0]||(r[0]=i=>n.element.attributes.precision=i),type:"number",step:"1",min:0,class:"quickprint-form-control quickprint-w-full",placeholder:"请输入"},null,512),[[Be,n.element.attributes.precision]])])]),c("section",eu,[r[5]||(r[5]=c("header",{class:"quickprint-config-header"},"舍入规则",-1)),c("div",tu,[g(b(te),{options:b(Ws),modelValue:l.value,"onUpdate:modelValue":r[1]||(r[1]=i=>l.value=i),class:"quickprint-w-full"},null,8,["options","modelValue"])])]),c("section",nu,[r[6]||(r[6]=c("header",{class:"quickprint-config-header"},"显示类型",-1)),c("div",lu,[g(b(te),{options:b(Xs),modelValue:o.value,"onUpdate:modelValue":r[2]||(r[2]=i=>o.value=i),class:"quickprint-w-full"},null,8,["options","modelValue"])])]),c("section",ou,[r[7]||(r[7]=c("header",{class:"quickprint-config-header"},"值为0时",-1)),c("div",su,[g(Dt,{modelValue:t.value,"onUpdate:modelValue":r[3]||(r[3]=i=>t.value=i),options:b(Ys),class:"quickprint-w-full"},null,8,["modelValue","options"])])])],64))}}),Xn=Object.freeze({title:"数字",type:G.NUMBER,icon:"icon-number",editor:Fc,config:{display:iu},onCreate(){return me.create({type:G.NUMBER,width:Ge,height:bn})}}),ru=V({__name:"DateEditor",props:{element:{type:Es,required:!0}},setup(n){return(e,t)=>(S(),ee(Gn,{element:n.element},null,8,["element"]))}}),au={class:"quickprint-config-section"},cu={class:"quickprint-config-content"},uu=V({__name:"DateConfig",props:{element:{type:me,required:!0}},setup(n){const e=n,t={NONE:"NONE"},l=w(()=>[{label:"原始值",value:t.NONE},...yo]);function o(s){if(s.value==t.NONE){e.element.attributes.format=void 0;return}e.element.attributes.format=s.value}return(s,r)=>(S(),C("section",au,[c("header",{class:f(["quickprint-config-header",s.classes.header])},[r[1]||(r[1]=c("span",null,"格式",-1)),g(b(te),{options:l.value,onSelect:o,class:f(s.classes.picker),appearance:"none",size:"mini",border:"none",popoverWidth:200},{selected:Se(()=>[c("span",{class:f(s.classes.placeholder)},"预设模板",2)]),_:1},8,["options","class"])],2),c("div",cu,[Le(c("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=i=>n.element.attributes.format=i),class:"quickprint-form-control quickprint-w-full",placeholder:"请输入"},null,512),[[Be,n.element.attributes.format]])])]))}}),du="_header_79607_2",pu="_picker_79607_8",fu="_placeholder_79607_15",mu={header:du,picker:pu,placeholder:fu},gu={classes:mu},hu=U(uu,[["__cssModules",gu]]),Yn=Object.freeze({title:"日期",type:G.DATE,icon:"icon-date",editor:ru,config:{display:hu},onCreate(){return me.create({type:G.DATE,width:Ge,height:bn})}}),vu=["x1","y1","x2","y2"],bu=V({__name:"Diagonal",props:{mode:{type:Number,default:0},labels:{type:Array,default:null},width:{type:Number,default:null},height:{type:Number,default:null}},setup(n){const e=De("classes"),t=n,l=w(()=>t.mode===Me.TL_BR?{x1:"0",y1:"0",x2:"100%",y2:"100%"}:t.mode===Me.TR_BL?{x1:"100%",y1:"0",x2:"0",y2:"100%"}:null),o=w(()=>({[e.biagonal]:!0,[e.tlbr]:t.mode===Me.TL_BR,[e.trbl]:t.mode===Me.TR_BL})),s=w(()=>({width:t.width?`${t.width}px`:"100%",height:t.height?`${t.height}px`:"100%"})),r=w(()=>{var a,d;return(d=(a=t.labels)==null?void 0:a[0])==null?void 0:d.text}),i=w(()=>{var a,d;return(d=(a=t.labels)==null?void 0:a[1])==null?void 0:d.text});return(a,d)=>(S(),C("div",{class:f(o.value),style:j(s.value)},[l.value?(S(),C("svg",{key:0,class:f(b(e).line)},[c("line",{x1:l.value.x1,y1:l.value.y1,x2:l.value.x2,y2:l.value.y2},null,8,vu)],2)):W("",!0),r.value?(S(),C("div",{key:1,class:f(b(e).firstLabel)},K(r.value),3)):W("",!0),i.value?(S(),C("div",{key:2,class:f(b(e).secondLabel)},K(i.value),3)):W("",!0)],6))}}),yu="_biagonal_17a80_2",_u="_firstLabel_17a80_9",Eu="_secondLabel_17a80_10",Tu="_tlbr_17a80_15",Su="_trbl_17a80_26",Ru="_line_17a80_37",wu={biagonal:yu,firstLabel:_u,secondLabel:Eu,tlbr:Tu,trbl:Su,line:Ru},ku={classes:wu},fl=U(bu,[["__cssModules",ku]]),Lu=["colspan","rowspan"],Cu=V({__name:"TableCellEditor",props:{element:{type:Bn,required:!0}},setup(n){const e=n,t=w(()=>e.element.isCollapsed),l=w(()=>{const h=e.element.attributes.diagonalMode;return h==null?!1:h!==Me.NONE}),o=Re(),s=De("classes"),r=w(()=>{const h=e.element,y=h.parent;return{[s.cell]:!0,[J.SELECTED]:(y==null?void 0:y.isSelected)||h.isSelected}}),i=w(()=>{var u;const h=kn((u=e.element.parent)==null?void 0:u.parent),y=kn(e.element.parent),_=kn(e.element);return{...m(e.element),...p(e.element),...Object.assign(h,y,_)}}),a=w(()=>{const h=Oo(e.element,{exclude:["border","padding"]});return h.color&&(h["--quickprint-element-var-color"]=h.color),h});function d(h){h.button==0&&(h.ctrlKey?o.toggleMultiSelectedElement(e.element):o.selectElement(e.element))}function m(h){const y=h.findPrevDisplayedCell(),_=h.findNextDisplayedCell(),u=h.table,v=se(h,"left")??se(h.parent,"left")??se(u,"left"),E=se(y,"right")??se(y==null?void 0:y.parent,"right")??se(u,"right"),N=se(h,"right")??se(h.parent,"right")??se(u,"right"),B=se(_,"left")??se(_==null?void 0:_.parent,"left")??se(u,"left"),q=Math.max(ae.processLengthToPX(v)??0,ae.processLengthToPX(E)??0),I=Math.max(ae.processLengthToPX(N)??0,ae.processLengthToPX(B)??0);return{"--quickprint-cell-width":e.element.offsetWidth+"px","--quickprint-cell-border-left-width":q+"px","--quickprint-cell-border-right-width":I+"px"}}function p(h){var O,$;const y=h.index,_=h.table,u=(O=h.findPrevDisplayedRow())==null?void 0:O.children[y],v=($=h.findNextDisplayedRow())==null?void 0:$.children[y],E=se(h,"top")??se(h.parent,"top")??se(_,"top"),N=se(u,"bottom")??se(u==null?void 0:u.parent,"bottom")??se(_,"bottom"),B=se(h,"bottom")??se(h.parent,"bottom")??se(_,"bottom"),q=se(v,"top")??se(v==null?void 0:v.parent,"top")??se(_,"top"),I=Math.max(ae.processLengthToPX(E)??0,ae.processLengthToPX(N)??0),L=Math.max(ae.processLengthToPX(B)??0,ae.processLengthToPX(q)??0);return{"--quickprint-cell-height":h.offsetHeight+"px","--quickprint-cell-border-top-width":I+"px","--quickprint-cell-border-bottom-width":L+"px"}}return(h,y)=>t.value?W("",!0):(S(),C("td",mo({key:0,[`.${b(Je)||""}`]:n.element,class:r.value,style:i.value,colspan:n.element.attributes.colspan,rowspan:n.element.attributes.rowspan,onClick:re(d,["stop"])}),[l.value?(S(),ee(fl,{key:0,mode:n.element.attributes.diagonalMode,labels:n.element.attributes.diagonalLabels,width:n.element.offsetWidth,height:n.element.offsetHeight,style:j(a.value)},null,8,["mode","labels","width","height","style"])):(S(),ee(Gn,{key:1,element:n.element,class:f(b(s).content)},null,8,["element","class"]))],48,Lu))}}),Iu="_cell_10c6k_2",Ou="_content_10c6k_32",Nu={cell:Iu,content:Ou},Du={classes:Nu},Ao=U(Cu,[["__cssModules",Du]]);function qo(n,e){return{type:"menu",label:"层级",icon:"icon-cengji",submenu:[{type:"menu",icon:"icon-vertical-align-top",label:"移至顶层",handler(){const t=e.page;if(t==null)return;const l=t.topZIndex;e.setZIndex(l+1),n.createSnapshot()}},{type:"menu",label:"上移一层",icon:"icon-arrowup",handler(){const t=e.zIndex;e.setZIndex(t+1),n.createSnapshot()}},{type:"menu",icon:"icon-arrowdown",label:"下移一层",handler(){const t=e.zIndex;t<=0||(e.setZIndex(t-1),n.createSnapshot())}},{type:"menu",icon:"icon-vertical-align-bottom",label:"移至底层",handler(){e.setZIndex(0),n.createSnapshot()}}]}}const Mu=[{label:"微软雅黑",value:"Microsoft YaHei"},{label:"宋体",value:pe.SONG},{label:"黑体",value:"黑体"},{label:"仿宋",value:"仿宋"},{label:"楷体",value:"楷体"}],$o=[{label:"Arial",value:"Arial"},{label:"Consolas",value:"Consolas"},{label:"Times",value:"Times"},{label:"Times New Roman",value:"Times New Roman"}],Bo=[{label:"默认",value:pe.DEFAULT},...$o],jn=[{label:"默认",value:pe.DEFAULT},...Mu,...$o],kl=[{label:"默认",value:Ie.DEFAULT},{label:"初号",value:Ie.SIZE_0+"pt",short:"56px"},{label:"小初",value:Ie.SIZE_0_S+"pt",short:"≈49.33px"},{label:"一号",value:Ie.SIZE_1+"pt",short:"≈34.67px"},{label:"小一",value:Ie.SIZE_1_S+"pt",short:"32px"},{label:"二号",value:Ie.SIZE_2+"pt",short:"≈29.33px"},{label:"小二",value:Ie.SIZE_2_S+"pt",short:"24px"},{label:"三号",value:Ie.SIZE_3+"pt",short:"≈21.33px"},{label:"小三",value:Ie.SIZE_3_S+"pt",short:"20px"},{label:"四号",value:Ie.SIZE_4+"pt",short:"≈18.67px"},{label:"小四",value:Ie.SIZE_4_S+"pt",short:"16px"},{label:"五号",value:Ie.SIZE_5+"pt",short:"14px"},{label:"小五",value:Ie.SIZE_5_S+"pt",short:"12px"},{label:"12px",value:"12px"},{label:"13px",value:"13px"},{label:"14px",value:"14px"},{label:"15px",value:"15px"},{label:"16px",value:"16px"},{label:"18px",value:"18px"},{label:"20px",value:"20px"},{label:"22px",value:"22px"},{label:"24px",value:"24px"},{label:"28px",value:"28px"},{label:"32px",value:"32px"},{label:"36px",value:"36px"},{label:"42px",value:"42px"},{label:"48px",value:"48px"},{label:"56px",value:"56px"},{label:"72px",value:"72px"}],Po=[{label:"默认",value:kt.DEFAULT},{label:"1.0",value:kt.TIMES_1,short:"单倍行距"},{label:"1.1",value:kt.TIMES_1_1},{label:"1.5",value:kt.TIMES_1_5},{label:"2.0",value:kt.TIMES_2,short:"两倍行距"}],xu=[{label:"无",value:Ln.NONE},{label:"实线",value:Pt.SOLID},{label:"虚线",value:Pt.DASHED},{label:"点划线",value:Pt.DOTTED},{label:"双实线",value:Pt.DOUBLE},{label:"波浪线",value:Pt.WAVY}],Au=[{label:"无",value:Q.NONE},{label:"实线",value:Q.SOLID},{label:"虚线",value:Q.DASHED},{label:"点划线",value:Q.DOTTED},{label:"双实线",value:Q.DOUBLE}],qu=[{label:"默认",value:Lt.AUTO},{label:"左对齐",value:Lt.LEFT},{label:"居中对齐",value:Lt.CENTER},{label:"右对齐",value:Lt.RIGHT},{label:"两端对齐",value:Lt.JUSTIFY}],ml=[{label:"顶部对齐",value:it.TOP,icon:"icon-vertical-align-top"},{label:"垂直居中",value:it.MIDDLE,icon:"icon-vertical-align-middl"},{label:"底部对齐",value:it.BOTTOM,icon:"icon-vertical-align-bottom"}],gl=[{label:"左对齐",value:ht.LEFT,icon:"icon-align-left"},{label:"居中对齐",value:ht.CENTER,icon:"icon-align-center"},{label:"右对齐",value:ht.RIGHT,icon:"icon-align-right"},{label:"两端对齐",value:ht.JUSTIFY,icon:"icon-menu"}],$u={class:"quickprint-is-row"},Bu=["onClick"],Pu=V({__name:"FontSize",props:{modelValue:{type:String,default:null},height:{type:String,default:"100%"}},emits:["update:modelValue","update:unit"],setup(n,{emit:e}){const t=[{value:"px",label:"像素"},{value:"pt",label:"磅"}],l=De("classes"),o=e,s=n,r=be(),i=w(()=>({height:s.height})),a=w({get(){return vt(s.modelValue).num??void 0},set(_){if(_==""||Ts(_)||_<0){p(void 0);return}const u=vt(s.modelValue);p(`${_}${u.unit}`)}}),d=w({get(){return vt(s.modelValue).unit??oe.PX},set(_){const u=vt(s.modelValue);p(`${u.num}${_}`)}});function m(_){const u=_===Ie.DEFAULT?void 0:_;o("update:modelValue",u)}function p(_){o("update:modelValue",_),y()}function h(_){const u=s.modelValue;return u==null&&_.value===Ie.DEFAULT?!0:u===_.value}async function y(){await Qt();const _=document.querySelector("."+l.fontSelected);_&&_.scrollIntoView({block:"nearest"})}return(_,u)=>(S(),C("div",{class:f(b(l).fontSize),style:j(i.value)},[c("div",$u,[Le(c("input",{type:"number",step:"any",placeholder:"请输入",class:f(["quickprint-form-control",b(l).input]),min:0,"onUpdate:modelValue":u[0]||(u[0]=v=>a.value=v)},null,2),[[Be,a.value]]),g(b(te),{width:"54px",options:t,modelValue:d.value,"onUpdate:modelValue":u[1]||(u[1]=v=>d.value=v)},null,8,["modelValue"])]),c("div",{class:f(["quickprint-is-fill-h quickprint-is-scrollable",b(l).fonts]),ref_key:"scrollRef",ref:r},[(S(!0),C(ne,null,fe(b(kl),v=>(S(),C("div",{key:v.value,class:f({[b(l).option]:!0,[b(l).fontSelected]:h(v)}),onClick:E=>m(v.value)},[c("span",null,K(v.label),1)],10,Bu))),128))],2)],6))}}),Vu="_input_9oh9n_2",zu="_fontSize_9oh9n_8",Fu="_fonts_9oh9n_13",Uu="_option_9oh9n_25",Hu="_fontSelected_9oh9n_34",Gu={input:Vu,fontSize:zu,fonts:Fu,option:Uu,fontSelected:Hu},Wu={classes:Gu},Vo=U(Pu,[["__cssModules",Wu]]),Xu=["title"],Yu={key:0},ju="中文字体 AbBbCc",Zu=V({__name:"Font",props:{options:{type:Object,required:!0}},setup(n){const e=n,t=w(()=>jn.map(u=>(u.style={fontFamily:u.value==pe.DEFAULT?pe.SONG:u.value},u))),l=w(()=>Bo.map(u=>(u.style={fontFamily:u.value==pe.DEFAULT?pe.SONG:u.value},u))),o=w({get(){const u=e.options.style.fontFamily;return ce(u)?pe.DEFAULT:u},set(u){e.options.style.fontFamily=u==pe.DEFAULT?void 0:u}}),s=w({get(){const u=e.options.style.enFontFamily;return ce(u)?pe.DEFAULT:u},set(u){e.options.style.enFontFamily=u==pe.DEFAULT?void 0:u}}),r=w({get(){const u=e.options.style.color;return ce(u)?ze.INHERIT:u},set(u){e.options.style.color=u==ze.INHERIT?void 0:u}}),i=w({get(){const u=e.options.style.highlightColor;return ce(u)?ze.INHERIT:u},set(u){e.options.style.highlightColor=u==ze.INHERIT?void 0:u}}),a=w({get(){return e.options.style.fontSize},set(u){const v=ce(u)?void 0:u;e.options.style.fontSize=v}}),d=w({get(){return e.options.style.fontWeight===700},set(u){e.options.style.fontWeight=u?700:void 0}}),m=w({get(){return e.options.style.fontStyle==="italic"},set(u){e.options.style.fontStyle=u?"italic":void 0}}),p=w({get(){return e.options.style.lineThrough===!0},set(u){e.options.style.lineThrough=u?!0:void 0}}),h=w({get(){const u=e.options.style.underline;if(u==null||u===!1)return Ln.NONE;const v=e.options.style.underlineStyle;return ce(v)?Pt.SOLID:v},set(u){if(u===Ln.NONE){e.options.style.underline=void 0,e.options.style.underlineStyle=void 0;return}e.options.style.underline=!0,e.options.style.underlineStyle=u}}),y=w({get(){const u=e.options.style.underlineColor;return ce(u)?ze.INHERIT:u},set(u){e.options.style.underlineColor=u==ze.INHERIT?void 0:u}}),_=w(()=>{const u=e.options.style,v={},E=yl(u.fontFamily,u.enFontFamily);E&&(v.fontFamily=E);const N=Ql(u);return N&&Object.assign(v,N),u.fontSize&&(v.fontSize=u.fontSize),u.fontWeight&&(v.fontWeight=u.fontWeight),u.color&&(v.color=u.color),u.fontStyle&&(v.fontStyle=u.fontStyle),u.highlightColor&&(v["--quickprint-variable-highlight-color"]=u.highlightColor),v});return(u,v)=>(S(),C("div",{class:f(["quickprint-is-scrollable quickprint-is-fill-h",u.classes.font])},[c("div",{class:f(u.classes.fontFamily)},[c("div",{class:f(u.classes.config)},[c("div",{class:f(u.classes.title)},"中文字体",2),c("div",{class:f(u.classes.content)},[g(b(te),{options:t.value,modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=E=>o.value=E)},null,8,["options","modelValue"])],2)],2),c("div",{class:f(u.classes.config)},[c("div",{class:f(u.classes.title)},"颜色",2),g(b(Xt),{modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=E=>r.value=E)},null,8,["modelValue"])],2),c("div",{class:f([u.classes.config,u.classes.fontSize])},[c("div",{class:f(u.classes.title)},"字号",2),g(Vo,{modelValue:a.value,"onUpdate:modelValue":v[2]||(v[2]=E=>a.value=E),height:"144px"},null,8,["modelValue"])],2),c("div",{class:f(u.classes.config)},[c("div",{class:f(u.classes.title)},"西文字体",2),c("div",{class:f(u.classes.content)},[g(b(te),{options:l.value,modelValue:s.value,"onUpdate:modelValue":v[3]||(v[3]=E=>s.value=E)},null,8,["options","modelValue"])],2)],2),c("div",{class:f(u.classes.config)},[c("div",{class:f(u.classes.title)},"前景色",2),g(b(Xt),{modelValue:i.value,"onUpdate:modelValue":v[4]||(v[4]=E=>i.value=E)},null,8,["modelValue"])],2),c("div",{class:f(u.classes.config)},[c("div",{class:f(u.classes.title)},"下划线",2),c("div",{class:f(u.classes.content)},[g(b(te),{modelValue:h.value,"onUpdate:modelValue":v[5]||(v[5]=E=>h.value=E),options:b(xu),width:"138px"},{option:Se(({option:E})=>[c("div",{title:E.label,class:f(u.classes.option)},[E.value==b(Ln).NONE?(S(),C("div",Yu,K(E.label),1)):(S(),C("div",{key:1,class:f(u.classes.line),style:j({textDecorationStyle:E.value})},"--",6))],10,Xu)]),_:1},8,["modelValue","options"])],2)],2),c("div",{class:f(u.classes.config)},[c("div",{class:f(u.classes.title)},"线条颜色",2),c("div",{class:f(u.classes.content)},[g(b(Xt),{modelValue:y.value,"onUpdate:modelValue":v[6]||(v[6]=E=>y.value=E),class:"quickprint-w-full"},null,8,["modelValue"])],2)],2)],2),c("div",{class:f(u.classes.fieldset)},[v[13]||(v[13]=c("header",null,"效果",-1)),c("div",{class:f(u.classes.configs)},[c("label",{class:f(u.classes.checkbox)},[Le(c("input",{type:"checkbox","onUpdate:modelValue":v[7]||(v[7]=E=>d.value=E)},null,512),[[rl,d.value]]),v[10]||(v[10]=c("span",null,"粗体",-1))],2),c("label",{class:f(u.classes.checkbox)},[Le(c("input",{type:"checkbox","onUpdate:modelValue":v[8]||(v[8]=E=>m.value=E)},null,512),[[rl,m.value]]),v[11]||(v[11]=c("span",null,"斜体",-1))],2),c("label",{class:f(u.classes.checkbox)},[Le(c("input",{type:"checkbox","onUpdate:modelValue":v[9]||(v[9]=E=>p.value=E)},null,512),[[rl,p.value]]),v[12]||(v[12]=c("span",null,"删除线",-1))],2)],2)],2),c("div",{class:f(u.classes.fieldset)},[v[14]||(v[14]=c("header",null,"预览",-1)),c("div",{class:f(u.classes.preview)},[c("span",{style:j(_.value)},[c("span",{class:f({[u.classes.lineThrough]:n.options.style.lineThrough})},K(ju),2)],4)],2)],2)],2))}}),Ku="_grid2_7i8m3_1",Ju="_item_7i8m3_1",Qu="_itemLabel_7i8m3_1",ed="_fieldset_7i8m3_1",td="_font_7i8m3_4",nd="_fontFamily_7i8m3_9",ld="_config_7i8m3_16",od="_fontSize_7i8m3_21",sd="_title_7i8m3_25",id="_configs_7i8m3_30",rd="_checkbox_7i8m3_36",ad="_option_7i8m3_51",cd="_line_7i8m3_59",ud="_preview_7i8m3_70",dd="_lineThrough_7i8m3_85",pd={grid2:Ku,item:Ju,itemLabel:Qu,fieldset:ed,font:td,fontFamily:nd,config:ld,fontSize:od,title:sd,configs:id,checkbox:rd,option:ad,line:cd,preview:ud,lineThrough:dd},fd={classes:pd},md=U(Zu,[["__cssModules",fd]]),gd=["placeholder","min","disabled"],hd=V({__name:"InputWithUnit",props:{modelValue:{type:String,default:void 0},options:{type:Array,required:!0},placeholder:{type:String,default:"请输入"},defaultUnit:{type:String,default:null},min:{type:Number,default:0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=e,l=n,o=w(()=>{const a=l.defaultUnit;return l.options.some(d=>d.value===a)?a:l.options[0].value}),s=w({get(){return vt(l.modelValue).num},set(a){if(oo(a)){const m=vt(l.modelValue).unit??o.value;return i(`${a}${m}`)}i()}}),r=w({get(){return vt(l.modelValue).unit??o.value},set(a){const m=vt(l.modelValue).num??l.min;i(`${m}${a}`)}});function i(a=void 0){t("update:modelValue",a)}return(a,d)=>(S(),C("div",{class:f(a.classes.input)},[Le(c("input",{type:"number",step:"any","onUpdate:modelValue":d[0]||(d[0]=m=>s.value=m),class:f({"quickprint-form-control":!0,"quickprint-form-disabled":n.disabled}),placeholder:n.placeholder,min:n.min,disabled:n.disabled},null,10,gd),[[Be,s.value]]),g(b(te),{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=m=>r.value=m),class:f(a.classes.unit),options:n.options,width:"auto",border:"none",disabled:n.disabled},null,8,["modelValue","class","options","disabled"])],2))}}),vd="_input_gtdaq_2",bd="_unit_gtdaq_14",yd={input:vd,unit:bd},_d={classes:yd},ve=U(hd,[["__cssModules",_d]]),Ed="永和九年，岁在癸丑，暮春之初，会于会稽山阴之兰亭，修禊事也。群贤毕至，少长咸集。此地有崇山峻岭，茂林修竹；又有清流激湍，映带左右，引以为流觞曲水，列坐其次。虽无丝竹管弦之盛，一觞一咏，亦足以畅叙幽情。是日也，天朗气清，惠风和畅，仰观宇宙之大，俯察品类之盛，所以游目骋怀，足以极视听之娱，信可乐也。",Td=V({__name:"Paragraph",props:{options:{type:Object,required:!0}},setup(n){const e=n,t=[{label:"倍",value:oe.NONE},{label:"磅",value:oe.PT},{label:"像素",value:oe.PX}],l=[{label:"字符",value:oe.EM},{label:"磅",value:oe.PT},{label:"像素",value:oe.PX}],o=[{label:"毫米",value:oe.MM},{label:"磅",value:oe.PT},{label:"像素",value:oe.PX}],s=w({get(){return e.options.style.textAlign??ht.LEFT},set(v){const E=v===ht.LEFT?void 0:v;e.options.style.textAlign=E}}),r=w({get(){return e.options.style.textAlignLast??Lt.AUTO},set(v){const E=v===Lt.AUTO?void 0:v;e.options.style.textAlignLast=E}}),i=w({get(){return e.options.style.verticalAlign??it.MIDDLE},set(v){const E=v===it.MIDDLE?void 0:v;e.options.style.verticalAlign=E}}),a=_("paddingTop"),d=_("paddingBottom"),m=_("paddingLeft"),p=_("paddingRight"),h=w(()=>{const v=e.options.style,E={};return v.textAlign&&(E.textAlign=v.textAlign),v.textAlignLast&&(E.textAlignLast=v.textAlignLast),v.textIndent&&(E.textIndent=v.textIndent),v.lineHeight&&(E.lineHeight=v.lineHeight),Object.assign(E,u(v.verticalAlign)),E}),y=w(()=>{const v=e.options.style,E={};return E["--openprint-paragraph-preview-padding-top"]=v.paddingTop??"2px",E["--openprint-paragraph-preview-padding-right"]=v.paddingRight??"2px",E["--openprint-paragraph-preview-padding-bottom"]=v.paddingBottom??"2px",E["--openprint-paragraph-preview-padding-left"]=v.paddingLeft??"2px",E});function _(v){return w({get(){return e.options.style[v]},set(E){const N=ce(E)?void 0:E;e.options.style[v]=N}})}function u(v){return v==null?{}:v==it.MIDDLE||v==null?{display:"flex",alignItems:"center"}:v==it.BOTTOM?{display:"flex",alignItems:"end"}:{}}return(v,E)=>(S(),C("div",{class:f(["quickprint-is-scrollable quickprint-is-fill-h",v.classes.paragraph])},[c("div",{class:f(v.classes.textAlign)},[c("div",{class:f(v.classes.configItem)},[c("div",{class:f(v.classes.configItemLabel)},"文本对齐",2),g(b(te),{options:b(gl),modelValue:s.value,"onUpdate:modelValue":E[0]||(E[0]=N=>s.value=N)},null,8,["options","modelValue"])],2),c("div",{class:f(v.classes.alignLast)},[c("div",{class:f(v.classes.configItemLabel)},"最后一行",2),g(b(te),{options:b(qu),modelValue:r.value,"onUpdate:modelValue":E[1]||(E[1]=N=>r.value=N)},null,8,["options","modelValue"])],2)],2),c("div",{class:f(v.classes.configItem)},[c("div",{class:f(v.classes.configItemLabel)},"垂直对齐",2),g(b(te),{options:b(ml),modelValue:i.value,"onUpdate:modelValue":E[2]||(E[2]=N=>i.value=N)},null,8,["options","modelValue"])],2),c("div",{class:f(v.classes.configItem)},[c("div",{class:f(v.classes.configItemLabel)},"首行缩进",2),g(ve,{modelValue:n.options.style.textIndent,"onUpdate:modelValue":E[3]||(E[3]=N=>n.options.style.textIndent=N),options:l,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),c("div",{class:f(v.classes.configItem)},[c("div",{class:f(v.classes.configItemLabel)},"行高",2),g(ve,{modelValue:n.options.style.lineHeight,"onUpdate:modelValue":E[4]||(E[4]=N=>n.options.style.lineHeight=N),options:t,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),c("div",{class:f(v.classes.fieldset)},[E[9]||(E[9]=c("header",null,"内边距",-1)),c("div",{class:f(v.classes.padding)},[c("div",{class:f(v.classes.paddingItem)},[c("label",{class:f(v.classes.paddingItemLabel)},"上边距",2),g(ve,{modelValue:b(a),"onUpdate:modelValue":E[5]||(E[5]=N=>Oe(a)?a.value=N:null),options:o,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),c("div",{class:f(v.classes.paddingItem)},[c("label",{class:f(v.classes.paddingItemLabel)},"下边距",2),g(ve,{modelValue:b(d),"onUpdate:modelValue":E[6]||(E[6]=N=>Oe(d)?d.value=N:null),options:o,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),c("div",{class:f(v.classes.paddingItem)},[c("label",{class:f(v.classes.paddingItemLabel)},"左边距",2),g(ve,{modelValue:b(m),"onUpdate:modelValue":E[7]||(E[7]=N=>Oe(m)?m.value=N:null),options:o,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),c("div",{class:f(v.classes.paddingItem)},[c("label",{class:f(v.classes.paddingItemLabel)},"右边距",2),g(ve,{modelValue:b(p),"onUpdate:modelValue":E[8]||(E[8]=N=>Oe(p)?p.value=N:null),options:o,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2)],2)],2),c("div",{class:f(v.classes.fieldset)},[E[10]||(E[10]=c("header",null,"预览",-1)),c("div",{class:f(v.classes.preview),style:j(h.value)},[c("div",{style:j(y.value),class:f(v.classes.previewText)},[ue(K(Ed)+" "),c("div",{class:f(v.classes.paddingPreview)},null,2)],6)],6)],2)],2))}}),Sd="_grid2_6gzjg_1",Rd="_item_6gzjg_1",wd="_itemLabel_6gzjg_1",kd="_fieldset_6gzjg_1",Ld="_paragraph_6gzjg_4",Cd="_preview_6gzjg_9",Id="_textAlign_6gzjg_25 quickprint-is-row",Od="_configItem_6gzjg_30 quickprint-is-row",Nd="_alignLast_6gzjg_35 quickprint-is-row",Dd="_configItemLabel_6gzjg_45",Md="_padding_6gzjg_50",xd="_paddingItem_6gzjg_57",Ad="_paddingItemLabel_6gzjg_63",qd="_previewText_6gzjg_68",$d="_paddingPreview_6gzjg_77",Bd={grid2:Sd,item:Rd,itemLabel:wd,fieldset:kd,paragraph:Ld,preview:Cd,textAlign:Id,configItem:Od,alignLast:Nd,configItemLabel:Dd,padding:Md,paddingItem:xd,paddingItemLabel:Ad,previewText:qd,paddingPreview:$d},Pd={classes:Bd},Vd=U(Td,[["__cssModules",Pd]]),zd=["title","onClick"],Fd={key:0},Ud=V({__name:"Border",props:{options:{type:Object,required:!0}},setup(n){const e=De("classes"),t=n,l=[{label:"像素",value:oe.PX},{label:"毫米",value:oe.MM},{label:"磅",value:oe.PT}],o={BORDER_TOP:0,BORDER_RIGHT:1,BORDER_BOTTOM:2,BORDER_LEFT:3,RADIUS_TOP_LEFT:4,RADIUS_TOP_RIGHT:5,RADIUS_BOTTOM_LEFT:6,RADIUS_BOTTOM_RIGHT:7},s={[o.BORDER_TOP]:"上边框",[o.BORDER_RIGHT]:"右边框",[o.BORDER_BOTTOM]:"下边框",[o.BORDER_LEFT]:"左边框",[o.RADIUS_TOP_LEFT]:"左上圆角",[o.RADIUS_TOP_RIGHT]:"右上圆角",[o.RADIUS_BOTTOM_LEFT]:"左下圆角",[o.RADIUS_BOTTOM_RIGHT]:"右下圆角"},r=he(),i=w(()=>{const T=r.value;return T==null?"全部边框":s[T]}),a=w(()=>{const T=r.value;return T==null?!0:T<=o.BORDER_LEFT}),d=w(()=>{const T=r.value;return T==null?!0:T>=o.RADIUS_TOP_LEFT}),m=w(()=>{const T=r.value;return{[e.box]:!0,[e.highlightTopLeft]:T==o.RADIUS_TOP_LEFT,[e.highlightTopRight]:T==o.RADIUS_TOP_RIGHT,[e.highlightBottomLeft]:T==o.RADIUS_BOTTOM_LEFT,[e.highlightBottomRight]:T==o.RADIUS_BOTTOM_RIGHT}}),p=w(()=>({...N(o.BORDER_TOP),...N(o.BORDER_RIGHT),...N(o.BORDER_BOTTOM),...N(o.BORDER_LEFT),...E()})),h=w({get(){var z;const T=t.options.style,R=r.value;if(R==null||R>o.BORDER_LEFT)return T.borderWidth;const k=(z=St(R))==null?void 0:z.width;if(k!=null)return Reflect.get(T,k)},set(T){const R=t.options.style,k=r.value,z=T??void 0;if(k==null||k>o.BORDER_LEFT){R.borderWidth=z;return}const P=St(k);P!=null&&Reflect.set(R,P.width,z)}}),y=w({get(){var z;const T=t.options.style,R=r.value;if(R==null||R>o.BORDER_LEFT)return T.borderStyle??Q.NONE;const k=(z=St(R))==null?void 0:z.style;return k==null?Q.NONE:Reflect.get(T,k)??Q.NONE},set(T){const R=t.options.style,k=r.value,z=T==null||T==Q.NONE?void 0:T;if(k==null||k>o.BORDER_LEFT){R.borderStyle=z;return}const P=St(k);P!=null&&Reflect.set(R,P.style,z)}}),_=w({get(){var z;const T=t.options.style,R=r.value;if(R==null||R>o.BORDER_LEFT)return T.borderColor;const k=(z=St(R))==null?void 0:z.color;return k==null?ze.INHERIT:Reflect.get(T,k)??ze.INHERIT},set(T){const R=t.options.style,k=r.value,z=T??void 0;if(k==null||k>o.BORDER_LEFT){R.borderColor=z;return}const P=St(k);P!=null&&Reflect.set(R,P.color,z)}}),u=w({get(){const T=t.options.style,R=r.value;if(R==null||R<=o.BORDER_LEFT)return T.borderRadius;const k=v(R);if(k!=null)return Reflect.get(T,k)},set(T){const R=t.options.style,k=r.value,z=T??void 0;if(k==null||k<=o.BORDER_LEFT){R.borderRadius=z;return}const P=v(k);P!=null&&Reflect.set(R,P,z)}});function v(T){switch(T){case o.RADIUS_TOP_LEFT:return"borderTopLeftRadius";case o.RADIUS_TOP_RIGHT:return"borderTopRightRadius";case o.RADIUS_BOTTOM_RIGHT:return"borderBottomRightRadius";case o.RADIUS_BOTTOM_LEFT:return"borderBottomLeftRadius"}}function E(){const T=t.options.style;return{borderTopLeftRadius:T.borderTopLeftRadius??T.borderRadius,borderTopRightRadius:T.borderTopRightRadius??T.borderRadius,borderBottomRightRadius:T.borderBottomRightRadius??T.borderRadius,borderBottomLeftRadius:T.borderBottomLeftRadius??T.borderRadius}}function N(T){const R=t.options.style;if(T==null||T>o.BORDER_LEFT){const P=R.borderStyle;return P==null||P==Q.NONE?{borderStyle:Q.NONE}:{}}const k=St(T);if(k==null)return{};const z=Reflect.get(R,k.style)??Reflect.get(R,"borderStyle");return z==null||z===Q.NONE?{}:{[k.style]:z??R.borderStyle,[k.width]:Reflect.get(R,k.width)??R.borderWidth,[k.color]:Reflect.get(R,k.color)??R.borderColor??ze.BLACK}}function B(T){y.value=T}function q(T){r.value=T===r.value?void 0:T}function I(){const T=t.options.style;T.borderStyle=void 0,T.borderColor=void 0,T.borderWidth=void 0,T.borderTopStyle=void 0,T.borderTopColor=void 0,T.borderTopWidth=void 0,T.borderRightStyle=void 0,T.borderRightColor=void 0,T.borderRightWidth=void 0,T.borderBottomStyle=void 0,T.borderBottomColor=void 0,T.borderBottomWidth=void 0,T.borderLeftStyle=void 0,T.borderLeftColor=void 0,T.borderLeftWidth=void 0}function L(){const T=t.options.style;T.borderTopStyle==Q.NONE&&(T.borderTopStyle=void 0),T.borderRightStyle==Q.NONE&&(T.borderRightStyle=void 0),T.borderBottomStyle==Q.NONE&&(T.borderBottomStyle=void 0),T.borderLeftStyle==Q.NONE&&(T.borderLeftStyle=void 0),T.borderStyle=Q.SOLID}function O(){const T=t.options.style;T.borderStyle=void 0,T.borderRightStyle=void 0,T.borderRightColor=void 0,T.borderRightWidth=void 0,T.borderLeftStyle=void 0,T.borderLeftColor=void 0,T.borderLeftWidth=void 0,T.borderTopStyle=Q.SOLID,T.borderBottomStyle=Q.SOLID}function $(T){const R=t.options.style,k=v(T)??"borderRadius",z=Reflect.get(R,k);return Ne(z)}function M(){const T=t.options.style;return Ne(T.borderRadius)??0}function D(T){const R=Math.min(Math.max(12,$(T)??M(),A(T)),36),k={width:R+"px",height:R+"px"};return r.value==T&&(k.backgroundColor="var(--radius-highlight-background-color)"),T==o.RADIUS_TOP_LEFT&&(k.top="-6px",k.left="-6px"),T==o.RADIUS_TOP_RIGHT&&(k.top="-6px",k.right="-6px"),T==o.RADIUS_BOTTOM_RIGHT&&(k.bottom="-6px",k.right="-6px"),T==o.RADIUS_BOTTOM_LEFT&&(k.bottom="-6px",k.left="-6px"),k}function A(T){const R=t.options.style;switch(T){case o.RADIUS_TOP_LEFT:{const k=R.borderTopStyle==null||R.borderTopStyle==Q.NONE?0:Ne(R.borderTopWidth),z=R.borderLeftStyle==null||R.borderLeftStyle==Q.NONE?0:Ne(R.borderLeftWidth);return Math.max(k??0,z??0)}case o.RADIUS_TOP_RIGHT:{const k=R.borderTopStyle==null||R.borderTopStyle==Q.NONE?0:Ne(R.borderTopWidth),z=R.borderRightStyle==null||R.borderRightStyle==Q.NONE?0:Ne(R.borderRightWidth);return Math.max(k??0,z??0)}case o.RADIUS_BOTTOM_RIGHT:{const k=R.borderBottomStyle==null||R.borderBottomStyle==Q.NONE?0:Ne(R.borderBottomWidth),z=R.borderRightStyle==null||R.borderRightStyle==Q.NONE?0:Ne(R.borderRightWidth);return Math.max(k??0,z??0)}case o.RADIUS_BOTTOM_LEFT:{const k=R.borderBottomStyle==null||R.borderBottomStyle==Q.NONE?0:Ne(R.borderBottomWidth),z=R.borderLeftStyle==null||R.borderLeftStyle==Q.NONE?0:Ne(R.borderLeftWidth);return Math.max(k??0,z??0)}default:return 0}}function x(T){const R=t.options.style;switch(T){case o.BORDER_TOP:{const k=Math.max(6,Math.min($(o.RADIUS_TOP_LEFT)??M()-6,32)),z=Math.max(6,Math.min($(o.RADIUS_TOP_RIGHT)??M()-6,32)),P={left:k+"px",right:z+"px",top:"-6px",height:"12px"};if(r.value===T&&(P.backgroundColor="var(--border-highlight-background-color)"),R.borderTopStyle==null||R.borderTopStyle==Q.NONE)return P;const le=Ne(R.borderTopWidth);return le==null||(P.height=12+le+"px",P.top=-6-le+"px"),P}case o.BORDER_BOTTOM:{const k=Math.max(6,Math.min($(o.RADIUS_BOTTOM_LEFT)??M()-6,32)),z=Math.max(6,Math.min($(o.RADIUS_BOTTOM_RIGHT)??M()-6,32)),P={left:k+"px",right:z+"px",bottom:"-6px",height:"12px"};if(r.value===T&&(P.backgroundColor="var(--border-highlight-background-color)"),R.borderBottomStyle==null||R.borderBottomStyle==Q.NONE)return P;const le=Ne(R.borderBottomWidth);return le==null||(P.height=12+le+"px",P.bottom=-6-le+"px"),P}case o.BORDER_LEFT:{const k=Math.max(6,Math.min($(o.RADIUS_TOP_LEFT)??M()-6,32)),z=Math.max(6,Math.min($(o.RADIUS_BOTTOM_LEFT)??M()-6,32)),P={top:k+"px",bottom:z+"px",left:"-6px",width:"12px"};if(r.value===T&&(P.backgroundColor="var(--border-highlight-background-color)"),R.borderLeftStyle==null||R.borderLeftStyle==Q.NONE)return P;const le=Ne(R.borderLeftWidth);return le==null||(P.width=12+le+"px",P.left=-6-le+"px"),P}case o.BORDER_RIGHT:{const k=Math.max(6,Math.min($(o.RADIUS_TOP_RIGHT)??M()-6,32)),z=Math.max(6,Math.min($(o.RADIUS_BOTTOM_RIGHT)??M()-6,32)),P={top:k+"px",bottom:z+"px",right:"-6px",width:"12px"};if(r.value===T&&(P.backgroundColor="var(--border-highlight-background-color)"),R.borderRightStyle==null||R.borderRightStyle==Q.NONE)return P;const le=Ne(R.borderRightWidth);return le==null||(P.width=12+le+"px",P.right=-6-le+"px"),P}}}return(T,R)=>(S(),C("div",{class:f(["quickprint-is-scrollable quickprint-is-fill-h",b(e).settings])},[c("div",{class:f(b(e).presets)},[R[15]||(R[15]=c("span",null,"预设",-1)),c("button",{type:"button",class:"quickprint-text-btn",onClick:I},[c("div",{class:f(b(e).noBorder)},null,2),R[12]||(R[12]=c("span",null,"无边框",-1))]),c("button",{type:"button",class:"quickprint-text-btn",onClick:L},[c("div",{class:f(b(e).outerBorder)},null,2),R[13]||(R[13]=c("span",null,"外部边框",-1))]),c("button",{type:"button",class:"quickprint-text-btn",onClick:O},[c("div",{class:f(b(e).topBottomBorder)},null,2),R[14]||(R[14]=c("span",null,"上下边框",-1))])],2),c("div",{class:f(m.value),style:j(p.value),onClick:R[8]||(R[8]=re(()=>{},["stop"]))},[c("div",{class:f(b(e).borderRadius),style:j(D(o.RADIUS_TOP_LEFT)),onClick:R[0]||(R[0]=k=>q(o.RADIUS_TOP_LEFT))},null,6),c("div",{class:f(b(e).borderRadius),style:j(D(o.RADIUS_TOP_RIGHT)),onClick:R[1]||(R[1]=k=>q(o.RADIUS_TOP_RIGHT))},null,6),c("div",{class:f(b(e).borderRadius),style:j(D(o.RADIUS_BOTTOM_LEFT)),onClick:R[2]||(R[2]=k=>q(o.RADIUS_BOTTOM_LEFT))},null,6),c("div",{class:f(b(e).borderRadius),style:j(D(o.RADIUS_BOTTOM_RIGHT)),onClick:R[3]||(R[3]=k=>q(o.RADIUS_BOTTOM_RIGHT))},null,6),c("div",{class:f(b(e).border),style:j(x(o.BORDER_TOP)),onClick:R[4]||(R[4]=k=>q(o.BORDER_TOP))},null,6),c("div",{class:f(b(e).border),style:j(x(o.BORDER_BOTTOM)),onClick:R[5]||(R[5]=k=>q(o.BORDER_BOTTOM))},null,6),c("div",{class:f(b(e).border),style:j(x(o.BORDER_RIGHT)),onClick:R[6]||(R[6]=k=>q(o.BORDER_RIGHT))},null,6),c("div",{class:f(b(e).border),style:j(x(o.BORDER_LEFT)),onClick:R[7]||(R[7]=k=>q(o.BORDER_LEFT))},null,6),c("div",{class:f(b(e).borderTitle)},K(i.value),3)],6),c("div",{class:f(b(e).borderSetting)},[c("div",{class:f(b(e).borderStyle)},[c("label",{class:f(b(e).borderStyleTitle)},"线型",2),c("div",{class:f(["quickprint-is-fill-h quickprint-is-scrollable",b(e).borderStyleOptions])},[(S(!0),C(ne,null,fe(b(Au),k=>(S(),C("div",{key:k.value,title:k.label,class:f({[b(e).option]:!0,[b(e).selected]:k.value===y.value}),onClick:z=>B(k.value)},[k.value==b(Q).NONE?(S(),C("div",Fd,K(k.label),1)):(S(),C("div",{key:1,class:f(b(e).line),style:j({textDecorationStyle:k.value})},"--",6))],10,zd))),128))],2)],2),c("div",{class:f(b(e).borderSettingRight)},[c("div",{class:f(b(e).borderItem)},[c("label",{class:f(b(e).borderItemLabel)},"颜色",2),g(b(Xt),{modelValue:_.value,"onUpdate:modelValue":R[9]||(R[9]=k=>_.value=k),disabled:!a.value},null,8,["modelValue","disabled"])],2),c("div",{class:f(b(e).borderItem)},[c("label",{class:f(b(e).borderItemLabel)},"宽度",2),g(ve,{modelValue:h.value,"onUpdate:modelValue":R[10]||(R[10]=k=>h.value=k),options:l,disabled:!a.value},null,8,["modelValue","disabled"])],2),c("div",{class:f(b(e).borderItem)},[c("label",{class:f(b(e).borderItemLabel)},"圆角",2),g(ve,{modelValue:u.value,"onUpdate:modelValue":R[11]||(R[11]=k=>u.value=k),options:l,disabled:!d.value},null,8,["modelValue","disabled"])],2)],2)],2)],2))}}),Hd="_settings_12vtg_2",Gd="_box_12vtg_8",Wd="_border_12vtg_19",Xd="_borderTitle_12vtg_30",Yd="_borderRadius_12vtg_39",jd="_borderItem_12vtg_50",Zd="_borderItemLabel_12vtg_59",Kd="_borderSetting_12vtg_65",Jd="_borderSettingRight_12vtg_70",Qd="_borderStyle_12vtg_76",ep="_borderStyleOptions_12vtg_81",tp="_borderStyleTitle_12vtg_88",np="_option_12vtg_95",lp="_line_12vtg_114",op="_selected_12vtg_125",sp="_presets_12vtg_131",ip="_noBorder_12vtg_142",rp="_outerBorder_12vtg_143",ap="_topBottomBorder_12vtg_144",cp={settings:Hd,box:Gd,border:Wd,borderTitle:Xd,borderRadius:Yd,borderItem:jd,borderItemLabel:Zd,borderSetting:Kd,borderSettingRight:Jd,borderStyle:Qd,borderStyleOptions:ep,borderStyleTitle:tp,option:np,line:lp,selected:op,presets:sp,noBorder:ip,outerBorder:rp,topBottomBorder:ap},up={classes:cp},dp=U(Ud,[["__cssModules",up]]),pp=V({__name:"QRCode",props:{options:{type:Object,required:!0}},setup(n){const e=n,t=[{label:"毫米",value:oe.MM},{label:"磅",value:oe.PT},{label:"像素",value:oe.PX}],l=a("paddingTop"),o=a("paddingBottom"),s=a("paddingLeft"),r=a("paddingRight"),i=w({get(){var d;return(d=e.options.qrcode)==null?void 0:d.barcolor},set(d){e.options.qrcode==null&&(e.options.qrcode={}),e.options.qrcode.barcolor=d}});function a(d){return w({get(){return e.options.style[d]},set(m){const p=ce(m)?void 0:m;e.options.style[d]=p}})}return(d,m)=>(S(),C("div",{class:f(["quickprint-is-scrollable quickprint-is-fill-h",d.classes.qrcode])},[c("div",{class:f(d.classes.grid2)},[c("div",{class:f(d.classes.item)},[c("label",{class:f(d.classes.itemLabel)},"码颜色",2),g(b(Xt),{modelValue:i.value,"onUpdate:modelValue":m[0]||(m[0]=p=>i.value=p),class:"quickprint-is-fill-w"},null,8,["modelValue"])],2)],2),c("div",{class:f(d.classes.fieldset)},[m[5]||(m[5]=c("header",null,"内边距",-1)),c("div",{class:f(d.classes.padding)},[c("div",{class:f(d.classes.paddingItem)},[c("label",{class:f(d.classes.paddingItemLabel)},"上边距",2),g(ve,{modelValue:b(l),"onUpdate:modelValue":m[1]||(m[1]=p=>Oe(l)?l.value=p:null),options:t,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),c("div",{class:f(d.classes.paddingItem)},[c("label",{class:f(d.classes.paddingItemLabel)},"下边距",2),g(ve,{modelValue:b(o),"onUpdate:modelValue":m[2]||(m[2]=p=>Oe(o)?o.value=p:null),options:t,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),c("div",{class:f(d.classes.paddingItem)},[c("label",{class:f(d.classes.paddingItemLabel)},"左边距",2),g(ve,{modelValue:b(s),"onUpdate:modelValue":m[3]||(m[3]=p=>Oe(s)?s.value=p:null),options:t,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),c("div",{class:f(d.classes.paddingItem)},[c("label",{class:f(d.classes.paddingItemLabel)},"右边距",2),g(ve,{modelValue:b(r),"onUpdate:modelValue":m[4]||(m[4]=p=>Oe(r)?r.value=p:null),options:t,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2)],2)],2)],2))}}),fp="_grid2_59uck_1",mp="_item_59uck_1",gp="_itemLabel_59uck_1",hp="_fieldset_59uck_1",vp="_qrcode_59uck_4",bp="_padding_59uck_9",yp="_paddingItem_59uck_16",_p="_paddingItemLabel_59uck_22",Ep={grid2:fp,item:mp,itemLabel:gp,fieldset:hp,qrcode:vp,padding:bp,paddingItem:yp,paddingItemLabel:_p},Tp={classes:Ep},Sp=U(pp,[["__cssModules",Tp]]),Rp=V({__name:"Barcode",props:{options:{type:Object,required:!0}},setup(n){const e=n,t=[{label:"毫米",value:oe.MM},{label:"磅",value:oe.PT},{label:"像素",value:oe.PX}],l=m("paddingTop"),o=m("paddingBottom"),s=m("paddingLeft"),r=m("paddingRight"),i=w({get(){var p;return(p=e.options.qrcode)==null?void 0:p.barcolor},set(p){e.options.qrcode==null&&(e.options.qrcode={}),e.options.qrcode.barcolor=p}}),a=w({get(){var p;return(p=e.options.barcode)==null?void 0:p.width},set(p){e.options.barcode==null&&(e.options.barcode={}),e.options.barcode.width=p}}),d=w({get(){var p;return(p=e.options.barcode)==null?void 0:p.height},set(p){e.options.barcode==null&&(e.options.barcode={}),e.options.barcode.height=p}});function m(p){return w({get(){return e.options.style[p]},set(h){const y=ce(h)?void 0:h;e.options.style[p]=y}})}return(p,h)=>(S(),C("div",{class:f(["quickprint-is-scrollable quickprint-is-fill-h",p.classes.qrcode])},[c("div",{class:f(p.classes.grid2)},[c("div",{class:f(p.classes.item)},[c("label",{class:f(p.classes.itemLabel)},"宽度",2),g(ve,{modelValue:a.value,"onUpdate:modelValue":h[0]||(h[0]=y=>a.value=y),options:t,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),c("div",{class:f(p.classes.item)},[c("label",{class:f(p.classes.itemLabel)},"高度",2),g(ve,{modelValue:d.value,"onUpdate:modelValue":h[1]||(h[1]=y=>d.value=y),options:t,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),c("div",{class:f(p.classes.item)},[c("label",{class:f(p.classes.itemLabel)},"码颜色",2),g(b(Xt),{modelValue:i.value,"onUpdate:modelValue":h[2]||(h[2]=y=>i.value=y),class:"quickprint-is-fill-w"},null,8,["modelValue"])],2)],2),c("div",{class:f(p.classes.fieldset)},[h[7]||(h[7]=c("header",null,"内边距",-1)),c("div",{class:f(p.classes.padding)},[c("div",{class:f(p.classes.paddingItem)},[c("label",{class:f(p.classes.paddingItemLabel)},"上边距",2),g(ve,{modelValue:b(l),"onUpdate:modelValue":h[3]||(h[3]=y=>Oe(l)?l.value=y:null),options:t,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),c("div",{class:f(p.classes.paddingItem)},[c("label",{class:f(p.classes.paddingItemLabel)},"下边距",2),g(ve,{modelValue:b(o),"onUpdate:modelValue":h[4]||(h[4]=y=>Oe(o)?o.value=y:null),options:t,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),c("div",{class:f(p.classes.paddingItem)},[c("label",{class:f(p.classes.paddingItemLabel)},"左边距",2),g(ve,{modelValue:b(s),"onUpdate:modelValue":h[5]||(h[5]=y=>Oe(s)?s.value=y:null),options:t,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2),c("div",{class:f(p.classes.paddingItem)},[c("label",{class:f(p.classes.paddingItemLabel)},"右边距",2),g(ve,{modelValue:b(r),"onUpdate:modelValue":h[6]||(h[6]=y=>Oe(r)?r.value=y:null),options:t,class:"quickprint-is-fill-w"},null,8,["modelValue"])],2)],2)],2)],2))}}),wp="_grid2_59uck_1",kp="_item_59uck_1",Lp="_itemLabel_59uck_1",Cp="_fieldset_59uck_1",Ip="_qrcode_59uck_4",Op="_padding_59uck_9",Np="_paddingItem_59uck_16",Dp="_paddingItemLabel_59uck_22",Mp={grid2:wp,item:kp,itemLabel:Lp,fieldset:Cp,qrcode:Ip,padding:Op,paddingItem:Np,paddingItemLabel:Dp},xp={classes:Mp},Ap=U(Rp,[["__cssModules",xp]]),qp=V({__name:"index",props:{options:{type:Object,required:!0},active:{type:String,default:null}},setup(n){const e=n,t=Qe();function l(){t==null||t.confirm(e.options)}function o(){t==null||t.cancel()}return(s,r)=>(S(),C("div",{class:f(s.classes.setting)},[n.active==="font"?(S(),ee(md,{key:0,options:e.options},null,8,["options"])):W("",!0),n.active==="paragraph"?(S(),ee(Vd,{key:1,options:e.options},null,8,["options"])):W("",!0),n.active==="border"?(S(),ee(dp,{key:2,options:e.options},null,8,["options"])):W("",!0),n.active=="qrcode"?(S(),ee(Sp,{key:3,options:e.options},null,8,["options"])):W("",!0),n.active=="barcode"?(S(),ee(Ap,{key:4,options:e.options},null,8,["options"])):W("",!0),c("div",{class:f(s.classes.footer)},[c("button",{type:"button",class:"quickprint-text-btn",onClick:o},"取消"),c("button",{type:"button",class:"quickprint-text-btn",onClick:l},"确定")],2)],2))}}),$p="_setting_1v5ya_2",Bp="_footer_1v5ya_9",Pp={setting:$p,footer:Bp},Vp={classes:Pp},tn=U(qp,[["__cssModules",Vp]]),zp=V({__name:"Footer",emits:["confirm"],setup(n,{emit:e}){const t=e,l=Qe();function o(){t("confirm",function(i){l==null||l.confirm(i)})}function s(){l==null||l.cancel()}return(r,i)=>(S(),C("div",{class:f(r.classes.footer)},[c("button",{type:"button",class:"quickprint-text-btn",onClick:s},"取消"),c("button",{type:"button",class:"quickprint-text-btn",onClick:o},"确定")],2))}}),Fp="_footer_1ux18_2",Up={footer:Fp},Hp={classes:Up},zo=U(zp,[["__cssModules",Hp]]),Gp=V({__name:"Diagonal",props:{options:{type:Object,required:!0}},setup(n){const e=n,t=w({get(){return e.options.diagonalMode??Me.NONE},set(i){const a=i==Me.NONE?void 0:i;e.options.diagonalMode=a}}),l=w({get(){var i,a;return(a=(i=e.options.diagonalLabels)==null?void 0:i[0])==null?void 0:a.text},set(i){const a=e.options;a.diagonalLabels==null&&(a.diagonalLabels=[]),a.diagonalLabels[0]==null&&(a.diagonalLabels[0]={}),a.diagonalLabels[0].text=i}}),o=w({get(){var i,a;return(a=(i=e.options.diagonalLabels)==null?void 0:i[1])==null?void 0:a.text},set(i){const a=e.options;a.diagonalLabels==null&&(a.diagonalLabels=[]),a.diagonalLabels[1]==null&&(a.diagonalLabels[1]={}),a.diagonalLabels[1].text=i}});function s(i){t.value=i}function r(i){i(e.options)}return(i,a)=>(S(),C("div",{class:f(i.classes.setting)},[c("div",{class:f(i.classes.main)},[c("div",{class:f(["quickprint-is-row",i.classes.diagonal])},[c("div",{class:f({[i.classes.cell]:!0,[i.classes.selected]:t.value===b(Me).NONE}),onClick:a[0]||(a[0]=d=>s(b(Me).NONE))},null,2),c("div",{class:f({[i.classes.cell]:!0,[i.classes.selected]:t.value===b(Me).TL_BR}),onClick:a[1]||(a[1]=d=>s(b(Me).TL_BR))},[g(fl,{mode:b(Me).TL_BR,labels:n.options.diagonalLabels},null,8,["mode","labels"])],2),c("div",{class:f({[i.classes.cell]:!0,[i.classes.selected]:t.value===b(Me).TR_BL}),onClick:a[2]||(a[2]=d=>s(b(Me).TR_BL))},[g(fl,{mode:b(Me).TR_BL,labels:n.options.diagonalLabels},null,8,["mode","labels"])],2)],2),c("div",{class:f(i.classes.label)},[c("div",{class:f(i.classes.text)},"顶部文本",2),Le(c("input",{"onUpdate:modelValue":a[3]||(a[3]=d=>l.value=d),class:"quickprint-form-control quickprint-is-fill-w",placeholder:"请输入"},null,512),[[Be,l.value]])],2),c("div",{class:f(i.classes.label)},[c("div",{class:f(i.classes.text)},"底部文本",2),Le(c("input",{"onUpdate:modelValue":a[4]||(a[4]=d=>o.value=d),class:"quickprint-form-control quickprint-is-fill-w",placeholder:"请输入"},null,512),[[Be,o.value]])],2)],2),g(zo,{onConfirm:r})],2))}}),Wp="_setting_1u7dq_2",Xp="_main_1u7dq_6",Yp="_cell_1u7dq_10",jp="_diagonal_1u7dq_25",Zp="_selected_1u7dq_29",Kp="_label_1u7dq_34",Jp="_text_1u7dq_41",Qp={setting:Wp,main:Xp,cell:Yp,diagonal:jp,selected:Zp,label:Kp,text:Jp},ef={classes:Qp},tf=U(Gp,[["__cssModules",ef]]);function Fo(n){return xe({style:Pn(n.style??{})})}function nf(n,e){n.style=Object.assign({},n.style,e.style)}function Uo(n){if(Array.isArray(n)&&n.length>1)return xe({style:{}});const e=Array.isArray(n)?n[0]:n;return xe({width:e.width,height:e.height,diagonalMode:e.attributes.diagonalMode,diagonalLabels:Pn(e.attributes.diagonalLabels??[]),style:Pn(e.style??{})})}const lf=Ce(function(n){return je("表格",(e,t)=>g(tn,{options:Fo(n),active:t},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"字体",name:"font",active:!0},{label:"段落",name:"paragraph"},{label:"边框",name:"border"}]}).promisify().then(e=>nf(n,e)).catch(ke)}),of=Ce(function(n){return je("表格行",(e,t)=>g(tn,{options:Fo(n),active:t},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"字体",name:"font",active:!0},{label:"段落",name:"paragraph"},{label:"边框",name:"border"}]}).promisify().catch(ke)}),sf=Ce(function(n){return je("单元格",(e,t)=>g(tn,{options:Uo(n),active:t},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"字体",name:"font",active:!0},{label:"段落",name:"paragraph"},{label:"边框",name:"border"}]}).promisify().catch(ke)}),rf=Ce(function(n){return ut("斜线表头",g(tf,{options:Uo(n)},null),{width:"360px",top:"15vh",resizeMode:Ht.DISABLED}).promisify().catch(ke)}),af={style:{overflow:"hidden"}},cf=V({__name:"TextDirection",props:{options:{type:Object,required:!0}},setup(n){const e=n,t=w(()=>e.options.style.writingMode??Fe.HORIZONTAL_TB);function l(s){e.options.style.writingMode=s===Fe.HORIZONTAL_TB?void 0:s}function o(s){s(e.options)}return(s,r)=>(S(),C("div",af,[c("div",{class:f(s.classes.textDirection)},[c("div",{class:f(s.classes.grid)},[c("div",{title:"水平排版，从左到右",class:f({[s.classes.horizontalTb]:!0,[s.classes.selected]:t.value===b(Fe).HORIZONTAL_TB}),onClick:r[0]||(r[0]=i=>l(b(Fe).HORIZONTAL_TB))},r[5]||(r[5]=[c("p",null,"文字abc",-1)]),2),c("div",{title:"垂直排版，从上到下，从左到右",class:f({[s.classes.verticalLr]:!0,[s.classes.selected]:t.value===b(Fe).VERTICAL_LR}),onClick:r[1]||(r[1]=i=>l(b(Fe).VERTICAL_LR))},r[6]||(r[6]=[c("p",null,"文字abc文字abc",-1),c("p",null,"文字abc→",-1)]),2),c("div",{title:"垂直排版，从上到下，从右到左",class:f({[s.classes.verticalRl]:!0,[s.classes.selected]:t.value===b(Fe).VERTICAL_RL}),onClick:r[2]||(r[2]=i=>l(b(Fe).VERTICAL_RL))},r[7]||(r[7]=[c("p",null,"文字abc文字abc",-1),c("p",null,"文字abc→",-1)]),2),c("div",{title:"垂直排版，从上到下，从右到左",class:f({[s.classes.sidewaysRl]:!0,[s.classes.selected]:t.value===b(Fe).SIDEWAYS_RL}),onClick:r[3]||(r[3]=i=>l(b(Fe).SIDEWAYS_RL))},r[8]||(r[8]=[c("p",null,"文字abc文字abc",-1),c("p",null,"文字abc→",-1)]),2),c("div",{title:"垂直排版，从下到上，从左到右",class:f({[s.classes.sidewaysLr]:!0,[s.classes.selected]:t.value===b(Fe).SIDEWAYS_LR}),onClick:r[4]||(r[4]=i=>l(b(Fe).SIDEWAYS_LR))},r[9]||(r[9]=[c("p",null,"文字abc文字abc",-1),c("p",null,"文字abc→",-1)]),2)],2),c("div",{class:f(s.classes.preview)},r[10]||(r[10]=[c("p",null,"文字abc文字abc",-1),c("p",null,"文字abc文字abc",-1),c("p",null,"文字abc→",-1)]),2)],2),g(zo,{onConfirm:o})]))}}),uf="_textDirection_qsmbx_2",df="_grid_qsmbx_16",pf="_item_qsmbx_24",ff="_horizontalTb_qsmbx_36 _item_qsmbx_24",mf="_verticalLr_qsmbx_45 _item_qsmbx_24",gf="_verticalRl_qsmbx_54 _item_qsmbx_24",hf="_sidewaysRl_qsmbx_63 _item_qsmbx_24",vf="_sidewaysLr_qsmbx_72 _item_qsmbx_24",bf="_preview_qsmbx_81",yf="_selected_qsmbx_89",_f={textDirection:uf,grid:df,item:pf,horizontalTb:ff,verticalLr:mf,verticalRl:gf,sidewaysRl:hf,sidewaysLr:vf,preview:bf,selected:yf},Ef={classes:_f},Tf=U(cf,[["__cssModules",Ef]]);function Zn(n){const e=Array.isArray(n)?n:[n];if(e.length!==1)return xe({style:{}});const t=e[0],l={style:Pn(t.style??{})};return t.type===G.QRCODE&&(l.qrcode={barcolor:t.attributes.barcolor}),t.type===G.BARCODE&&(l.barcode={barcolor:t.attributes.barcolor,scale:t.attributes.scale,width:t.attributes.width,height:t.attributes.height}),xe(l)}const Sf=Ce(function(n){return je("元素属性",(e,t)=>g(tn,{options:Zn(n),active:t},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"字体",name:"font",active:!0},{label:"段落",name:"paragraph"},{label:"边框",name:"border"}]}).promisify()}),Ho=Ce(function(n){return ut("文字方向",g(Tf,{options:Zn(n)},null),{width:"424px",height:"285px",top:"15vh",resizeMode:Ht.DISABLED}).promisify()}),Rf=Ce(function(n){return je("二维码属性",(e,t)=>g(tn,{options:Zn(n),active:t},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"属性",name:"qrcode",active:!0},{label:"边框",name:"border"}]}).promisify()}),wf=Ce(function(n){return je("条形码属性",(e,t)=>g(tn,{options:Zn(n),active:t},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"属性",name:"barcode",active:!0},{label:"边框",name:"border"}]}).promisify()});function kf(n,e,t){const l={menus:[...Go(e),{type:"menu",label:"行设置",icon:"icon-table-row",handler(){const o=e.getSelectedElements(),s=o[0];s!=null&&of(s).then(r=>{if(r!=null)for(const i of o)i.style=Object.assign({},i.style,r.style)})}},{type:"divider"},Wo(e),Xo(e),{type:"divider"},Yo(e),qo(e.getDesignApi(),e.getTable())]};mt.open(n.clientX,n.clientY,l)}function Lf(n,e){const l=e.getDesignApi().getSelectedElements();if(e.isSelectTableRow())return kf(n,e,l[0]);const o=e.getSelectedCells(),s={menus:[...Go(e),{type:"menu",label:"单元格设置",icon:"icon-border",handler(){sf(o).then(i=>{if(i!=null)for(const a of o)a.style=Object.assign({},a.style,i.style)})}},{type:"menu",label:"斜线表头",icon:"icon-diagonal",handler(){rf(o).then(i=>{if(i!=null)for(const a of o)i.diagonalMode&&(a.attributes.diagonalMode=i.diagonalMode),i.diagonalLabels&&(a.attributes.diagonalLabels=i.diagonalLabels)})}},{type:"menu",label:"文字方向",icon:"icon-text-direction",handler(){Ho(o)}},{type:"divider"}]},r=[];return o.length>=2&&r.push({type:"menu",label:"合并单元格",icon:"icon-merge-cells",handler:e.mergeCells,disabled(){const i=o.map(d=>d.parent).filter(d=>d!=null);return new Set(i.map(d=>d.attributes.type)).size>1?!0:new Set(i.map(d=>d.ds.value).filter(d=>Jt(d))).size>1}}),o.some(i=>i.hasSpan)&&r.push({type:"menu",label:"拆分单元格",icon:"icon-solit-cells",handler:e.splitCells}),o.length===1&&o[0].noSpan&&r.push({type:"menu",label:"拆分列",icon:"icon-split-column",handler:e.splitByColumn},{type:"menu",label:"拆分行",icon:"icon-split-row",handler:e.splitByRow}),r.length>0&&s.menus.push(...r,{type:"divider"}),s.menus.push(Wo(e),Xo(e),{type:"divider"},Yo(e),qo(e.getDesignApi(),e.getTable())),mt.open(n.clientX,n.clientY,s)}function Go(n){return[{type:"menu",label:"选中表格",icon:"icon-aim",handler:n.selectTable},{type:"menu",label:"表格设置",icon:"icon-table",handler(){lf(n.getTable())}}]}function Wo(n){return{type:"menu",label:"插入",icon:"icon-plus-square",submenu:[{type:"menu",label:"左侧插入列",icon:"icon-insert-column-left",handler:n.insertColumnLeft,disabled:n.isSelectTableRow},{type:"menu",label:"右侧插入列",icon:"icon-insert-column-right",handler:n.insertColumnRight,disabled:n.isSelectTableRow},{type:"menu",label:"上侧插入行",icon:"icon-insert-row-above",handler:n.insertRowTop},{type:"menu",label:"下侧插入行",icon:"icon-insert-row-below",handler:n.inserRowBottom}]}}function Xo(n){return{type:"menu",label:"删除",icon:"icon-delete",submenu:[{type:"menu",label:"删除列",icon:"icon-deletecolumn",handler:n.deleteColumns,disabled:n.isSelectTableRow},{type:"menu",label:"删除行",icon:"icon-deleterow",handler:n.deleteRows},{type:"menu",label:"数据源",icon:"icon-datasource",handler:n.deleteDataSource}]}}function Yo(n){return{type:"menu",label:"自动调整",icon:"icon-auto-resize",submenu:[{type:"menu",label:"根据纸张调整列宽",handler:n.autoReiszeColumnByPaper},{type:"menu",label:"均分表格宽度",handler:n.avgTableWidth},{type:"menu",label:"均分表格高度",handler:n.avgTableHeight},{type:"menu",label:"将其他行设为相同高度",handler:n.setOtherRowSameHeight,disabled(){const e=n.getSelectedCells();return!!(e.length!==1||e[0].hasRowSpan)}},{type:"menu",label:"将其他列设为相同宽度",handler:n.setOtherColSameWidth,disabled(){if(n.isSelectTableRow())return!0;const e=n.getSelectedCells();return!!(e.length!==1||e[0].hasColSpan)}}]}}function Cf(n,e){function t(){return n.element}function l(){return e.getSelectedElements(t())}function o(){const O=t();return l().filter(M=>{var A;if(M.type!==G.TABLE_CELL)return!1;const D=(A=M.parent)==null?void 0:A.parent;return D==null?!1:D.id==O.id}).sort(Bn.sort)}function s(){return e.selectElement(t())}function r(){const O=o();if(O.length===0)return!1;const $=Ct.toArea(O);return t().insertColumn($.colStart,0),e.createSnapshot(),!0}function i(){const O=o();if(O.length===0)return!1;const $=Ct.toArea(O);return t().insertColumn($.colEnd,1),e.createSnapshot(),!0}function a(){if(L()){const M=l()[0];return t().inserRow(M.index,0),e.createSnapshot(),!0}const O=o();if(O.length===0)return!1;const $=Ct.toArea(O);return t().inserRow($.rowStart,0),e.createSnapshot(),!0}function d(){if(L()){const M=l()[0];return t().inserRow(M.index,1),e.createSnapshot(),!0}const O=o();if(O.length===0)return!1;const $=Ct.toArea(O);return t().inserRow($.rowEnd,1),e.createSnapshot(),!0}function m(){var le,Ae;const O=t(),$=O.page;if($==null)return;const M=O.doc,D=Ne((le=M==null?void 0:M.margins)==null?void 0:le.left)??38,A=Ne((Ae=M==null?void 0:M.margins)==null?void 0:Ae.right)??38,x=O.columns,T=x.reduce((qe,tt)=>qe+tt,0),R=ae.mm_to_px($.width)-D-A,k=[];for(const qe of x){const tt=Math.round(qe/T*R);k.push(tt)}const z=k.reduce((qe,tt)=>qe+tt,0),P=R-z;k[k.length-1]+=P,O.setColumns(k),O.updateBoxSize(),e.createSnapshot()}function p(){const O=t(),$=O.columns,M=$.reduce((T,R)=>T+R,0),D=Math.floor(M/$.length),A=new Array($.length).fill(D),x=M-A.reduce((T,R)=>T+R,0);A[A.length-1]+=x,O.setColumns(A),O.updateBoxSize(),e.createSnapshot()}function h(){const O=t(),$=Math.round(O.height/O.children.length);O.children.forEach((M,D)=>O.setRowHeight(D,$)),O.updateBoxSize(),e.createSnapshot()}function y(){const O=l()[0];if(O==null)return;const $=O.type===G.TABLE_ROW?O:O.parent;if(!me.isDefineElement($)||$.type!=G.TABLE_ROW)return;const M=t(),D=$.height;M.children.forEach(A=>A.setRowHeight(D)),M.updateBoxSize(),e.createSnapshot()}function _(){const O=l()[0];if(O==null)return;const $=t(),M=O.width,D=$.attributes.colgroup.map(A=>M);$.setColumns(D),$.updateBoxSize(),e.createSnapshot()}function u(){const O=o();if(O.length<2)return;const M=t().mergeCells(O);e.selectElement(M),e.createSnapshot()}function v(){const O=o();if(O.length==0)return;t().splitCells(O),e.createSnapshot()}function E(){const O=o()[0];if(O==null)return;t().removeColumn(O.index),e.resetSelectedElement(),e.createSnapshot()}function N(){if(L()){const D=l()[0];t().removeRow(D.index),e.resetSelectedElement(),e.createSnapshot();return}const O=o();if(O.length==0)return;const $=Ct.toArea(O),M=t();for(let D=$.rowEnd;D>=$.rowStart;D--)M.removeRow(D);e.resetSelectedElement(),e.createSnapshot()}function B(){l().forEach($=>$.resetDS()),e.createSnapshot()}function q(){const O=l();if(O.length!=1)return;const $=O[0];if($.hasSpan)return;const M=$.index,D=t();D.insertColumn(M,1,!0);for(const A of D.children){const x=A.children[M];if(x.id===$.id)continue;const T=A.children[M+1];if(x.hasSpan){D.mergeRightCell(x,T);continue}if(x.isCollapsed){const R=D.find(x.attributes.control);R&&D.mergeRightCell(R,T);continue}D.mergeCells([x,T])}e.selectElement($),e.createSnapshot()}function I(){const O=l();if(O.length!=1)return;const $=O[0];if($.hasSpan)return;const M=$.parent;if(M==null)return;const D=t();D.inserRow(M.index,1);const A=D.children[M.index+1];for(let x=0;x<M.children.length;x++){const T=M.children[x];if(T.id===$.id)continue;const R=A.children[x];if(T.hasSpan){D.mergeBottomCell(T,R);continue}if(T.isCollapsed){const k=D.find(T.attributes.control);k&&D.mergeBottomCell(k,R);continue}D.mergeCells([T,R])}e.selectElement($),e.createSnapshot()}function L(){const O=l();return O.length==1&&O[0].type==G.TABLE_ROW}return{getDesignApi(){return e},getTable:t,getSelectedElements:l,getSelectedCells:o,selectTable:s,insertColumnLeft:r,insertColumnRight:i,insertRowTop:a,inserRowBottom:d,autoReiszeColumnByPaper:m,avgTableWidth:p,avgTableHeight:h,setOtherRowSameHeight:y,setOtherColSameWidth:_,mergeCells:u,splitCells:v,splitByColumn:q,splitByRow:I,deleteColumns:E,deleteRows:N,deleteDataSource:B,isSelectTableRow:L}}function If(n,e,t){const o={moved:!1,left:0,colIndex:0,target:null,container:null};function s(m){return m<=0?null:n.getTable().getColumnLeft(m-1)}function r(m){const p=n.getTable(),h=p.attributes.colgroup.length;return m>=h?null:p.getColumnLeft(m+1)}function i(m,p){if(!(m.target instanceof Element))return;const h=m.target.closest("."+e.colResize);if(h==null)return;const y=h.closest("."+e.layer);y!=null&&(m.stopPropagation(),m.preventDefault(),o.left=h.offsetLeft,o.colIndex=p,o.target=h,o.container=y,o.target.setPointerCapture(m.pointerId),window.addEventListener("pointermove",a),window.addEventListener("pointerup",d))}function a(m){if(o.target==null||o.container==null)return;const p=o.container.getBoundingClientRect(),h=n.getDesignApi().state.scale/100,y=s(o.colIndex),_=r(o.colIndex);let u=m.clientX-p.left;y!=null&&u<=y*h+4&&(u=y*h+4),_!=null&&u>=_*h-4&&(u=_*h-4),o.left=u/h,o.target.style.left=u/h+"px",o.moved=!0}function d(m){o.moved&&t.onResizeEnd(o.colIndex,Math.round(o.left)),o.left=0,o.target=null,o.container=null,window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",d)}return i}function Of(n,e,t){const o={moved:!1,top:0,rowIndex:0,target:null,container:null};function s(m){return m<=0?null:n.getTable().getRowTop(m-1)}function r(m){const p=n.getTable(),h=p.children.length;return m>=h?null:p.getRowTop(m+1)}function i(m,p){if(!(m.target instanceof Element))return;const h=m.target.closest("."+e.rowResize);if(h==null)return;const y=h.closest("."+e.layer);y!=null&&(m.stopPropagation(),m.preventDefault(),o.top=h.offsetTop,o.rowIndex=p,o.target=h,o.container=y,o.target.setPointerCapture(m.pointerId),window.addEventListener("pointermove",a),window.addEventListener("pointerup",d))}function a(m){if(o.target==null||o.container==null)return;const p=n.getDesignApi().state.scale/100,h=o.container.getBoundingClientRect(),y=s(o.rowIndex),_=r(o.rowIndex);let u=m.clientY-h.top;y!=null&&u<=y*p+4&&(u=y*p+4),_!=null&&u>=_*p-4&&(u=_*p-4),o.moved=!0,o.top=u/p,o.target.style.top=u/p+"px"}function d(m){o.moved&&t.onResizeEnd(o.rowIndex,Math.round(o.top)),o.top=0,o.target=null,o.container=null,window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",d)}return i}const Nf=["width"],Df=["onClick"],Mf=["onClick"],xf=V({__name:"TableEditor",props:{element:{type:Ct,required:!0}},setup(n){const e=n,t=Re(),l=De("classes"),o=Cf(e,t),s=xe({colIndex:-1,rowIndex:-1,silence:!1}),r=w(()=>e.element.attributes.colgroup??[]),i=If(o,l,{onResizeEnd:E,onResizeStart:v}),a=Of(o,l,{onResizeEnd:N,onResizeStart:v});function d(M){return{left:(e.element.attributes.colgroup??[]).slice(0,M).reduce((A,x)=>A+x,0)+"px"}}function m(M){return{top:(e.element.children??[]).slice(0,M).reduce((x,T)=>x+T.height,0)-1+"px"}}function p(M){const D=e.element.attributes.colgroup??[],A=D.slice(0,M).reduce((R,k)=>R+k,0),x=M===0?0:1,T=M>0&&M<D.length?-1:0;return{left:A+x+"px",width:D[M]+T+"px"}}function h(M){const D=e.element.children??[],A=D.slice(0,M).reduce((R,k)=>R+k.height,0),x=M===0?0:1,T=M>0&&M<D.length?-1:0;return{top:A+x+"px",height:D[M].height+T+"px"}}function y(M){t.selectElement(M)}function _(M){const D=[];for(const A of e.element.children){const x=A.children[M];x.isColCollapsed||D.push(x)}t.multiSelectElements(D)}async function u(M){const D=M.target.closest("td");if(D==null)return;const A=Reflect.get(D,Je);if(A==null)return;const x=t.getSelectedElements(e.element);(x.length==0||x.length==1&&x[0].type===G.TABLE_CELL||x.length>1&&x.findIndex(T=>T.id===A.id)<0)&&(t.selectElement(A),await Qt()),Lf(M,o)}function v(){s.silence=!0}function E(M,D){s.silence=!1;const A=e.element.attributes.colgroup??[];if(M==0){const z=e.element.left,P=e.element.calculateCoord(z+D),le=A[0]-(P-z);e.element.setLeft(P),e.element.setColWidth(0,le),e.element.updateBoxSize(),t.createSnapshot();return}if(M==A.length){const z=M-1,P=A.slice(0,z).reduce((Ae,qe)=>Ae+qe,0),le=D-P;e.element.setColWidth(M-1,le),e.element.updateBoxSize(),t.createSnapshot();return}const x=M-1,T=A[x]+A[M],R=D-A.slice(0,x).reduce((z,P)=>z+P,0),k=T-R;e.element.setColWidth(x,R),e.element.setColWidth(M,k),e.element.updateBoxSize(),t.createSnapshot()}function N(M,D){s.silence=!1;const A=e.element.children;if(M==0){const z=e.element.top,P=e.element.calculateCoord(z+D),le=A[0].height-(P-z);e.element.setTop(P),e.element.setRowHeight(M,le),e.element.updateBoxSize(),t.createSnapshot();return}if(M==A.length){const z=M-1,P=A.slice(0,z).reduce((Ae,qe)=>Ae+qe.height,0),le=D-P;e.element.setRowHeight(M-1,le),e.element.updateBoxSize(),t.createSnapshot();return}const x=M-1,T=A[x].height+A[M].height,R=D-A.slice(0,x).reduce((z,P)=>z+P.height,0),k=T-R;e.element.setRowHeight(x,R),e.element.setRowHeight(M,k),e.element.updateBoxSize(),t.createSnapshot()}function B(){s.rowIndex=-1,s.colIndex=-1}function q(M){const D=M.target.closest("td");if(D==null)return;const A=Reflect.get(D,Je);if(A==null||!(A instanceof Bn))return;const x=D.getBoundingClientRect(),T=M.clientX-x.left,R=A.index;if(!A.hasColSpan)return T<x.width/2?R:A.getNextColIndex();const k=e.element.attributes.colgroup,z=k[R]/2;if(T>=0&&T<=z)return R;const P=A.offsetWidth,le=P-k[R+A.colspan-1]/2;if(T>=le&&T<=P)return A.getNextColIndex()+1}function I(M){const D=M.target.closest("td");if(D==null)return;const A=Reflect.get(D,Je);if(A==null||!(A instanceof Bn))return;const x=A.parent;if(x==null)return;const T=D.getBoundingClientRect(),R=M.clientY-T.top,k=x.index;if(!A.hasRowSpan)return R<T.height/2?k:A.getNextRowIndex();const z=x.height/2;if(R>=0&&R<=z)return k;const P=e.element.children.slice(x.index,x.index+A.rowspan),le=P.reduce((qe,tt)=>qe+tt.height,0),Ae=le-P[P.length-1].height;if(R>=Ae&&R<=le)return A.getNextRowIndex()+1}function L(M){s.silence||(s.colIndex=q(M)??-1,s.rowIndex=I(M)??-1)}function O(){const M=e.element;M.insertColumn(M.colSize-1,1)}function $(){const M=e.element;M.inserRow(M.rowSize-1,1)}return(M,D)=>(S(),C("div",{class:f(b(l).tableEditor),onContextmenu:re(u,["stop","prevent"]),onClick:D[3]||(D[3]=re(()=>{},["stop"])),onMouseleave:B},[c("table",{class:f(b(l).table),onMousemove:L},[c("colgroup",null,[(S(!0),C(ne,null,fe(r.value,(A,x)=>(S(),C("col",{key:x,width:A},null,8,Nf))),128))]),c("tbody",null,[(S(!0),C(ne,null,fe(n.element.children,A=>(S(),C("tr",{key:A.id},[(S(!0),C(ne,null,fe(A.children,x=>(S(),ee(Ao,{key:x.id,element:x},null,8,["element"]))),128))]))),128))])],34),c("div",{class:f(b(l).layer)},[s.colIndex>=0?(S(),C("div",{key:0,title:"调整列宽",class:f(b(l).colResize),style:j(d(s.colIndex)),onPointerdown:D[0]||(D[0]=re(A=>b(i)(A,s.colIndex),["stop","prevent"]))},null,38)):W("",!0),s.rowIndex>=0?(S(),C("div",{key:1,title:"调整行高",class:f(b(l).rowResize),style:j(m(s.rowIndex)),onPointerdown:D[1]||(D[1]=re(A=>b(a)(A,s.rowIndex),["stop","prevent"]))},null,38)):W("",!0),(S(!0),C(ne,null,fe(r.value,(A,x)=>(S(),C("div",{title:"选中此列",key:x,style:j(p(x)),class:f(b(l).colIndicator),onClick:re(T=>_(x),["stop"])},null,14,Df))),128)),(S(!0),C(ne,null,fe(n.element.children,(A,x)=>(S(),C("div",{title:"选中此行",key:x,style:j(h(x)),class:f(b(l).rowIndicator),onClick:re(T=>y(A),["stop"])},null,14,Mf))),128)),n.element.isSelected?(S(),C("button",{key:2,onClick:re(O,["stop"]),type:"button",class:f(["quickprint-text-btn",b(l).addCol]),title:"添加列"},[g(b(H),{icon:"icon-plus",size:"14px"})],2)):W("",!0),n.element.isSelected?(S(),C("button",{key:3,onClick:re($,["stop"]),type:"button",class:f(["quickprint-text-btn",b(l).addRow]),title:"添加行"},[g(b(H),{icon:"icon-plus",size:"14px"})],2)):W("",!0)],2),c("div",{class:f(b(l).indicator),onPointerdown:D[2]||(D[2]=(...A)=>b(t).onDragStart&&b(t).onDragStart(...A)),title:"选中/拖动表格"},null,34)],34))}}),Af="_tableEditor_5qbkt_2",qf="_table_5qbkt_2",$f="_layer_5qbkt_33",Bf="_colResize_5qbkt_43",Pf="_rowResize_5qbkt_66",Vf="_colIndicator_5qbkt_89",zf="_rowIndicator_5qbkt_95",Ff="_indicator_5qbkt_114",Uf="_addCol_5qbkt_151",Hf="_addRow_5qbkt_166",Gf={tableEditor:Af,table:qf,layer:$f,colResize:Bf,rowResize:Pf,colIndicator:Vf,rowIndicator:zf,indicator:Ff,addCol:Uf,addRow:Hf},Wf={classes:Gf},Xf=U(xf,[["__cssModules",Wf]]),Yf={class:"quickprint-config-section quickprint-config-inline"},jf={class:"quickprint-config-content"},Zf=V({__name:"TableConfig",props:{element:{type:Ct,required:!0}},setup(n){const e=n,t=w({get(){return e.element.attributes.rowMode??ln.CONST},set(o){e.element.attributes.rowMode=o===ln.CONST?void 0:o}}),l=[{label:"固定行数",value:ln.CONST,detail:"按照画布中设计打印固定行数，并依此拆分表格"},{label:"忽略空白行",value:ln.IGNORE_BLANK,detail:"不固定行数，忽略表格中的空白行"},{label:"打印空白行",value:ln.PRINT_BLANK,detail:"不固定行数，打印表格中的空白行"}];return(o,s)=>(S(),C("section",Yf,[s[1]||(s[1]=c("header",{class:"quickprint-config-header"},"行模式",-1)),c("div",jf,[g(b(te),{options:l,modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=r=>t.value=r),class:"quickprint-w-full"},null,8,["modelValue"])])]))}}),Kf={class:"quickprint-config-section quickprint-config-inline"},Jf={class:"quickprint-config-content"},Qf=V({__name:"TableRowConfig",props:{element:{type:Cn,required:!0}},setup(n){const e=n,t=[{label:"表头",value:Bt.HEADER},{label:"表体",value:Bt.BODY},{label:"表尾",value:Bt.FOOTER}],l=w({get(){return e.element.attributes.type??Bt.BODY},set(o){switch(o){case Bt.HEADER:e.element.asHeader();break;case Bt.FOOTER:e.element.asFooter();break;default:e.element.asBody()}}});return(o,s)=>(S(),C("section",Kf,[s[1]||(s[1]=c("header",{class:"quickprint-config-header"},"行模式",-1)),c("div",Jf,[g(b(te),{options:t,modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=r=>l.value=r),class:"quickprint-w-full"},null,8,["modelValue"])])]))}}),Kn=Object.freeze({title:"表格",type:G.TABLE,icon:"icon-table",editor:Xf,config:{attributes:Zf,exclude:[de.DISPLAY,de.BASIC]},features:{draggable:!1,resizable:!1,contextMenu:!1},onCreate(){const n=[Ge,Ge,Ge],e=me.create({type:G.TABLE});return e.style.borderStyle=Q.SOLID,e.setColgroup(n),e.append(Cn.createDefault(n)),e.append(Cn.createDefault(n)),e.append(Cn.createDefault(n)),e.updateBoxSize(),e}}),jo=Object.freeze({title:"表格行",type:G.TABLE_ROW,icon:"icon-table-row",exposed:!1,editor:null,config:{exclude:[de.POSITION,de.COORD,de.OVERFLOW],attributes:Qf}}),Ll=Object.freeze({title:"单元格",type:G.TABLE_CELL,icon:"icon-table-cell",exposed:!1,editor:Ao,config:{exclude:[de.POSITION,de.COORD]}});class em{constructor(e){Y(this,"__v_skip",!0);Y(this,"observer");Y(this,"callbacks",[]);Y(this,"handler");this.handler=aa((t,l)=>{for(const o of this.callbacks)o(t,l)},500),this.observer=new MutationObserver((t,l)=>this.handler(t,l)),this.observer.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}addListener(e){return typeof e!="function"||this.callbacks.findIndex(l=>l===e)>=0?!1:(this.callbacks.push(e),!0)}removeListener(e){const t=this.callbacks.findIndex(l=>l===e);return t<0?!1:(this.callbacks.splice(t,1),!0)}cleanup(){this.observer.disconnect(),this.callbacks=[]}}function tm(n,e){switch(n){case"fontSize":return e===Ie.DEFAULT?void 0:e;case"fontFamily":return e===pe.DEFAULT?void 0:e;case"lineHeight":return e===kt.DEFAULT?void 0:e;default:return e}}const Bl="texteditor-const-node",nm=Object.freeze({CONST:0});class lm{constructor(e,t={}){Y(this,"__v_skip",!0);Y(this,"emitter",new An);Y(this,"container");Y(this,"options");Y(this,"observer");Y(this,"handleClick");this.container=e,this.container.contentEditable="plaintext-only",this.container.classList.add("quickprint-text-editor"),this.options=t,this.observer=new em(e),this.handleClick=this.onClick.bind(this),Reflect.defineProperty(this,"emitter",{configurable:!1,enumerable:!1,writable:!1,value:new An}),e.addEventListener("click",this.handleClick)}on(e,t){return this.emitter.on(e,t)}once(e,t){return this.emitter.once(e,t)}off(e,t){return this.emitter.off(e,t)}dispatch(e){return this.emitter.dispatch(e)}createEvent(e,t){return new Ss(e,t)}watch(e){return this.observer.addListener(e),()=>{this.observer!=null&&this.observer.removeListener(e)}}cleanup(){this.container.removeEventListener("click",this.handleClick),this.observer.cleanup(),this.emitter.cleanup()}getHTML(){return this.container.innerHTML}setHTML(e){return console.log("TODO: 光标"),this.container.innerHTML=e,!0}clear(){return this.container.innerHTML="",!0}focus(){this.container.focus()}blur(){this.container.blur()}getSelection(){const e=this.container,t=window.getSelection();if(t==null||!e.contains(t.anchorNode)||!e.contains(t.focusNode))return null;const l=t.getRangeAt(0);return l==null?null:{selection:t,range:l}}hasSelection(){const e=this.getSelection();return e==null?!1:!e.selection.isCollapsed}normalize(){const e=this.container;for(let t=e.childNodes.length-1;t>=0;t--){const l=e.childNodes[t];if(ce(l.textContent)){e.removeChild(l);continue}if(l instanceof HTMLElement){if(l.contentEditable==="false")continue;l.style.length===0&&l.replaceWith(l.textContent)}}return e.normalize(),e}updateHeight(){const e=this.container.scrollHeight;return this.dispatch(this.createEvent("resize",{height:e})),e}async autosize(){this.container.style.height="auto";const e=this.updateHeight();return await zn(),this.container.style.removeProperty("height"),e}checkHeight(){const e=this.container;e.scrollHeight>e.clientHeight&&this.updateHeight()}createConstNode(e){const t=document.createElement("span");return t.contentEditable="false",t.innerText=`${e.label??e.value}`,t.className=Bl,t.dataset.value=e.value,t.dataset.type=e.type+"",t}focusAfterNode(e){if(!this.container.contains(e))return!1;const t=window.getSelection();if(t==null)return!1;const l=new Range;return l.selectNode(e),t.removeAllRanges(),t.addRange(l),t.collapseToEnd(),!0}focusNode(e){if(!this.container.contains(e))return!1;const t=window.getSelection();if(t==null)return!1;const l=new Range;return l.selectNode(e),t.removeAllRanges(),t.addRange(l),!0}focusNodes(e){if(e.length==0)return!1;if(e.length==1)return this.focusNode(e[0]);const t=window.getSelection();if(t==null)return!1;const l=new Range,o=e[0],s=e[e.length-1];return!this.container.contains(o)||!this.container.contains(s)?!1:(t.removeAllRanges(),l.setStartBefore(o),l.setEndAfter(s),t.addRange(l),!0)}insertNode(e,t){var h;const l=this.getSelection();if(l==null)return!1;const{selection:o,range:s}=l;if(o.isCollapsed!=!0&&o.deleteFromDocument(),o.isCollapsed!=!0)return!1;const r=o.anchorNode;if(r==null)return!1;const i=this.container,a=this.createConstNode(e);if(typeof(t==null?void 0:t.onCreateNode)=="function"&&t.onCreateNode(a),r.parentNode===i||(h=r.parentNode)!=null&&h.contains(i))return s.insertNode(a),this.normalize(),this.focusAfterNode(a),!0;const d=r.parentNode;if(d==null)return!1;const m=d.textContent;if(m==null)return!1;if(o.anchorOffset==m.length)return i.insertBefore(a,d.nextSibling),this.normalize(),this.focusAfterNode(a),!0;const p=document.createElement("span");return p.textContent=m.slice(0,o.anchorOffset),d instanceof HTMLElement&&(p.style.cssText=d.style.cssText),d.textContent=m.slice(o.anchorOffset),i.insertBefore(a,d),i.insertBefore(p,a),this.normalize(),this.focusAfterNode(a),!0}insertText(e){const t=this.getSelection();if(t==null)return!1;const{selection:l,range:o}=t;return l.isCollapsed||l.deleteFromDocument(),o.insertNode(document.createTextNode(e)),l.collapseToEnd(),this.normalize(),!0}normalizeRange(e){const t=this.container,l=e.startContainer,o=e.endContainer,s={};return l===t?(s.startNode=t.childNodes[e.startOffset],s.startOffset=-1):(s.startNode=l.parentNode==t?l:l.parentNode,s.startOffset=e.startOffset),o===t?(s.endNode=t.childNodes[e.endOffset],s.endOffset=-1):(s.endNode=o.parentNode==t?o:o.parentNode,s.endOffset=e.endOffset),s}findNodesBetween(e,t){const l=[];let o=e.nextSibling;for(;o!=null&&o!==t;)l.push(o),o=o.nextSibling;return l}inheritStyle(e,t){if(!(t instanceof HTMLElement))return!1;const l=t.style.cssText;return ce(l)?!1:(e.style.cssText=l,!0)}extractNodesFromRange(){var m;const e=this.container,t=this.getSelection();if(t==null||t.selection.isCollapsed)return null;const o=t.range,{startNode:s,startOffset:r,endNode:i,endOffset:a}=this.normalizeRange(o);if(s===i){const p=s.textContent??"";if(s instanceof CharacterData){const _=document.createElement("span");return _.textContent=p.slice(r,a),o.deleteContents(),o.insertNode(_),[_]}const h=document.createElement("span");h.textContent=p.slice(0,r),this.inheritStyle(h,i);const y=document.createElement("span");return y.textContent=p.slice(r,a),this.inheritStyle(y,i),i.textContent=p.slice(a),e.insertBefore(y,i),e.insertBefore(h,y),[y]}const d=this.findNodesBetween(s,i);if(r>0){const p=s.textContent??"",h=document.createElement("span");h.textContent=p.slice(0,r),this.inheritStyle(h,s),s.textContent=p.slice(r),e.insertBefore(h,s)}if(a>=0&&a<=(((m=i.textContent)==null?void 0:m.length)??0)){const p=i.textContent??"";if(i instanceof HTMLElement){i.textContent=p.slice(0,a);const h=document.createElement("span");h.textContent=p.slice(a),this.inheritStyle(h,i),e.insertBefore(h,i.nextSibling),d.push(i)}else{const h=document.createElement("span");h.textContent=p.slice(0,a),e.replaceChild(h,i);const y=document.createTextNode(p.slice(a));e.insertBefore(y,i.nextSibling),d.push(h)}}return d.unshift(s),d}setStyle(e,t){const l=this.extractNodesFromRange();if(l==null||l.length==0)return!1;let o=!0;const s=lo(e),r=tm(e,t);for(let i=0;i<l.length;i++){const a=l[i];if(a instanceof HTMLElement){this.matchElementStyle(a,s,r)||(o=!1);continue}const d=document.createElement("span");d.textContent=a.textContent,this.container.replaceChild(d,a),l[i]=d,o=!1}for(const i of l){if(o||r==null){this.removeElementStyle(i,s,r);continue}this.setElementStyle(i,s,r)}return this.focusNodes(l),!0}matchElementStyle(e,t,l){const o=e.style.getPropertyValue(t);return t==="text-decoration-line"?o.includes(l):o==l}setElementStyle(e,t,l){if(t==="text-decoration-line"){const o=e.style.getPropertyValue("text-decoration-line"),s=It.push(o,l);e.style.setProperty("text-decoration-line",s);return}e.style.setProperty(t,l)}removeElementStyle(e,t,l){if(t==="text-decoration-line"){const o=e.style.getPropertyValue("text-decoration-line"),s=It.remove(o,l);ce(s)?e.style.removeProperty("text-decoration-line"):e.style.setProperty("text-decoration-line",s);return}e.style.removeProperty(t)}onClick(e){const t=e.target;if(t instanceof HTMLElement&&t.matches("."+Bl)){e.preventDefault(),e.stopPropagation(),this.focusNode(t);return}}}const om=V({__name:"ParagraphEditor",props:{element:{type:Rs,required:!0}},setup(n){const e=n,t=Re(),l=be(),o=w(()=>e.element.isSelected!==!0?!1:t.state.selectMode===at.SINGLE);let s=null;const r=w(()=>jn.map(I=>(I.style={fontFamily:I.value==pe.DEFAULT?pe.SONG:I.value},I)));function i(){}async function a(){if(s==null)return;const I=await wl({doc:t.doc}).catch(st);if(I==null)return;const L=dt(I.value,t.doc.ds)??I.value,O={type:nm.CONST,value:I.value,label:L};s.insertNode(O)}function d(){s==null||s.blur()}function m(){s==null||s.autosize()}function p(I){const L=e.element.ds.value,O=new lm(I);return O.on("resize",$=>{var D;const M=(D=$.detail)==null?void 0:D.height;M!=null&&e.element.setHeight(M+2)}),O.watch(()=>{const $=O.getHTML(),M=e.element.ds.value;$!==M&&(e.element.ds.value=$,O.checkHeight())}),ce(L)||O.setHTML(L),O}function h(I){s==null||s.setStyle("fontFamily",I.value)}function y(I){s==null||s.setStyle("fontSize",I.value)}function _(I){s==null||s.setStyle("lineHeight",I.value)}function u(I){s==null||s.setStyle("backgroundColor",I)}function v(I){s==null||s.setStyle("color",I)}function E(){s==null||s.setStyle("fontWeight","700")}function N(){s==null||s.setStyle("fontStyle","italic")}function B(){s==null||s.setStyle("textDecorationLine","underline")}function q(){s==null||s.setStyle("textDecorationLine","line-through")}return El(()=>e.element.ds.value,I=>{s==null||s.getHTML()==I||s.setHTML(I)}),vn(()=>{e.element.on("blur",d),s=p(l.value)}),_l(()=>{e.element.off("blur",d),s&&s.cleanup()}),(I,L)=>(S(),C("div",{class:f(I.classes.paragraph),onPointerdown:L[2]||(L[2]=re(()=>{},["stop"])),onContextmenu:re(i,["stop","prevent"])},[c("div",{class:f(I.classes.indicator),onPointerdown:L[0]||(L[0]=(...O)=>b(t).onDragStart&&b(t).onDragStart(...O)),title:"选中/拖动段落"},null,34),o.value?(S(),C("div",{key:0,class:f(I.classes.toolbar),onMousedown:L[1]||(L[1]=re(()=>{},["prevent"]))},[g(b(te),{onSelect:h,title:"字体",width:"60px",options:r.value,class:f(I.classes.tool),button:""},null,8,["options","class"]),g(b(te),{onSelect:y,title:"字号",width:"60px",options:b(kl),class:f(I.classes.tool),button:""},null,8,["options","class"]),g(b(te),{onSelect:_,title:"行高",width:"60px",options:b(Po),class:f(I.classes.tool),popoverWidth:120,button:""},null,8,["options","class"]),c("div",{class:f(I.classes.divider)},null,2),g(b(Wt),{class:f(I.classes.tool),onSelect:u},{default:Se(()=>[c("div",{class:f(I.classes.colorIcon),title:"突出显示"},[g(b(H),{icon:"icon-bg-color-b",size:"15px"}),c("div",{class:f(I.classes.colorIndicator)},null,2)],2)]),_:1},8,["class"]),g(b(Wt),{class:f(I.classes.tool),onSelect:v},{default:Se(()=>[c("div",{class:f(I.classes.colorIcon),title:"字体颜色"},[g(b(H),{icon:"icon-font",size:"15px"}),c("div",{class:f(I.classes.colorIndicator)},null,2)],2)]),_:1},8,["class"]),c("button",{onClick:E,type:"button",title:"加粗",class:f(["quickprint-text-btn",I.classes.tool])},[g(b(H),{icon:"icon-font-bold",size:"16px"})],2),c("button",{onClick:N,type:"button",title:"斜体",class:f(["quickprint-text-btn",I.classes.tool])},[g(b(H),{icon:"icon-italic",size:"16px"})],2),c("button",{onClick:B,type:"button",title:"下划线",class:f(["quickprint-text-btn",I.classes.tool])},[g(b(H),{icon:"icon-underline",size:"16px"})],2),c("button",{onClick:q,type:"button",title:"删除线",class:f(["quickprint-text-btn",I.classes.tool])},[g(b(H),{icon:"icon-through-line",size:"16px"})],2),c("div",{class:f(I.classes.divider)},null,2),c("button",{class:"quickprint-text-btn",type:"button",onClick:a},[g(b(H),{icon:"icon-insert-var",size:"16px"}),L[3]||(L[3]=c("span",null,"插入变量",-1))]),c("button",{class:"quickprint-text-btn",type:"button",onClick:m},[g(b(H),{icon:"icon-colum-height",size:"16px"}),L[4]||(L[4]=c("span",null,"调整高度",-1))])],34)):W("",!0),c("div",{ref_key:"editorRef",ref:l,class:f(I.classes.editor)},null,2)],34))}}),sm="_paragraph_1v2pj_2",im="_indicator_1v2pj_6",rm="_editor_1v2pj_18",am="_toolbar_1v2pj_44",cm="_tool_1v2pj_44",um="_colorIcon_1v2pj_66",dm="_colorIndicator_1v2pj_86",pm="_divider_1v2pj_95",fm={paragraph:sm,indicator:im,editor:rm,toolbar:am,tool:cm,colorIcon:um,colorIndicator:dm,divider:pm},mm={classes:fm},gm=U(om,[["__cssModules",mm]]),Jn=Object.freeze({title:"段落",type:G.PARAGRAPH,icon:"icon-paragraph",features:{draggable:!1,contextMenu:!1},editor:gm,config:{exclude:[de.DATASOURCE,de.BASIC,de.OVERFLOW]},onCreate(){return me.create({type:G.PARAGRAPH,width:Ge*4,height:bn*6})}}),hm=["src"],vm=V({__name:"ImageEditor",props:{element:{type:so,required:!0}},setup(n){const e=n,t=Re(),l=w(()=>{var a;const i=e.element.ds;return ce(i.value)?{type:"placeholder",value:"请上传图片"}:i.type===ye.CONST?r(i.value)?{type:"image",value:i.value}:{type:"placeholder",value:"无效的图片"}:{type:"content",value:(a=Hn(e.element,t.doc.ds))==null?void 0:a.content}}),o=w(()=>yn(e.element)),s=w(()=>ws(e.element.attributes.size));function r(i){return!!(/^https?:\/\//.test(i)||/^data:image\/(.+);base64,/.test(i))}return(i,a)=>(S(),C("div",{class:f(i.classes.editor),style:j(o.value)},[l.value.type==="placeholder"?(S(),C("div",{key:0,class:f(i.classes.placeholder)},K(l.value.value),3)):W("",!0),l.value.type==="content"?(S(),C("span",{key:1,class:f(i.classes.highlight)},"["+K(l.value.value)+"]",3)):W("",!0),l.value.type==="image"?(S(),C("img",{key:2,src:l.value.value,style:j(s.value),class:f(i.classes.image)},null,14,hm)):W("",!0)],6))}}),bm="_editor_154e6_2",ym="_image_154e6_10",_m="_highlight_154e6_14",Em="_placeholder_154e6_30",Tm={editor:bm,image:ym,highlight:_m,placeholder:Em},Sm={classes:Tm},Rm=U(vm,[["__cssModules",Sm]]),wm={class:"quickprint-config-section quickprint-config-inline"},km={class:"quickprint-config-content"},Lm=V({__name:"ImageConfig",props:{element:{type:so,required:!0}},setup(n){const e=n,t=w({get(){return e.element.attributes.size??zt.NATURAL},set(l){const o=l===zt.NATURAL?void 0:l;e.element.attributes.size=o}});return(l,o)=>(S(),C("section",wm,[o[1]||(o[1]=c("header",{class:"quickprint-config-header"},"缩放模式",-1)),c("div",km,[g(b(te),{options:b(ni),modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=s=>t.value=s),class:"quickprint-w-full"},null,8,["options","modelValue"])])]))}}),Qn=Object.freeze({title:"图片",icon:"icon-image",type:G.IMAGE,editor:Rm,config:{attributes:Lm,exclude:[de.BASIC,de.OVERFLOW]},contextmenu(){return["auto-resize","---","copy","delete","---","z-index"]},onCreate(){return me.create({type:G.IMAGE,width:Ge,height:Ge})}}),Cm=["innerHTML"],Im=V({__name:"BarcodeEditor",props:{element:{type:io,required:!0}},setup(n){const e=n,t=De("classes"),l=w(()=>{const r=e.element.attributes,i=Jt(r.width)||Jt(r.height);return{"quickprint-is-element-editor":!0,[t.editor]:!0,[t.fixed]:i,[t.contain]:!i}}),o=w(()=>{const r=e.element.attributes,i=yn(e.element);return r.width&&(i["--quickprint-barcode-width"]=r.width),r.height&&(i["--quickprint-barcode-height"]=r.height),i}),s=w(()=>{const r=e.element.ds,i=e.element.attributes,a=r.type===ye.CONST?ce(r.value)?null:r.value:null;return ro.barcode(i.mode,a??"0000000000000",{barcolor:i.barcolor,includetext:i.showText===!0,width:ae.processLengthToMM(e.element.attributes.width),height:ae.processLengthToMM(e.element.attributes.height)})??""});return(r,i)=>(S(),C("div",{class:f(l.value),style:j(o.value)},[c("span",{innerHTML:s.value,class:f(b(t).barcode)},null,10,Cm)],6))}}),Om="_editor_1vkh8_2",Nm="_barcode_1vkh8_10",Dm="_fixed_1vkh8_14",Mm="_contain_1vkh8_21",xm={editor:Om,barcode:Nm,fixed:Dm,contain:Mm},Am={classes:xm},qm=U(Im,[["__cssModules",Am]]),$m={class:"quickprint-config-section quickprint-config-inline"},Bm={class:"quickprint-config-content"},Pm={class:"quickprint-config-section quickprint-config-inline"},Vm={class:"quickprint-config-content"},zm=V({__name:"BarcodeConfig",props:{element:{type:io,required:!0}},setup(n){const e=n,t=w({get(){return e.element.attributes.mode},set(o){e.element.attributes.mode=o}}),l=w({get(){return e.element.attributes.showText===!0},set(o){e.element.attributes.showText=o}});return(o,s)=>(S(),C(ne,null,[c("section",$m,[s[2]||(s[2]=c("header",{class:"quickprint-config-header"},"码制",-1)),c("div",Bm,[g(b(te),{options:b(oi),modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=r=>t.value=r),class:"quickprint-w-full"},null,8,["options","modelValue"])])]),c("section",Pm,[s[3]||(s[3]=c("header",{class:"quickprint-config-header"},"显示文本",-1)),c("div",Vm,[g(Dt,{modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=r=>l.value=r),options:b(si),class:"quickprint-w-full"},null,8,["modelValue","options"])])])],64))}}),el=Object.freeze({title:"条形码",icon:"icon-barcode",type:G.BARCODE,editor:qm,config:{attributes:zm},contextmenu(){return["barcode-setting","auto-resize","---","copy","delete","---","z-index"]},onCreate(){return me.create({type:G.BARCODE,width:Ge,height:bn*2})}}),Fm=["innerHTML"],Pl="QuickPrint",Um=V({__name:"QRCodeEditor",props:{element:{type:ao,required:!0}},setup(n){const e=n,t=w(()=>e.element.ds.type===ye.CONST&&e.element.ds.value||Pl),l=w(()=>{const s=t.value,r=e.element.attributes.mode,i=e.element.attributes.barcolor;return ro.qrcode(r,s,{barcolor:i})??""}),o=w(()=>yn(e.element,{exclude:["align"]}));return(s,r)=>(S(),C("div",{class:f(s.classes.editor),style:j(o.value)},[c("span",{innerHTML:l.value,class:f(s.classes.qrcode)},null,10,Fm)],6))}}),Hm="_editor_ymcu8_2",Gm="_qrcode_ymcu8_19",Wm={editor:Hm,qrcode:Gm},Xm={classes:Wm},Ym=U(Um,[["__cssModules",Xm]]),jm={class:"quickprint-config-section quickprint-config-inline"},Zm={class:"quickprint-config-content"},Km=V({__name:"QRCodeConfig",props:{element:{type:ao,required:!0}},setup(n){const e=n,t=w({get(){return e.element.attributes.mode??mn.QRCODE},set(l){const o=l===mn.QRCODE?void 0:l;e.element.attributes.mode=o}});return(l,o)=>(S(),C("section",jm,[o[1]||(o[1]=c("header",{class:"quickprint-config-header"},"码制",-1)),c("div",Zm,[g(b(te),{options:b(li),modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=s=>t.value=s),class:"quickprint-w-full"},null,8,["options","modelValue"])])]))}}),tl=Object.freeze({title:"二维码",icon:"icon-qrcode",type:G.QRCODE,editor:Ym,config:{attributes:Km},contextmenu(){return["qrcode-setting","auto-resize","---","copy","delete","---","z-index"]},onCreate(){return me.create({type:G.QRCODE,width:Ge,height:Ge})}}),Zo=[Wn,Xn,Yn,Kn,Ll,jo,Jn,Qn,el,tl],Jm=[Wn,Xn,Yn,Kn,Jn,Qn,el,tl],Qm={[G.TEXT]:Wn.editor,[G.NUMBER]:Xn.editor,[G.DATE]:Yn.editor,[G.TABLE]:Kn.editor,[G.TABLE_CELL]:Ll.editor,[G.PARAGRAPH]:Jn.editor,[G.IMAGE]:Qn.editor,[G.BARCODE]:el.editor,[G.QRCODE]:tl.editor},eg={[G.TEXT]:Wn.config,[G.NUMBER]:Xn.config,[G.DATE]:Yn.config,[G.TABLE]:Kn.config,[G.TABLE_CELL]:Ll.config,[G.TABLE_ROW]:jo.config,[G.PARAGRAPH]:Jn.config,[G.IMAGE]:Qn.config,[G.BARCODE]:el.config,[G.QRCODE]:tl.config},qt=Zo.reduce((n,e)=>(n[e.type]=e,n),{});function tg(n){const e=Zo.find(t=>t.type===n);if(e==null||typeof e.onCreate!="function")throw new Error("未知的打印元素");return e.onCreate()}function ng(n){return Reflect.get(Qm,n)}function rn(n){return Reflect.get(eg,n)}function Vl(n){var e;return(e=qt[n])==null?void 0:e.contextmenu}function gn(n){var e;return((e=qt[n])==null?void 0:e.title)??n}function lg(n){var e;return(e=qt[n])==null?void 0:e.icon}function og(n){var e,t;return((t=(e=qt[n])==null?void 0:e.features)==null?void 0:t.selection)!==!1}function sg(n){var e,t;return((t=(e=qt[n])==null?void 0:e.features)==null?void 0:t.contextMenu)!==!1}function ig(n){var e,t;return((t=(e=qt[n])==null?void 0:e.features)==null?void 0:t.resizable)!==!1}function rg(n){var e,t;return((t=(e=qt[n])==null?void 0:e.features)==null?void 0:t.draggable)!==!1}function zl(n,e,t,l){const[o,s]=e.top>t.top?[t,e]:[e,t],r=o.top-l.top,i=s.bottom-o.top;return{top:r,left:n,height:i}}function Fl(n,e,t,l){const[o,s]=e.left>t.left?[t,e]:[e,t],r=o.left-l.left,i=s.right-o.left;return{top:n,left:r,width:i}}function Ul(n,e){const t=n.find(a=>a.left===e.left);if(t==null||t.height==null)return n.push(e);const l=e.top+e.height,o=t.top+t.height,s=Math.min(t.top,e.top),i=Math.max(l,o)-s;t.top=s,t.height=i}function Hl(n,e){const t=n.find(a=>a.top===e.top);if(t==null||t.width==null)return n.push(e);const l=e.left+e.width,o=t.left+t.width,s=Math.min(t.left,e.left),i=Math.max(l,o)-s;t.left=s,t.width=i}function ag(n){const e=document.createElement("div");return n.appendChild(e),e}function cg(n,e){const t=[...e.querySelectorAll(":scope ."+J.GUIDE_LINE)];for(const l of n){const o=t.shift()??ag(e);o.className=J.GUIDE_LINE,o.style.top=l.top+"px",o.style.left=l.left+"px",o.style.height=(l.height??1)+"px",o.style.width=(l.width??1)+"px"}for(const l of t)l.remove()}function ug(n,e){const l=e.querySelectorAll(":scope ."+J.ELEMENT),o=e.getBoundingClientRect(),s=n.getBoundingClientRect(),r=[];for(const i of l){if(n==i)continue;const a=i.getBoundingClientRect();if(Math.abs(s.left-a.left)<=1||Math.abs(s.right-a.left)<=1){const d=a.left-o.left;Ul(r,zl(d,s,a,o))}if(Math.abs(s.left-a.right)<=1||Math.abs(s.right-a.right)<=1){const d=a.right-o.left;Ul(r,zl(d,s,a,o))}if(Math.abs(s.top-a.top)<=1||Math.abs(s.bottom-a.top)<=1){const d=a.top-o.top;Hl(r,Fl(d,s,a,o))}if(Math.abs(s.bottom-a.bottom)<=1||Math.abs(s.top-a.bottom)<=1){const d=a.bottom-o.top;Hl(r,Fl(d,s,a,o))}}cg(r,e)}function dg(){const n=document.querySelectorAll("."+J.GUIDE_LINE);for(const e of n)e.remove()}const Vn={create:ca(ug,50),clean:dg};async function pg(n){await zn(),n&&Reflect.deleteProperty(n,Fn)}async function fg(n,e){if(await Promise.resolve(),e.dropTarget==null){e.indicatorElement&&(e.indicatorElement.style.display="none");return}if(e.indicatorElement==null){const s=document.createElement("div");s.className="quickprint-is-indicator",e.indicatorElement=s,document.body.appendChild(s)}const t=mg(n,e);if(t==null){e.indicatorElement.style.display="none";return}const l=e.indicatorElement,o=e.ghost.getBoundingClientRect();l.style.display="block",l.style.left=o.left+"px",l.style.top=o.top-To(e.element)+"px",l.textContent=`x:${t.x},y:${t.y},w:${t.w},h:${t.h}`}function mg(n,e){const t=e.dropTarget;if(t==null)return null;const l=n.doc.useGrid;if(e.mode===Ue.INSERT){const o=t.closest("."+J.PAGE);if(o==null)return null;const s=o.getBoundingClientRect();return{x:l?Ft(e.left-s.left):Math.round(e.left-s.left),y:l?Ft(e.top-s.top):Math.round(e.top-s.top),w:e.element.width,h:e.element.height}}return{x:l?Ft(e.left):Math.round(e.left),y:l?Ft(e.top):Math.round(e.top),w:e.element.width,h:e.element.height}}function gg(n,e){const t=n.getSelectedElements();if(t.length<2)return;const l=e.diffX??0,o=e.diffY??0;for(const s of t){if(s.id===e.element.id)continue;const r=document.getElementById(s.id);r!=null&&(r.style.left=s.left+l+"px",r.style.top=s.top+o+"px")}}function hg(n,e){const t=n.getSelectedElements();if(t.length<2)return;const l=e.diffX??0,o=e.diffY??0;for(const s of t){if(s.id===e.element.id)continue;s.setLeft(s.left+l),s.setTop(s.top+o);const r=document.getElementById(s.id);r==null||r.style.removeProperty("top"),r==null||r.style.removeProperty("left")}}function vg(n){return!(n.style.rotate&&!n.isSelected)}function bg(n){const e=new pl({selector:{container:J.DROPPABLE},scale(t){return t.mode===Ue.INSERT?100:n.state.scale}});return e.on("before-dragstart",t=>{const l=t.detail;if(l==null)return t.preventDefault();const o=Reflect.get(l.target,go),s=Reflect.get(l.target,Tl);o===Ue.INSERT&&(l.container=n.component.queryElement("root"),l.ghost=n.component.queryElement("ghost")),l.mode=o===Ue.INSERT?o:Ue.MOVE,l.elementType=s,l.initDragElement=!1}),e.on("dragstart",t=>{const l=t.detail;if(l==null)return t.preventDefault();if(l.mode===Ue.INSERT){const s=tg(l.elementType);l.element=s,l.ghost.style.width=s.width+"px",l.ghost.style.height=s.height+"px";return}const o=Reflect.get(l.target,Je);if(o==null||!vg(o))return t.preventDefault();l.element=o}),e.on("dragging",t=>{const l=t.detail;l!=null&&(l.initDragElement!==!0&&(l.mode===Ue.INSERT&&(l.ghost.style.display="block"),l.mode===Ue.MOVE&&Reflect.set(l.target,Fn,Sl.DRAG_ELEMENT),l.ghost.classList.add(J.DRAGGING),l.initDragElement=!0),l.diffX=l.left-l.element.left,l.diffY=l.top-l.element.top,fg(n,l),gg(n,l),l.dropTarget&&Vn.create(l.ghost,l.dropTarget))}),e.on("dragend",t=>{const l=t.detail;if(l==null||l.initDragElement!==!0)return;Vn.clean(),l.ghost.classList.remove(J.DRAGGING),l.indicatorElement&&document.body.removeChild(l.indicatorElement),l.mode===Ue.INSERT&&(l.ghost.style.display="none"),l.mode==Ue.MOVE&&pg(l.target);const o=l.element;if(l.mode==Ue.MOVE){const d=o.left,m=o.top;o.setTop(l.top),o.setLeft(l.left),l.target.style.removeProperty("top"),l.target.style.removeProperty("left"),l.diffX=o.left-d,l.diffY=o.top-m,hg(n,l),n.selectElement(o),n.createSnapshot();return}if(l.dropTarget==null)return;const s=Reflect.get(l.dropTarget,ho);if(s==null)return;const r=s instanceof xt||s instanceof me?s:null;if(r==null)return;const i=l.dropTarget.getBoundingClientRect(),a=n.state.scale/100;o.setTop((l.top-i.top)/a),o.setLeft((l.left-i.left)/a),o.setWidth(o.width/a),o.setHeight(o.height/a),r.append(l.element),n.selectElement(o),n.createSnapshot()}),n.onDragStart=e.onDragStart,e}const Gl="quickprint-history-0000",yg=1,ft="snapshot",On="health",Wl="owner",lt="INDEX_OWNER",_g=15*60*1e3,Eg=10*60*1e3;function Tg(){const n={db:null,timer:null,promise:null};async function e(){const m=await a(On,"readwrite");if(m==null)return n.timer=s(),!1;const p=[],h=m.openCursor();h.onsuccess=async function(y){const _=y.target.result;if(_==null){t(p),n.timer=s(),He.debug("History","已检查无效快照");return}const u=_.value;u!=null&&Date.now()-u.timestamp>_g&&p.push(u),_.continue()},h.onerror=function(y){console.error(y),n.timer=s()}}async function t(m){const p=await Promise.allSettled(m.map(h=>l(h.owner)));for(let h=0;h<p.length;h++){const y=p[h];y.status==="rejected"||y.value!==!0||o(m[h].id)}}async function l(m){const p=await a(ft,"readwrite");return p==null?!1:new Promise(h=>{const y=p.index(lt).openCursor(IDBKeyRange.only(m));y.onsuccess=function(_){const u=_.target.result;if(u==null)return h(!0);u.delete(),u.continue()},y.onerror=function(_){console.error(_),h(!1)}})}async function o(m){const p=await a(On,"readwrite");return p==null?!1:dn(p.delete(m)).then(()=>!0).catch(h=>(console.log(h),!1))}function s(){return n.timer&&clearTimeout(n.timer),setTimeout(()=>e(),Eg)}function r(){return new Promise(m=>{const p=indexedDB.open(Gl,yg);p.onupgradeneeded=h=>{const _=h.target.result,u=_.createObjectStore(On,{keyPath:"id",autoIncrement:!0}),v=_.createObjectStore(ft,{keyPath:"id",autoIncrement:!0});u.createIndex(lt,Wl),v.createIndex(lt,Wl)},p.onsuccess=h=>{const y=h.target;n.db=y.result,He.debug("History",`已连接数据库【${Gl}】`),m(n.db)},p.onerror=function(h){console.error(h),n.db=null,m(null)}})}function i(){return n.promise==null?Promise.resolve(n.db):n.promise}async function a(m,p="readonly"){const h=await i();if(h==null)return null;try{return h.transaction(m,p).objectStore(m)}catch(y){return console.error(y),null}}function d(){n.promise=null,n.db&&(n.db.close(),n.db=null),n.timer&&(clearTimeout(n.timer),n.timer=null)}return n.promise=r(),n.timer=s(),e(),{ready:i,findStore:a,cleanup:d}}function dn(n){return new Promise((e,t)=>{n.onsuccess=function(l){const o=l.target;e(o.result)},n.onerror=function(l){console.error(l),t()}})}const Sg=5*60*1e3,Rt=Tg();var ot,Ye,Nn,hl,Ko;class Rg{constructor(e,t={}){nt(this,Ye);Y(this,"state");Y(this,"owner");nt(this,ot);this.state=e,this.owner=t.owner??ks(Ls.HISTORY_OWNER),Ve(this,Ye,hl).call(this)}get index(){return this.state.index}get count(){return this.state.count}async createSnapshot(e,t){const l=await Rt.findStore(ft,"readwrite");if(l==null)return!1;await Ve(this,Ye,Ko).call(this,l);const o=this.state.index+1,s={index:o,data:JSON.stringify(e),timestamp:Date.now(),owner:this.owner,action:t==null?void 0:t.action};return await dn(l.put(s)).catch(st)==null?!1:(this.state.index=o,this.state.count=o+1,!0)}async replaceSnapshot(e,t){const l=await this.getCurrentSnapshot();if(l==null||l.action!==t.action)return this.createSnapshot(e,t);const o=await Rt.findStore(ft,"readwrite");return!(o==null||(l.data=JSON.stringify(e),await dn(o.put(l)).catch(st)==null))}async getCurrentSnapshot(){const e=await Rt.findStore(ft);if(e==null)return null;const t=this.index;if(t<0)return null;const l=this.owner;return new Promise(o=>{const s=e.index(lt).openCursor(IDBKeyRange.only(l),"prev");s.onsuccess=r=>{const i=r.target.result;if(i==null)return o(null);const a=i.value;if(a.owner!=l)return i.continue();if(a.index==t)return o(a);i.continue()},s.onerror=function(r){console.error(r),o(null)}})}async getPrevSnapshot(){const e=await Rt.findStore(ft);if(e==null)return null;const t=this.state.index-1;if(t<0)return null;const l=this.owner;return new Promise(o=>{const s=e.index(lt).openCursor(IDBKeyRange.only(l),"prev");s.onsuccess=r=>{const i=r.target.result;if(i==null)return o(null);const a=i.value;if(a.owner!=l)return i.continue();if(a.index==t)return this.state.index=t,o(i.value);i.continue()},s.onerror=function(r){console.error(r),o(null)}})}async getNextSnapshot(){const e=await Rt.findStore(ft);if(e==null)return null;const t=this.state.index+1;if(t>this.state.count-1)return null;const l=this.owner;return new Promise(o=>{const s=e.index(lt).openCursor(IDBKeyRange.only(l),"next");s.onsuccess=r=>{const i=r.target.result;if(i==null)return o(null);const a=i.value;if(a.owner!=l)return i.continue();if(a.index==t)return this.state.index=t,o(i.value);i.continue()},s.onerror=function(r){console.error(r),o(null)}})}async getUsageSpace(){const e=await navigator.storage.estimate(),t=e.usage;return t==null?null:{usage:t/1024/1024,percent:e.quota?t/e.quota*100:-1}}async list(){const e=await Rt.findStore(ft);if(e==null)return[];const t=this.owner;return new Promise(l=>{const o=e.index(lt).openCursor(IDBKeyRange.only(t),"prev"),s=[];o.onsuccess=r=>{const i=r.target.result;if(i==null)return l(s);const a=i.value;if(a.owner!=t)return i.continue();s.push(a),i.continue()},o.onerror=function(r){console.error(r),l([])}})}cleanup(){Pe(this,ot)&&(clearTimeout(Pe(this,ot)),Et(this,ot,null))}}ot=new WeakMap,Ye=new WeakSet,Nn=function(){Et(this,ot,setTimeout(()=>Ve(this,Ye,hl).call(this),Sg))},hl=async function(){Pe(this,ot)&&clearTimeout(Pe(this,ot));const e=await Rt.findStore(On,"readwrite");if(e==null)return Ve(this,Ye,Nn).call(this);const t=await dn(e.index(lt).get(this.owner)).catch(st);if(t==null){const l={owner:this.owner,timestamp:Date.now()};return e.add(l),Ve(this,Ye,Nn).call(this)}t.timestamp=Date.now(),await dn(e.put(t)).catch(st),Ve(this,Ye,Nn).call(this)},Ko=function(e){const t=this.state.index,l=this.state.count;if(t<0||t==l-1)return Promise.resolve(!0);const o=this.owner;return new Promise(s=>{const r=e.index(lt).openCursor(IDBKeyRange.only(o),"prev");r.onsuccess=function(i){const a=i.target.result;if(a==null)return s(!0);const d=a.value;if(d.owner!=o)return a.continue();if(d.index>t){a.delete(),a.continue();return}s(!0)},r.onerror=function(i){console.error(i),s(!1)}})};function wg(n){const e=new Rg(xe({index:-1,count:0}));function t(){return e.index>0}function l(){return e.index>=0&&e.index<e.count-1}function o(m){return e.createSnapshot(n.value,m)}function s(m){return e.replaceSnapshot(n.value,m)}async function r(){const m=await e.getPrevSnapshot();if(m==null)return!1;const p=qn(m.data);return p==null?!1:(n.value=we.create(p),!0)}async function i(){const m=await e.getNextSnapshot();if(m==null)return!1;const p=qn(m.data);return p==null?!1:(n.value=we.create(p),!0)}function a(){return e.list()}function d(){e.cleanup()}return o(),{allowRedo:l,allowUndo:t,createSnapshot:o,undo:r,redo:i,list:a,cleanup:d,replaceSnapshot:s}}class kg{constructor(e){Y(this,"moved",!1);Y(this,"position");Y(this,"top",0);Y(this,"left",0);Y(this,"width",0);Y(this,"height",0);Y(this,"initX",0);Y(this,"initY",0);Y(this,"indicator");Y(this,"container");Y(this,"originalEvent");Y(this,"target");this.indicator=e.indicator,this.container=e.container,this.target=e.target,this.originalEvent=e.event,this.position=e.position,this.initX=e.event.clientX,this.initY=e.event.clientY}init(e=1){const t=this.target.getBoundingClientRect(),l=this.container.getBoundingClientRect();this.top=(t.top-l.top)/e,this.left=(t.left-l.left)/e,this.width=t.width/e,this.height=t.height/e,this.indicator.setPointerCapture(this.originalEvent.pointerId)}}var Zt,Kt,yt,Jo,Qo,es;const $e=class $e extends An{constructor(t={}){var l,o,s;super();nt(this,yt);Y(this,"context",null);Y(this,"selector");Y(this,"scale");Y(this,"onResizeStart");nt(this,Zt);nt(this,Kt);this.scale=t.scale,this.selector={container:((l=t.selector)==null?void 0:l.container)??J.PAGE,element:((o=t.selector)==null?void 0:o.element)??J.RESIZEABLE,indicator:((s=t.selector)==null?void 0:s.indicator)??J.RESIZEABLE_INDICATOR},this.onResizeStart=Ve(this,yt,Jo).bind(this),Et(this,Zt,Ve(this,yt,Qo).bind(this)),Et(this,Kt,Ve(this,yt,es).bind(this))}normalizeScale(){if(this.scale==null)return 1;const t=typeof this.scale=="function"?this.scale(this.context):this.scale;return t<=0?1:t/100}reset(){if(this.context==null)return;const t=this.context.indicator;t&&t.releasePointerCapture(this.context.originalEvent.pointerId),window.removeEventListener("pointermove",Pe(this,Zt)),window.removeEventListener("pointerup",Pe(this,Kt)),this.context=null}};Zt=new WeakMap,Kt=new WeakMap,yt=new WeakSet,Jo=function(t){if(t.button!==0)return;const l=t.target.closest("."+this.selector.indicator);if(l==null)return He.warn($e.TAG_NAME,"未找到的可调整元素");const o=Reflect.get(l,vo);if(o==null)return He.warn($e.TAG_NAME,"未找到的可调整元素");const s=l.closest("."+this.selector.element);if(s==null)return He.warn($e.TAG_NAME,"未找到的可调整元素");const r=Eo(s,this.selector.container);this.context=new kg({event:t,indicator:l,target:s,container:r,position:o});const i=this.createEvent("before-resizestart",this.context);if(this.dispatch(i).defaultPrevented)return He.warn($e.TAG_NAME,"已取消调整");if(this.context.container==null)return He.warn($e.TAG_NAME,"未找到的调整元素的容器");this.context.init(this.normalizeScale()),t.stopPropagation(),t.preventDefault();const a=this.createEvent("resizestart",this.context);if(this.dispatch(a).defaultPrevented)return He.warn($e.TAG_NAME,"已取消调整");window.addEventListener("pointermove",Pe(this,Zt)),window.addEventListener("pointerup",Pe(this,Kt))},Qo=function(t){const l=this.context;if(l==null)return;const o=l.position,s=this.normalizeScale(),r=l.container.getBoundingClientRect(),i=l.target.getBoundingClientRect();if(o&un.TOP){const d=Math.max((i.bottom-t.clientY)/s,$e.MIN_LENGTH);l.top=(i.bottom-r.top)/s-d,l.height=d}if(o&un.BOTTOM&&(l.height=Math.max((t.clientY-i.top)/s,$e.MIN_LENGTH)),o&un.LEFT){const d=Math.max((i.right-t.clientX)/s,$e.MIN_LENGTH);l.left=(i.right-r.left)/s-d,l.width=d}o&un.RIGHT&&(l.width=Math.max((t.clientX-i.left)/s,$e.MIN_LENGTH));const a=this.createEvent("resizing",l);this.dispatch(a).defaultPrevented||(l.target.style.top=l.top+"px",l.target.style.left=l.left+"px",l.target.style.width=l.width+"px",l.target.style.height=l.height+"px")},es=function(t){const l=this.context;if(l==null)return;t.preventDefault(),l.originalEvent=t;const o=this.createEvent("resizeend",l);this.dispatch(o).defaultPrevented||this.reset()},Y($e,"TAG_NAME","quickprint-resizeable"),Y($e,"MIN_LENGTH",12);let vl=$e;async function Lg(n,e){if(await Promise.resolve(),e.indicatorElement==null){const i=document.createElement("div");i.className="quickprint-is-indicator",e.indicatorElement=i,document.body.appendChild(i)}const t=n.doc.useGrid,l=t?Ft(e.width):Math.round(e.width),o=t?Ft(e.height):Math.round(e.height),s=e.indicatorElement,r=e.target.getBoundingClientRect();s.style.display="block",s.style.left=r.left+"px",s.style.top=r.top-To(e.element)+"px",s.textContent=`x:${e.top},y:${e.left},w:${l},h:${o}`}function Cg(n){const e=new vl({scale:()=>n.state.scale});return e.on("resizestart",t=>{const l=t.detail;if(l==null)return t.preventDefault();const o=Reflect.get(l.target,Je);if(o==null)return t.preventDefault();l.element=o}),e.on("resizing",t=>{const l=t.detail;l!=null&&(Lg(n,l),Vn.create(l.target,l.container))}),e.on("resizeend",t=>{const l=t.detail;if(l==null)return;l.indicatorElement&&document.body.removeChild(l.indicatorElement);const o=l.element;o.setTop(l.top),o.setLeft(l.left),o.setWidth(l.width),o.setHeight(l.height),l.target.style.removeProperty("top"),l.target.style.removeProperty("left"),l.target.style.removeProperty("width"),l.target.style.removeProperty("height"),n.createSnapshot(),Vn.clean()}),n.onResizeStart=e.onResizeStart,e}function Ig(n){function e(r){const i=document.activeElement,a=r.target;return i instanceof HTMLInputElement||i instanceof HTMLTextAreaElement||i.isContentEditable===!0||a.closest(".quickprint-text-editor")!=null}function t(){const r=n.doc.firstPage;if(n.state.selectMode===ge.PAGE){const i=n.state.selectedPage;return i==null?r:n.doc.findPage(i)??r}if(n.state.selectMode===ge.ELEMENT){const i=n.getSelectedElements()[0];return i==null?r:i.page??r}return r}function l(r){if(!(e(r)||Cs()))switch(r.key){case"Delete":case"Backspace":return r.preventDefault(),n.deleteSelectedElement();case"Y":case"y":if(r.ctrlKey)return r.preventDefault(),n.history.redo();case"Z":case"z":if(r.ctrlKey)return r.preventDefault(),n.history.undo();case"ArrowUp":case"ArrowDown":{const i=n.getSelectedElements();if(i.length==0)return;r.preventDefault(),r.stopPropagation();const a=r.key==="ArrowUp"?-1:1,d=i.map(m=>m.setTop(m.top+a,!0)?m:null).filter(m=>m!=null);d.length>0&&n.replaceSnapshot("top",d);return}case"ArrowLeft":case"ArrowRight":{const i=n.getSelectedElements();if(i.length==0)return;r.preventDefault(),r.stopPropagation();const a=r.key==="ArrowLeft"?-1:1,d=i.map(m=>m.setLeft(m.left+a,!0)?m:null).filter(m=>m!=null);d.length>0&&n.replaceSnapshot("left",d);return}case"P":case"p":if(r.ctrlKey)return r.preventDefault(),n.component.dispatchEvent("preview");case"S":case"s":if(r.ctrlKey)return r.preventDefault(),n.component.dispatchEvent("save");case"A":case"a":if(r.ctrlKey){r.preventDefault();const a=n.doc.pages.reduce((d,m)=>d.concat(m.children),[]);return n.multiSelectElements(a)}case"C":case"c":{const i=n.getSelectedElements();if(r.ctrlKey&&i.length>0)return r.preventDefault(),n.clipboard.writeElement(i)}case"V":case"v":if(r.ctrlKey)return n.clipboard.readElement().then(i=>{if(i.length==0)return;const a=t();for(const d of i)d.setLeft(d.left+8),d.setTop(d.top+8),a.append(d);n.createSnapshot()})}}function o(){window.addEventListener("keydown",l)}function s(){window.removeEventListener("keydown",l)}return{enable:o,disable:s}}const Sn="openprint:element,";function Og(n){function e(){return navigator.clipboard.readText().catch(a=>(console.log(a),null))}function t(a){return navigator.clipboard.writeText(a).catch(d=>{console.log(d)})}async function l(){const a=await e();if(a==null||!a.startsWith(Sn))return[];t("");const d=qn(Os(a.slice(Sn.length)),[]);return d.length===0?[]:d.map(m=>(delete m.id,me.create(m))).sort(me.sort)}function o(a){const d=`${Sn}${Is(JSON.stringify(a))}`;return t(d)}async function s(){const a=await e();return typeof a=="string"&&a.startsWith(Sn)}function r(){}function i(a){}return{readElement:l,writeElement:o,hasElement:s,readStyle:r,writeStyle:i}}const ts=Symbol();function Ng(){return{panel:{left:!0,right:!0},scale:100,selectedType:ge.NONE,selectedPage:void 0,selectMode:at.SINGLE,selected:[]}}function Dg(n,e){const t=xe(Ng()),l=wg(n),s={get doc(){return n.value},history:l,document:n,state:t,component:e,setDocument:a,selectPage:p,selectElement:h,resetSelectedElement:y,deleteSelectedElement:_,multiSelectElements:u,toggleMultiSelectedElement:v,isSingleSelectedElement:O,isNoSelectedElement:$,zoomIn:N,zoomOut:E,toggleBackground:B,toggleElementPanel:q,toggleConfigPanel:I,getSelectedElements:d,getSelectedPage:m,cleanup:M,replaceSnapshot:L},r=bg(s),i=Cg(s);s.shortcut=Ig(s),s.createSnapshot=l.createSnapshot,s.clipboard=Og();function a(D){s.document.value=D,s.history.createSnapshot()}function d(D){if(s.state.selectedType!==ge.ELEMENT)return[];const A=t.selected;if(A.length==0)return[];const x=A.map(T=>s.doc.findElement(T)).filter(T=>T!=null);return D==null?x:x.filter(T=>D.contains(T))}function m(){var A;const D=t.selectedPage;if(D!=null)return(A=n.value)==null?void 0:A.findPage(D)}function p(D){return y(),t.selectedPage=D.id,t.selectedType=ge.PAGE,!0}function h(D){t.selectMode=at.SINGLE,t.selectedType=ge.ELEMENT,t.selectedPage=void 0;const A=d();for(const x of A)x.id!==D.id&&x.blur();return D.focus(),t.selected=[D.id],!0}function y(){const D=d();for(const A of D)A.blur();return t.selected=[],t.selectedType=ge.NONE,!0}function _(){if(t.selectedType!=ge.ELEMENT||t.selected.length==0)return!1;let D=!1;const A=d();for(const x of A)x.remove()&&(D=!0);return D&&s.history.createSnapshot(),!0}function u(D){t.selectMode=at.MULTIPLE,t.selectedType=ge.ELEMENT,t.selectedPage=void 0;const A=d(),x=[];for(const T of A){if(D.some(R=>R.id===T.id)){x.push(T.id);continue}T.blur()}for(const T of D)x.includes(T.id)||T.focus();return t.selected=D.map(T=>T.id),!0}function v(D){let A=d();const x=A.findIndex(T=>T.id===D.id);return(D.type===G.TABLE_CELL&&A.some(T=>T.type!==G.TABLE_CELL)||D.type!==G.TABLE_CELL&&A.some(T=>T.type===G.TABLE_CELL))&&(A=[]),x>=0?A.splice(x,1):A.push(D),u(A)}function E(){const D=t.scale??100,A=on.indexOf(D);return A<0?(t.scale=100,!1):A>=on.length-1?!1:(t.scale=on[A+1],!0)}function N(){const D=t.scale??100,A=on.indexOf(D);return A<0?(t.scale=100,!1):A==0?!1:(t.scale=on[A-1],!0)}function B(){const A=s.doc.attributes.grid==null?!0:void 0;s.doc.attributes.grid=A}function q(){s.state.panel.left=!s.state.panel.left}function I(){s.state.panel.right=!s.state.panel.right}function L(D,A){const x=A??s.doc,T=Array.isArray(x)?"element":x instanceof we?"document":x instanceof xt?"page":"element",R=Array.isArray(x)?x.map(z=>z.id).join(","):x.id,k=`${T}:${R}:${D}`;return l.replaceSnapshot({action:k})}function O(){return s.state.selectedType!==ge.ELEMENT?!1:s.state.selectMode==at.SINGLE||s.state.selectMode==at.MULTIPLE&&s.state.selected.length==1}function $(){return s.state.selectedType!==ge.ELEMENT?!0:s.state.selected.length==0}function M(){r.cleanup(),i.cleanup(),l.cleanup(),s.shortcut.disable(),s.doc.cleanup()}return s.shortcut.enable(),s.selectPage(n.value.firstPage),fo(ts,s),_l(M),s}function Re(){return po(ts)}const Mg=V({__name:"Ruler",props:{direction:{type:String,default:"horizontal"},canvas:{type:Object,required:!0},page:{type:Object,required:!0},scale:{type:Number,default:100}},setup(n){const e=n,t=De("classes"),l=Re(),o=w(()=>({[t.horizontalRuler]:e.direction==="horizontal",[t.verticalRuler]:e.direction==="vertical"})),s=w(()=>{const u=e.page.id,v=l.doc.pages.find(E=>E.id===u);return v==null?0:e.direction=="horizontal"?v.width:v.height}),r=w(()=>{const u=s.value,v=[];for(let E=0;E<=u;E+=10)v.push(E/10);return v}),i=w(()=>{const u=s.value,v=[];for(let E=0;E<=u;E+=2.5)v.push(E);return v}),a=w(()=>{const u=l.getSelectedElements();return u.length==1?u[0]:null}),d=w(()=>e.direction==="horizontal"?{height:"100%",width:s.value*e.scale/100+"mm",left:e.page.left+"px",transform:`translateX(${-e.canvas.scrollLeft}px)`}:{width:"100%",height:s.value*e.scale/100+"mm",top:e.page.top+"px",transform:`translateY(${-e.canvas.scrollTop}px)`}),m=w(()=>{const u=a.value;if(u==null)return 0;if(u.type==="TableCell"){const v=u.parent;if(v==null)return 0;const E=v.parent;return v==null?0:E.top+v.offsetTop}if(u.type==="TableRow"){const v=u.parent;return v==null?0:v.top+u.offsetTop}return u.top}),p=w(()=>{const u=a.value;if(u==null)return 0;if(u.type==="TableCell"){const v=u.parent;if(v==null)return 0;const E=v.parent;return v==null?0:E.left+u.offsetLeft}if(u.type==="TableRow"){const v=u.parent;return v==null?0:v.left}return u.left});function h(u,v){return e.direction==="horizontal"?{left:u*(e.scale/100)+"mm",height:(v-2)%4==0?"8px":"4px"}:{top:u*(e.scale/100)+"mm",width:(v-2)%4==0?"8px":"4px"}}function y(u){return e.direction==="horizontal"?{left:u*(e.scale/100)+"cm"}:{top:u*(e.scale/100)+"cm"}}function _(u){return e.direction==="horizontal"?{left:p.value*(e.scale/100)+"px",width:u.width*(e.scale/100)+"px",height:"100%"}:{top:m.value*(e.scale/100)+"px",height:u.height*(e.scale/100)+"px",width:"100%"}}return(u,v)=>(S(),C("div",{class:f(o.value)},[c("div",{class:f(b(t).ruler),style:j(d.value)},[a.value?(S(),C("div",{key:0,class:f(b(t).selected),style:j(_(a.value))},null,6)):W("",!0),(S(!0),C(ne,null,fe(i.value,(E,N)=>(S(),C("div",{key:E,class:f(b(t).scale),style:j(h(E,N))},null,6))),128)),(S(!0),C(ne,null,fe(r.value,E=>(S(),C("div",{class:f(b(t).number),style:j(y(E))},K(E),7))),256))],6)],2))}}),xg="_horizontalRuler_170u5_2",Ag="_verticalRuler_170u5_15",qg="_ruler_170u5_27",$g="_scale_170u5_32",Bg="_number_170u5_46",Pg="_selected_170u5_71",Vg={horizontalRuler:xg,verticalRuler:Ag,ruler:qg,scale:$g,number:Bg,selected:Pg},zg={classes:Vg},Xl=U(Mg,[["__cssModules",zg]]),Fg=["title"],Rn=8,Ug=V({__name:"DragLine",props:{top:{type:Number,default:0},zoom:{type:Number,default:1},title:{type:String,default:null},disabled:{type:Boolean,default:!1},min:{type:Number,default:null},max:{type:Number,default:null}},emits:["move"],setup(n,{emit:e}){const t=n,l=e,o=De("classes"),s={},r=Re(),i=w(()=>({top:Math.round(t.top*t.zoom)+"px"}));function a(h){if(h.button!=0||t.disabled===!0)return;const y=h.target.closest("."+o.dragLine);y!=null&&(h.stopPropagation(),s.init=!1,s.target=y,s.parent=y.offsetParent,s.target.setPointerCapture(h.pointerId),window.addEventListener("pointermove",d),window.addEventListener("pointerup",m))}function d(h){h.preventDefault();const y=p(s.parent);let _=h.clientY-y.top;_<0&&(_=0),_>y.height&&(_=y.height),t.min>0&&_<t.min+Rn&&(_=t.min+Rn),t.max>0&&_>t.max-Rn&&(_=t.max-Rn),s.target.style.top=_/(r.state.scale/100)+"px",s.top=_,s.init=!0}function m(h){s.init===!0&&l("move",{top:s.top/(r.state.scale/100)}),s.target.releasePointerCapture(h.pointerId),window.removeEventListener("pointermove",d),window.removeEventListener("pointerup",m)}function p(h){return h instanceof HTMLElement?h.getBoundingClientRect():new DOMRect(0,0,window.innerWidth,window.innerHeight)}return(h,y)=>(S(),C("div",{class:f({[b(o).dragLine]:!0,[b(o).disabled]:n.disabled}),style:j(i.value),onPointerdown:re(a,["stop"]),title:n.title},null,46,Fg))}}),Hg="_dragLine_1m7rt_2",Gg="_disabled_1m7rt_26",Wg={dragLine:Hg,disabled:Gg},Xg={classes:Wg},Yl=U(Ug,[["__cssModules",Xg]]),Yg=V({__name:"Selection",setup(n,{expose:e}){const t=be(),l=be(),o=en("selectionRef"),s=be(),r=Re();let i=[];function a(){return{init:!1,initialX:0,initialY:0,top:0,left:0}}function d(){const _=[],u=l.value;if(u==null)return _;const v=m(u);if(v.length==0)return _;const E=o.value;return v.forEach(N=>{if(!ii(N,E)){N.classList.remove(J.SELECTED);return}const B=Reflect.get(N,Je);B instanceof me&&(N.classList.add(J.SELECTED),_.push(B))}),_}function m(_){if(_.matches("."+J.ELEMENT)){const u=Reflect.get(_,Je);if(u&&u.type===G.TABLE)return _.querySelectorAll(":scope td")}return _.querySelectorAll(`:scope .${J.PAGE} > .${J.SELECTABLE}`)}function p(_,u){const v=u.closest("."+J.PAPER);if(v==null)return;_.stopPropagation(),_.preventDefault();const E=a(),N=v.getBoundingClientRect();E.initialX=_.clientX,E.initialY=_.clientY,E.top=_.clientY-N.top,E.left=_.clientX-N.left,l.value=u,s.value=E,t.value=v,i=[],window.addEventListener("pointermove",h),window.addEventListener("pointerup",y)}function h(_){const u=s.value;if(u==null)return;_.stopPropagation(),_.preventDefault();const v=o.value;if(u.init!==!0){if(Math.abs(_.clientX-u.initialX)<4&&Math.abs(_.clientY-u.initialY)<4)return;v.setPointerCapture(_.pointerId),v.style.display="block",u.init=!0}const E=Math.abs(_.clientX-u.initialX),N=Math.abs(_.clientY-u.initialY),B=_.clientX<u.initialX?-E:0,q=_.clientY<u.initialY?-N:0;v.style.top=u.top+q+"px",v.style.left=u.left+B+"px",v.style.width=E+"px",v.style.height=N+"px",i=d()}function y(_){const u=s.value;if(u==null)return;u.init&&(_.stopPropagation(),_.preventDefault()),i.length>0&&r.multiSelectElements(i);const v=o.value;v.releasePointerCapture(_.pointerId),v.style.display="none",s.value=void 0,window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",y)}return e({onSelectStart:p}),(_,u)=>(S(),C("div",{ref_key:"selectionRef",ref:o,class:f(_.classes.selection),onClick:u[0]||(u[0]=re(()=>{},["stop"]))},null,2))}}),jg="_selection_10jfe_2",Zg={selection:jg},Kg={classes:Zg},Jg=U(Yg,[["__cssModules",Kg]]);function Qg(n,e,t){e.element.isSelected||t.selectElement(e.element);const l=t.getSelectedElements();if(l.length<=1){const a=Vl(e.element.type);if(typeof a!="function")return mt.open(n.clientX,n.clientY,{menus:jl(e,t)});const m=a(e.element).map(p=>Dn(p,t,[e.element],e.element)).filter(p=>p!=null);return mt.open(n.clientX,n.clientY,{menus:m})}if(new Set(l.map(a=>a.type)).size>1){const d=["copy","delete","---","z-index"].map(m=>Dn(m,t,l,e.element)).filter(m=>m!=null);return mt.open(n.clientX,n.clientY,{menus:d})}const s=Vl(e.element.type);if(typeof s!="function")return mt.open(n.clientX,n.clientY,{menus:jl(e,t)});const i=s(e.element).map(a=>Dn(a,t,l,e.element)).filter(a=>a!=null);return mt.open(n.clientX,n.clientY,{menus:i})}function jl(n,e){return["setting","text-direction","---","copy","delete","---","z-index"].map(l=>Dn(l,e,e.getSelectedElements(),n.element)).filter(l=>l!=null)}function eh(n){const e=document.querySelector("#"+n.id);if(e==null)return!1;const t=e.querySelector("img,svg");if(t==null)return!1;const l=t.getBoundingClientRect(),o=ae.processLengthToPX(se(n,"top"))??1,s=ae.processLengthToPX(se(n,"bottom"))??1,r=ae.processLengthToPX(se(n,"left"))??1,i=ae.processLengthToPX(se(n,"right"))??1,a=ae.processLengthToPX(n.getStyle("paddingTop"))??0,d=ae.processLengthToPX(n.getStyle("paddingBottom"))??0,m=ae.processLengthToPX(n.getStyle("paddingLeft"))??0,p=ae.processLengthToPX(n.getStyle("paddingRight"))??0;return n.setWidth(l.width+r+i+m+p,!0),n.setHeight(l.height+o+s+a+d,!0),!0}function Dn(n,e,t,l){if(typeof n!="string")return n;switch(n){case"---":case"divider":return{type:"divider"};case"copy":return{type:"menu",label:"复制",icon:"icon-copy",detail:"Ctrl+C",handler(){e.clipboard.writeElement(t)}};case"delete":return{type:"menu",label:"删除",icon:"icon-delete",submenu:[{type:"menu",label:"元素",icon:"icon-pintu",detail:"Delete",handler(){t.forEach(o=>o.remove()),e.createSnapshot()}},{type:"menu",label:"数据源",icon:"icon-datasource",handler(){t.forEach(o=>o.resetDS()),e.createSnapshot()}}]};case"z-index":return{type:"menu",label:"层级",icon:"icon-cengji",submenu:[{type:"menu",icon:"icon-vertical-align-top",label:"移至顶层",handler(){for(const o of t)o.id!==l.id&&o.moveToTop();l.moveToTop(),e.createSnapshot()}},{type:"menu",label:"上移一层",icon:"icon-arrowup",handler(){t.forEach(o=>o.moveUp()),e.createSnapshot()}},{type:"menu",icon:"icon-arrowdown",label:"下移一层",handler(){t.forEach(o=>o.moveDown()),e.createSnapshot()}},{type:"menu",icon:"icon-vertical-align-bottom",label:"移至底层",handler(){t.forEach(o=>o.moveToBottom()),e.createSnapshot()}}]};case"setting":return{type:"menu",label:"元素属性",icon:"icon-setting",handler(){Sf(t).then(o=>{for(const s of t)s.style=Object.assign({},s.style,o.style);e.createSnapshot()}).catch(ke)}};case"text-direction":return{type:"menu",label:"文字方向",icon:"icon-text-direction",handler(){Ho(t).then(o=>{for(const s of t)s.style=Object.assign({},s.style,o.style);e.createSnapshot()}).catch(ke)}};case"qrcode-setting":return{type:"menu",label:"二维码属性",icon:"icon-qrcode",handler(){Rf(t).then(o=>{var s;for(const r of t)r.style=Object.assign({},r.style,o.style),r.attributes.barcolor=(s=o.qrcode)==null?void 0:s.barcolor;e.createSnapshot()}).catch(ke)}};case"barcode-setting":return{type:"menu",label:"条形码属性",icon:"icon-barcode",handler(){wf(t).then(o=>{var s,r,i;for(const a of t)a.style=Object.assign({},a.style,o.style),a.attributes.barcolor=(s=o.barcode)==null?void 0:s.barcolor,a.attributes.width=(r=o.barcode)==null?void 0:r.width,a.attributes.height=(i=o.barcode)==null?void 0:i.height;e.createSnapshot()}).catch(ke)}};case"auto-resize":return{type:"menu",label:"自动调整尺寸",icon:"icon-resize",handler(){t.map(s=>eh(s)).some(Boolean)&&e.createSnapshot()}};default:return null}}const th=V({props:{element:{type:me,required:!0}},setup(n){const e=De("classes"),t=Re(),l=w(()=>{n.element.state.key;const p=n.element,h={"--quickprint-element-top":p.top+"px","--quickprint-element-left":p.left+"px","--quickprint-element-width":p.width+"px","--quickprint-element-height":p.height+"px","z-index":p.zIndex};return r()&&(h.transform=`rotate(${p.style.rotate}deg)`),h}),o={TOP:[e.resizeTop,Vt.TOP],BOTTOM:[e.resizeBottom,Vt.BOTTOM],LEFT:[e.resizeLeft,Vt.LEFT],RIGHT:[e.resizeRight,Vt.RIGHT],BOTTOM_RIGHT:[e.resizeBottomRight,Vt.BOTTOM_RIGHT]},s=[o.TOP,o.BOTTOM,o.LEFT,o.RIGHT,o.BOTTOM_RIGHT];function r(){const p=n.element;return p.style.rotate==0||p.style.rotate==null?!1:t.state.selectMode===at.SINGLE?!p.isSelected:!0}function i(p){const h=ng(p.type);if(h==null)return g("div",{class:e.unknown},[g("span",null,[ue("未知的打印元素")])]);const y={element:p,key:p.id+"_"+p.state.key};return sg(p.type)?(y.onContextmenu=d,rt(h,y)):rt(h,y)}function a(p,h){h.stopPropagation();const y=h.target.closest("."+J.ELEMENT);y&&Reflect.get(y,Fn)===Sl.DRAG_ELEMENT||(h.ctrlKey?t.toggleMultiSelectedElement(p):t.selectElement(p))}function d(p){p.stopPropagation(),p.preventDefault(),Qg(p,n,t)}function m(){return!ig(n.element.type)||r()?null:s.map(p=>{const h={class:[J.RESIZEABLE_INDICATOR,p[0]],["."+vo]:p[1]};return g("div",zs(h,{onPointerdown:t.onResizeStart}),null)})}return function(){const p=n.element,h={["."+Je]:p,["."+Tl]:p.type,id:p.id,key:p.id,class:{[J.ELEMENT]:!0,[J.DRAGGABLE]:!0,[J.RESIZEABLE]:!0,[J.SELECTED]:p.state.selected,[J.SELECTABLE]:og(p.type),["quickprint-is-"+p.type.toLowerCase()]:!0},style:l.value,onClick:a.bind(null,p)};return g("div",h,[i(p),m()])}}}),nh="_unknown_za8zh_2",lh="_resizeTop_za8zh_12",oh="_resizeBottom_za8zh_20",sh="_resizeLeft_za8zh_28",ih="_resizeRight_za8zh_36",rh="_resizeBottomRight_za8zh_44",ah={unknown:nh,resizeTop:lh,resizeBottom:oh,resizeLeft:sh,resizeRight:ih,resizeBottomRight:rh},ch={classes:ah},uh=U(th,[["__cssModules",ch]]),ns=to(()=>no(()=>import("./component-BReujPS2.js"),__vite__mapDeps([2,3,1,4,5]))),dh=V({__name:"DocJson",props:{doc:{type:we,required:!0}},setup(n){const e=n,t=Qe(),l=he(JSON.stringify(e.doc,null,"  "));return t==null||t.useHandle("confirm",()=>l.value),(o,s)=>(S(),ee(b(ns),{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=r=>l.value=r),language:"json",class:f(o.classes.json)},null,8,["modelValue","class"]))}}),ph="_json_9crpe_2",fh={json:ph},mh={classes:fh},gh=U(dh,[["__cssModules",mh]]),hh=Ce(function(n){return ut("调试",g(gh,{doc:n.document.value},null),{preset:"docDebug"}).promisify().catch(st)});async function vh(n,e,t){const l=[{type:"menu",label:"重新加载",icon:"icon-reload",detail:"Ctrl+R",handler(){window.location.reload()}},{type:"menu",label:"全部选中",icon:"icon-select-all",detail:"Ctrl+A",handler:()=>{const r=e.page.children??[];t.multiSelectElements(r)}},{type:"divider"}],o=[],s=t.getSelectedElements();s.length>0&&o.push({type:"menu",label:"复制",icon:"icon-copy",detail:"Ctrl+C",handler:()=>{t.clipboard.writeElement(s)}}),await t.clipboard.hasElement()&&o.push({type:"menu",label:"粘贴",icon:"icon-paste",detail:"Ctrl+V",async handler(){const r=n.target.closest("."+J.PAGE);if(r==null)return;const i=await t.clipboard.readElement();if(i.length==0)return;const a=r.getBoundingClientRect(),d=n.clientX-a.left-i[0].left,m=n.clientY-a.top-i[0].top;for(const p of i)p.setLeft(p.left+d),p.setTop(p.top+m),e.page.append(p);t.createSnapshot()}}),o.length>0&&l.push(...o,{type:"divider"}),l.push({type:"menu",label:"调试",icon:"icon-bug",handler(){hh(t).then(r=>{if(r==null)return;const i=we.create(r);t.setDocument(i)})}},{type:"menu",label:"预览",icon:"icon-run",detail:"Ctrl+P",handler(){t.component.dispatchEvent("preview")}},{type:"menu",label:"保存",icon:"icon-save",detail:"Ctrl+S",handler(){t.component.dispatchEvent("save")}}),mt.open(n.clientX,n.clientY,{menus:l})}const bh=V({props:{doc:{type:we,required:!0},page:{type:xt,required:!0}},setup(n){const e=De("classes"),t=Re(),l=en("selectionRef"),o=en("paperRef"),s=he(0),r=w(()=>n.page.width),i=w(()=>n.page.height);function a(N){N.stopPropagation();const B=N.target.closest("."+J.PAPER);B&&Reflect.get(B,Fn)===Sl.SELECTION||(t.resetSelectedElement(),t.selectPage(n.page))}function d(){if(n.page.header.display===!1)return null;const N=n.page.header.height,B="page_header_"+s.value;return g(Yl,{title:"页眉",top:N,onMove:p,key:B},null)}function m(){if(n.page.footer.display===!1)return null;const N=ae.mm_to_px(i.value)-n.page.footer.height,B="page_footer_"+s.value;return g(Yl,{title:"页脚",top:N,onMove:h,key:B},null)}function p(N){n.page.setHeaderHeight(N.top),s.value++}function h(N){n.page.setFooterHeight(ae.mm_to_px(i.value)-N.top),s.value++}function y(N){N.stopPropagation(),N.preventDefault(),vh(N,n,t)}function _(){const N=n.doc.margins;if(N==null)return null;const B=[];return N.top&&B.push(g("div",{title:"上边距参考线",class:e.marginHorizontalGuide,style:{top:N.top}},null)),N.bottom&&B.push(g("div",{title:"下边距参考线",class:e.marginHorizontalGuide,style:{bottom:N.bottom}},null)),N.left&&B.push(g("div",{title:"左边距参考线",class:e.marginVerticalGuide,style:{left:N.left}},null)),N.right&&B.push(g("div",{title:"右边距参考线",class:e.marginVerticalGuide,style:{right:N.right}},null)),B.length>0?B:null}function u(){const N={["."+ho]:n.page,key:n.page.id,style:{width:r.value+"mm",height:i.value+"mm"},class:{[J.PAGE]:!0,[J.DROPPABLE]:!0,[e.grid]:n.doc.useGrid},onContextmenu:y},B=n.page.children.map(q=>g(uh,{element:q},null));return g("div",N,[d(),B,m(),_()])}function v(N){if(N.button!==0)return;N.stopPropagation(),N.preventDefault();const q=N.target.closest("."+J.ELEMENT);if(q==null)return E(N,o.value);const I=Reflect.get(q,Je);return I==null?E(N,o.value):I.type===G.TABLE?E(N,q):rg(I.type)?t.onDragStart(N):E(N,o.value)}function E(N,B){var q;(q=l.value)==null||q.onSelectStart(N,B)}return function(){const N=t.state.scale/100,B={id:"@"+n.page.id,ref:"paperRef",class:{[J.PAPER]:!0,[J.SELECTED]:t.state.selectedPage===n.page.id},style:{width:r.value*N+"mm",height:i.value*N+"mm"},onPointerdown:v,onClick:a};return g("div",B,[u(),g(Jg,{ref:"selectionRef"},null)])}}}),yh="_paper_1eq2b_2",_h="_grid_1eq2b_12",Eh="_marginHorizontalGuide_1eq2b_19",Th="_marginVerticalGuide_1eq2b_27",Sh={paper:yh,grid:_h,marginHorizontalGuide:Eh,marginVerticalGuide:Th},Rh={classes:Sh},wh=U(bh,[["__cssModules",Rh]]),kh={class:"quickprint-is-fill-h quickprint-is-scrollable"},Lh="icon-zhanweifu",Ch=V({__name:"Element",setup(n){const e=Re();return(t,l)=>(S(),C("div",{class:f(t.classes.panel)},[c("div",{class:f(t.classes.header)},"可打印元素",2),c("div",kh,[c("div",{class:f(t.classes.grid)},[(S(!0),C(ne,null,fe(b(Jm),o=>(S(),C("div",mo({key:o.type,class:[b(J).DRAGGABLE,t.classes.element],[`.${b(go)||""}`]:b(Ue).INSERT,[`.${b(Tl)||""}`]:o.type,onPointerdown:l[0]||(l[0]=(...s)=>b(e).onDragStart&&b(e).onDragStart(...s))}),[g(b(H),{icon:o.icon??Lh,size:"16px",class:f(t.classes.icon)},null,8,["icon","class"]),c("span",null,K(o.title),1)],48))),128))],2)])],2))}}),Ih="_panel_1p36j_2",Oh="_header_1p36j_8",Nh="_grid_1p36j_18",Dh="_element_1p36j_30",Mh="_icon_1p36j_45",xh={panel:Ih,header:Oh,grid:Nh,element:Dh,icon:Mh},Ah={classes:xh},qh=U(Ch,[["__cssModules",Ah]]),$h=["onClick"],Bh=V({__name:"SelectPath",setup(n){const e=Re(),t=w(()=>{const s=e.state,r=[{id:e.doc.id,title:"文档",type:"document"}];if(s.selectedType===ge.PAGE){const i=e.getSelectedPage();if(i!=null){const a="页面"+(i.index+1);r.push({id:i.id,title:a,type:"page",data:i})}return r}if(s.selectedType===ge.ELEMENT){if(s.selectMode===at.MULTIPLE){const d=e.getSelectedElements();if(d.length===0)return r;let m=d[0];for(;m.parent;){const p=m.parent;if(p instanceof xt){const h="页面"+(p.index+1);return r.push({id:p.id,title:h,type:"page",data:p}),r}m=p}return r}let i=e.getSelectedElements()[0];if(i==null)return r;const a=[{id:i.id,title:gn(i.type),type:"element",data:i}];for(;i.parent;){const d=i.parent;if(d instanceof xt){const m="页面"+(d.index+1);return a.unshift({id:d.id,title:m,type:"page",data:d}),r.concat(a)}a.unshift({id:d.id,title:gn(d.type),type:"element",data:d}),i=d}}return r}),l=w(()=>{if(e.state.selectedType!=ge.ELEMENT)return;const r=e.getSelectedElements();if(r.length!=1)return;const i=r[0],a=Hn(i,e.doc.ds);if(!(a==null||!a.content))return a.type===ye.VARIABLE||a.type===ye.FORMULA?`[${a.content}]`:a.content});function o(s){if(s.type==="element")return e.selectElement(s.data);if(s.type==="page")return e.selectPage(s.data)}return(s,r)=>(S(),C("div",{class:f(s.classes.paths)},[(S(!0),C(ne,null,fe(t.value,(i,a)=>(S(),C(ne,{key:i.id},[a>0?(S(),ee(b(H),{key:0,class:f(s.classes.icon),icon:"icon-right",size:"12px"},null,8,["class"])):W("",!0),c("div",{class:f(s.classes.path),onClick:d=>o(i)},K(i.title),11,$h)],64))),128)),l.value?(S(),C(ne,{key:0},[g(b(H),{class:f(s.classes.ion),icon:"icon-right",size:"12px"},null,8,["class"]),c("div",{class:f(s.classes.content)},K(l.value),3)],64)):W("",!0)],2))}}),Ph="_paths_fuk62_2",Vh="_path_fuk62_2",zh="_icon_fuk62_28",Fh="_content_fuk62_33",Uh={paths:Ph,path:Vh,icon:zh,content:Fh},Hh={classes:Uh},Gh=U(Bh,[["__cssModules",Hh]]),Wh=["min","readonly","placeholder"],Xh=V({__name:"LabelNumber",props:At({modelValue:{type:Number,default:null},label:{type:String,default:null},min:{type:Number,default:null},defaultValue:{type:Number,default:0},precision:{type:Number,default:null},readonly:{type:Boolean,default:!1},placeholder:{type:String,default:null}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=n,t=hn(n,"modelValue");function l(o){const r=o.target.value;if(t==null||r===""){const a=e.min?e.min:e.defaultValue;t.value=a;return}const i=Number(r);if(!Number.isNaN(i)&&(e.min!=null&&i<e.min&&(t.value=e.min),e.precision!=null)){const a=Math.pow(10,e.precision);t.value=Math.round(i*a)/a}}return(o,s)=>(S(),C("label",{class:f({[o.classes.labelNumber]:!0,[o.classes.readonly]:n.readonly})},[Le(c("input",{class:"quickprint-form-control",type:"number","onUpdate:modelValue":s[0]||(s[0]=r=>t.value=r),step:"any",min:n.min,readonly:n.readonly,placeholder:n.placeholder,onBlur:l},null,40,Wh),[[Be,t.value]]),c("span",{class:f(o.classes.label)},K(n.label),3)],2))}}),Yh="_labelNumber_1aifb_2",jh="_label_1aifb_2",Zh="_readonly_1aifb_25",Kh={labelNumber:Yh,label:jh,readonly:Zh},Jh={classes:Kh},Ut=U(Xh,[["__cssModules",Jh]]),Qh={class:"quickprint-config"},ev={class:"quickprint-config-body quickprint-is-scrollable quickprint-is-fill-h"},tv={class:"quickprint-config-group"},nv={class:"quickprint-config-section quickprint-config-inline"},lv={class:"quickprint-config-content quickprint-config-inline"},ov={class:"quickprint-config-group"},sv={class:"quickprint-config-section quickprint-config-inline"},iv={class:"quickprint-config-content quickprint-config-inline"},rv={class:"quickprint-config-section quickprint-config-inline"},av={class:"quickprint-config-content quickprint-form-inline"},cv={class:"quickprint-config-group"},uv={class:"quickprint-config-section quickprint-config-inline"},dv={class:"quickprint-config-content quickprint-form-inline"},pv={key:0,class:"quickprint-config-section quickprint-config-inline"},fv={class:"quickprint-config-content quickprint-form-inline"},mv={class:"quickprint-config-section quickprint-config-inline"},gv={class:"quickprint-config-content quickprint-form-inline"},hv=V({__name:"PageConfig",props:{page:{type:xt,required:!0}},setup(n){const e=n,t=Re(),l=[{label:"显示",value:!0},{label:"隐藏",value:!1}],o=[{label:"禁止",value:En.NONE},{label:"跟随表格",value:En.TABLE,detail:"在尾页最后一个元素是表格，则页脚显示在表格下方"}],s=w({get(){return e.page.size.type},set(m){e.page.size.type!==m&&(e.page.size.type=m,m===pn.CONTENT&&(e.page.size.orientation=void 0),t.createSnapshot())}}),r=w({get(){return e.page.orientation},set(m){e.page.size.orientation!==m&&(e.page.size.orientation=m,t.createSnapshot())}}),i=w(()=>e.page.width),a=w({get(){return e.page.height},set(m){if(e.page.size.height===m)return;const p=Number(m);!oo(p)||p<0||(e.page.size.height=p,t.createSnapshot())}}),d=w({get(){return e.page.footer.flow??En.NONE},set(m){e.page.footer.flow!==m&&(e.page.footer.flow=m===En.NONE?void 0:m,t.createSnapshot())}});return(m,p)=>(S(),C("div",Qh,[p[15]||(p[15]=c("div",{class:"quickprint-config-title"},"页面配置",-1)),c("div",ev,[c("div",tv,[p[7]||(p[7]=c("div",{class:"quickprint-config-group-title"},"页眉",-1)),c("section",nv,[p[6]||(p[6]=c("header",{class:"quickprint-config-header"},"位置",-1)),c("div",lv,[g(Ut,{class:"quickprint-form-inline-item",label:"高",modelValue:n.page.header.height,readonly:""},null,8,["modelValue"]),g(Dt,{modelValue:n.page.header.display,"onUpdate:modelValue":p[0]||(p[0]=h=>n.page.header.display=h),options:l,class:"quickprint-form-left-gap"},null,8,["modelValue"])])])]),c("div",ov,[p[10]||(p[10]=c("div",{class:"quickprint-config-group-title"},"页脚",-1)),c("section",sv,[p[8]||(p[8]=c("header",{class:"quickprint-config-header"},"位置",-1)),c("div",iv,[g(Ut,{class:"quickprint-form-inline-item",label:"高",modelValue:n.page.footer.height,readonly:""},null,8,["modelValue"]),g(Dt,{modelValue:n.page.footer.display,"onUpdate:modelValue":p[1]||(p[1]=h=>n.page.footer.display=h),options:l,class:"quickprint-form-left-gap"},null,8,["modelValue"])])]),c("section",rv,[p[9]||(p[9]=c("header",{class:"quickprint-config-header"},"跟随",-1)),c("div",av,[g(b(te),{modelValue:d.value,"onUpdate:modelValue":p[2]||(p[2]=h=>d.value=h),options:o},null,8,["modelValue"])])])]),c("div",cv,[p[14]||(p[14]=c("div",{class:"quickprint-config-group-title"},"画布",-1)),c("section",uv,[p[11]||(p[11]=c("header",{class:"quickprint-config-header"},"尺寸",-1)),c("div",dv,[g(Dt,{modelValue:s.value,"onUpdate:modelValue":p[3]||(p[3]=h=>s.value=h),options:b(Ks),class:"quickprint-w-full"},null,8,["modelValue","options"])])]),n.page.size.type===b(pn).CONTENT?(S(),C("section",pv,[p[12]||(p[12]=c("header",{class:"quickprint-config-header"},"内容",-1)),c("div",fv,[g(Ut,{class:"quickprint-form-inline-item",label:"宽",modelValue:i.value,readonly:""},null,8,["modelValue"]),g(Ut,{class:"quickprint-form-inline-item",label:"高",modelValue:a.value,"onUpdate:modelValue":p[4]||(p[4]=h=>a.value=h)},null,8,["modelValue"])])])):W("",!0),c("section",mv,[p[13]||(p[13]=c("header",{class:"quickprint-config-header"},"方向",-1)),c("div",gv,[g(Dt,{modelValue:r.value,"onUpdate:modelValue":p[5]||(p[5]=h=>r.value=h),class:"quickprint-w-full",options:b(_o),disabled:n.page.size.type===b(pn).CONTENT},null,8,["modelValue","options","disabled"])])])])])]))}}),vv=["value","placeholder","disabled"],bv=V({__name:"InputWithLabel",props:{label:{type:String,default:null},modelValue:{type:Number,default:null},standard:{type:String,default:"px"},target:{type:String,default:"px"},placeholder:{type:String,default:"请输入"},min:{type:Number,default:1},defaultValue:{type:Number,default:0},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,l=e,o=en("inputRef"),s=w({get(){return t.standard===t.target?t.modelValue:t.standard==="px"&&t.target==="mm"?ae.px_to_mm(t.modelValue):t.standard==="mm"&&t.target==="px"?ae.mm_to_px(t.modelValue):0},set(m){if(!t.disabled){if(t.standard===t.target)return l("update:modelValue",m);if(t.standard==="px"&&t.target==="mm")return l("update:modelValue",ae.mm_to_px(m));if(t.standard==="mm"&&t.target==="px")return l("update:modelValue",ae.px_to_mm(m))}}}),r=w(()=>t.disabled!==!0&&t.clearable&&s.value!=null);function i(m){if(t.disabled)return;const h=m.target.value;if(s==null||h===""){if(t.clearable)return;const _=t.min?t.min:t.defaultValue;s.value=_;return}const y=Number(h);if(!Number.isNaN(y)){if(t.min!=null&&y<t.min){s.value=t.min;return}if(t.standard==="px"){s.value=Math.round(y);return}s.value=y}}function a(){t.disabled||l("update:modelValue",void 0)}function d(){var m;t.disabled||((m=o.value)==null||m.blur(),setTimeout(()=>{var p;return(p=o.value)==null?void 0:p.focus()},50))}return(m,p)=>(S(),C("label",{class:f({[m.classes.inputWithLabel]:!0,[m.classes.withClear]:n.clearable})},[c("span",{class:f(m.classes.label)},K(n.label),3),c("input",{ref_key:"inputRef",ref:o,class:"quickprint-form-control",type:"number",step:"any",value:s.value,placeholder:n.placeholder,disabled:n.disabled,onBlur:i,onKeydown:uo(d,["enter"])},null,40,vv),r.value?(S(),C("span",{key:0,class:f(m.classes.clearBtn),onClick:re(a,["stop"])},[g(b(H),{icon:"icon-close",size:"11px"})],2)):W("",!0)],2))}}),yv="_inputWithLabel_1k5y2_2",_v="_clearBtn_1k5y2_7",Ev="_label_1k5y2_11",Tv="_withClear_1k5y2_31",Sv={inputWithLabel:yv,clearBtn:_v,label:Ev,withClear:Tv},Rv={classes:Sv},wn=U(bv,[["__cssModules",Rv]]),wv=V({__name:"UnitSelect",props:At({modelValue:{type:String,default:"px"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=[{label:"像素(px)",value:"px"},{label:"毫米(mm)",value:"mm"}],t=n,l=hn(n,"modelValue"),o=w(()=>{var s;return((s=e.find(r=>r.value===t.modelValue))==null?void 0:s.label)??t.modelValue});return(s,r)=>(S(),C("span",{class:f(s.classes.unit),title:"1毫米≈3.778像素，1像素≈0.265毫米"},[g(b(te),{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=i=>l.value=i),options:e,class:f(s.classes.select),appearance:"none",border:"none"},{selected:Se(()=>[c("span",{class:f(s.classes.text)},K(o.value),3)]),_:1},8,["modelValue","class"])],2))}}),kv="_unit_135mn_2",Lv="_text_135mn_8",Cv="_select_135mn_25",Iv={unit:kv,text:Lv,select:Cv},Ov={classes:Iv},Nv=U(wv,[["__cssModules",Ov]]),Dv=V({__name:"CopyBtn",emits:["copy"],setup(n,{emit:e}){const t=e,l=he(!1);function o(){t("copy",async function(r){await navigator.clipboard.writeText(r).catch(Ns)!==!1&&(l.value=!0,setTimeout(()=>l.value=!1,500))})}return(s,r)=>(S(),C("button",{type:"button",class:f(["quickprint-text-btn",s.classes.btn]),title:"复制",onClick:o},[g(b(H),{icon:"icon-copy"}),g(Fs,{name:"quickprint-fade"},{default:Se(()=>[l.value?(S(),C("span",{key:0,class:f(s.classes.message)},"已复制",2)):W("",!0)]),_:1})],2))}}),Mv="_btn_v9scw_2",xv="_message_v9scw_6",Av={btn:Mv,message:xv},qv={classes:Av},$v=U(Dv,[["__cssModules",qv]]),Bv=V({__name:"window",props:{code:{type:String,default:""},doc:{type:we,default:null},mode:{type:String,default:"code"}},setup(n){const e=n,t=Qe(),l=he(e.code),o=be();function s(){return l.value}function r(){e.doc!=null&&Nc({doc:e.doc}).then(p=>{var y;if(p==null)return;const h=p.type=="reference"?`[=${p.value}]`:`[${p.value}]`;(y=o.value)==null||y.insert(h)})}function i(p){var h;return dt(p,(h=e.doc)==null?void 0:h.ds)}function a(){var p;(p=o.value)==null||p.insert(`[2.6.${bl.ELEMENT_VALUR}]`)}function d(){Dc().then(p=>{var h;p!=null&&((h=o.value)==null||h.insert(p.value))})}function m(){Mc({doc:e.doc}).then(p=>{var h;p!=null&&((h=o.value)==null||h.insert(p.value))})}return t==null||t.useHandle("confirm",s),(p,h)=>(S(),C("div",{class:f(p.classes.window)},[n.mode!=="code"?(S(),C("div",{key:0,class:f(p.classes.toolbar)},[n.mode=="condition"?(S(),C(ne,{key:0},[c("button",{type:"button",class:"quickprint-text-btn",onClick:a},[g(b(H),{icon:"icon-number-sign"}),h[1]||(h[1]=c("span",null,"插入元素值",-1))]),c("div",{class:f(p.classes.divider)},null,2)],64)):W("",!0),c("button",{type:"button",onClick:r,class:"quickprint-text-btn"},[g(b(H),{icon:"icon-insert-var"}),h[2]||(h[2]=c("span",null,"插入变量",-1))]),c("button",{type:"button",class:"quickprint-text-btn",onClick:d},[g(b(H),{icon:"icon-function"}),h[3]||(h[3]=c("span",null,"插入函数",-1))]),c("button",{type:"button",class:"quickprint-text-btn",onClick:m},[g(b(H),{icon:"icon-formula"}),h[4]||(h[4]=c("span",null,"插入公式",-1))])],2)):W("",!0),g(b(ns),{modelValue:l.value,"onUpdate:modelValue":h[0]||(h[0]=y=>l.value=y),language:"javascript",class:f(p.classes.code),formatVariable:i,autofocus:"",ref_key:"codeRef",ref:o},null,8,["modelValue","class"])],2))}}),Pv="_window_n935p_2",Vv="_toolbar_n935p_11",zv="_code_n935p_22",Fv="_divider_n935p_27",Uv={window:Pv,toolbar:Vv,code:zv,divider:Fv},Hv={classes:Uv},ls=U(Bv,[["__cssModules",Hv]]),os=Ce(function(n){return ut("公式",g(ls,{code:n==null?void 0:n.code,doc:n==null?void 0:n.doc,mode:n==null?void 0:n.mode},null),{preset:"editor"}).promisify().catch(ke)}),Gv=Ce(function(n,e){return ut(n,g(ls,{code:e},null),{preset:"editor"}).promisify().catch(ke)}),Wv={class:"quickprint-config-section quickprint-config-inline"},Xv={class:"quickprint-config-content"},Yv=["value"],jv=V({__name:"Visibility",props:{element:{type:me,required:!0}},setup(n){const e=n,t=w({get(){var i;return((i=e.element.visibility)==null?void 0:i.type)??Nt.VISIBLE},set(i){e.element.visibility==null&&(e.element.visibility={}),i!==Nt.CONDITION&&(e.element.visibility.condition=void 0),e.element.visibility.type=i}}),l=w({get(){var i;return((i=e.element.visibility)==null?void 0:i.condition)??""},set(i){e.element.visibility==null&&(e.element.visibility={}),e.element.visibility.condition=i}}),o=w(()=>{var i;return Rl((i=e.element.visibility)==null?void 0:i.condition,e.element.doc)}),s=w(()=>{var i;return t.value!==Nt.CONDITION?!1:!((i=e.element.visibility)!=null&&i.condition)});function r(){const i=l.value||`[2.6.${bl.ELEMENT_VALUR}]`;os({code:i,doc:e.element.doc,mode:"condition"}).then(a=>{a!=null&&(l.value=a)})}return(i,a)=>(S(),C(ne,null,[c("section",Wv,[a[1]||(a[1]=c("header",{class:"quickprint-config-header"},"可见性",-1)),c("div",Xv,[g(b(te),{class:"quickprint-w-full",options:b(Gs),modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=d=>t.value=d)},null,8,["options","modelValue"])])]),t.value===b(Nt).CONDITION?(S(),C("div",{key:0,class:f([i.classes.condition,"quickprint-config-section"]),onClick:r},[c("textarea",{value:o.value,class:"quickprint-form-control quickprint-form-control-block quickprint-config-space quickprint-is-scrollable",rows:"3",readonly:"",placeholder:"请输入"},null,8,Yv),s.value?(S(),ee(b(H),{key:0,icon:"icon-open-new",size:"14px"})):W("",!0)],2)):W("",!0)],64))}}),Zv="_condition_siopf_2",Kv={condition:Zv},Jv={classes:Kv},Qv=U(jv,[["__cssModules",Jv]]);function eb(n,e){return w({get(){return n.element.attributes.position??Mn.DEFAULT},set(t){if(n.element.attributes.position===t)return;const l=t===Mn.DEFAULT?void 0:t;n.element.attributes.position=l,e.createSnapshot()}})}function tb(n,e){return w({get(){return n.element.attributes.printMode??xn.ONCE},set(t){if(n.element.attributes.printMode===t)return;const l=t===xn.ONCE?void 0:t;n.element.attributes.printMode=l,e.createSnapshot()}})}function nb(n,e){return w({get(){return n.element.attributes.overflow??fn.HIDDEN},set(t){if(n.element.attributes.overflow===t)return;const l=t===fn.HIDDEN?void 0:t;n.element.attributes.overflow=l,e.createSnapshot()}})}function lb(n,e){return w({get(){const t=n.element;return t.type!==G.TABLE_CELL?n.element.width:t.hasColSpan?t.offsetWidth:t.width},set(t){n.element.width!==t&&(n.element.setWidth(t,!0),e.createSnapshot())}})}function ob(n,e){return w({get(){const t=n.element;return t.type!==G.TABLE_CELL?n.element.height:t.hasRowSpan?t.offsetHeight:t.height},set(t){n.element.height!==t&&(n.element.setHeight(t,!0),e.createSnapshot())}})}function sb(n,e){return w({get(){return n.element.attributes.display},set(t){n.element.attributes.display!==t&&(n.element.attributes.display=t??void 0,e.createSnapshot())}})}function ib(n,e){return w({get(){return n.element.ds.type},set(t){n.element.ds.type!==t&&(n.element.ds.type=t,n.element.ds.value=void 0,e.createSnapshot())}})}const rb=V({__name:"ImageUpload",emits:["upload"],setup(n,{emit:e}){const t=e,l=be();function o(){const r=l.value;r!=null&&(r.value="",r.click())}function s(r){var m;const i=r.target;if(i==null)return;const a=(m=i.files)==null?void 0:m[0];if(a==null)return;const d=new FileReader;d.readAsDataURL(a),d.onload=function(p){var y;const h=(y=p.target)==null?void 0:y.result;typeof h=="string"&&t("upload",h)}}return(r,i)=>(S(),C("div",{class:f(r.classes.upload)},[c("button",{type:"button",onClick:o,class:"quickprint-text-btn"},[g(b(H),{icon:"icon-upload"}),i[0]||(i[0]=c("span",null,"上传本地图片",-1))]),c("input",{type:"file",ref_key:"inputRef",ref:l,onChange:s,accept:"image/*",class:f(r.classes.input)},null,34)],2))}}),ab="_upload_1tbfz_2",cb="_input_1tbfz_9",ub={upload:ab,input:cb},db={classes:ub},pb=U(rb,[["__cssModules",db]]),fb=V({__name:"Const",props:{element:{type:me,required:!0}},setup(n){const e=n,t=w(()=>e.element.type===G.IMAGE),l=w({get(){return e.element.ds.value},set(s){e.element.ds.value=s}});function o(s){l.value=s}return(s,r)=>(S(),C("div",{class:f(s.classes.const)},[Le(c("textarea",{"onUpdate:modelValue":r[0]||(r[0]=i=>l.value=i),class:"quickprint-form-control quickprint-form-control-block quickprint-config-space",rows:"5",placeholder:"请输入"},null,512),[[Be,l.value]]),t.value?(S(),C("div",{key:0,class:f(s.classes.upload)},[g(pb,{onUpload:o})],2)):W("",!0)],2))}}),mb="_upload_bqfbo_6",gb={const:"_const_bqfbo_2",upload:mb},hb={classes:gb},vb=U(fb,[["__cssModules",hb]]),bb={class:"quickprint-config-ds-var-type"},yb=["title"],_b=V({__name:"Variable",props:{element:{type:me,required:!0}},setup(n){const e=n,t=Re(),l=w(()=>ce(e.element.ds.value)),o=w(()=>dt(e.element.ds.value,t.doc.ds));function s(i){i.stopPropagation(),e.element.ds.value=void 0}async function r(){var m;const i=await wl({doc:t.doc,value:e.element.ds.value}).catch(st);if(i==null||(e.element.setDataSource(ye.VARIABLE,i.value),e.element.type!=G.TABLE_CELL||i.type!=="ds"))return;const a=e.element.parent;if(a==null||a.isBindVariable||((m=i.parent)==null?void 0:m.type)!==ie.ARRAY)return;const d=i.parent;a.setDataSource(ye.VARIABLE,`${Mt.DS}.${d.type}.${d.name}`)}return(i,a)=>(S(),C("div",{class:"quickprint-config-ds-variable",onClick:r},[l.value?(S(),C(ne,{key:0},[a[0]||(a[0]=c("span",{class:"quickprint-config-ds-placeholder"},"请选择",-1)),g(b(H),{icon:"icon-open-new",size:"14px"})],64)):(S(),C(ne,{key:1},[c("span",bb,"<"+K(b(ua)(e.element.ds.value))+">",1),c("span",{class:"quickprint-is-fill-w quickprint-is-truncate",title:o.value},K(o.value),9,yb),c("button",{type:"button",class:"quickprint-text-btn quickprint-config-ds-remove-var",onClick:s},[g(b(H),{icon:"icon-close",size:"12px"})])],64))]))}}),Eb=["value"],Tb=V({__name:"Code",props:{element:{type:me,required:!0}},setup(n){const e=n,t=w(()=>ce(e.element.ds.value));function l(){return Jt(e.element.ds.value)?e.element.ds.value:`function data(element){
  // 在此处自定义返回值
  // 支持返回Promise
  return
}`}function o(){Gv("自定义",l()).then(s=>{s!=null&&(e.element.ds.value=s)})}return(s,r)=>(S(),C("div",{onClick:o,class:f(s.classes.code)},[c("textarea",{value:e.element.ds.value,class:"quickprint-form-control quickprint-form-control-block quickprint-config-space quickprint-is-scrollable",rows:"3",readonly:"",placeholder:"请输入"},null,8,Eb),t.value?(S(),ee(b(H),{key:0,icon:"icon-open-new",size:"14px"})):W("",!0)],2))}}),Sb="_code_1az68_2",Rb={code:Sb},wb={classes:Rb},kb=U(Tb,[["__cssModules",wb]]),Lb=["value"],Cb=V({__name:"Formula",props:{element:{type:me,required:!0}},setup(n){const e=n,t=Re(),l=w(()=>ce(e.element.ds.value)),o=w(()=>Rl(e.element.ds.value,e.element.doc));function s(){const r=e.element.ds.value;os({code:r,doc:t.doc,mode:"formula"}).then(i=>{i!=null&&(e.element.ds.value=i)})}return(r,i)=>(S(),C("div",{onClick:s,class:f(r.classes.code)},[c("textarea",{value:o.value,class:"quickprint-form-control quickprint-form-control-block quickprint-config-space quickprint-is-scrollable",rows:"3",readonly:"",placeholder:"请输入"},null,8,Lb),l.value?(S(),ee(b(H),{key:0,icon:"icon-open-new",size:"14px"})):W("",!0)],2))}}),Ib="_code_ipm2q_2",Ob={code:Ib},Nb={classes:Ob},Db=U(Cb,[["__cssModules",Nb]]);function Mb(n){switch(n.ds.type){case ye.CONST:return g(vb,{element:n},null);case ye.VARIABLE:return g(_b,{element:n},null);case ye.CODE:return g(kb,{element:n},null);case ye.FORMULA:return g(Db,{element:n},null);default:return null}}const xb=V({props:{element:{type:me,required:!0}},setup(n){const e=Re(),t=w(()=>gn(n.element.type)),l=w(()=>js.filter(L=>L.value!=n.element.type)),o=he("px"),s=lb(n,e),r=ob(n,e),i=nb(n,e),a=eb(n,e),d=tb(n,e),m=sb(n,e),p=ib(n,e),h=w(()=>{const L=n.element;return L.type!==G.TABLE_CELL?!1:L.hasColSpan}),y=w(()=>{const L=n.element;return L.type!==G.TABLE_CELL?!1:L.hasRowSpan}),_=w(()=>{const L=n.element,O=L.parent;if(O===null||!(O instanceof xt))return!1;const $=O.header;if($.display&&L.bottom<=($.height??0))return!1;const M=O.parent;if(M==null)return!1;const D=O.footer;return!(D.display&&L.top>=Math.floor(ae.mm_to_px(M.paper.height))-(D.height??0))});function u(L,O){return O==null?!1:!!O.includes(L)}function v(){const L=rn(n.element.type);if(u(de.LAYOUT,L==null?void 0:L.exclude))return null;const O=n.element,$=u(de.COORD,L==null?void 0:L.exclude)?null:g("section",{class:"quickprint-config-section quickprint-config-inline"},[g("header",{class:"quickprint-config-header"},[ue("位置")]),g("div",{class:"quickprint-config-content quickprint-form-inline"},[g(wn,{class:"quickprint-form-inline-item",label:"左",modelValue:O.left,"onUpdate:modelValue":R=>O.left=R,target:o.value},null),g(wn,{class:"quickprint-form-inline-item",label:"上",modelValue:O.top,"onUpdate:modelValue":R=>O.top=R,target:o.value},null)])]),M=u(de.SIZE)?null:g("section",{class:"quickprint-config-section quickprint-config-inline"},[g("header",{class:"quickprint-config-header"},[g("span",null,[ue("尺寸")])]),g("div",{class:"quickprint-config-content quickprint-form-inline"},[g(wn,{class:"quickprint-form-inline-item",label:"宽",modelValue:s.value,"onUpdate:modelValue":R=>s.value=R,target:o.value,disabled:h.value},null),g(wn,{class:"quickprint-form-inline-item",label:"高",modelValue:r.value,"onUpdate:modelValue":R=>r.value=R,target:o.value,disabled:y.value},null)])]),D=u(de.VISIBILITY,L==null?void 0:L.exclude)?null:g(Qv,{element:O},null),A=u(de.OVERFLOW,L==null?void 0:L.exclude)?null:g("section",{class:"quickprint-config-section quickprint-config-inline"},[g("header",{class:"quickprint-config-header"},[ue("溢出时")]),g("div",{class:"quickprint-config-content"},[g(te,{modelValue:i.value,"onUpdate:modelValue":R=>i.value=R,options:ei,class:"quickprint-w-full"},null)])]),x=u(de.PRINT_MODE,L==null?void 0:L.exclude)?null:g("section",{class:"quickprint-config-section quickprint-config-inline"},[g("header",{class:"quickprint-config-header"},[ue("打印模式")]),g("div",{class:"quickprint-config-content"},[g(te,{modelValue:d.value,"onUpdate:modelValue":R=>d.value=R,options:Qs,class:"quickprint-w-full"},null)])]),T=u(de.POSITION,L==null?void 0:L.exclude)||!_.value?null:g("section",{class:"quickprint-config-section quickprint-config-inline"},[g("header",{class:"quickprint-config-header"},[ue("定位模式")]),g("div",{class:"quickprint-config-content"},[g(te,{modelValue:a.value,"onUpdate:modelValue":R=>a.value=R,options:Js,class:"quickprint-w-full"},null)])]);return g("div",{class:"quickprint-config-group"},[g("div",{class:"quickprint-config-group-title quickprint-is-row"},[g("span",{class:"quickprint-is-fill-w"},[ue("布局")]),g("span",null,[ue("单位：")]),g(Nv,{modelValue:o.value,"onUpdate:modelValue":R=>o.value=R},null)]),$,M,D,A,x,T])}function E(){const L=rn(n.element.type);if(u(de.BASIC,L==null?void 0:L.exclude))return null;const O=n.element,$=u(de.PREFIX,L==null?void 0:L.exclude)?null:g("section",{class:"quickprint-config-section quickprint-config-inline"},[g("header",{class:"quickprint-config-header"},[ue("前缀")]),g("div",{class:"quickprint-config-content"},[Le(g("input",{"onUpdate:modelValue":A=>O.attributes.prefix=A,type:"text",class:"quickprint-form-control quickprint-w-full",placeholder:"请输入"},null),[[Be,O.attributes.prefix]])])]),M=u(de.SUFFIX,L==null?void 0:L.exclude)?null:g("section",{class:"quickprint-config-section quickprint-config-inline"},[g("header",{class:"quickprint-config-header"},[ue("后缀")]),g("div",{class:"quickprint-config-content"},[Le(g("input",{"onUpdate:modelValue":A=>O.attributes.suffix=A,type:"text",class:"quickprint-form-control quickprint-w-full",placeholder:"请输入"},null),[[Be,O.attributes.suffix]])])]),D=u(de.DISPLAY,L==null?void 0:L.exclude)?null:g("section",{class:"quickprint-config-section quickprint-config-inline"},[g("header",{class:"quickprint-config-header"},[ue("数据类型")]),g("div",{class:"quickprint-config-content"},[g(te,{options:l.value,modelValue:m.value,"onUpdate:modelValue":A=>m.value=A,class:"quickprint-w-full"},null)])]);return g("div",{class:"quickprint-config-group"},[g("div",{class:"quickprint-config-group-title"},[ue("基础")]),$,M,D])}function N(){const L=rn(n.element.display);return(L==null?void 0:L.display)==null?null:rt(L.display,{element:n.element})}function B(){const L=rn(n.element.type);if(u(de.ATTRIBUTES,L==null?void 0:L.exclude))return null;const O=L!=null&&L.attributes?rt(L.attributes,{element:n.element}):null,$=N();if(O==null&&$==null)return null;const M=$!=null&&O!=null?g("div",{class:"quickprint-config-divider"},null):null;return g("div",{class:"quickprint-config-group"},[g("div",{class:"quickprint-config-group-title"},[ue("属性")]),$,M,O])}function q(){const L=rn(n.element.type);return u(de.DATASOURCE,L==null?void 0:L.exclude)?null:g("div",{class:"quickprint-config-group"},[g("div",{class:"quickprint-config-group-title"},[ue("数据")]),g(te,{options:bo,modelValue:p.value,"onUpdate:modelValue":O=>p.value=O},null),Mb(n.element)])}function I(L){L(n.element.id)}return function(){const O=n.element;return g("div",{class:"quickprint-config"},[g("div",{class:"quickprint-config-title"},[g("span",null,[t.value,ue("配置")]),null]),g("div",{class:"quickprint-config-body quickprint-is-fill-h quickprint-is-scrollable"},[g("div",{class:"quickprint-config-group"},[g("section",{class:"quickprint-config-section quickprint-config-inline"},[g("header",{class:"quickprint-config-header"},[ue("标识")]),g("div",{class:"quickprint-config-content"},[g("span",{class:"quickprint-config-id"},[O.id]),g($v,{onCopy:I},null)])]),g("section",{class:"quickprint-config-section quickprint-config-inline"},[g("header",{class:"quickprint-config-header"},[ue("标题")]),g("div",{class:"quickprint-config-content"},[Le(g("input",{type:"text","onUpdate:modelValue":$=>O.title=$,class:"quickprint-form-control quickprint-w-full",placeholder:"请输入"},null),[[Be,O.title]])])])]),v(),E(),B(),q()])])}}}),Ab=V({setup(){const n=Re(),e=De("classes");function t(){return g("div",{class:e.tip},[ue("未知的打印元素")])}function l(){return g("div",{class:e.tip},[ue("请先选择元素")])}function o(){const i=n.getSelectedPage()??n.doc.firstPage;return g(hv,{page:i},null)}function s(){const i=n.getSelectedElements()[0];return i==null?l():Object.values(G).includes(i.type)===!1?t():rt(xb,{element:i,key:i.id})}function r(){const i=n.state;return i.selectedType!==ge.ELEMENT?!1:i.selectMode===at.SINGLE?!0:i.selected.length===1}return function(){return r()?s():o()}}}),qb="_tip_cdonk_2",$b={tip:qb},Bb={classes:$b},Pb=U(Ab,[["__cssModules",Bb]]);function et(n,e){if(n.state.selectedType!==ge.ELEMENT)return;const l=n.getSelectedElements();if(l.length===1)return l[0].getStyle(e)}function We(n,e,t){if(n.state.selectedType!==ge.ELEMENT)return;const o=n.getSelectedElements();if(o.length!=0){for(const s of o)s.setStyle(e,t);n.createSnapshot()}}function Ze(n,e){if(n.state.selectedType!==ge.ELEMENT)return;const l=n.getSelectedElements();if(l.length!=0){for(const o of l)o.removeStyle(e);n.createSnapshot()}}function Vb(n){const e="underline";return w({get(){if(n.state.selectedType!==ge.ELEMENT)return!1;const l=n.getSelectedElements();return l.length!==1?!1:l[0].getStyle(e)===!0},set(t){t?We(n,e,t):Ze(n,e)}})}function zb(n){const e="lineThrough";return w({get(){if(n.state.selectedType!==ge.ELEMENT)return!1;const l=n.getSelectedElements();return l.length!==1?!1:l[0].getStyle(e)===!0},set(t){t?We(n,e,t):Ze(n,e)}})}function Fb(n){const e="lineHeight";return w({get(){return et(n,e)},set(t){t===kt.DEFAULT?Ze(n,e):We(n,e,t)}})}function Ub(n){const e="highlightColor";return w({get(){return et(n,e)??ze.BLACK},set(t){t===""?Ze(n,e):We(n,e,t)}})}function Hb(n){const e="backgroundColor";return w({get(){return et(n,e)??ze.BLACK},set(t){t===""?Ze(n,e):We(n,e,t)}})}function Gb(n){const e="fontStyle";return w({get(){return et(n,e)===Ol.ITALIC},set(t){t?We(n,e,Ol.ITALIC):Ze(n,e)}})}function Wb(n){const e="textAlign";return w({get(){return et(n,e)??ht.LEFT},set(t){t===ht.LEFT?Ze(n,e):We(n,e,t)}})}function Xb(n){const e="verticalAlign";return w({get(){return et(n,e)??it.MIDDLE},set(t){t===it.MIDDLE?Ze(n,e):We(n,e,t)}})}function Yb(n){const e="fontFamily";return w({get(){return et(n,e)},set(t){t===pe.DEFAULT?Ze(n,e):We(n,e,t)}})}function jb(n){const e="fontSize";return w({get(){return et(n,e)},set(t){t===Ie.DEFAULT?Ze(n,e):We(n,e,t)}})}function Zb(n){const e="color";return w({get(){return et(n,e)??ze.BLACK},set(t){We(n,e,t)}})}function Kb(n){const e="fontWeight";return w({get(){return et(n,e)===700},set(t){t?We(n,e,700):Ze(n,e)}})}const Jb=["title","onClick"],Qb=V({__name:"BorderSelect",setup(n){const e=Object.freeze({NONE:0,TOP:1,BOTTOM:2,LEFT:4,RIGHT:8,ALL:15}),t=Re(),l=w(()=>{if(t.state.selectedType!==ge.ELEMENT)return null;const _=t.getSelectedElements();if(_.length!==1)return null;const u=_[0],v={};return Ee(u,"top")&&(v.borderTopStyle="solid"),Ee(u,"right")&&(v.borderRightStyle="solid"),Ee(u,"bottom")&&(v.borderBottomStyle="solid"),Ee(u,"left")&&(v.borderLeftStyle="solid"),v}),o=[{label:"上框线",value:e.TOP,icon:"icon-border-top"},{label:"下框线",value:e.BOTTOM,icon:"icon-border-bottom"},{label:"左框线",value:e.LEFT,icon:"icon-border-left"},{label:"右框线",value:e.RIGHT,icon:"icon-border-right"}];function s(y){if(t.state.selectedType!==ge.ELEMENT)return!1;const u=t.getSelectedElements();if(u.length!==1)return!1;const v=u[0];switch(y){case e.TOP:return Ee(v,"top");case e.RIGHT:return Ee(v,"right");case e.BOTTOM:return Ee(v,"bottom");case e.LEFT:return Ee(v,"left");case e.ALL:return Ee(v,"top")&&Ee(v,"right")&&Ee(v,"bottom")&&Ee(v,"left");default:return!1}}function r(y){if(t.state.selectedType!==ge.ELEMENT)return;const u=t.getSelectedElements();if(u.length!=0){switch(y){case e.TOP:return a(u);case e.BOTTOM:return m(u);case e.LEFT:return p(u);case e.RIGHT:return d(u);case e.ALL:return h(u)}t.createSnapshot()}}function i(){if(t.state.selectedType!==ge.ELEMENT)return;const _=t.getSelectedElements();if(_.length!=0){for(const u of _)u.setStyle("borderStyle",void 0),u.setStyle("borderTopStyle",void 0),u.setStyle("borderRightStyle",void 0),u.setStyle("borderBottomStyle",void 0),u.setStyle("borderLeftStyle",void 0);t.createSnapshot()}}function a(y){const _=!y.every(u=>Ee(u,"top"));for(const u of y)_?u.setStyle("borderTopStyle",Q.SOLID):u.removeStyle("borderTopStyle")}function d(y){const _=!y.every(u=>Ee(u,"right"));for(const u of y)_?u.setStyle("borderRightStyle",Q.SOLID):u.removeStyle("borderRightStyle")}function m(y){const _=!y.every(u=>Ee(u,"bottom"));for(const u of y)_?u.setStyle("borderBottomStyle",Q.SOLID):u.removeStyle("borderBottomStyle")}function p(y){const _=!y.every(u=>Ee(u,"left"));for(const u of y)_?u.setStyle("borderLeftStyle",Q.SOLID):u.removeStyle("borderLeftStyle")}function h(y){const _=!y.every(u=>Ee(u,"top")&&Ee(u,"right")&&Ee(u,"bottom")&&Ee(u,"left"));for(const u of y){if(_){u.setStyle("borderStyle",_?"solid":void 0);continue}u.removeStyle("borderStyle"),u.removeStyle("borderTopStyle"),u.removeStyle("borderRightStyle"),u.removeStyle("borderBottomStyle"),u.removeStyle("borderLeftStyle")}}return(y,_)=>(S(),ee(b(ko),null,{popover:Se(()=>[c("div",{class:f(y.classes.popover)},[c("div",null,[(S(),C("button",{type:"button",title:"全部框线",key:b(e).ALL,class:f({"quickprint-text-btn":!0,[y.classes.tool]:!0,"quickprint-is-selected":s(b(e).ALL)}),onClick:_[0]||(_[0]=u=>r(b(e).ALL))},[g(b(H),{icon:"icon-border",size:"16px"})],2)),(S(),C("button",{type:"button",title:"无框线",key:b(e).NONE,class:f({"quickprint-text-btn":!0,[y.classes.tool]:!0}),onClick:i},[g(b(H),{icon:"icon-border-none",size:"16px"})],2))]),c("div",{class:f(y.classes.divider)},[(S(),C(ne,null,fe(o,u=>c("button",{type:"button",title:u.label,key:u.value,class:f({"quickprint-text-btn":!0,[y.classes.tool]:!0,"quickprint-is-selected":s(u.value)}),onClick:v=>r(u.value)},[g(b(H),{icon:u.icon,size:"16px"},null,8,["icon"])],10,Jb)),64))],2)],2)]),default:Se(()=>[c("div",{class:f(["quickprint-text-btn",y.classes.borderSelect]),title:"边框"},[c("div",{class:f({[y.classes.border]:!0}),style:j(l.value)},null,6)],2)]),_:1}))}}),ey="_border_rprfx_2",ty="_borderSelect_rprfx_10",ny="_popover_rprfx_14",ly="_divider_rprfx_18",oy={border:ey,borderSelect:ty,popover:ny,divider:ly},sy={classes:oy},iy=U(Qb,[["__cssModules",sy]]),ry="_itemLabel_noxgo_1",ay="_fieldset_noxgo_7",ss={itemLabel:ry,fieldset:ay};function cy(n,e){var l,o;const t={width:n.width??"54px"};return g("label",{class:"quickprint-is-row"},[g("span",{class:ss.itemLabel,style:t},[n.label]),(o=(l=e.slots).default)==null?void 0:o.call(l)])}function uy(n,e){var l,o;const t=n.desc?g(mi,{title:n.desc},null):null;return g("div",{class:ss.fieldset},[g("header",null,[g("span",null,[n.header]),t]),(o=(l=e.slots).default)==null?void 0:o.call(l)])}const an={Item:cy,Fieldset:uy},dy={class:"quickprint-is-fill-h quickprint-is-scrollable quickprint-p-4"},py={class:"quickprint-config-section"},fy={class:"quickprint-form-inline"},my={class:"quickprint-config-section quickprint-config-inline"},gy=V({__name:"Paper",props:{config:{type:Object,required:!0}},setup(n){const e=n;he("mm");const t=[{label:"磅",value:oe.PT},{label:"像素",value:oe.PX},{label:"毫米",value:oe.MM}],l=h("top"),o=h("bottom"),s=h("left"),r=h("right"),i=w(()=>sl.map(y=>({label:y.size===il.CUSTOM?"自定义":`${y.size}(${y.width}mm ✕ ${y.height}mm)`,value:y.size})));function a(y){e.config.width=y,p()}function d(y){e.config.height=y,p()}function m(y){const _=sl.find(u=>u.size===y);_!=null&&(e.config.width=_.width,e.config.height=_.height,e.config.orientation=_.orientation,e.config.margins=_.margins,e.config.size=_.size)}function p(){const y=e.config,_=sl.find(u=>u.size===il.CUSTOM?!1:u.orientation===y.orientation&&u.width===y.width&&u.height===y.height);if(_==null){y.size=il.CUSTOM;return}y.size=_.size}function h(y){return w({get(){var _;return(_=e.config.margins)==null?void 0:_[y]},set(_){e.config.margins==null&&(e.config.margins={}),e.config.margins[y]=_}})}return(y,_)=>(S(),C("div",dy,[c("section",py,[_[5]||(_[5]=c("header",{class:"quickprint-config-header"},[c("span",null,"尺寸")],-1)),g(b(te),{options:i.value,modelValue:n.config.size,"onUpdate:modelValue":m,class:"quickprint-form-control-block quickprint-form-bottom-gap"},null,8,["options","modelValue"]),c("div",fy,[g(Ut,{class:"quickprint-form-inline-item",label:"宽",modelValue:n.config.width,min:1,"onUpdate:modelValue":a},null,8,["modelValue"]),g(Ut,{class:"quickprint-form-inline-item",label:"高",modelValue:n.config.height,min:1,"onUpdate:modelValue":d},null,8,["modelValue"])])]),c("section",my,[_[6]||(_[6]=c("header",{class:"quickprint-config-header"},"方向",-1)),g(Dt,{modelValue:n.config.orientation,"onUpdate:modelValue":_[0]||(_[0]=u=>n.config.orientation=u),options:b(_o)},null,8,["modelValue","options"])]),g(b(an).Fieldset,{header:"参考边距",desc:"可用于标记可打印区域。请确保设打印元素在可打印区域内，避免内容被裁剪。"},{default:Se(()=>[c("div",{class:f(y.classes.margins)},[g(b(an).Item,{label:"上边距"},{default:Se(()=>[g(ve,{modelValue:b(l),"onUpdate:modelValue":_[1]||(_[1]=u=>Oe(l)?l.value=u:null),options:t,defaultUnit:b(oe).MM},null,8,["modelValue","defaultUnit"])]),_:1}),g(b(an).Item,{label:"下边距"},{default:Se(()=>[g(ve,{modelValue:b(o),"onUpdate:modelValue":_[2]||(_[2]=u=>Oe(o)?o.value=u:null),options:t,defaultUnit:b(oe).MM},null,8,["modelValue","defaultUnit"])]),_:1}),g(b(an).Item,{label:"左边距"},{default:Se(()=>[g(ve,{modelValue:b(s),"onUpdate:modelValue":_[3]||(_[3]=u=>Oe(s)?s.value=u:null),options:t,defaultUnit:b(oe).MM},null,8,["modelValue","defaultUnit"])]),_:1}),g(b(an).Item,{label:"右边距"},{default:Se(()=>[g(ve,{modelValue:b(r),"onUpdate:modelValue":_[4]||(_[4]=u=>Oe(r)?r.value=u:null),options:t,defaultUnit:b(oe).MM},null,8,["modelValue","defaultUnit"])]),_:1})],2)]),_:1})]))}}),hy="_margins_1x2w9_2",vy={margins:hy},by={classes:vy},yy=U(gy,[["__cssModules",by]]),_y={class:"quickprint-is-fill-h quickprint-is-scrollable quickprint-p-4"},Ey={class:"quickprint-is-fill-h"},Ty={class:"quickprint-is-fill-h"},Sy=V({__name:"Font",props:{config:{type:Object,required:!0}},setup(n){const e=n,t=[{label:"倍",value:oe.NONE},{label:"磅",value:oe.PT},{label:"像素",value:oe.PX}],l=w(()=>jn.map(d=>(d.style={fontFamily:d.value==pe.DEFAULT?pe.SONG:d.value},d))),o=w(()=>Bo.map(d=>(d.style={fontFamily:d.value==pe.DEFAULT?pe.SONG:d.value},d))),s=w({get(){return e.config.style.fontFamily??pe.DEFAULT},set(d){const m=d===pe.DEFAULT?void 0:d;e.config.style.fontFamily=m}}),r=w({get(){return e.config.style.enFontFamily??pe.DEFAULT},set(d){const m=d===pe.DEFAULT?void 0:d;e.config.style.enFontFamily=m}}),i=w({get(){return e.config.style.fontSize},set(d){const m=ce(d)?void 0:d;e.config.style.fontSize=m}}),a=w({get(){return e.config.style.lineHeight},set(d){e.config.style.lineHeight=d}});return(d,m)=>(S(),C("div",_y,[c("section",{class:f(d.classes.font)},[c("div",{class:f(d.classes.zhFont)},[c("div",{class:f(d.classes.title)},"中文字体",2),c("div",Ey,[g(b(te),{options:l.value,modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=p=>s.value=p)},null,8,["options","modelValue"])])],2),c("div",{class:f(d.classes.enFont)},[c("div",{class:f(d.classes.title)},"西文字体",2),c("div",Ty,[g(b(te),{options:o.value,modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=p=>r.value=p)},null,8,["options","modelValue"])])],2),c("div",{class:f(d.classes.lineHeight)},[c("div",{class:f(d.classes.title)},"行高",2),g(ve,{modelValue:a.value,"onUpdate:modelValue":m[2]||(m[2]=p=>a.value=p),options:t},null,8,["modelValue"])],2),c("div",{class:f(d.classes.fontSize)},[c("div",{class:f(d.classes.title)},"字号",2),g(Vo,{modelValue:i.value,"onUpdate:modelValue":m[3]||(m[3]=p=>i.value=p),height:"144px"},null,8,["modelValue"])],2)],2)]))}}),Ry="_font_145qf_2",wy="_zhFont_145qf_9",ky="_enFont_145qf_16",Ly="_lineHeight_145qf_23",Cy="_fontSize_145qf_30",Iy="_title_145qf_45",Oy={font:Ry,zhFont:wy,enFont:ky,lineHeight:Ly,fontSize:Cy,title:Iy},Ny={classes:Oy},Dy=U(Sy,[["__cssModules",Ny]]),My=V({__name:"index",props:{doc:{type:we,required:!0},active:{type:String,default:null}},setup(n){const e=n,t=Qe(),l=xe(o());function o(){const i=e.doc;return{size:i.paper.size,width:i.paper.width,height:i.paper.height,orientation:i.paper.orientation,margins:i.margins?{...i.margins}:void 0,style:{...i.style}}}function s(){t==null||t.confirm(l)}function r(){t==null||t.cancel()}return(i,a)=>(S(),C("div",{class:f(i.classes.setting)},[n.active=="paper"?(S(),ee(yy,{key:0,config:l},null,8,["config"])):W("",!0),n.active=="font"?(S(),ee(Dy,{key:1,config:l},null,8,["config"])):W("",!0),c("div",{class:f(i.classes.footer)},[c("button",{type:"button",class:"quickprint-text-btn",onClick:r},"取消"),c("button",{type:"button",class:"quickprint-text-btn",onClick:s},"确定")],2)],2))}}),xy="_setting_h98ws_2",Ay="_footer_h98ws_10",qy={setting:xy,footer:Ay},$y={classes:qy},By=U(My,[["__cssModules",$y]]),Py=Ce(function(n){return je("文档",(e,t)=>g(By,{doc:n,active:t},null),{preset:"setting",icon:"svg:icon-setting",tabs:[{label:"纸张",name:"paper",active:!0},{label:"字体",name:"font"}]}).promisify().then(e=>(n.paper.size=e.size,n.paper.width=e.width,n.paper.height=e.height,n.paper.orientation=e.orientation,n.margins=e.margins,n.style=e.style,e)).catch(ke)}),Vy=V({props:{toolbar:{type:Array,required:!0}},setup(n){const e=Re(),t=De("classes"),l=Yb(e),o=jb(e),s=Fb(e),r=Hb(e),i=Ub(e),a=Zb(e),d=Kb(e),m=Gb(e),p=Vb(e),h=zb(e),y=Wb(e),_=Xb(e),u=w(()=>jn.map(x=>(x.style={fontFamily:x.value==pe.DEFAULT?pe.SONG:x.value},x)));function v(x){return g("button",{type:"button",class:"quickprint-text-btn",onClick:()=>x.handler(e)},[x.icon&&g(H,{icon:x.icon},null),g("span",null,[x.label])])}function E(x){x.preventDefault()}function N(){d.value=!d.value}function B(){m.value=!m.value}function q(){p.value=!p.value}function I(){h.value=!h.value}function L(){const x=e.getSelectedElements();if(x.length==0)return;const T=Math.min(...x.map(R=>R.left));for(const R of x)R.setLeft(T,!0);e.createSnapshot()}function O(){const x=e.getSelectedElements();if(x.length==0)return;const T=x[0].page;if(T==null)return;const R=ae.mm_to_px(T.width);for(const k of x)k.setLeft((R-k.width)/2);e.createSnapshot()}function $(){const x=e.getSelectedElements();if(x.length==0)return;const T=Math.max(...x.map(R=>R.left+R.width));for(const R of x)R.setLeft(T-R.width,!0);e.createSnapshot()}async function M(){const x=await Oc(e.doc);x!=null&&(e.doc.ds=e.doc.createDS(x))}function D(){Py(e.doc)}function A(x){var T,R;if(typeof x=="function")return x(e,t);if(typeof x=="object")return v(x);if(typeof x!="string")return null;switch(x){case"divider":case"---":return g("div",{class:t.divider},null);case"space":return g("div",{class:"quickprint-is-fill-w"},null);case"undo":{const k=!e.history.allowUndo();return g("button",{type:"button",title:"撤销 Ctrl + Z",class:"quickprint-text-btn",disabled:k,onClick:e.history.undo},[g(H,{icon:"icon-undo"},null)])}case"redo":{const k=!e.history.allowRedo();return g("button",{type:"button",title:"重做 Ctrl + Y",class:"quickprint-text-btn",disabled:k,onClick:e.history.redo},[g(H,{icon:"icon-redo"},null)])}case"delete":return g("button",{type:"button",class:["quickprint-text-btn",t.tool],title:"删除",onClick:e.deleteSelectedElement},[g(H,{icon:"icon-delete",size:"16px"},null)]);case"fontFamily":return g(te,{title:"字体",width:"80px",modelValue:l.value,"onUpdate:modelValue":k=>l.value=k,options:u.value,class:t.tool,button:!0},null);case"fontSize":return g(te,{title:"字号",width:"60px",modelValue:o.value,"onUpdate:modelValue":k=>o.value=k,options:kl,class:t.tool,button:!0},null);case"lineHeight":return g(te,{title:"行高",width:"60px",modelValue:s.value,"onUpdate:modelValue":k=>s.value=k,options:Po,class:t.tool,popoverWidth:120,button:!0},null);case"backgroundColor":return g(Wt,{modelValue:r.value,"onUpdate:modelValue":k=>r.value=k,class:t.tool},{default:()=>[g("div",{class:t.colorIcon,title:"背景色"},[g(H,{icon:"icon-bg-color-a",size:"15px"},null),g("div",{class:t.colorIndicator,style:{backgroundColor:r.value}},null)])]});case"highlightColor":return g(Wt,{modelValue:i.value,"onUpdate:modelValue":k=>i.value=k,class:t.tool},{default:()=>[g("div",{class:t.colorIcon,title:"突出显示"},[g(H,{icon:"icon-bg-color-b",size:"15px"},null),g("div",{class:t.colorIndicator,style:{backgroundColor:i.value}},null)])]});case"fontColor":return g(Wt,{modelValue:a.value,"onUpdate:modelValue":k=>a.value=k,class:t.tool},{default:()=>[g("div",{class:t.colorIcon,title:"字体颜色"},[g(H,{icon:"icon-font",size:"15px"},null),g("div",{class:t.colorIndicator,style:{backgroundColor:a.value}},null)])]});case"fontWeight":{const k={"quickprint-text-btn":!0,[t.tool]:!0,"quickprint-is-selected":d.value};return g("button",{type:"button",title:"加粗",class:k,onClick:N},[g(H,{icon:"icon-font-bold",size:"16px"},null)])}case"fontStyle":{const k={"quickprint-text-btn":!0,[t.tool]:!0,"quickprint-is-selected":m.value};return g("button",{type:"button",title:"斜体",class:k,onClick:B},[g(H,{icon:"icon-italic",size:"16px"},null)])}case"underline":{const k={"quickprint-text-btn":!0,[t.tool]:!0,"quickprint-is-selected":p.value};return g("button",{type:"button",title:"下划线",class:k,onClick:q},[g(H,{icon:"icon-underline",size:"16px"},null)])}case"throughLine":{const k={"quickprint-text-btn":!0,[t.tool]:!0,"quickprint-is-selected":h.value};return g("button",{type:"button",title:"删除线",class:k,onClick:I},[g(H,{icon:"icon-through-line",size:"16px"},null)])}case"border":return g(iy,null,null);case"textAlign":{const k=((T=gl.find(P=>P.value===y.value))==null?void 0:T.label)??"水平对齐",z={selected({option:P}){return g(H,{icon:P==null?void 0:P.icon,class:"quickprint-is-self-center"},null)}};return g(te,{modelValue:y.value,"onUpdate:modelValue":P=>y.value=P,options:gl,title:k,class:t.tool,width:"36px",size:"mini",button:!0},z)}case"verticalAlign":{const k=((R=ml.find(P=>P.value===_.value))==null?void 0:R.label)??"垂直对齐",z={selected({option:P}){return g(H,{icon:P==null?void 0:P.icon,class:"quickprint-is-self-center"},null)}};return g(te,{modelValue:_.value,"onUpdate:modelValue":P=>_.value=P,options:ml,title:k,class:t.tool,width:"36px",size:"mini",button:!0},z)}case"alignLeft":{const k={"quickprint-text-btn":!0,[t.tool]:!0};return g("button",{type:"button",title:"左侧对齐",class:k,onClick:L},[g(H,{icon:"icon-layout-align-left",size:"16px"},null)])}case"alignCenter":{const k={"quickprint-text-btn":!0,[t.tool]:!0};return g("button",{type:"button",title:"水平居中",class:k,onClick:O},[g(H,{icon:"icon-layout-align-center",size:"16px"},null)])}case"alignRight":{const k={"quickprint-text-btn":!0,[t.tool]:!0};return g("button",{type:"button",title:"右侧对齐",class:k,onClick:$},[g(H,{icon:"icon-layout-align-right",size:"16px"},null)])}case"useGrid":{const k={"quickprint-text-btn":!0,"quickprint-is-selected":e.doc.useGrid};return g("button",{type:"button",title:"网格",class:k,onClick:e.toggleBackground},[g(H,{icon:"icon-beijing",size:"16px"},null)])}case"elementPanel":{const k={"quickprint-text-btn":!0,"quickprint-is-selected":e.state.panel.left};return g("button",{type:"button",title:"元素面板",class:k,onClick:e.toggleElementPanel},[g(H,{icon:"icon-pintu",size:"16px"},null)])}case"configPanel":{const k={"quickprint-text-btn":!0,"quickprint-is-selected":e.state.panel.right};return g("button",{type:"button",title:"配置面板",class:k,onClick:e.toggleConfigPanel},[g(H,{icon:"icon-config",size:"16px"},null)])}case"datasource":return g("button",{type:"button",class:"quickprint-text-btn",onClick:M},[g(H,{icon:"icon-datasource"},null),g("span",null,[ue("数据源")])]);case"document":return g("button",{type:"button",class:"quickprint-text-btn",onClick:D},[g(H,{icon:"icon-file-text"},null),g("span",null,[ue("文档配置")])]);default:return null}}return function(){return g("div",{class:t.toolbar,onMousedown:E},[n.toolbar.map(A)])}}}),zy="_toolbar_1bhq2_2",Fy="_divider_1bhq2_8",Uy="_tool_1bhq2_2",Hy="_colorIcon_1bhq2_18",Gy="_colorIndicator_1bhq2_38",Wy={toolbar:zy,divider:Fy,tool:Uy,colorIcon:Hy,colorIndicator:Gy},Xy={classes:Wy},Yy=U(Vy,[["__cssModules",Xy]]);function jy(n){let e=null;const t=be(),l=xe({width:0,height:0,scrollTop:0,scrollLeft:0}),o=be(),s=xe({id:"",top:0,left:0,width:0,height:0});async function r(){await Qt();const y=t.value;y!=null&&(l.width=y.offsetWidth,l.height=y.offsetHeight)}function i(y){const _=y.target;l.scrollLeft=_.scrollLeft,l.scrollTop=_.scrollTop}function a(y){const u=y.target.closest("."+J.PAPER);u!=null&&(o.value=u,m(u),d())}async function d(){await Qt();const y=o.value;y!=null&&(s.id=y.id.slice(1),s.width=y.offsetWidth,s.height=y.offsetHeight,s.top=y.offsetTop,s.left=y.offsetLeft)}function m(y){y!=null&&(o.value&&(e==null||e.unobserve(o.value)),e==null||e.observe(y))}function p(){const y=n.doc.firstPage;if(y==null)return;const _=document.querySelector("#\\@"+y.id);o.value=_,e&&_&&e.observe(_),d()}function h(y){y.some(_=>_.target.matches("."+J.CANVAS))&&(r(),d()),y.some(_=>_.target.matches("."+J.PAPER))&&(r(),d())}return El(()=>n.state.scale,()=>d()),vn(()=>{e=new ResizeObserver(h),e.observe(t.value),p(),r()}),Us(()=>{e==null||e.disconnect(),e=null}),{canvasRef:t,canvasRect:l,pageRect:s,onScroll:i,onSelectPage:a}}const is=Object.freeze(["undo","redo","delete","---","fontFamily","fontSize","lineHeight","---","backgroundColor","highlightColor","fontColor","fontWeight","fontStyle","underline","throughLine","---","border","textAlign","verticalAlign","---","alignLeft","alignCenter","alignRight","---","useGrid","elementPanel","configPanel","---","datasource","document"]),Zy=V({__name:"index",props:At({modelValue:{type:we,required:!0},toolbar:{type:Array,default(){return is}}},{modelValue:{required:!0},modelModifiers:{}}),emits:At(["save","preview"],["update:modelValue"]),setup(n,{emit:e}){const t=e,l=be(),o=be(),s=ri(),r=hn(n,"modelValue"),i=Dg(r,{queryElement:E,dispatchEvent:N}),{canvasRef:a,canvasRect:d,pageRect:m,onScroll:p,onSelectPage:h}=jy(i),y=w(()=>({"--quickprint-page-scale":i.state.scale/100,"--quickprint-dpr":s.value})),_=w(()=>{const q=i.doc.style;return{fontFamily:yl(q==null?void 0:q.fontFamily,q==null?void 0:q.enFontFamily),fontSize:q==null?void 0:q.fontSize,lineHeight:q==null?void 0:q.lineHeight}});function u(){i.state.panel.left=!1}function v(){i.state.panel.right=!1}function E(q){switch(q){case"ghost":return o.value;case"root":return l.value;default:return}}function N(q,...I){t(q,...I)}function B(q){q.deltaY>0?i.zoomIn():i.zoomOut()}return(q,I)=>(S(),C("div",{class:f(q.classes.designer),ref_key:"rootRef",ref:l,style:j(y.value)},[c("div",{class:f(q.classes.header)},[ct(q.$slots,"headerLeft"),g(Yy,{class:f(q.classes.toolbar),toolbar:n.toolbar},null,8,["class","toolbar"]),ct(q.$slots,"headerRight")],2),c("div",{class:f(q.classes.main)},[b(i).state.panel.left?(S(),C("div",{key:0,class:f(q.classes.left)},[c("button",{type:"button",onClick:u,class:f(["quickprint-text-btn",q.classes.closePanelBtn])},[g(b(H),{icon:"icon-close",size:"12px"})],2),g(qh)],2)):W("",!0),c("div",{class:f([q.classes.center,b(J).CANVAS]),onWheel:re(B,["ctrl","stop","prevent"]),ref_key:"canvasRef",ref:a},[g(Xl,{canvas:b(d),page:b(m),scale:b(i).state.scale,direction:"horizontal"},null,8,["canvas","page","scale"]),g(Xl,{canvas:b(d),page:b(m),scale:b(i).state.scale,direction:"vertical"},null,8,["canvas","page","scale"]),c("div",{class:f([b(J).SCROLLABLE,q.classes.canvas]),style:j(_.value),onScroll:I[0]||(I[0]=(...L)=>b(p)&&b(p)(...L)),onClickCapture:I[1]||(I[1]=(...L)=>b(h)&&b(h)(...L))},[(S(!0),C(ne,null,fe(r.value.pages,L=>(S(),ee(wh,{key:L.id,doc:r.value,page:L},null,8,["doc","page"]))),128))],38),c("div",{class:f(q.classes.footer)},[g(Gh),g(b(Ds),{scale:b(i).state.scale,onZoomIn:b(i).zoomIn,onZoomOut:b(i).zoomOut},null,8,["scale","onZoomIn","onZoomOut"])],2)],34),b(i).state.panel.right?(S(),C("div",{key:1,class:f(q.classes.right)},[c("button",{type:"button",onClick:v,class:f(["quickprint-text-btn",q.classes.closePanelBtn])},[g(b(H),{icon:"icon-close",size:"12px"})],2),g(Pb)],2)):W("",!0)],2),c("div",{ref_key:"ghostRef",ref:o,class:f(q.classes.ghost)},null,2),g(b(Ms))],6))}}),Ky="_designer_grxxm_2",Jy="_header_grxxm_17",Qy="_toolbar_grxxm_25",e_="_footer_grxxm_31",t_="_main_grxxm_47",n_="_left_grxxm_55",l_="_center_grxxm_63",o_="_right_grxxm_75",s_="_canvas_grxxm_83",i_="_closePanelBtn_grxxm_96",r_="_ghost_grxxm_103",a_={designer:Ky,header:Jy,toolbar:Qy,footer:e_,main:t_,left:n_,center:l_,right:o_,canvas:s_,closePanelBtn:i_,ghost:r_},c_={classes:a_},u_=U(Zy,[["__cssModules",c_]]),d_={default:{pinnable:!1},editor:{pinnable:!1,mask:!0,top:"15vh",width:"800px",height:"480px",resizeMode:Ht.DISABLED,menus:[{label:"确定",handler:n=>n.dispatchConfirm().catch(ke)}]},docDebug:{width:"1200px",height:"860px",menus:[{label:"保存",handler:n=>n.dispatchConfirm()}]},elementDebug:{width:"1200px",height:"860px",pinnable:!1},setting:{pinnable:!1,top:"15vh",width:"420px",height:"520px",resizeMode:Ht.DISABLED},variable:{pinnable:!1,top:"15vh",width:"840px",height:"600px",mask:!0,resizeMode:Ht.DISABLED}};function p_(n,e={}){const t=xs(e.zIndexManager);n.use(As,{zIndex:t,presets:d_}),qs(n._context)}const f_="0.0.0",m_={version:f_,install:p_},g_=["onClick"],h_=V({__name:"SwitchCase",emits:["switch"],setup(n,{emit:e}){const t=Qe();function l(o){t==null||t.confirm(o)}return(o,s)=>(S(),C("div",{class:f(o.classes.panel)},[(S(!0),C(ne,null,fe(b($s),(r,i)=>(S(),C("div",{key:r.id,class:f(o.classes.item),onClick:a=>l(r)},[c("div",null,[c("span",null,K(i+1)+". ",1),c("span",null,K(r.name),1)])],10,g_))),128))],2))}}),v_="_panel_1he7q_2",b_="_item_1he7q_9",y_={panel:v_,item:b_},__={classes:y_},E_=U(h_,[["__cssModules",__]]),T_='<div class="quickprint-md"><ul><li>feat: [示例]电影票</li><li>feat: [设计器]模板元素树</li><li>feat: [预览]滚动时调整页码，页码跳转</li><li>feat: [设计器]模板预览</li></ul></div>',S_=["innerHTML"],R_=V({__name:"Todo",setup(n){return(e,t)=>(S(),C("div",{innerHTML:b(T_),class:f(e.classes.doc)},null,10,S_))}}),w_="_doc_1ri3b_2",k_={doc:w_},L_={classes:k_},C_=U(R_,[["__cssModules",L_]]),I_='<div class="quickprint-md"><h2>2025-12-20</h2><ul><li>feat: [示例]银行叫号</li><li>feat: [元素]图片</li><li>feat: [元素]二维码</li><li>feat: [元素]条形码</li><li>feat: [预览]支持监听事件</li><li>feat: [设计器]支持自动调整图片、二维码、条形码的尺寸</li><li>fix: 改进图片空白提示</li></ul><h2>2025-12-10</h2><ul><li>feat: 支持设置文字方向</li><li>feat: 支持设置斜线表头</li><li>feat: 调整元素对齐方式</li><li>feat: 调试模式</li><li>feat: 单元格的宽、高会将边框尺寸计算在内</li><li>feat: [设计器]支持按<code>Ctrl</code>多选元素</li><li>fix: 修复<em>每页打印</em>选项不生效</li><li>fix: 修复表格存在行合并时，渲染有误</li></ul></div>',O_=["innerHTML"],N_=V({__name:"ChangeLog",setup(n){return(e,t)=>(S(),C("div",{innerHTML:b(I_),class:f(e.classes.doc)},null,10,O_))}}),D_="_doc_19r5b_2",M_={doc:D_},x_={classes:M_},A_=U(N_,[["__cssModules",x_]]),q_="local",Zl="quickprint-local-define",$_=V({__name:"index",setup(n){const e=De("classes"),t=y(),l="20251222",o=[{label:"新建",icon:"icon-file-text",handler:m},{label:"加载示例",icon:"icon-import",handler:a},"---",...is];function s(){const u=JSON.stringify(t.value);localStorage.setItem(Zl,u)}function r(){s()}function i(){const u=t.value.id,v=u.startsWith("case_")?u:q_,E=`${window.location.origin}/preview.html?id=${v}`;s(),ut("文档预览",rt("iframe",{src:E,className:e.iframe}),{pinnable:!1,mask:!0,closeOnPressEsc:!0,width:Math.min(Math.max(1600,t.value.paperWidth+240),window.innerWidth-20)+"px",height:"calc(100vh - 100px)",menus:[{label:"从外部打开链接",handler(N){window.open(E,"_blank"),N.close()}}]})}function a(){const u={mask:!0,top:"15vh",width:"800px",height:"600px",resizeMode:Ht.DISABLED};ut("选择示例",rt(E_),u).promisify().then(v=>d(v.id)).catch(ke)}async function d(u){const v=await Nl(u,!1);v!=null&&(Bs(u),t.value=we.create(v.define),p())}function m(){const u=we.createNormalDocument();t.value=u,p()}function p(){document.title=t.value.name+" - OpenPrint(开发中...)"}async function h(){const u=localStorage.getItem(Zl);if(u!=null)return we.create(u);const v=Ps(),E=await Nl(v.id,!1);return E==null?we.createNormalDocument():we.create(E.define)}function y(){const u=he();return h().then(v=>{u.value=v,p()}),u}const _=Ce(function(){return je("OpenPrint",(u,v)=>v==="done"?rt(A_):rt(C_),{height:"480px",tabs:[{label:"进行中",name:"todo"},{label:"更新日志",name:"done"}]}).promisify().catch(st)});return(u,v)=>b(t)?(S(),ee(b(u_),{modelValue:b(t),"onUpdate:modelValue":v[1]||(v[1]=E=>Oe(t)?t.value=E:null),toolbar:o,class:f(b(e).main),key:b(t).id,onSave:r,onPreview:i},{headerLeft:Se(()=>[c("div",{class:f(b(e).logo)},[v[2]||(v[2]=c("h1",null,"OpenPrint",-1)),c("div",{class:f(b(e).dev),onClick:v[0]||(v[0]=(...E)=>b(_)&&b(_)(...E))},"DEV_"+K(b(l)),3)],2)]),headerRight:Se(()=>[c("div",{class:f(b(e).operate)},[c("button",{type:"button",class:"quickprint-text-btn",title:"预览",onClick:i},[g(b(H),{icon:"icon-run"}),v[3]||(v[3]=c("span",null,"预览",-1))]),c("button",{type:"button",onClick:s,class:"quickprint-text-btn",title:"保存"},[g(b(H),{icon:"icon-save"}),v[4]||(v[4]=c("span",null,"保存",-1))])],2)]),_:1},8,["modelValue","class"])):W("",!0)}}),B_="_main_14ojw_2",P_="_iframe_14ojw_6",V_="_divider_14ojw_14",z_="_logo_14ojw_20",F_="_dev_14ojw_39",U_="_operate_14ojw_52",H_={main:B_,iframe:P_,divider:V_,logo:z_,dev:F_,operate:U_},G_={classes:H_},W_=U($_,[["__cssModules",G_]]),rs=Hs(W_);rs.use(m_);rs.mount("#app");
