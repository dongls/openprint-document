const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mock-CzK5OsP_.js","assets/utils-CQcnvd7j.js","assets/vue-CkTdP4ip.js","assets/utils-BWxIAY5I.css"])))=>i.map(i=>d[i]);
var Hr=Object.defineProperty;var Cn=t=>{throw TypeError(t)};var $r=(t,e,n)=>e in t?Hr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var R=(t,e,n)=>$r(t,typeof e!="symbol"?e+"":e,n),Qt=(t,e,n)=>e.has(t)||Cn("Cannot "+n);var I=(t,e,n)=>(Qt(t,e,"read from private field"),n?n.call(t):e.get(t)),ae=(t,e,n)=>e.has(t)?Cn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),xe=(t,e,n,r)=>(Qt(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),en=(t,e,n)=>(Qt(t,e,"access private method"),n);var In=(t,e,n,r)=>({set _(i){xe(t,e,i,n)},get _(){return I(t,e,r)}});import{H as cr,aA as yn,aB as _n,aV as Ge,o as pn,a4 as pe,aF as Ur,b as ee,aW as Y,A as ye,x as gt,y as je,i as kt,P as Br,m as rt,D as tn,z as Yr,V as nn,aX as Ke,a as ct,N as rn,O as Pt,n as Vr,E as qn,t as Mt,a5 as Gr,q as lr,r as zr,u as jr,v as Wr,w as Zr,a1 as lt,a3 as z,au as Xr,aw as fr,c as ce,ah as Kr,J as mn,L as Jr,aY as Fn,g as Qr,_ as Nt,I as qt,aM as ei,K as ti,aZ as dr,h as me,T as ni,R as ri,Y as ii,G as si,aj as oi,U as ai,aQ as Hn,a_ as $n,a$ as Un,aS as ui,aN as ci,aO as li,aP as fi}from"./utils-CQcnvd7j.js";import{d as it,h as be,c as Ae,a as we,b as oe,v as Ft,n as X,u as bn,g as Nn,e as Z,k as di,G as Ht,r as Ot,o as hi,s as $t,A as pi,i as hr,j as sn,f as Bn,F as Yn,T as mi,w as gi,t as wi,D as Vn,E as Ei,Q as vi,L as yi,P as _i}from"./vue-CkTdP4ip.js";const Ee=Object.freeze({CREATED:0,RENDERING:1,PAGED:2,READY:3,UNMOUNT:4}),Lt=Object.freeze({CREATED:0,INIT:1,PAGING:2,PAGED:3,READY:4}),gn=Object.freeze({CREATED:0,MOUNDTED:1}),le={UNDEFINED:0,PENDING:1,DONE:2},Re={PENDING:-1,HIDDEN:0,VISIBLE:1},ft=[25,50,75,100,125,150,200,300,400],Ie=Object.freeze({DOCUMENT:"quickprint-document",PAGE:"quickprint-page",PAPER:"quickprint-paper",PRINT_HIDDEN:"quickprint-hidden",GUIDDE_LINE:"quickprint-guide-line"}),Gn="http://www.w3.org/2000/svg",bi=["class","className","style"],wt=Symbol("QUICKPRINT_EVENT_HANDLERS");function pr(t){return t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97)}function Ni(t){return t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123}function wn(t){return t==null?"":typeof t=="string"?t.trim():Array.isArray(t)?t.map(wn).join(" "):typeof t=="object"?Object.keys(t).filter(e=>t[e]).join(" "):""}function Di(t){return bi.includes(t)}function Ut(t){mr(t),t.parentElement&&t.parentElement.removeChild(t)}function mr(t){const e=t[wt];e&&(Object.keys(e).forEach(n=>En(t,n)),delete t[wt]);for(const n of t.children)mr(n)}function Ti(t,e,n){if(n==null)return En(t,e);const r=t[wt]||(t[wt]={});typeof r[e]=="function"&&En(t,e),t.addEventListener(e,n),r[e]=n}function En(t,e){const n=t[wt];if(n==null)return;const r=n[e];r&&t.removeEventListener(e,r),n[e]=void 0}function gr(t,e){if(e!=null){if(e instanceof Element){t.appendChild(e);return}if(Array.isArray(e)){for(const n of e)gr(t,n);return}t.textContent+=e}}function Si(t,e){if(!(e==null||typeof e!="object"))for(const n of Object.keys(e)){const r=e[n];if(r==null)continue;const i=cr(n);t.style.setProperty(i,r)}}function ki(t,e){if(wn(e)=="")return;const r=t.className==""?"":" ";t.className+=r+wn(e)}function xi(t,e,n){const r=cr(e.slice(2));Ti(t,r,n)}function wr(t,e,n){switch(e){case"class":case"className":ki(t,n);break;case"style":Si(t,n);break;case"children":n!=null&&gr(t,n);break;case"innerHTML":t.innerHTML=n;break;default:if(pr(e))return xi(t,e,n);if(e[0]==="@")return Ri(t,e,n);e in t&&(t[e]=n),n==null?t.removeAttribute(e):t.setAttribute(e,n)}}function Ri(t,e,n){Reflect.set(t,e.slice(1),n)}function Ai(t,e,n){const r=t(e);if(r==null)return null;for(const i of Object.keys(e??{}))(pr(i)||Ni(i)||Di(i))&&wr(r,i,e[i]);return r}function Pi(t,e,n){const r=document.createElement(t);if(r==null)return null;for(const i of Object.keys(e??{}))wr(r,i,e[i]);return r}function G(t,e,n){return typeof t=="function"?Ai(t,e):Pi(t,e)}function zn(){return{display:!1,postion:0,height:0,offsetTop:0,offsetHeight:0,defines:[],children:[]}}var Vt,Fe;const Gt=class Gt{constructor(e,n,r){ae(this,Vt,yn(_n.PRINT_PAGE));ae(this,Fe,Object.create(null));R(this,"file");R(this,"define");R(this,"pageNum",-1);R(this,"pageTotal",-1);R(this,"extra",!1);R(this,"paper");R(this,"header");R(this,"footer");R(this,"children",[]);R(this,"fixed",[]);R(this,"parent");R(this,"element");R(this,"rendering");R(this,"state",Lt.CREATED);this.file=r,this.define=e,this.paper=this.createPaper(e,n),this.header=this.createHeader(),this.footer=this.createFooter(),Ge(this,"parent",null),Ge(this,"element",null),Ge(this,"rendering",0)}static create(e,n,r="0000"){return new Gt(e,n,r)}get id(){return"@"+I(this,Vt)}get index(){return this.parent==null?-1:this.parent.pages.findIndex(e=>e.id===this.id)}get defines(){const e=new Set,n=this.header,r=this.footer;return n.display&&n.defines.length>0&&n.defines.forEach(i=>e.add(i.id)),r.display&&r.defines.length>0&&r.defines.forEach(i=>e.add(i.id)),this.define.children.filter(i=>!e.has(i.id)).sort(pn.sort)}get style(){const{offsetWidth:e,offsetHeight:n}=this.paper;return{width:e+"px",height:n+"px"}}get isLast(){return this.pageNum===this.pageTotal}nextTick(){return this.parent?this.parent.nextTick():Promise.resolve()}createPageHeader(){const e=this.header;if(e.display!==!0)return null;const n={top:e.offsetTop+"px"},r=[Ie.GUIDDE_LINE,Ie.PRINT_HIDDEN];return[...e.children.map(i=>i.createElement()),G("div",{class:r,style:n})]}createPageFooter(){const e=this.footer;if(e.display!==!0)return null;const n={top:e.offsetTop+"px"},r=[Ie.GUIDDE_LINE,Ie.PRINT_HIDDEN];return[...e.children.map(i=>i.createElement()),G("div",{class:r,style:n})]}render(){return G("div",{id:this.id,class:Ie.PAGE,"data-index":this.index+1,children:G("div",{class:Ie.PAPER,children:[this.createPageHeader(),this.createPageFooter()]})})}createElement(){return this.element?this.element:(this.element=this.render(),this.element)}async mount(e){this.state=Lt.PAGED,await this.onPaged()}async mountChild(e){if(this.element==null||e.element==null)return!1;const n=this.element.querySelector(".quickprint-paper");return n==null?!1:(n.appendChild(e.element),await this.nextTick(),await e.mount(e.element),!0)}async replaceChild(e,n){if(this.element==null||e.element==null)return!1;const r=this.element.querySelector(".quickprint-paper");return r==null?!1:(n==null||r.replaceChild(n,e.element),Ut(e.element),await this.nextTick(),await e.mount(n),!0)}beginPaging(){this.state=Lt.PAGING}onCreated(){const e=[...this.header.children,...this.children,...this.footer.children,...this.fixed];return Promise.allSettled(e.map(n=>n.onCreated()))}onPaged(){const e=this.children.map(n=>typeof n.onPaged=="function"?n.onPaged():Promise.resolve());return Promise.allSettled(e)}onFinshed(){const e=this.children.map(r=>typeof r.onFinished=="function"?r.onFinished():Promise.resolve()),n=this.adjustFooter();return n&&e.push(n),Promise.allSettled(e)}setParent(e){this.parent=e}appendMany(e){for(let n=0,r=e.length;n<r;n++)this.append(e[n])}append(e){e.setParent(this),this.children.push(e),I(this,Fe)[e.id]=e}appendToHeader(e){e.setParent(this),this.header.children.push(e),I(this,Fe)[e.id]=e}appendToFooter(e){e.setParent(this),this.footer.children.push(e),I(this,Fe)[e.id]=e}appendToFixed(e){e.setParent(this),this.fixed.push(e),I(this,Fe)[e.id]=e}createPaper(e,n){return{size:n.size,width:n.width,height:n.height,orientation:e.orientation,offsetWidth:Math.round(n.width),offsetHeight:Math.round(n.height)}}createHeader(){const e=this.define.header;if(e.display!==!0)return zn();const n=e.height??0;return{display:!0,postion:n,height:n,offsetTop:Math.round(n),offsetHeight:Math.round(n),defines:this.define.children.filter(r=>r.top+r.height<=n),children:[]}}createFooter(){const e=this.define.footer;if(e.display!==!0)return zn();const n=e.height??0,i=Math.floor(pe.mm_to_px(this.paper.height))-n;return{display:!0,postion:i,height:n,offsetTop:Math.round(i),offsetHeight:Math.round(n),defines:this.define.children.filter(s=>s.top>=i),children:[]}}clone(){const e=new Gt(this.define,this.paper,this.file);e.rendering=0;for(const n of this.header.children){const r=n.clone();e.appendToHeader(r)}for(const n of this.footer.children){const r=n.clone();e.appendToFooter(r)}return e}findElement(e){const n=I(this,Fe)[e];if(n)return n;for(const r of this.children){const i=r.findElement(e);if(i)return i}}filterElement(e){const n=typeof e=="string"?e:e.id;return this.children.filter(r=>r.define.id===n)}adjustFooter(){if(!this.isLast||this.define.footer.flow!==Ur.TABLE)return;let e=0,n=null;for(const i of this.children)if(i.offsetBottom>e&&(e=i.offsetBottom),i.type===ee.TABLE){if(n==null){n=i;continue}i.offsetBottom>n.offsetBottom&&(n=i)}if(n==null||Math.abs(e-n.offsetBottom)>=4)return;const r=Math.floor(this.footer.offsetTop-n.offsetBottom);return Promise.allSettled(this.footer.children.map(i=>(i.offsetTop-=r,i.updateElement())))}};Vt=new WeakMap,Fe=new WeakMap;let Bt=Gt;var st=1e9,Mi={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Tn,j=!0,ge="[DecimalError] ",ze=ge+"Invalid argument: ",Dn=ge+"Exponent out of range: ",ot=Math.floor,Ue=Math.pow,Oi=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fe,ie=1e7,V=7,Er=9007199254740991,Yt=ot(Er/V),_={};_.absoluteValue=_.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};_.comparedTo=_.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};_.decimalPlaces=_.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*V;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};_.dividedBy=_.div=function(t){return Me(this,new this.constructor(t))};_.dividedToIntegerBy=_.idiv=function(t){var e=this,n=e.constructor;return $(Me(e,new n(t),0,1),n.precision)};_.equals=_.eq=function(t){return!this.cmp(t)};_.exponent=function(){return Q(this)};_.greaterThan=_.gt=function(t){return this.cmp(t)>0};_.greaterThanOrEqualTo=_.gte=function(t){return this.cmp(t)>=0};_.isInteger=_.isint=function(){return this.e>this.d.length-2};_.isNegative=_.isneg=function(){return this.s<0};_.isPositive=_.ispos=function(){return this.s>0};_.isZero=function(){return this.s===0};_.lessThan=_.lt=function(t){return this.cmp(t)<0};_.lessThanOrEqualTo=_.lte=function(t){return this.cmp(t)<1};_.logarithm=_.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(fe))throw Error(ge+"NaN");if(n.s<1)throw Error(ge+(n.s?"NaN":"-Infinity"));return n.eq(fe)?new r(0):(j=!1,e=Me(Et(n,s),Et(t,s),s),j=!0,$(e,i))};_.minus=_.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?_r(e,t):vr(e,(t.s=-t.s,t))};_.modulo=_.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(ge+"NaN");return n.s?(j=!1,e=Me(n,t,0,1).times(t),j=!0,n.minus(e)):$(new r(n),i)};_.naturalExponential=_.exp=function(){return yr(this)};_.naturalLogarithm=_.ln=function(){return Et(this)};_.negated=_.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};_.plus=_.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?vr(e,t):_r(e,(t.s=-t.s,t))};_.precision=_.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ze+t);if(e=Q(i)+1,r=i.d.length-1,n=r*V+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};_.squareRoot=_.sqrt=function(){var t,e,n,r,i,s,o,a=this,u=a.constructor;if(a.s<1){if(!a.s)return new u(0);throw Error(ge+"NaN")}for(t=Q(a),j=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Ne(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=ot((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new u(e)):r=new u(i.toString()),n=u.precision,i=o=n+3;;)if(s=r,r=s.plus(Me(a,s,o+2)).times(.5),Ne(s.d).slice(0,o)===(e=Ne(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if($(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return j=!0,$(r,n)};_.times=_.mul=function(t){var e,n,r,i,s,o,a,u,f,c=this,l=c.constructor,p=c.d,d=(t=new l(t)).d;if(!c.s||!t.s)return new l(0);for(t.s*=c.s,n=c.e+t.e,u=p.length,f=d.length,u<f&&(s=p,p=d,d=s,o=u,u=f,f=o),s=[],o=u+f,r=o;r--;)s.push(0);for(r=f;--r>=0;){for(e=0,i=u+r;i>r;)a=s[i]+d[r]*p[i-r-1]+e,s[i--]=a%ie|0,e=a/ie|0;s[i]=(s[i]+e)%ie|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,j?$(t,l.precision):t};_.toDecimalPlaces=_.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Te(t,0,st),e===void 0?e=r.rounding:Te(e,0,8),$(n,t+Q(n)+1,e))};_.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=We(r,!0):(Te(t,0,st),e===void 0?e=i.rounding:Te(e,0,8),r=$(new i(r),t+1,e),n=We(r,!0,t+1)),n};_.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?We(i):(Te(t,0,st),e===void 0?e=s.rounding:Te(e,0,8),r=$(new s(i),t+Q(i)+1,e),n=We(r.abs(),!1,t+Q(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};_.toInteger=_.toint=function(){var t=this,e=t.constructor;return $(new e(t),Q(t)+1,e.rounding)};_.toNumber=function(){return+this};_.toPower=_.pow=function(t){var e,n,r,i,s,o,a=this,u=a.constructor,f=12,c=+(t=new u(t));if(!t.s)return new u(fe);if(a=new u(a),!a.s){if(t.s<1)throw Error(ge+"Infinity");return a}if(a.eq(fe))return a;if(r=u.precision,t.eq(fe))return $(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=a.s,o){if((n=c<0?-c:c)<=Er){for(i=new u(fe),e=Math.ceil(r/V+4),j=!1;n%2&&(i=i.times(a),Wn(i.d,e)),n=ot(n/2),n!==0;)a=a.times(a),Wn(a.d,e);return j=!0,t.s<0?new u(fe).div(i):$(i,r)}}else if(s<0)throw Error(ge+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,j=!1,i=t.times(Et(a,r+f)),j=!0,i=yr(i),i.s=s,i};_.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Q(i),r=We(i,n<=s.toExpNeg||n>=s.toExpPos)):(Te(t,1,st),e===void 0?e=s.rounding:Te(e,0,8),i=$(new s(i),t,e),n=Q(i),r=We(i,t<=n||n<=s.toExpNeg,t)),r};_.toSignificantDigits=_.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Te(t,1,st),e===void 0?e=r.rounding:Te(e,0,8)),$(new r(n),t,e)};_.toString=_.valueOf=_.val=_.toJSON=_[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Q(t),n=t.constructor;return We(t,e<=n.toExpNeg||e>=n.toExpPos)};function vr(t,e){var n,r,i,s,o,a,u,f,c=t.constructor,l=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),j?$(e,l):e;if(u=t.d,f=e.d,o=t.e,i=e.e,u=u.slice(),s=o-i,s){for(s<0?(r=u,s=-s,a=f.length):(r=f,i=o,a=u.length),o=Math.ceil(l/V),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=u.length,s=f.length,a-s<0&&(s=a,r=f,f=u,u=r),n=0;s;)n=(u[--s]=u[s]+f[s]+n)/ie|0,u[s]%=ie;for(n&&(u.unshift(n),++i),a=u.length;u[--a]==0;)u.pop();return e.d=u,e.e=i,j?$(e,l):e}function Te(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ze+t)}function Ne(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=V-r.length,n&&(s+=qe(n)),s+=r;o=t[e],r=o+"",n=V-r.length,n&&(s+=qe(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Me=function(){function t(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%ie|0,o=s/ie|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,u;if(s!=o)u=s>o?1:-1;else for(a=u=0;a<s;a++)if(r[a]!=i[a]){u=r[a]>i[a]?1:-1;break}return u}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*ie+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,u,f,c,l,p,d,v,y,h,E,b,D,q,A,L,C,M,K=r.constructor,F=r.s==i.s?1:-1,S=r.d,P=i.d;if(!r.s)return new K(r);if(!i.s)throw Error(ge+"Division by zero");for(u=r.e-i.e,C=P.length,A=S.length,d=new K(F),v=d.d=[],f=0;P[f]==(S[f]||0);)++f;if(P[f]>(S[f]||0)&&--u,s==null?b=s=K.precision:o?b=s+(Q(r)-Q(i))+1:b=s,b<0)return new K(0);if(b=b/V+2|0,f=0,C==1)for(c=0,P=P[0],b++;(f<A||c)&&b--;f++)D=c*ie+(S[f]||0),v[f]=D/P|0,c=D%P|0;else{for(c=ie/(P[0]+1)|0,c>1&&(P=t(P,c),S=t(S,c),C=P.length,A=S.length),q=C,y=S.slice(0,C),h=y.length;h<C;)y[h++]=0;M=P.slice(),M.unshift(0),L=P[0],P[1]>=ie/2&&++L;do c=0,a=e(P,y,C,h),a<0?(E=y[0],C!=h&&(E=E*ie+(y[1]||0)),c=E/L|0,c>1?(c>=ie&&(c=ie-1),l=t(P,c),p=l.length,h=y.length,a=e(l,y,p,h),a==1&&(c--,n(l,C<p?M:P,p))):(c==0&&(a=c=1),l=P.slice()),p=l.length,p<h&&l.unshift(0),n(y,l,h),a==-1&&(h=y.length,a=e(P,y,C,h),a<1&&(c++,n(y,C<h?M:P,h))),h=y.length):a===0&&(c++,y=[0]),v[f++]=c,a&&y[0]?y[h++]=S[q]||0:(y=[S[q]],h=1);while((q++<A||y[0]!==void 0)&&b--)}return v[0]||v.shift(),d.e=u,$(d,o?s+Q(d)+1:s)}}();function yr(t,e){var n,r,i,s,o,a,u=0,f=0,c=t.constructor,l=c.precision;if(Q(t)>16)throw Error(Dn+Q(t));if(!t.s)return new c(fe);for(j=!1,a=l,o=new c(.03125);t.abs().gte(.1);)t=t.times(o),f+=5;for(r=Math.log(Ue(2,f))/Math.LN10*2+5|0,a+=r,n=i=s=new c(fe),c.precision=a;;){if(i=$(i.times(t),a),n=n.times(++u),o=s.plus(Me(i,n,a)),Ne(o.d).slice(0,a)===Ne(s.d).slice(0,a)){for(;f--;)s=$(s.times(s),a);return c.precision=l,e==null?(j=!0,$(s,l)):s}s=o}}function Q(t){for(var e=t.e*V,n=t.d[0];n>=10;n/=10)e++;return e}function on(t,e,n){if(e>t.LN10.sd())throw j=!0,n&&(t.precision=n),Error(ge+"LN10 precision limit exceeded");return $(new t(t.LN10),e)}function qe(t){for(var e="";t--;)e+="0";return e}function Et(t,e){var n,r,i,s,o,a,u,f,c,l=1,p=10,d=t,v=d.d,y=d.constructor,h=y.precision;if(d.s<1)throw Error(ge+(d.s?"NaN":"-Infinity"));if(d.eq(fe))return new y(0);if(e==null?(j=!1,f=h):f=e,d.eq(10))return e==null&&(j=!0),on(y,f);if(f+=p,y.precision=f,n=Ne(v),r=n.charAt(0),s=Q(d),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)d=d.times(t),n=Ne(d.d),r=n.charAt(0),l++;s=Q(d),r>1?(d=new y("0."+n),s++):d=new y(r+"."+n.slice(1))}else return u=on(y,f+2,h).times(s+""),d=Et(new y(r+"."+n.slice(1)),f-p).plus(u),y.precision=h,e==null?(j=!0,$(d,h)):d;for(a=o=d=Me(d.minus(fe),d.plus(fe),f),c=$(d.times(d),f),i=3;;){if(o=$(o.times(c),f),u=a.plus(Me(o,new y(i),f)),Ne(u.d).slice(0,f)===Ne(a.d).slice(0,f))return a=a.times(2),s!==0&&(a=a.plus(on(y,f+2,h).times(s+""))),a=Me(a,new y(l),f),y.precision=h,e==null?(j=!0,$(a,h)):a;a=u,i+=2}}function jn(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=ot(n/V),t.d=[],r=(n+1)%V,n<0&&(r+=V),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=V;r<i;)t.d.push(+e.slice(r,r+=V));e=e.slice(r),r=V-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),j&&(t.e>Yt||t.e<-Yt))throw Error(Dn+n)}else t.s=0,t.e=0,t.d=[0];return t}function $(t,e,n){var r,i,s,o,a,u,f,c,l=t.d;for(o=1,s=l[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=V,i=e,f=l[c=0];else{if(c=Math.ceil((r+1)/V),s=l.length,c>=s)return t;for(f=s=l[c],o=1;s>=10;s/=10)o++;r%=V,i=r-V+o}if(n!==void 0&&(s=Ue(10,o-i-1),a=f/s%10|0,u=e<0||l[c+1]!==void 0||f%s,u=n<4?(a||u)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||u||n==6&&(r>0?i>0?f/Ue(10,o-i):0:l[c-1])%10&1||n==(t.s<0?8:7))),e<1||!l[0])return u?(s=Q(t),l.length=1,e=e-s-1,l[0]=Ue(10,(V-e%V)%V),t.e=ot(-e/V)||0):(l.length=1,l[0]=t.e=t.s=0),t;if(r==0?(l.length=c,s=1,c--):(l.length=c+1,s=Ue(10,V-r),l[c]=i>0?(f/Ue(10,o-i)%Ue(10,i)|0)*s:0),u)for(;;)if(c==0){(l[0]+=s)==ie&&(l[0]=1,++t.e);break}else{if(l[c]+=s,l[c]!=ie)break;l[c--]=0,s=1}for(r=l.length;l[--r]===0;)l.pop();if(j&&(t.e>Yt||t.e<-Yt))throw Error(Dn+Q(t));return t}function _r(t,e){var n,r,i,s,o,a,u,f,c,l,p=t.constructor,d=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),j?$(e,d):e;if(u=t.d,l=e.d,r=e.e,f=t.e,u=u.slice(),o=f-r,o){for(c=o<0,c?(n=u,o=-o,a=l.length):(n=l,r=f,a=u.length),i=Math.max(Math.ceil(d/V),a)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=u.length,a=l.length,c=i<a,c&&(a=i),i=0;i<a;i++)if(u[i]!=l[i]){c=u[i]<l[i];break}o=0}for(c&&(n=u,u=l,l=n,e.s=-e.s),a=u.length,i=l.length-a;i>0;--i)u[a++]=0;for(i=l.length;i>o;){if(u[--i]<l[i]){for(s=i;s&&u[--s]===0;)u[s]=ie-1;--u[s],u[i]+=ie}u[i]-=l[i]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=r,j?$(e,d):e):new p(0)}function We(t,e,n){var r,i=Q(t),s=Ne(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+qe(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+qe(-i-1)+s,n&&(r=n-o)>0&&(s+=qe(r))):i>=o?(s+=qe(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+qe(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=qe(r))),t.s<0?"-"+s:s}function Wn(t,e){if(t.length>e)return t.length=e,!0}function br(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ze+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return jn(o,s.toString())}else if(typeof s!="string")throw Error(ze+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,Oi.test(s))jn(o,s);else throw Error(ze+s)}if(i.prototype=_,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=br,i.config=i.set=Li,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Li(t){if(!t||typeof t!="object")throw Error(ge+"Object expected");var e,n,r,i=["precision",1,st,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(ot(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(ze+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ze+n+": "+r);return this}var Tn=br(Mi);fe=new Tn(1);const De=Tn,J={of(t){return new De(t)},sum(...t){let e=new De(0);for(const n of t)e=e.plus(n);return e},toFormat(t,e,n,r){const i=t.toFixed(e,n);if(r==null)return i;const s=r.groupSize??3,o=r.groupSeparator??",",[a,u]=i.split("."),f=[];for(let c=a.length;c>0;c-=s)f.unshift(a.slice(Math.max(0,c-s),c));return f.join(o)+(u?`.${u}`:"")},round(t,e,n){return J.of(t).toDecimalPlaces(e,n).toNumber()}};function Ci(t){switch(t){case Y.Equal:return"==";case Y.NotEqual:return"!=";case Y.Lte:return"<=";case Y.Gte:return">=";case Y.LogicalAnd:return"&&";case Y.LogicalOr:return"||";case Y.Power:return"**";case Y.Nullish:return"??";case Y.Group:return"()";default:return String.fromCharCode(t)}}function he(t){return/^-?(?:0|[1-9]\d*)(?:\.\d+)?$/.test(t)}function dt(t){return t==null}const at=new Map;function Ii(t,e){const n=at.get(t);if(n==null)throw new Error(`不支持的函数：${t}`);return n(...e)}function Nr(){return new Error("Unexpected end of input")}function re(t){return new Error(`Unexpected end of input at position ${t.start}, near \`${Ci(t.value)}\``)}function qi(t,e,n){switch(t.value){case Y.Plus:{if(t.left==null||t.right==null)throw re(t);return typeof e=="string"||typeof n=="string"?e+n:he(e)&&he(n)?J.of(e).plus(n).toNumber():Number.NaN}case Y.Minus:{if(t.left==null&&t.right==null)throw re(t);return t.left==null&&t.right?-n:he(e)&&he(n)?J.of(e).minus(n).toNumber():Number.NaN}case Y.Asterisk:{if(t.left==null||t.right==null)throw re(t);return he(e)&&he(n)?J.of(e).times(n).toNumber():Number.NaN}case Y.Slash:{if(t.left==null||t.right==null)throw re(t);return he(e)&&he(n)?J.of(e).div(n).toNumber():Number.NaN}case Y.Percent:{if(t.left==null||t.right==null)throw re(t);return he(e)&&he(n)?J.of(e).mod(n).toNumber():Number.NaN}case Y.Power:{if(t.left==null||t.right==null)throw re(t);return he(e)&&he(n)?J.of(e).pow(n).toNumber():Number.NaN}case Y.Equal:{if(t.left==null||t.right==null)throw re(t);return dt(e)&&dt(n)?!0:e===n}case Y.NotEqual:{if(t.left==null||t.right==null)throw re(t);return dt(e)&&dt(n)?!1:e!==n}case Y.Lt:{if(t.left==null||t.right==null)throw re(t);return e<n}case Y.Lte:{if(t.left==null||t.right==null)throw re(t);return e<=n}case Y.Gt:{if(t.left==null||t.right==null)throw re(t);return e>n}case Y.Gte:{if(t.left==null||t.right==null)throw re(t);return e>=n}case Y.LogicalAnd:{if(t.left==null||t.right==null)throw re(t);return e&&n}case Y.LogicalOr:{if(t.left==null||t.right==null)throw re(t);return e||n}case Y.LogicalNot:{if(t.right==null)throw re(t);return!n}case Y.Nullish:{if(t.left==null||t.right==null)throw re(t);return dt(e)?n:e}default:throw re(t)}}function Fi(t,e){const r=(t.children??[]).map(i=>{if(i!=null)return Pe(i,e)});return Ii(t.value,r)}function Hi(t,e){var n;return e==null||typeof e!="object"?null:(n=e.data)==null?void 0:n[t.value]}function $i(t,e){var n;return e==null||typeof e!="object"?null:(n=e.scope)==null?void 0:n[t.value]}function Ui(t,e){if(t.left==null||t.right==null||t.condition==null)throw Nr();return Pe(t.condition,e)?(t.result=Pe(t.left,e),t.result):(t.result=Pe(t.right,e),t.result)}function Pe(t,e){switch(t.type){case ye.NULL:return null;case ye.UNDEFINED:return;case ye.NUMBER:return Number(t.value);case ye.STRING:return String(t.value);case ye.TEMPLATE:{const r=(Array.isArray(t.value)?t.value:[t.value]).map(i=>Pe(i,e));return t.result=r.join(""),t.result}case ye.BOOLEAN:return!!t.value;case ye.VARIABLE:return t.result=Hi(t,e),t.result;case ye.REFERENCE:return t.result=$i(t,e),t.result;case ye.FUNCTION:return t.result=Fi(t,e),t.result;case ye.OPERATOR:{if(t.isQuestion)return Ui(t,e);if(t.isGroup){if(t.right==null)throw re(t);return t.result=Pe(t.right,e),t.result}const n=t.left?Pe(t.left,e):null,r=t.right?Pe(t.right,e):null;return t.result=qi(t,n,r),t.result}default:throw Nr()}}function Bi(t,e){return Pe(t,e??{})}const Dr="Resolve Element Value Pending Error",Tr="ElementValueError";function H(t){const e=Object.create(null);return e.state=le.DONE,e.raw=t,e}function Je(){const t=Object.create(null);return t.state=le.PENDING,t}function Wt(){const t=new Error(Dr);return t.name=Tr,t}function Yi(t){return t instanceof Error&&t.name===Tr&&t.message===Dr}function Vi(t,e){var r;const n=typeof e=="string"?gt(e)?je(e):null:e;if(n==null)return H();switch(n.value){case kt.CURRENT_DATE:return H(Date.now());case kt.PAGE_NUMBER:{const i=t.doc;return i==null?H():i.isPaged?H(t.pageNum):Je()}case kt.PAGE_TOTAL:{const i=t.doc;return i==null?H():i.isPaged?H((r=t.page)==null?void 0:r.pageTotal):Je()}case kt.ROW_INDEX:{const i=t.doc;if(i==null)return H();if(i.isPaged){if(t.type!==ee.TABLE_CELL)return H();const s=t.parent;return s==null?H():H(s.rowIndex)}return Je()}default:return H()}}function Gi(t,e){const n=typeof e=="string"?gt(e)?je(e):null:e;if(n==null)return H();switch(n.value){case Br.ELEMENT_VALUR:return t.isProcessValueDone?H(t.getRawValue()):Je();default:return H()}}function zi(t,e,n){const r=typeof e=="string"?je(e):e,i=t.parent;if(i==null||!i.isBindVariable)return H(Ke(n,r.value));const s=je(i.define.ds.value);return r.path.startsWith(s.path+".")?i.rowData==null?H():H(Ke(i.rowData,r.value)):H(Ke(n,r.value))}async function ji(t,e){const n=t.define;if(n.ds==null)return H();const r=n.ds,i=r.value;return rt(i)?H():r.type===tn.VARIABLE?Sn(t,i,e):r.type===tn.FORMULA?Sr(t,i,e):r.type===tn.CODE?Wi(t,i):H(r.value)}function Sn(t,e,n,r=!1){const i=je(e);switch(i.varType){case nn.DS:return t.type===ee.TABLE_CELL?zi(t,i,n):t.type===ee.TABLE_ROW?H(t.rowData):H(Ke(n,r?i.path:i.value));case nn.BUILTIN:return Vi(t,i);case nn.SPECIAL:return Gi(t,i);default:return H()}}function Sr(t,e,n){try{const r=Yr.compile(e),i={data:{},scope:{}};for(const o of r.variable){const a=Sn(t,o.value,n);if(a.state===le.PENDING)return Je();Reflect.set(i.data,o.value,a.raw)}for(const o of r.reference)Reflect.set(i.scope,o.value,{value:o.value,element:t});const s=Bi(r.root,i);return H(s)}catch(r){return Yi(r)?Je():(console.log(r),H())}}async function Wi(t,e){try{const r=new Function("element",`return (${e})(element)`)(t);if(r instanceof Promise){const i=await r;return H(i)}return H(r)}catch(n){return console.log(n),H()}}function Zn(){const t=document.createElement("span"),e="important";return t.style.visibility="hidden",t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.zIndex="-1",t.style.setProperty("line-height","1",e),t.style.setProperty("font-family","宋体",e),t.style.setProperty("padding","0",e),t.textContent="水",t}function Zi(){const t=Zn();t.style.fontSize="6px",document.body.appendChild(t);const e=Zn();e.style.fontSize="12px",document.body.appendChild(e);const n=t.clientHeight<e.clientHeight;return document.body.removeChild(t),document.body.removeChild(e),n}let kr=function(){const t=Zi();return kr=function(){return t},t};const Xi=/Chrome/.test(navigator.userAgent);function kn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _e={},Xn;function xr(){if(Xn)return _e;Xn=1;var t=/^([+-])?0*(\d+)(\.(\d+))?$/,e=/^([+-])?0*(\d+)(\.(\d+))?e(([+-])?(\d+))$/i,n=_e.e2ten=function(i){var s=e.exec(i.toString());if(!s)return i;var o=s[2],a=s[4]||"",u=s[5]?+s[5]:0;if(u>0){var f=a.substr(0,u);f=f.length<u?f+new Array(u-f.length+1).join("0"):f,a=a.substr(u),o+=f}else{u=-u;var c=o.length-u;c=c<0?0:c;var l=o.substr(c,u);l=l.length<u?new Array(u-l.length+1).join("0")+l:l,o=o.substring(0,c),a=l+a}return o=o==""?"0":o,(s[1]=="-"?"-":"")+o+(a?"."+a:"")};_e.getNumbResult=function(i){var s=t.exec(i.toString());if(!s&&e.test(i.toString())&&(s=t.exec(n(i.toString()))),s)return{int:s[2],decimal:s[4],minus:s[1]=="-",num:s.slice(1,3).join("")}},_e.centerArray=function i(s,o){if(s.splice.apply(s,[0,o.length].concat(o.splice(0,o.length))),arguments.length>2){var a=[].slice.call(arguments,2);a.unshift(s),i.apply(null,a)}return s};var r=_e.hasAttr=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)};return _e.extend=function(i){for(var s,o=arguments[0]||{},a=Array.prototype.slice.call(arguments,1),u=0;u<a.length;u++){var f=a[u];for(s in f)r(f,s)&&(o[s]=f[s])}return o},_e.getDigit=function(i){return i>=5?(i-4)*4+4:i},_e.unshiftZero=function(i,s){if(s==null&&(s=1),!(s<=0))for(;s--;)i.unshift(0)},_e.clearZero=function(i,s,o){if(i==null)return"";var a=~"*.?+$^[](){}|\\/".indexOf(s)?"\\"+s:s,u=new RegExp("^"+a+"+"),f=new RegExp(a+"+$"),c=new RegExp(a+"{2}","g");return i=i.toString(),o=="^"&&(i=i.replace(u,"")),(!o||o=="$")&&(i=i.replace(f,"")),(!o||o=="nto1")&&(i=i.replace(c,s)),i},_e}var an,Kn;function Ki(){if(Kn)return an;Kn=1;var t=xr();function e(i,s){var o=t.getNumbResult(i);if(!o)return i;s=s||{};var a=this.ch,u=this.ch_u,f=this.ch_f||"",c=this.ch_d||".",l=a.charAt(0),p=o.int,d=o.decimal,v=o.minus,y="",h="",E=v?f:"",b=function C(M,K,F){M=t.getNumbResult(M).int;var S="",P=arguments.length>1?arguments[1]:s.tenMin,te=M.length;if(te==1)return a.charAt(+M);if(te<=4)for(var T=0,w=te;w--;){var m=+M.charAt(T);S+=P&&te==2&&T==0&&m==1?"":a.charAt(m),S+=m&&w?u.charAt(w):"",T++}else{for(var N=M.length/4>>0,g=M.length%4;g==0||!u.charAt(3+N);)g+=4,N--;var k=M.substr(0,g),x=M.substr(g);S=C(k,P)+u.charAt(3+N)+(x.charAt(0)=="0"?l:"")+C(x,x.length>4?P:!1)}return S=t.clearZero(S,l),S};if(d){d=t.clearZero(d,"0","$");for(var D=0;D<d.length;D++)h+=a.charAt(+d.charAt(D));h=h?c+h:""}if(y=b(p),s.ww&&u.length>5){var q=u.charAt(4),A=u.charAt(5),L=y.lastIndexOf(A);~L&&(y=y.substring(0,L).replace(new RegExp(A,"g"),q+q)+y.substring(L))}return E+y+h}function n(i,s){i=i.toString();var o=i.split(this.ch_d),a=o[0].replace(this.ch_f,""),u=o[1],f=!!~o[0].indexOf(this.ch_f),c=this.ch_u.charAt(1),l=this.ch_u.charAt(4),p=this.ch_u.charAt(5);a=a.replace(new RegExp(l+"{2}(?!"+l+")","g"),p);for(var d=a.split(""),v=0,y=0,h=[],E=[],b=[],D=0;D<d.length;D++){var q=d[D],A=0,L=0;if(~(A=this.ch.indexOf(q)))A>0&&b.unshift(A);else if(~(L=this.ch_u.indexOf(q))){var C=t.getDigit(L);v>L?(t.unshiftZero(b,C),t.centerArray(E,b)):L>=y?(D==0&&(b=[1]),t.centerArray(h,E,b),h.length>0&&t.unshiftZero(h,C),y=L):(b.length==0&&c==q&&(b=[1]),t.centerArray(E,b),t.unshiftZero(E,t.getDigit(L)),v=L)}}t.centerArray(h,E,b).reverse(),h.length==0&&h.push(0);var M=0;if(u){h.push("."),M="0.";for(var D=0;D<u.length;D++)M+=this.ch.indexOf(u.charAt(D)),h.push(this.ch.indexOf(u.charAt(D)));M=+M}return f&&h.unshift("-"),s&&s.outputString?h.join(""):parseFloat(h.join(""))}function r(i,s){var o={ww:!0,complete:!1,outSymbol:!0,unOmitYuan:!1,forceZheng:!1},a=t.getNumbResult(i),u=this.ch.charAt(0);if(s=typeof s=="object"?s:{},!a)return i;s=t.extend(o,s);var f=a.int,c=a.decimal||"",l=s.outSymbol?this.m_t:"",p=a.minus?this.ch_f:"",d="";if(s.complete){for(var v=1;v<this.m_u.length;v++)d+=e.call(this,c.charAt(v-1)||"0")+this.m_u.charAt(v);p+=e.call(this,f,s)+this.m_u.charAt(0)}else{var y=s.unOmitYuan||f!=="0";if(c=c.substr(0,this.m_u.length-1),c=t.clearZero(c,"0","$"),c)for(var h,v=0;v<this.m_u.length-1;v++)c.charAt(v)&&c.charAt(v)!="0"&&(d+=e.call(this,c.charAt(v))+this.m_u.charAt(v+1),h=!1),c.charAt(v)==="0"&&!h&&((v!=0||f!=="0")&&(d+=u),h=!0);(y||!d)&&(p+=e.call(this,f,s)+this.m_u.charAt(0)),s.forceZheng?(d==""||d.charAt(d.length-1)!==this.m_u[2])&&(d+=this.m_z):p+=a.decimal?"":this.m_z,s.forceZheng}return l+p+d}return an={CL:e,unCL:n,toMoney:r},an}var un,Jn;function Ji(){if(Jn)return un;Jn=1;var t=Ki(),e=xr();function n(r,i){return{encodeS:function(s,o){return o=e.extend({ww:!0,tenMin:!0},o),t.CL.call(r,s,o)},encodeB:function(s,o){return o=e.extend({ww:!0},o),t.CL.call(i,s,o)},decodeS:function(){return t.unCL.apply(r,arguments)},decodeB:function(){return t.unCL.apply(i,arguments)},toMoney:function(s,o){return o=e.extend({ww:!0},o),t.toMoney.call(i,s,o)}}}return un=n,un}var cn,Qn;function Qi(){return Qn||(Qn=1,cn={ch:"零一二三四五六七八九",ch_u:"个十百千万亿",ch_f:"负",ch_d:"点"}),cn}var ln,er;function es(){return er||(er=1,ln={ch:"零壹贰叁肆伍陆柒捌玖",ch_u:"个拾佰仟万亿",ch_f:"负",ch_d:"点",m_t:"人民币",m_z:"整",m_u:"元角分"}),ln}var fn,tr;function ts(){if(tr)return fn;tr=1;var t=Ji(),e={s:Qi(),b:es()};return fn=t(e.s,e.b),fn}var ns=ts();const rs=kn(ns);var Ct={exports:{}},is=Ct.exports,nr;function ss(){return nr||(nr=1,function(t,e){(function(n,r){t.exports=r()})(is,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",f="day",c="week",l="month",p="quarter",d="year",v="date",y="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(T){var w=["th","st","nd","rd"],m=T%100;return"["+T+(w[(m-20)%10]||w[m]||w[0])+"]"}},D=function(T,w,m){var N=String(T);return!N||N.length>=w?T:""+Array(w+1-N.length).join(m)+T},q={s:D,z:function(T){var w=-T.utcOffset(),m=Math.abs(w),N=Math.floor(m/60),g=m%60;return(w<=0?"+":"-")+D(N,2,"0")+":"+D(g,2,"0")},m:function T(w,m){if(w.date()<m.date())return-T(m,w);var N=12*(m.year()-w.year())+(m.month()-w.month()),g=w.clone().add(N,l),k=m-g<0,x=w.clone().add(N+(k?-1:1),l);return+(-(N+(m-g)/(k?g-x:x-g))||0)},a:function(T){return T<0?Math.ceil(T)||0:Math.floor(T)},p:function(T){return{M:l,y:d,w:c,d:f,D:v,h:u,m:a,s:o,ms:s,Q:p}[T]||String(T||"").toLowerCase().replace(/s$/,"")},u:function(T){return T===void 0}},A="en",L={};L[A]=b;var C="$isDayjsObject",M=function(T){return T instanceof P||!(!T||!T[C])},K=function T(w,m,N){var g;if(!w)return A;if(typeof w=="string"){var k=w.toLowerCase();L[k]&&(g=k),m&&(L[k]=m,g=k);var x=w.split("-");if(!g&&x.length>1)return T(x[0])}else{var O=w.name;L[O]=w,g=O}return!N&&g&&(A=g),g||!N&&A},F=function(T,w){if(M(T))return T.clone();var m=typeof w=="object"?w:{};return m.date=T,m.args=arguments,new P(m)},S=q;S.l=K,S.i=M,S.w=function(T,w){return F(T,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var P=function(){function T(m){this.$L=K(m.locale,null,!0),this.parse(m),this.$x=this.$x||m.x||{},this[C]=!0}var w=T.prototype;return w.parse=function(m){this.$d=function(N){var g=N.date,k=N.utc;if(g===null)return new Date(NaN);if(S.u(g))return new Date;if(g instanceof Date)return new Date(g);if(typeof g=="string"&&!/Z$/i.test(g)){var x=g.match(h);if(x){var O=x[2]-1||0,B=(x[7]||"0").substring(0,3);return k?new Date(Date.UTC(x[1],O,x[3]||1,x[4]||0,x[5]||0,x[6]||0,B)):new Date(x[1],O,x[3]||1,x[4]||0,x[5]||0,x[6]||0,B)}}return new Date(g)}(m),this.init()},w.init=function(){var m=this.$d;this.$y=m.getFullYear(),this.$M=m.getMonth(),this.$D=m.getDate(),this.$W=m.getDay(),this.$H=m.getHours(),this.$m=m.getMinutes(),this.$s=m.getSeconds(),this.$ms=m.getMilliseconds()},w.$utils=function(){return S},w.isValid=function(){return this.$d.toString()!==y},w.isSame=function(m,N){var g=F(m);return this.startOf(N)<=g&&g<=this.endOf(N)},w.isAfter=function(m,N){return F(m)<this.startOf(N)},w.isBefore=function(m,N){return this.endOf(N)<F(m)},w.$g=function(m,N,g){return S.u(m)?this[N]:this.set(g,m)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(m,N){var g=this,k=!!S.u(N)||N,x=S.p(m),O=function(ve,se){var de=S.w(g.$u?Date.UTC(g.$y,se,ve):new Date(g.$y,se,ve),g);return k?de:de.endOf(f)},B=function(ve,se){return S.w(g.toDate()[ve].apply(g.toDate("s"),(k?[0,0,0,0]:[23,59,59,999]).slice(se)),g)},W=this.$W,ne=this.$M,ue=this.$D,Le="set"+(this.$u?"UTC":"");switch(x){case d:return k?O(1,0):O(31,11);case l:return k?O(1,ne):O(0,ne+1);case c:var Se=this.$locale().weekStart||0,$e=(W<Se?W+7:W)-Se;return O(k?ue-$e:ue+(6-$e),ne);case f:case v:return B(Le+"Hours",0);case u:return B(Le+"Minutes",1);case a:return B(Le+"Seconds",2);case o:return B(Le+"Milliseconds",3);default:return this.clone()}},w.endOf=function(m){return this.startOf(m,!1)},w.$set=function(m,N){var g,k=S.p(m),x="set"+(this.$u?"UTC":""),O=(g={},g[f]=x+"Date",g[v]=x+"Date",g[l]=x+"Month",g[d]=x+"FullYear",g[u]=x+"Hours",g[a]=x+"Minutes",g[o]=x+"Seconds",g[s]=x+"Milliseconds",g)[k],B=k===f?this.$D+(N-this.$W):N;if(k===l||k===d){var W=this.clone().set(v,1);W.$d[O](B),W.init(),this.$d=W.set(v,Math.min(this.$D,W.daysInMonth())).$d}else O&&this.$d[O](B);return this.init(),this},w.set=function(m,N){return this.clone().$set(m,N)},w.get=function(m){return this[S.p(m)]()},w.add=function(m,N){var g,k=this;m=Number(m);var x=S.p(N),O=function(ne){var ue=F(k);return S.w(ue.date(ue.date()+Math.round(ne*m)),k)};if(x===l)return this.set(l,this.$M+m);if(x===d)return this.set(d,this.$y+m);if(x===f)return O(1);if(x===c)return O(7);var B=(g={},g[a]=r,g[u]=i,g[o]=n,g)[x]||1,W=this.$d.getTime()+m*B;return S.w(W,this)},w.subtract=function(m,N){return this.add(-1*m,N)},w.format=function(m){var N=this,g=this.$locale();if(!this.isValid())return g.invalidDate||y;var k=m||"YYYY-MM-DDTHH:mm:ssZ",x=S.z(this),O=this.$H,B=this.$m,W=this.$M,ne=g.weekdays,ue=g.months,Le=g.meridiem,Se=function(se,de,ke,Ce){return se&&(se[de]||se(N,k))||ke[de].slice(0,Ce)},$e=function(se){return S.s(O%12||12,se,"0")},ve=Le||function(se,de,ke){var Ce=se<12?"AM":"PM";return ke?Ce.toLowerCase():Ce};return k.replace(E,function(se,de){return de||function(ke){switch(ke){case"YY":return String(N.$y).slice(-2);case"YYYY":return S.s(N.$y,4,"0");case"M":return W+1;case"MM":return S.s(W+1,2,"0");case"MMM":return Se(g.monthsShort,W,ue,3);case"MMMM":return Se(ue,W);case"D":return N.$D;case"DD":return S.s(N.$D,2,"0");case"d":return String(N.$W);case"dd":return Se(g.weekdaysMin,N.$W,ne,2);case"ddd":return Se(g.weekdaysShort,N.$W,ne,3);case"dddd":return ne[N.$W];case"H":return String(O);case"HH":return S.s(O,2,"0");case"h":return $e(1);case"hh":return $e(2);case"a":return ve(O,B,!0);case"A":return ve(O,B,!1);case"m":return String(B);case"mm":return S.s(B,2,"0");case"s":return String(N.$s);case"ss":return S.s(N.$s,2,"0");case"SSS":return S.s(N.$ms,3,"0");case"Z":return x}return null}(se)||x.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(m,N,g){var k,x=this,O=S.p(N),B=F(m),W=(B.utcOffset()-this.utcOffset())*r,ne=this-B,ue=function(){return S.m(x,B)};switch(O){case d:k=ue()/12;break;case l:k=ue();break;case p:k=ue()/3;break;case c:k=(ne-W)/6048e5;break;case f:k=(ne-W)/864e5;break;case u:k=ne/i;break;case a:k=ne/r;break;case o:k=ne/n;break;default:k=ne}return g?k:S.a(k)},w.daysInMonth=function(){return this.endOf(l).$D},w.$locale=function(){return L[this.$L]},w.locale=function(m,N){if(!m)return this.$L;var g=this.clone(),k=K(m,N,!0);return k&&(g.$L=k),g},w.clone=function(){return S.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},T}(),te=P.prototype;return F.prototype=te,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",f],["$M",l],["$y",d],["$D",v]].forEach(function(T){te[T[1]]=function(w){return this.$g(w,T[0],T[1])}}),F.extend=function(T,w){return T.$i||(T(w,P,F),T.$i=!0),F},F.locale=K,F.isDayjs=M,F.unix=function(T){return F(1e3*T)},F.en=L[A],F.Ls=L,F.p={},F})}(Ct)),Ct.exports}var os=ss();const Oe=kn(os);var It={exports:{}},as=It.exports,rr;function us(){return rr||(rr=1,function(t,e){(function(n,r){t.exports=r()})(as,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,s=/\d\d/,o=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,u={},f=function(h){return(h=+h)+(h>68?1900:2e3)},c=function(h){return function(E){this[h]=+E}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(h){(this.zone||(this.zone={})).offset=function(E){if(!E||E==="Z")return 0;var b=E.match(/([+-]|\d\d)/g),D=60*b[1]+(+b[2]||0);return D===0?0:b[0]==="+"?-D:D}(h)}],p=function(h){var E=u[h];return E&&(E.indexOf?E:E.s.concat(E.f))},d=function(h,E){var b,D=u.meridiem;if(D){for(var q=1;q<=24;q+=1)if(h.indexOf(D(q,0,E))>-1){b=q>12;break}}else b=h===(E?"pm":"PM");return b},v={A:[a,function(h){this.afternoon=d(h,!1)}],a:[a,function(h){this.afternoon=d(h,!0)}],Q:[i,function(h){this.month=3*(h-1)+1}],S:[i,function(h){this.milliseconds=100*+h}],SS:[s,function(h){this.milliseconds=10*+h}],SSS:[/\d{3}/,function(h){this.milliseconds=+h}],s:[o,c("seconds")],ss:[o,c("seconds")],m:[o,c("minutes")],mm:[o,c("minutes")],H:[o,c("hours")],h:[o,c("hours")],HH:[o,c("hours")],hh:[o,c("hours")],D:[o,c("day")],DD:[s,c("day")],Do:[a,function(h){var E=u.ordinal,b=h.match(/\d+/);if(this.day=b[0],E)for(var D=1;D<=31;D+=1)E(D).replace(/\[|\]/g,"")===h&&(this.day=D)}],w:[o,c("week")],ww:[s,c("week")],M:[o,c("month")],MM:[s,c("month")],MMM:[a,function(h){var E=p("months"),b=(p("monthsShort")||E.map(function(D){return D.slice(0,3)})).indexOf(h)+1;if(b<1)throw new Error;this.month=b%12||b}],MMMM:[a,function(h){var E=p("months").indexOf(h)+1;if(E<1)throw new Error;this.month=E%12||E}],Y:[/[+-]?\d+/,c("year")],YY:[s,function(h){this.year=f(h)}],YYYY:[/\d{4}/,c("year")],Z:l,ZZ:l};function y(h){var E,b;E=h,b=u&&u.formats;for(var D=(h=E.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(F,S,P){var te=P&&P.toUpperCase();return S||b[P]||n[P]||b[te].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(T,w,m){return w||m.slice(1)})})).match(r),q=D.length,A=0;A<q;A+=1){var L=D[A],C=v[L],M=C&&C[0],K=C&&C[1];D[A]=K?{regex:M,parser:K}:L.replace(/^\[|\]$/g,"")}return function(F){for(var S={},P=0,te=0;P<q;P+=1){var T=D[P];if(typeof T=="string")te+=T.length;else{var w=T.regex,m=T.parser,N=F.slice(te),g=w.exec(N)[0];m.call(S,g),F=F.replace(g,"")}}return function(k){var x=k.afternoon;if(x!==void 0){var O=k.hours;x?O<12&&(k.hours+=12):O===12&&(k.hours=0),delete k.afternoon}}(S),S}}return function(h,E,b){b.p.customParseFormat=!0,h&&h.parseTwoDigitYear&&(f=h.parseTwoDigitYear);var D=E.prototype,q=D.parse;D.parse=function(A){var L=A.date,C=A.utc,M=A.args;this.$u=C;var K=M[1];if(typeof K=="string"){var F=M[2]===!0,S=M[3]===!0,P=F||S,te=M[2];S&&(te=M[2]),u=this.$locale(),!F&&te&&(u=b.Ls[te]),this.$d=function(N,g,k,x){try{if(["x","X"].indexOf(g)>-1)return new Date((g==="X"?1e3:1)*N);var O=y(g)(N),B=O.year,W=O.month,ne=O.day,ue=O.hours,Le=O.minutes,Se=O.seconds,$e=O.milliseconds,ve=O.zone,se=O.week,de=new Date,ke=ne||(B||W?1:de.getDate()),Ce=B||de.getFullYear(),Tt=0;B&&!W||(Tt=W>0?W-1:de.getMonth());var St,Zt=ue||0,Xt=Le||0,Kt=Se||0,Jt=$e||0;return ve?new Date(Date.UTC(Ce,Tt,ke,Zt,Xt,Kt,Jt+60*ve.offset*1e3)):k?new Date(Date.UTC(Ce,Tt,ke,Zt,Xt,Kt,Jt)):(St=new Date(Ce,Tt,ke,Zt,Xt,Kt,Jt),se&&(St=x(St).week(se).toDate()),St)}catch{return new Date("")}}(L,K,C,b),this.init(),te&&te!==!0&&(this.$L=this.locale(te).$L),P&&L!=this.format(K)&&(this.$d=new Date("")),u={}}else if(K instanceof Array)for(var T=K.length,w=1;w<=T;w+=1){M[1]=K[w-1];var m=b.apply(this,M);if(m.isValid()){this.$d=m.$d,this.$L=m.$L,this.init();break}w===T&&(this.$d=new Date(""))}else q.call(this,A)}}})}(It)),It.exports}var cs=us();const ls=kn(cs);Oe.extend(ls);function fs(t){switch(t){case rn.FLOOR:return De.ROUND_FLOOR;case rn.CEIL:return De.ROUND_CEIL;case rn.BANKER_ROUND:return De.ROUND_HALF_EVEN;default:return De.ROUND_HALF_UP}}function ds(t,e){if(t==null)return"";const n=e.format,r=fs(e.round),i=e.showZero===!1;switch(n){case ct.FIXED:{const s=e.precision;if(s==null||s<0)return t.toString();const o=typeof t=="number"?J.of(t):t;return o.eq(0)&&i?"":o.toFixed(s,r)}case ct.THOUSAND:{const s=typeof t=="number"?J.of(t):t;return s.eq(0)&&i?"":J.toFormat(s,2,r,{groupSize:3})}case ct.TEN_THOUSAND:{const s=typeof t=="number"?J.of(t):t;return s.eq(0)&&i?"":J.toFormat(s,2,r,{groupSize:4})}case ct.DAXIE:{const s=typeof t=="number"?J.of(t):t;return s.eq(0)&&i?"":rs.toMoney(s.toFixed(2,r),{outSymbol:!1})}case ct.PERCENTAGE:{const s=typeof t=="number"?J.of(t):t;if(s.eq(0)&&i)return"";const o=e.precision??2;return s.times(100).toFixed(o,De.ROUND_HALF_UP)+"%"}default:return typeof t=="number"?t==0&&i?"":t.toString():t.eq(0)&&i?"":t.toString()}}function hs(t,e){const n=e.format;return n==null?t:Oe(t).format(n)}function ps(t,e){const n=t.attributes;switch(t.display){case ee.NUMBER:return ds(e,n);case ee.DATE:return hs(e,n);default:return e}}const ir=Object.create(null);var zt,Qe;const mt=class mt{constructor(e){ae(this,zt,yn(_n.PRINT_ELEMENT));ae(this,Qe,Object.create(null));R(this,"define");R(this,"children",[]);R(this,"atomized",!1);R(this,"extra",!1);R(this,"parent");R(this,"offsetTop",0);R(this,"offsetLeft",0);R(this,"offsetWidth",0);R(this,"offsetHeight",0);R(this,"element");R(this,"zIndex");R(this,"state",gn.CREATED);R(this,"visibility",Re.PENDING);R(this,"value",{state:le.UNDEFINED});this.define=e,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.zIndex=e.zIndex,Ge(this,"parent",null),Ge(this,"element",null)}static register(e,n){ir[e]=n}static create(e){const n=ir[e.type]??mt;return new n(e)}static isPrintElement(e){return e instanceof mt}get id(){return"@"+I(this,zt)}get type(){return this.define.type}get index(){const e=this.parent;return e==null?-1:e.children.indexOf(this)}get page(){let e=this.parent;for(;e;){if(e instanceof Bt)return e;e=e.parent}return null}get doc(){var e;return(e=this.page)==null?void 0:e.parent}get isChanged(){return this.offsetTop!=this.define.offsetTop||this.offsetHeight!=this.define.offsetHeight}get offsetBottom(){var r,i;const e=((r=this.element)==null?void 0:r.offsetTop)??0,n=((i=this.element)==null?void 0:i.offsetHeight)??0;return e+n}get pageNum(){var e;return((e=this.page)==null?void 0:e.pageNum)??-1}get isBindVariable(){return this.define.isBindVariable}get content(){const e=this.format()??"",n=this.define.attributes.prefix??"",r=this.define.attributes.suffix??"";return`${n}${e}${r}`}get isOverflowAuto(){return this.define.attributes.overflow===Pt.AUTO}get isOverflowScale(){return this.define.attributes.overflow===Pt.SCALE}get isOverflowHidden(){const e=this.define.attributes.overflow;return e==null||e===Pt.HIDDEN}get isProcessValueDone(){return this.value.state===le.DONE}get isUndefinedValue(){return this.value.state===le.UNDEFINED}get isHidden(){return this.visibility===Re.HIDDEN}async processValue(){var e,n,r;if(!this.isProcessValueDone)switch(this.value=await ji(this,(e=this.doc)==null?void 0:e.data),this.value.state){case le.DONE:(n=this.doc)==null||n.removeDependency(this);break;case le.PENDING:(r=this.doc)==null||r.addDependency(this,{state:le.PENDING});break}}getRawValue(){if(this.value.state===le.DONE)return this.value.raw}format(){return ps(this.define,this.getRawValue())}async onCreated(){await Promise.allSettled(this.children.map(e=>e.onCreated())),await this.processValue(),this.visibility=this.checkVisibility()}__createElement__(){return typeof this.render=="function"?this.render():null}nextTick(){return this.doc?this.doc.nextTick():Promise.resolve()}createElement(){return this.element?this.element:(this.element=this.__createElement__(),this.element)}createContent(){const e=this.content;return Vr(e)?null:G("span",{class:"quickprint-content",children:this.content})}async updateElement(){const e=this.parent;if(e==null)return!1;await this.processValue(),this.visibility=this.checkVisibility();const n=this.__createElement__();return await e.replaceChild(this,n)}async mountChild(e){var n;return this.element==null||e.element==null?!1:(this.element.appendChild(e.element),await this.nextTick(),await e.mount(e.element),this.offsetHeight=((n=this.element)==null?void 0:n.offsetHeight)??0,!0)}async replaceChild(e,n){var r;return this.element==null||e.element==null?!1:(n==null||this.element.replaceChild(n,e.element),Ut(e.element),await this.nextTick(),await e.mount(n),this.offsetHeight=((r=this.element)==null?void 0:r.offsetHeight)??0,!0)}async mount(e){e!=null&&(this.checkOverflow()&&await this.processOverflow(),this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.state=gn.MOUNDTED,this.element=e)}setParent(e){this.parent=e}appendMany(e){for(let n=0,r=e.length;n<r;n++)this.append(e[n])}append(e){e.setParent(this),this.children.push(e),I(this,Qe)[e.id]=e}clone(){const e=mt.create(this.define),n=this.children.map(r=>r.clone());return e.appendMany(n),e}checkOverflow(){if(this.element==null)return!1;const e=this.element.querySelector(".quickprint-content");if(e==null)return!1;const n=e.parentElement;return n==null?!1:n.offsetHeight<e.offsetHeight}processOverflow(){return this.isOverflowScale?kr()?this.processOverflowScaleByFont():this.processOverflowScaleByTransform():this.isOverflowHidden?this.processOverflowHidden():Promise.resolve()}processOverflowHidden(){var n;const e=(n=this.element)==null?void 0:n.querySelector(".quickprint-layout");return e==null||(e.style.alignItems="flex-start"),Promise.resolve()}async processOverflowScaleByFont(){console.log("scale font")}async processOverflowScaleByTransform(){console.log("scale transform")}findElement(e){const n=I(this,Qe)[e];if(n)return n;for(const r of this.children){const i=r.findElement(e);if(i)return i}}findElementFromDefine(e){return this.children.find(n=>n.define.id===e)}createElements(){xe(this,Qe,this.children.reduce((e,n)=>(e[n.id]=n,e),Object.create(null)))}checkVisibility(){var i,s,o;const e=this.define;if(e.visibility==null||e.visibility.type===qn.VISIBLE)return Re.VISIBLE;if(e.visibility.type===qn.HIDDEN)return Re.HIDDEN;const n=e.visibility.condition;if(rt(n))return Re.VISIBLE;const r=Sr(this,n,(i=this.doc)==null?void 0:i.data);switch(r.state){case le.DONE:return(s=this.doc)==null||s.removeDependency(this),r.raw?Re.VISIBLE:Re.HIDDEN;case le.PENDING:return(o=this.doc)==null||o.addDependency(this,{state:le.PENDING}),Re.PENDING;default:return Re.PENDING}}};zt=new WeakMap,Qe=new WeakMap;let U=mt;function Xe(t,e){return e.exclude==null?!0:!e.exclude.includes(t)}function Dt(t){var s;const e={};if(!Xi)return e;const n=t.define,r=n.style.fontFamily;return(r==null||r===Gr.SONG)&&((s=n.style)==null?void 0:s.fontWeight)===700&&(e["quickprint-patch-song-blod"]=!0),e}function xn(t,e={}){const n={},r=t.define.style??{},i=lr(r.fontFamily,r.enFontFamily);i&&(n.fontFamily=i);const s=zr(r);return s&&Object.assign(n,s),r.fontSize&&(n.fontSize=r.fontSize),r.fontWeight&&(n.fontWeight=r.fontWeight),r.color&&(n.color=r.color),r.lineHeight&&(n.lineHeight=r.lineHeight),r.highlightColor&&(n["--quickprint-variable-highlight-color"]=r.highlightColor),r.backgroundColor&&(n.backgroundColor=r.backgroundColor),r.fontStyle&&(n.fontStyle=r.fontStyle),r.rotate&&(n.transform=`rotate(${r.rotate}deg)`),r.textIndent&&(n.textIndent=r.textIndent),r.writingMode&&(n.writingMode=r.writingMode),Object.assign(n,jr(t.define)),Xe("align",e)&&Object.assign(n,Wr(t.define)),Xe("padding",e)&&Object.assign(n,Zr(t.define)),n}function Rn(t,e={}){const n={};if(Xe("top",e)&&(n.top=t.offsetTop+"px"),Xe("left",e)&&(n.left=t.offsetLeft+"px"),Xe("width",e)&&(n.width=t.offsetWidth+"px"),Xe("height",e)){const r=t.define.attributes.overflow===Pt.AUTO?"min-height":"height";n[r]=t.offsetHeight+"px"}return t.zIndex&&(n.zIndex=t.zIndex),n}function ut(t,e={}){return Object.assign(Rn(t,e),xn(t,e),Mt(t.define))}class ms extends U{get style(){return ut(this)}get className(){return{"quickprint-element":!0,"quickprint-text":!0,"quickprint-layout":!0,"quickprint-line-through":this.define.style.lineThrough,...Dt(this)}}render(){return this.isHidden?null:G("div",{id:this.id,class:this.className,style:this.style,children:this.createContent()})}}class gs extends U{get style(){return Rn(this)}get className(){return{"quickprint-element":!0,"quickprint-text":!0,"quickprint-layout":!0,...Dt(this)}}processConstNode(e){var i;const n=e.dataset.value;if(rt(n))return;const r=Sn(this,n,(i=this.doc)==null?void 0:i.data);e.textContent=r.raw}process(e){for(const n of Array.from(e.childNodes))if(n instanceof HTMLElement&&n.contentEditable==="false"&&n.matches(".is-const-node")){this.processConstNode(n);continue}return e}render(){if(this.isHidden)return null;const e=this.getRawValue(),n=document.createElement("span");return n.className="quickprint-content",n.innerHTML=e,G("div",{id:this.id,class:this.className,style:this.style,children:this.process(n)})}}class ws extends U{get style(){return ut(this)}get className(){return{"quickprint-element":!0,"quickprint-number":!0,"quickprint-layout":!0,"quickprint-line-through":this.define.style.lineThrough,...Dt(this)}}render(){return this.isHidden?null:G("div",{id:this.id,class:this.className,style:this.style,children:this.createContent()})}}class Es extends U{get style(){return ut(this)}get className(){return{"quickprint-element":!0,"quickprint-date":!0,"quickprint-layout":!0,"quickprint-line-through":this.define.style.lineThrough,...Dt(this)}}render(){return this.isHidden?null:G("div",{id:this.id,class:this.className,style:this.style,children:this.createContent()})}}class Rr extends U{constructor(){super(...arguments);R(this,"rendering",0)}get style(){return{...Rn(this),...xn(this,{exclude:["padding"]}),height:void 0}}get className(){return"quickprint-element quickprint-table"}getTableBody(){return this.element==null?null:this.element.querySelector("tbody")}render(){if(this.isHidden)return null;const i=this.define.columns.map(s=>G("col",{width:s}));return G("div",{id:this.id,class:this.className,style:this.style,children:G("table",{children:[G("colgroup",{children:i}),G("tbody",{})]})})}async mountChild(n){var i;if(n.element==null)return!1;const r=this.getTableBody();return r==null?!1:(r.appendChild(n.element),await this.nextTick(),await n.mount(n.element),this.offsetHeight=((i=this.element)==null?void 0:i.offsetHeight)??0,!0)}async replaceChild(n,r){var s;if(this.element==null||n.element==null)return!1;const i=this.getTableBody();return i==null?!1:(r==null?i.removeChild(n.element):i.replaceChild(r,n.element),await this.nextTick(),await n.mount(r),this.offsetHeight=((s=this.element)==null?void 0:s.offsetHeight)??0,!0)}onPaged(){const n=this.children.filter(i=>i.define.isBody),r=this.children.map(i=>(i.define.isBody&&(i.rowIndex=n.findIndex(s=>s.id===i.id)),typeof i.onPaged=="function"?i.onPaged():Promise.resolve()));return Promise.allSettled(r)}splitRows(n){const r=this.children.slice(n+1),i=this.getTableBody();if(this.children.length=n+1,this.createElements(),i)for(const s of r){if(s.element==null)break;i.removeChild(s.element)}return r}}class vs extends U{constructor(){super(...arguments);R(this,"repeatGroup");R(this,"rowData");R(this,"rowIndex",-1)}get style(){return{}}get className(){return"quickprint-table-row"}get isOverflowAuto(){return this.children.some(n=>n.isOverflowAuto)}get index(){var n;return((n=this.parent)==null?void 0:n.children.findIndex(r=>r.id===this.id))??-1}render(){const n=this.children.map(r=>r.createElement());return G("tr",{id:this.id,class:this.className,style:this.style,children:n})}async mount(n){if(n!=null){for(const r of this.children)await r.mount(r.element);this.offsetWidth=n.offsetWidth,this.offsetHeight=n.offsetHeight,this.state=gn.MOUNDTED}}onPaged(){const n=this.children.map(r=>typeof r.onPaged=="function"?r.onPaged():Promise.resolve());return Promise.allSettled(n)}}class An extends U{get style(){var i;const e=Mt((i=this.define.parent)==null?void 0:i.parent),n=Mt(this.define.parent),r=Mt(this.define);return{...e,...n,...r,...this.createWidthStyle(),...this.createHeightStyle()}}get className(){const e=this.parent;return{"quickprint-table-cell":!0,"quickprint-auto-height":(e==null?void 0:e.isOverflowAuto)===!0,"quickprint-fixed-height":(e==null?void 0:e.isOverflowAuto)!==!0,"quickprint-line-through":this.define.style.lineThrough,...Dt(this)}}get showDiagonal(){const e=this.define.attributes.diagonalMode;return e==null?!1:e!==lt.NONE}findPrevDisplayedCell(){const e=this.parent;if(e==null)return;let n=this.index-1;for(;n>=0;){const r=e.children[n];if(r==null)return;if(r.define.isCollapsed){n-=1;continue}return r}}findNextDisplayedCell(){const e=this.parent;if(e==null)return;let n=this.index+1;for(;n<e.children.length;){const r=e.children[n];if(r==null)return;if(r.define.isCollapsed){n=r.index-1;continue}return r}}findPrevDisplayedRow(){const e=this.parent,n=e==null?void 0:e.parent;if(e==null||n==null)return;let r=e.index-1;const i=this.index;for(;r>=0;){const s=n.children[r],o=s.children[i];if(o==null)return;if(o.define.isRowCollapsed){r-=1;continue}return s}}findNextDisplayedRow(){const e=this.parent,n=e==null?void 0:e.parent;if(e==null||n==null)return;let r=e.index+1;const i=this.index;for(;r<n.children.length;){const s=n.children[r],o=s.children[i];if(o==null)return;if(o.define.isRowCollapsed){r+=1;continue}return s}}createContentStyle(e=!1){var s;const n={exclude:[]};e&&((s=n.exclude)==null||s.push("padding"));let r=this,i={};for(;U.isPrintElement(r);)i={...xn(r,n),...i},r=r.parent;return i}createWidthStyle(){var c,l,p,d,v;const e=this.findPrevDisplayedCell(),n=this.findNextDisplayedCell(),r=(c=this.parent)==null?void 0:c.parent,i=z(this.define,"left")??z((l=this.parent)==null?void 0:l.define,"left")??z(r==null?void 0:r.define,"left"),s=z(e==null?void 0:e.define,"right")??z((p=e==null?void 0:e.parent)==null?void 0:p.define,"right")??z(r==null?void 0:r.define,"right"),o=z(this.define,"right")??z((d=this.parent)==null?void 0:d.define,"right")??z(r==null?void 0:r.define,"right"),a=z(n==null?void 0:n.define,"left")??z((v=n==null?void 0:n.define)==null?void 0:v.parent,"left")??z(r==null?void 0:r.define,"left"),u=Math.max(pe.processLengthToPX(i)??0,pe.processLengthToPX(s)??0),f=Math.max(pe.processLengthToPX(o)??0,pe.processLengthToPX(a)??0);return{"--quickprint-cell-width":this.offsetWidth+"px","--quickprint-cell-border-left-width":u+"px","--quickprint-cell-border-right-width":f+"px"}}createHeightStyle(){var l,p,d,v,y,h,E;const e=this.index,n=(l=this.parent)==null?void 0:l.parent,r=(p=this.findPrevDisplayedRow())==null?void 0:p.children[e],i=(d=this.findNextDisplayedRow())==null?void 0:d.children[e],s=z(this.define,"top")??z((v=this.parent)==null?void 0:v.define,"top")??z(n==null?void 0:n.define,"top"),o=z(r==null?void 0:r.define,"bottom")??z((y=r==null?void 0:r.parent)==null?void 0:y.define,"bottom")??z(n==null?void 0:n.define,"bottom"),a=z(this.define,"bottom")??z((h=this.parent)==null?void 0:h.define,"bottom")??z(n==null?void 0:n.define,"bottom"),u=z(i==null?void 0:i.define,"top")??z((E=i==null?void 0:i.parent)==null?void 0:E.define,"top")??z(n==null?void 0:n.define,"top"),f=Math.max(pe.processLengthToPX(s)??0,pe.processLengthToPX(o)??0),c=Math.max(pe.processLengthToPX(a)??0,pe.processLengthToPX(u)??0);return{"--quickprint-cell-height":this.offsetHeight+"px","--quickprint-cell-border-top-width":f+"px","--quickprint-cell-border-bottom-width":c+"px"}}createCoord(){switch(this.define.attributes.diagonalMode){case lt.TL_BR:return{x1:"0",y1:"0",x2:"100%",y2:"100%"};case lt.TR_BL:return{x1:"100%",y1:"0",x2:"0",y2:"100%"};default:return null}}createDiagonal(){const e=this.createCoord();if(e==null)return null;const n=this.define.attributes.diagonalMode,r=this.define.attributes.diagonalLabels??[],i={"quickprint-diagonal":!0,"quickprint-diagonal-tlbr":n===lt.TL_BR,"quickprint-diagonal-trbl":n===lt.TR_BL},s=r[0]?G("div",{class:"quickprint-diagonal-first-label",children:r[0].text}):null,o=r[1]?G("div",{class:"quickprint-diagonal-second-label",children:r[1].text}):null,a=document.createElementNS(Gn,"svg");a.setAttribute("width","100%"),a.setAttribute("height","100%");const u=document.createElementNS(Gn,"line");return u.setAttribute("x1",e.x1),u.setAttribute("y1",e.y1),u.setAttribute("x2",e.x2),u.setAttribute("y2",e.y2),u.setAttribute("stroke","currentColor"),u.setAttribute("stroke-width","1"),a.appendChild(u),G("div",{class:i,style:this.createContentStyle(!0),children:[a,s,o]})}createCell(){return this.isHidden?null:this.showDiagonal?this.createDiagonal():G("div",{class:"quickprint-layout",style:this.createContentStyle(),children:this.createContent()})}render(){return this.define.isCollapsed?null:G("td",{id:this.id,class:this.className,style:this.style,rowspan:this.define.rowspan,colspan:this.define.colspan,children:this.createCell()})}}var et,yt;class ys extends U{constructor(n){super(n);ae(this,et);ae(this,yt);const{promise:r,resolve:i}=Promise.withResolvers();xe(this,yt,r),xe(this,et,i)}get style(){return ut(this,{exclude:["padding"]})}get className(){return{"quickprint-element":!0,"quickprint-image":!0,"quickprint-layout":!0}}onFinished(){return I(this,yt)}onLoad(n){var r;(r=I(this,et))==null||r.call(this)}onError(n){var r;(r=I(this,et))==null||r.call(this)}render(){return this.isHidden?null:G("div",{id:this.id,class:this.className,style:this.style,children:G("img",{src:this.content,style:Xr(this.define.attributes.size),onLoad:this.onLoad.bind(this),onError:this.onError.bind(this)})})}}et=new WeakMap,yt=new WeakMap;class _s extends U{get style(){return ut(this,{exclude:["align"]})}get className(){return{"quickprint-element":!0,"quickprint-qrcode":!0,"quickprint-layout":!0}}createCode(){const e=this.content,n=this.define.attributes.mode,r=this.define.attributes.barcolor;return fr.qrcode(n,e,{barcolor:r})??""}render(){return this.isHidden?null:G("div",{id:this.id,class:this.className,style:this.style,innerHTML:this.createCode()})}}class bs extends U{get style(){const e=this.define.attributes,n=ut(this,{exclude:["align"]});return e.width&&(n["--quickprint-barcode-width"]=e.width),e.height&&(n["--quickprint-barcode-height"]=e.height),n}get className(){const e=this.define.attributes,n=gt(e.width)||gt(e.height);return{"quickprint-element":!0,"quickprint-barcode":!0,"quickprint-layout":!0,"quickprint-barcode-fixed":n,"quickprint-barcode-contain":!n}}createCode(){const e=this.content,n=this.define.attributes;return fr.barcode(n.mode,e,{barcolor:n.barcolor,includetext:n.showText===!0,width:pe.processLengthToMM(n.width),height:pe.processLengthToMM(n.height)})??""}render(){return this.isHidden?null:G("div",{id:this.id,class:this.className,style:this.style,innerHTML:this.createCode()})}}U.register(ee.TEXT,ms);U.register(ee.PARAGRAPH,gs);U.register(ee.NUMBER,ws);U.register(ee.DATE,Es);U.register(ee.TABLE,Rr);U.register(ee.TABLE_ROW,vs);U.register(ee.TABLE_CELL,An);U.register(ee.IMAGE,ys);U.register(ee.QRCODE,_s);U.register(ee.BARCODE,bs);function Ns(t){return Number(t)}function Ds(t){return Math.abs(t)}function Ts(t){return Math.trunc(t)}function Ss(...t){return Math.min(...t)}function ks(...t){return Math.max(...t)}function xs(t,e){return J.round(t,e??0,De.ROUND_CEIL)}function Rs(t,e){return J.round(t,e??0,De.ROUND_FLOOR)}function As(t,e,n){return J.round(t,e??0,n??De.ROUND_HALF_UP)}function Ps(t){t.set("NUMBER",Ns),t.set("ABS",Ds),t.set("TRUNC",Ts),t.set("MIN",Ss),t.set("MAX",ks),t.set("CEIL",xs),t.set("FLOOR",Rs),t.set("ROUND",As)}function Ms(t){return String(t)}function Os(t){return String(t).length}function Ls(t){return String(t).toLowerCase()}function Cs(t){return String(t).toUpperCase()}function Is(t){const e=String(t);return e[0].toUpperCase()+e.slice(1)}function qs(t){return String(t).trim()}function Fs(t,e,n){return String(t).replace(e,n)}function Hs(t,e,n){return String(t).replaceAll(e,n)}function $s(t,e,n){return String(t).slice(e,n)}function Us(t,e,n){return String(t).includes(String(e),n)}function Bs(t,e,n){return String(t).indexOf(String(e),n)}function Ys(t,e,n){return String(t).lastIndexOf(String(e),n)}function Vs(t,e,n){return String(t).startsWith(String(e),n)}function Gs(t,e,n){return String(t).endsWith(String(e),n)}function zs(t){t.set("STRING",Ms),t.set("LENGTH",Os),t.set("LOWER",Ls),t.set("UPPER",Cs),t.set("TRIM",qs),t.set("UPPER_FIRST",Is),t.set("REPLACE",Fs),t.set("REPLACE_ALL",Hs),t.set("SLICE",$s),t.set("INCLUDES",Us),t.set("INDEX_OF",Bs),t.set("LAST_INDEX_OF",Ys),t.set("STARTS_WITH",Vs),t.set("ENDS_WITH",Gs)}function js(t,e,n){return t?e:n}function Ws(t,e){return Number.isNaN(t)?e:t}function Zs(t,e){return Number.isNaN(t)||t==null?e:t}function Xs(t,...e){for(let r=0;r<e.length;r+=2){const i=e[r],s=e[r+1];if(i===t)return s}return e.length%2===0?void 0:e[e.length-1]}function Ar(t){return Number.isNaN(t)}function Ks(t){return Number.isInteger(t)}function Pr(t){return typeof t=="number"}function Mr(t){return typeof t=="string"}function Js(t){return typeof t=="boolean"}function Or(t){return t===null}function Lr(t){return t===void 0}function Cr(t){return Or(t)||Lr(t)}function Qs(t){return Cr(t)?!0:Mr(t)?t.length==0:Pr(t)?!Ar(t):!1}function eo(t){t.set("IF",js),t.set("IFNA",Ws),t.set("IFERROR",Zs),t.set("IS_NAN",Ar),t.set("IS_INTEGER",Ks),t.set("IS_NUMBER",Pr),t.set("IS_STRING",Mr),t.set("IS_BOOLEAN",Js),t.set("IS_NULL",Or),t.set("IS_UNDEFINED",Lr),t.set("IS_NULLISH",Cr),t.set("IS_EMPTY",Qs),t.set("SWITCH",Xs)}const to=[ce.YEAR_MONTH,ce.YEAR_MONTH_CHS,ce.YEAR_MONTH_DAY,ce.YEAR_MONTH_DAY_CHS,ce.DATETIME_SHORT,ce.DATETIME_SHORT_CHS,ce.DATETIME,ce.DATETIME_CHS,ce.TIME,ce.TIME_SHORT,ce.YEAR,ce.MONTH,ce.DAY];function He(t){if(t!=null){if(typeof t=="number")return to[t];if(typeof t=="string")return t}}function Ir(t,e,n){return t===null&&(t=void 0),Oe(t,He(n)).format(He(e)??ce.DATETIME)}function no(t){return Ir(void 0,t)}function ro(t,e){return t===null&&(t=void 0),Oe(t,He(e)).year()}function io(t,e){return t===null&&(t=void 0),Oe(t,He(e)).month()+1}function so(t,e){return t===null&&(t=void 0),Oe(t,He(e)).date()}function oo(t,e){return t===null&&(t=void 0),Oe(t,He(e)).hour()}function ao(t,e){return t===null&&(t=void 0),Oe(t,He(e)).minute()}function uo(t,e){return t===null&&(t=void 0),Oe(t,He(e)).second()}function co(t){t.set("DATE",Ir),t.set("NOW",no),t.set("YEAR",ro),t.set("MONTH",io),t.set("DAY",so),t.set("HOUR",oo),t.set("MINUTE",ao),t.set("SECOND",uo)}function qr(t,e){return t.children.reduce((n,r)=>{const i=r.findElementFromDefine(e);if(i==null)return n;if(!i.isProcessValueDone)throw Wt();const s=i.getRawValue(),o=s==null?0:Number(s);return n.push(Kr(o)?o:0),n},[])}function Pn(t,e){var r;const n=(r=t.parent)==null?void 0:r.parent;if(!(n==null||n.type!==ee.TABLE))return qr(n,e)}function Mn(t,e){var i,s;const n=(i=t.parent)==null?void 0:i.parent;if(n==null||n.type!==ee.TABLE)return;const r=(s=n.doc)==null?void 0:s.pages.reduce((o,a)=>o.concat(a.filterElement(n.define.id)),[]);if(r!=null)return r.reduce((o,a)=>o.concat(qr(a,e)),[])}function lo(t,e){if(!t.doc.isPaged)throw Wt();const r=t.page,i=r.pageNum<r.pageTotal?Pn(t,e):Mn(t,e);return i==null||i.length==0?0:J.sum(...i).toNumber()}function fo(t,e){const n=t.element,r=t.value;if(!(n instanceof An))return;const i=n.doc;if(i==null)return;if(i.isFirstRount)throw Wt();if(e===2)return lo(n,r);const s=e==1?Pn(n,r):Mn(n,r);return s==null||s.length==0?0:J.sum(...s).toNumber()}function ho(t,e){const n=t.element,r=t.value;if(!(n instanceof An))return;const i=n.doc;if(i==null)return;if(i.isFirstRount)throw Wt();const s=e==1?Pn(n,r):Mn(n,r);return s==null||s.length==0?0:J.sum(...s).div(s.length).toNumber()}function po(t){t.set("COL_SUM",fo),t.set("COL_AVG",ho)}Ps(at);zs(at);eo(at);co(at);po(at);const mo=".quickprint-document{padding:40px 0;box-sizing:border-box;font-family:宋体;font-size:9pt;line-height:1.15;color:#000;word-break:break-all;min-width:calc(var(--quickprint-paper-width) * var(--quickprint-doc-scale) + 80px)}.quickprint-document *{box-sizing:border-box}.quickprint-document-multi-view{display:grid;column-gap:36px;row-gap:36px;justify-content:center;grid-template-rows:auto;grid-template-columns:repeat(auto-fill,calc(var(--quickprint-paper-width) * var(--quickprint-doc-scale)))}.quickprint-document-multi-view .quickprint-page{margin:0!important}.quickprint-guide-line{position:absolute;left:0;right:0;z-index:999;border-top:1px dashed #ddd;-webkit-user-select:none;user-select:none;pointer-events:none;display:none}.quickprint-page{position:relative;width:calc(var(--quickprint-paper-width) * var(--quickprint-doc-scale));height:calc(var(--quickprint-paper-height) * var(--quickprint-doc-scale));margin:0 auto;background-color:#fff;box-shadow:#0000000f 0 0 10px,#0000000a 0 0 0 1px;page-break-inside:avoid;page-break-after:always}.quickprint-paper{width:var(--quickprint-paper-width);height:var(--quickprint-paper-height);transform:scale(var(--quickprint-doc-scale));transform-origin:top left}.quickprint-page:after{content:attr(data-index);position:absolute;bottom:-24px;left:calc(50% - 50px);width:100px;line-height:20px;text-align:center;font-size:12px;color:#606266}.quickprint-page+.quickprint-page{margin-top:50px}.quickprint-document-debug .quickprint-guide-line{display:block}.quickprint-element{position:absolute;padding:2px}.quickprint-line-through .quickprint-content{text-decoration:line-through}.quickprint-text{word-break:break-all}.quickprint-table{padding:0!important}.quickprint-table>table{border-collapse:collapse;table-layout:fixed}.quickprint-table-cell{padding:0}.quickprint-table-cell .quickprint-layout{padding:2px;width:calc(var(--quickprint-cell-width) - calc(var(--quickprint-cell-border-left-width) / 2) - calc(var(--quickprint-cell-border-right-width) / 2))}.quickprint-table-cell.quickprint-auto-height .quickprint-layout{min-height:calc(var(--quickprint-cell-height) - calc(var(--quickprint-cell-border-top-width) / 2) - calc(var(--quickprint-cell-border-bottom-width) / 2))!important}.quickprint-table-cell.quickprint-fixed-height .quickprint-layout{word-break:break-all;overflow:hidden;height:calc(var(--quickprint-cell-height) - calc(var(--quickprint-cell-border-top-width) / 2) - calc(var(--quickprint-cell-border-bottom-width) / 2))!important}.quickprint-number{word-break:normal}.quickprint-content{white-space:pre-line;background-color:var(--quickprint-variable-highlight-color, transparent)}.quickprint-diagonal{display:block;width:var(--quickprint-cell-width);height:var(--quickprint-cell-height);position:relative}.quickprint-diagonal-first-label,.quickprint-diagonal-second-label{position:absolute;z-index:2}.quickprint-diagonal-tlbr .quickprint-diagonal-first-label{top:2px;right:2px;text-align:right}.quickprint-diagonal-tlbr .quickprint-diagonal-second-label{left:2px;bottom:2px}.quickprint-diagonal-trbl .quickprint-diagonal-first-label{top:2px;left:2px}.quickprint-diagonal-trbl .quickprint-diagonal-second-label{right:2px;bottom:2px;text-align:right}.quickprint-image{padding:0}.quickprint-image>img{display:block}.quickprint-qrcode,.quickprint-barcode{padding:0;display:flex;align-items:center;justify-content:center}.quickprint-qrcode svg{display:flex;max-width:100%;max-height:100%}.quickprint-barcode-fixed svg{display:block;width:var(--quickprint-barcode-width);height:var(--quickprint-barcode-height);flex-shrink:0}.quickprint-barcode-contain svg{display:block;max-width:100%;max-height:100%}",go="@media print{@page{margin:0}html,body{margin:0!important;padding:0!important;color:#000}.quickprint-page{margin:0!important;box-shadow:none!important}.quickprint-page:after{display:none}.quickprint-hidden{display:none!important}.quickprint-document{--quickprint-doc-scale: 1 !important;padding:0!important;display:block!important;min-width:auto!important}.quickprint-patch-song-blod{text-shadow:0 0 currentColor,0 0 currentColor}}";function sr(){return mo}function wo(){return go}class Eo{constructor(){R(this,"skip",0);R(this,"count",0);R(this,"resolvedPromise",Promise.resolve())}nextTick(){return this.skip<=2e3?(this.skip++,this.resolvedPromise):this.count<48?(this.count++,this.resolvedPromise):new Promise(e=>{this.count=0,setTimeout(e)})}}var jt,tt,_t,Be,nt,Ye,bt,vn;const Ln=class Ln{constructor(e,n){ae(this,bt);ae(this,jt,yn(_n.PRINT_DOCUMENT));ae(this,tt);ae(this,_t);ae(this,Be,Object.create(null));ae(this,nt,0);R(this,"define");R(this,"data");R(this,"state");R(this,"pages",[]);R(this,"element");R(this,"renderer",null);R(this,"rendering");R(this,"devicePixelRatio",window.devicePixelRatio);R(this,"tick",new Eo);ae(this,Ye,[]);const{promise:r,resolve:i}=Promise.withResolvers();xe(this,_t,r),xe(this,tt,i),this.define=e,this.state=n,Ge(this,"element",null),Ge(this,"rendering",0),this.state.renderState=Ee.CREATED,this.state.scale=100,this.watchDevicePixelRatio(),this.injectElementStyle()}static create(e,n={}){const r=e instanceof mn?e:mn.create(e);return new Ln(r,n)}get id(){return"@"+I(this,jt)}get style(){const e=this.state.scale??100,n=this.define.style;return{"--quickprint-dpr":this.devicePixelRatio,"--quickprint-doc-scale":e/100,"--quickprint-paper-width":this.define.paper.width+"mm","--quickprint-paper-height":`calc(${this.define.paper.height}mm - 1px)`,fontFamily:lr(n==null?void 0:n.fontFamily,n==null?void 0:n.enFontFamily),fontSize:n==null?void 0:n.fontSize,lineHeight:n==null?void 0:n.lineHeight}}get renderState(){return this.state.renderState}get isPaged(){return this.renderState===Ee.PAGED||this.renderState===Ee.READY}get isFirstRount(){return I(this,nt)===0}get debug(){return this.state.debug}onCreated(){return Promise.allSettled(this.pages.map(e=>e.onCreated()))}onBeforeUnmount(e){I(this,Ye).indexOf(e)>=0||I(this,Ye).push(e)}unmount(){for(const e of I(this,Ye))typeof e=="function"&&e();I(this,Ye).length=0,this.setRenderState(Ee.UNMOUNT),this.element=null}nextTick(){return this.tick.nextTick()}render(){const e=[Ie.DOCUMENT];return G("div",{class:e,style:this.style})}createElement(){return this.element=this.render(),this.element}async mountChild(e){return this.element==null||e.element==null?!1:(this.element.appendChild(e.element),!0)}async mount(){this.state.total=this.pages.length,this.refreshPageTotal(),this.setRenderState(Ee.PAGED),await en(this,bt,vn).call(this),this.setRenderState(Ee.READY);const e=this.pages.map(n=>n.onFinshed());await Promise.allSettled(e),typeof I(this,tt)=="function"&&(I(this,tt).call(this),Reflect.deleteProperty(this,"readyResolve"))}append(e){this.pages.push(e),e.setParent(this)}appendMany(e){for(let n=0,r=e.length;n<r;n++)this.append(e[n])}insert(e,n){this.pages.splice(n,0,e),e.setParent(this)}ready(){return I(this,_t)}injectElementStyle(){if(document.querySelector('style[data-from="quickprint-element"]'))return;const n=document.createElement("style");n.textContent=sr(),n.dataset.from="quickprint-element",document.head.appendChild(n)}async print(){return await this.ready(),new Promise(e=>{var s;const n=new Blob(this.genPrintHtml(),{type:"text/html"}),r=URL.createObjectURL(n),i=document.createElement("iframe");i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.visibility="hidden",i.style.zIndex="-100",i.src=r,document.body.appendChild(i),i.onload=function(){var o;(o=i.contentWindow)==null||o.print()},(s=i.contentWindow)==null||s.addEventListener("afterprint",()=>{URL.revokeObjectURL(r),setTimeout(()=>document.body.removeChild(i),2e3),e()})})}genPapeStyle(){const e=this.define;return`@page{ size: ${e.paper.width}mm ${e.paper.height}mm }`}genPrintHtml(){var r;const e=this.define.name,n=((r=this.element)==null?void 0:r.outerHTML)??"";return["<!DOCTYPE html><html><head>",'<meta charset="UTF-8">','<meta name="viewport" content="width=device-width, initial-scale=1.0">',`<title>${e}</title>`,`<style>${sr()}</style>`,`<style>${wo()}</style>`,`<style>${this.genPapeStyle()}</style>`,"</head><body>",n,"</body></html>"]}enableMuiltView(){if(this.element==null||this.state.viewMode==="multiple")return!1;this.state.viewMode="multiple",this.element.classList.add("quickprint-document-multi-view")}enableSingleView(){if(this.element==null||this.state.viewMode==="single")return!1;this.state.viewMode="single",this.element.classList.remove("quickprint-document-multi-view")}toggleViewMode(){return this.state.viewMode==="multiple"?this.enableSingleView():this.enableMuiltView()}zoomIn(){if(this.element==null)return!1;const e=this.state.scale??100,n=ft.indexOf(e);if(n<0)return this.resetZoom(),!1;if(n==0)return!1;const r=ft[n-1];this.state.scale=r,this.element.style.setProperty("--quickprint-doc-scale",`${r/100}`)}zoomOut(){if(this.element==null)return!1;const e=this.state.scale??100,n=ft.indexOf(e);if(n<0)return this.resetZoom(),!1;if(n>=ft.length-1)return!1;const r=ft[n+1];this.state.scale=r,this.element.style.setProperty("--quickprint-doc-scale",`${r/100}`)}resetZoom(){if(this.element==null)return!1;const e=100;this.state.scale=e,this.element.style.setProperty("--quickprint-doc-scale",`${e/100}`)}addDependency(e,n){I(this,Be)[e.id]={element:e,...n}}removeDependency(e){delete I(this,Be)[e.id]}setRenderState(e){this.state.renderState=e}watchDevicePixelRatio(){const e=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),n=this.updateDevicePixelRatio.bind(this);e.addEventListener("change",n),window.addEventListener("resize",n),this.onBeforeUnmount(()=>{e.removeEventListener("change",n),window.removeEventListener("resize",n)})}updateDevicePixelRatio(){this.devicePixelRatio=window.devicePixelRatio,this.element!=null&&this.element.style.setProperty("--quickprint-dpr",this.devicePixelRatio+"")}findElement(e){for(const n of this.pages){const r=n.findElement(e);if(r)return r}}refreshPageTotal(){const e={};for(const n of this.pages){const r=n.file;if(e[r]!=null){n.pageTotal=e[r];continue}const i=this.pages.filter(s=>s.file===r);e[r]=i.length,n.pageTotal=i.length}}};jt=new WeakMap,tt=new WeakMap,_t=new WeakMap,Be=new WeakMap,nt=new WeakMap,Ye=new WeakMap,bt=new WeakSet,vn=async function(){for(const r of Object.values(I(this,Be))){const i=r.element;await i.processValue(),i.isProcessValueDone&&(this.removeDependency(i),await i.updateElement())}const e=this.pages[0].filterElement("e0_hxq59pklk")[0];if(e&&await e.updateElement(),Object.keys(I(this,Be)).length==0){Jr.debug("Document",`已完成第计算, 共${I(this,nt)+1}轮`);return}++In(this,nt)._>=100||await en(this,bt,vn).call(this)};let vt=Ln;function pt(t){const e=U.create(t),n=t.children.map(r=>U.create(r));return e.appendMany(n),e}function vo(t,e={}){function n(f){const c=Bt.create(f,t.define.paper);r(c);for(const l of c.defines){const p=s(l);p.define.isFixed?c.appendToFixed(p):c.append(p)}return i(c),c.state=Lt.INIT,c}function r(f){if(!(f.header.display!=!0||f.header.defines.length==0))for(const c of f.header.defines)f.appendToHeader(s(c))}function i(f){if(!(f.footer.display!=!0||f.footer.defines.length==0))for(const c of f.footer.defines)f.appendToFooter(s(c))}function s(f){switch(f.type){case"Table":return o(f);default:return U.create(f)}}function o(f){let c=0;const l=U.create(f),p=f.children;for(;c<p.length;){const d=p[c];if(d.isRepeat&&d.rowspan>1){const v=a(f,c);l.appendMany(v.rows),c=v.next;continue}if(d.isRepeat){l.appendMany(u(d)),c++;continue}l.append(pt(d)),c++}return l}function a(f,c){const l=f.children[c],p=f.children.slice(c,c+l.rowspan),d=je(l.ds.value),v=Fn(Ke(e,d.value)),y=[];for(let h=0;h<v.length;h++){const E=`${l.id}_${h}`;for(const b of p){const D=pt(b);D.repeatGroup=E,D.rowData=v[h],y.push(D)}}return{rows:y,next:c+l.rowspan}}function u(f){const c=je(f.ds.value),l=Ke(e,c.value);return Fn(l).map(p=>{const d=pt(f);return d.rowData=p,d})}return t.data=e,t.appendMany(t.define.pages.map(f=>n(f))),t}function yo(t,e={}){return vo(t,e)}const xt="__QUICKPRINT_STREAM_RENDERER_HANDLER_0__",ht="__QUICKPRINT_STREAM_RENDERER_LISTENER_0__";var Ve;class _o{constructor(e,n,r={}){R(this,"container");R(this,"doc");R(this,"data");R(this,"currentFile",null);R(this,"pageNum",1);ae(this,Ve,null);this.container=e,this.doc=n,this.data=r,n.renderer=this}createDebug(){if(this.doc.debug!==!0)return;const e=window;if(typeof e[ht]!="function"){const r=i=>{i.key==="F10"&&(i.preventDefault(),i.stopPropagation(),this.next())};e[ht]=r,e.addEventListener("keydown",r)}const n=new CustomEvent("quickprint-debug:start",{detail:{renderer:xt}});e.dispatchEvent(n),e[xt]=this}cleanup(){const e=window;typeof e[ht]=="function"&&(window.removeEventListener("keydown",e[ht]),delete e[ht]),e[xt]&&delete e[xt];const n=new CustomEvent("quickprint-debug:end");e.dispatchEvent(n),this.doc.renderer=null}next(){typeof I(this,Ve)=="function"&&(I(this,Ve).call(this),xe(this,Ve,null))}resume(){this.doc.state.debug=!1,this.next()}createNextTask(e){return this.doc.debug!==!0?e():new Promise(n=>{xe(this,Ve,()=>{e().then(n)})})}async render(){yo(this.doc,this.data),await this.doc.onCreated(),this.doc.setRenderState(Ee.RENDERING);const e=this.doc.createElement();return e&&this.container.appendChild(e),this.currentFile=this.doc.pages[0].file,this.createDebug(),this.renderPage()}async renderPage(){const e=this.doc,n=e.rendering,r=e.pages[n];if(r==null){await e.mount(),this.cleanup();return}return r.beginPaging(),r.createElement()==null?this.createNextTask(()=>(e.rendering+=1,this.renderPage())):(await e.mountChild(r),await this.renderPageElement(r),await this.renderPageFixedElement(r),r.file!==this.currentFile&&(this.pageNum=1),r.pageNum=this.pageNum++,await r.onPaged(),this.createNextTask(()=>(e.rendering+=1,e.state.total=e.pages.length,this.renderPage())))}async renderPageElement(e){const n=e.children[e.rendering];return n==null?void 0:(n.offsetTop=this.findNewOffsetTop(e,n),n.createElement()==null?this.createNextTask(()=>(e.rendering+=1,this.renderPageElement(e))):(await this.mountChild(e,n),this.createNextTask(()=>(e.rendering+=1,this.renderPageElement(e)))))}async renderPageFixedElement(e){let n=0;for(;n<e.fixed.length;){const r=e.fixed[n];await e.mountChild(r),await this.createNextTask(()=>(n++,Promise.resolve()))}}findNewOffsetTop(e,n){const r=e.children[e.rendering-1];return r==null?e.extra?e.header.offsetHeight+4:n.offsetTop:!r.isChanged||pn.isIsolated(r.define,n.define)?n.offsetTop:r.offsetBottom+n.define.top-r.define.top-r.define.height}mountChild(e,n){switch(n.define.type){case ee.TABLE:return this.renderTable(e,n);case ee.TEXT:return this.renderText(e,n);default:return this.defaultRender(e,n)}}findNextFragment(e,n){const r=e.children[n],i=[r];if(r.repeatGroup==null)return{height:r.offsetHeight,length:1};for(let s=n+1;s<e.children.length;s++){const o=e.children[s];if(o.repeatGroup!==r.repeatGroup)break;i.push(o)}return{height:Math.max(...i.map(s=>s.offsetHeight)),length:i.length}}findSplitRowIndex(e,n){let r=e.offsetTop,i=0;for(;i<e.children.length;){const s=this.findNextFragment(e,i);if(r+=s.height,r==n)return i+s.length-1;if(r>n)return i-1;i+=s.length}return e.children.length-1}splitTable(e,n,r){const i=n.define.footer.map(l=>{const p=pt(l);return p.extra=!0,p}),s=r-i.reduce((l,p)=>l+p.offsetHeight,0),o=this.findSplitRowIndex(n,s),a=n.splitRows(o);n.appendMany(i),n.atomized=!0,n.rendering=o;const u=e.clone(),f=new Rr(n.define),c=n.define.header.map(l=>pt(l));f.extra=!0,f.appendMany(c),f.appendMany(a);for(let l=0;l<e.children.length;l++){const p=e.children[l];if(p.define.id===n.define.id){Reflect.set(u.children,l,f);continue}if(p.define.attributes.printMode===Qr.EACH){const d=p.clone();Reflect.set(u.children,l,d);continue}l<e.rendering+1||pn.isIsolated(p.define,n.define)||(Reflect.set(u.children,l,p),Reflect.set(e.children,l,null))}return e.children=e.children.filter(l=>l!=null),u.children=u.children.filter(l=>l!=null),u}async renderTableRow(e,n){const r=n.children[n.rendering];if(r==null)return;if(r.extra&&r.isUndefinedValue&&await r.onCreated(),r.createElement()==null)return n.rendering+=1,this.renderTableRow(e,n);await n.mountChild(r);const s=pe.mm_to_px(e.paper.offsetHeight)-e.footer.offsetHeight;if(n.offsetBottom-s>=2){const o=this.splitTable(e,n,s),a=n.children.filter(u=>u.extra);return this.doc.insert(o,e.index+1),await Promise.allSettled(a.map(u=>u.onCreated())),await o.onCreated(),this.createNextTask(()=>this.renderTableRow(e,n))}return this.createNextTask(()=>(n.rendering+=1,this.renderTableRow(e,n)))}async renderTable(e,n){return await e.mountChild(n),this.renderTableRow(e,n)}async renderText(e,n){return n.extra&&n.isUndefinedValue&&await n.onCreated(),e.mountChild(n)}async defaultRender(e,n){return n.extra&&n.isUndefinedValue&&await n.onCreated(),e.mountChild(n)}}Ve=new WeakMap;function bo(t){const e=Date.now(),n=vt.create(t.define,t.state);return new _o(t.container,n,t.data).render().then(()=>{n.state.renderTime=Date.now()-e}),n}const No=it({__name:"DocState",props:{state:{type:Object,required:!0}},setup(t,{expose:e}){e();const n=t,r=be(()=>n.state.renderState===Ee.READY),i=be(()=>n.state.renderState===Ee.READY?"已就绪":n.state.renderState===Ee.RENDERING?`正在生成(${n.state.total??0}页)...`:"正在生成..."),s={props:n,isFinished:r,renderStateText:i};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),Do="_finished_7h37m_2",To={finished:Do};function So(t,e,n,r,i,s){return we(),Ae("div",null,[e[0]||(e[0]=oe("span",null,"文档：",-1)),oe("span",{class:X({[t.classes.finished]:r.isFinished})},Ft(r.renderStateText),3)])}const ko={classes:To},xo=Nt(No,[["render",So],["__cssModules",ko],["__file","/home/dongls/work/quickprint/packages/browser/components/DocState.vue"]]),Ro=it({__name:"Debug",props:{doc:{type:vt,required:!0}},setup(t,{expose:e}){e();const n=t,r=bn("classes"),i=Nn({x:40,y:40,diffx:0,diffy:0}),s=be(()=>({top:i.y+"px",left:i.x+"px"}));function o(){var p;(p=n.doc.renderer)==null||p.next()}function a(){var p;(p=n.doc.renderer)==null||p.resume()}function u(p){p.preventDefault(),p.stopPropagation();const d=p.target.closest("."+r.indicator);if(d==null)return;d.setPointerCapture(p.pointerId);const v=d.getBoundingClientRect();i.diffx=p.clientX-v.left,i.diffy=p.clientY-v.top,window.addEventListener("pointermove",f),window.addEventListener("pointerup",c),d.releasePointerCapture(p.pointerId)}function f(p){p.preventDefault(),p.stopPropagation(),i.x=p.clientX-i.diffx,i.y=p.clientY-i.diffy}function c(p){window.removeEventListener("pointermove",f),window.removeEventListener("pointerup",c)}const l={props:n,classes:r,state:i,style:s,next:o,stop:a,onDragStart:u,onDragMove:f,onDragEnd:c,get Icon(){return qt}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),Ao="_debug_yym8k_2",Po="_indicator_yym8k_14",Mo="_tools_yym8k_21",Oo="_next_yym8k_26",Lo="_resume_yym8k_31",Co={debug:Ao,indicator:Po,tools:Mo,next:Oo,resume:Lo};function Io(t,e,n,r,i,s){return we(),Ae("div",{class:X(r.classes.debug),style:di(r.style)},[oe("div",{class:X(r.classes.indicator),onPointerdown:r.onDragStart},[Z(r.Icon,{icon:"icon-tuozhuai",size:"16px"})],34),oe("div",{class:X(r.classes.tools)},[oe("button",{type:"button",class:X(["quickprint-text-btn",r.classes.next]),onClick:r.next},"下一步(F10)",2),oe("button",{type:"button",class:X(["quickprint-text-btn",r.classes.resume]),onClick:r.stop},"结束(ESC)",2)],2)],6)}const qo={classes:Co},Fo=Nt(Ro,[["render",Io],["__cssModules",qo],["__file","/home/dongls/work/quickprint/packages/browser/components/Debug.vue"]]),Ho="_toolbar_3etac_1",$o="_button_3etac_9",Uo="_actived_3etac_33",Bo="_divider_3etac_46",Ze={toolbar:Ho,button:$o,actived:Uo,divider:Bo},Yo=["viewMode","debug","space","print"],Vo=it({props:{doc:{type:vt},buttons:{type:Array,required:!0}},setup(t){function e(){var u;(u=t.doc)==null||u.print()}function n(){var u;(u=t.doc)==null||u.toggleViewMode()}function r(){var f;const u={[Ze.button]:!0,[Ze.actived]:((f=t.doc)==null?void 0:f.state.viewMode)==="multiple"};return Z("button",{type:"button",title:"切换单页/多页视图",class:u,onClick:n},[Z(qt,{icon:"icon-multi-page"},null),Z("span",null,[Ht("多页")])])}function i(){return Z("button",{type:"button",class:Ze.button,onClick:e,title:"打印 Ctrl + P"},[Z(qt,{icon:"icon-printer"},null),Z("span",null,[Ht("打印")])])}function s(){return Z("div",{class:Ze.divider},null)}function o(){return Z("div",{class:"quickprint-is-fill-w"},null)}function a(u){if(typeof u=="function")return u(Ze,t.doc);switch(u){case"viewMode":return r();case"print":return i();case"divider":return s();case"space":return o();default:return null}}return function(){return Z("div",{class:Ze.toolbar},[t.buttons.map(a)])}}});function Go(t){function e(i){const s=t.value;if(s!=null)switch(i.key){case"p":case"P":if(i.ctrlKey)return i.preventDefault(),s.print();case"Add":if(i.ctrlKey)return i.preventDefault(),s.zoomOut();case"Subtract":if(i.ctrlKey)return i.preventDefault(),s.zoomIn();case"0":if(i.ctrlKey)return i.preventDefault(),s.resetZoom();case"m":case"M":if(i.ctrlKey)return i.preventDefault(),s.toggleViewMode()}}function n(){window.addEventListener("keydown",e)}function r(){window.removeEventListener("keydown",e)}return{enable:n,disable:r}}const dn="quickprint_renderer_debug";function zo(){const t=Ot(!1),e=Nn({debug:sessionStorage.getItem(dn)==="true"});function n(s){t.value=!0}function r(){t.value=!1,sessionStorage.removeItem(dn)}function i(){sessionStorage.setItem(dn,"true"),window.location.reload()}return window.addEventListener("quickprint-debug:start",n),window.addEventListener("quickprint-debug:end",r),hi(()=>{window.removeEventListener("quickprint-debug:start",n),window.removeEventListener("quickprint-debug:end",r)}),{enable:t,state:e,startDebug:i}}const jo=it({__name:"index",props:{define:{type:Object,required:!0},data:{type:Object,required:!0},buttons:{type:Array,default(){return Yo}}},emits:["mock"],setup(t,{expose:e,emit:n}){e();const r=t,i=n,s=bn("classes"),o=$t(),a=$t(),u=Go(a),{state:f,enable:c,startDebug:l}=zo(),p=be(()=>f.renderState===Ee.READY),d=be(()=>{const A=f.renderTime??0;if(A<=6e4)return`${A/1e3}秒`;const L=Math.floor(A/1e3),C=L%60,M=(L-C)/60;return C==0?`${M}分`:`${M}分${C}秒`}),v=be(()=>f.total??"--"),y=be(()=>({"quickprint-is-scrollable":!0,"quickprint-is-scroll-y":!0,[s.body]:!0}));function h(){var A;(A=a.value)==null||A.zoomIn()}function E(){var A;(A=a.value)==null||A.zoomOut()}function b(A){var L,C;A.deltaY>0?(L=a.value)==null||L.zoomIn():(C=a.value)==null||C.zoomOut()}async function D(){const A=bo({container:o.value,define:mn.create(r.define),state:f,data:r.data});a.value=A,document.title=A?`${A.define.name} - OpenPrint`:"OpenPrint",await A.ready(),u.enable()}pi(()=>{D()});const q={props:r,emit:i,classes:s,containerRef:o,docRef:a,shortcut:u,state:f,enable:c,startDebug:l,isFinished:p,renderingTime:d,totalNum:v,className:y,zoomIn:h,zoomOut:E,doScale:b,init:D,DocState:xo,Debug:Fo,get CLASSES(){return Ie},get Zoom(){return ei},get Icon(){return qt},get Toolbar(){return Vo}};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}}),Wo="_preview_6q7hh_6",Zo="_header_6q7hh_17",Xo="_headerLeft_6q7hh_26",Ko="_headerRight_6q7hh_32",Jo="_body_6q7hh_38",Qo="_footer_6q7hh_57",ea="_status_6q7hh_77",ta="_divider_6q7hh_83",na="_zoom_6q7hh_90",ra={preview:Wo,header:Zo,headerLeft:Xo,headerRight:Ko,body:Jo,footer:Qo,status:ea,divider:ta,zoom:na},ia={key:3,class:"quickprint-is-fill-w"};function sa(t,e,n,r,i,s){return we(),Ae("div",{class:X(r.classes.preview),onWheel:gi(r.doScale,["ctrl","prevent"])},[oe("div",{class:X([r.CLASSES.PRINT_HIDDEN,r.classes.header])},[oe("div",{class:X(r.classes.headerLeft)},[Bn(t.$slots,"headerLeft")],2),Z(r.Toolbar,{doc:r.docRef,buttons:n.buttons},null,8,["doc","buttons"]),oe("div",{class:X(r.classes.headerRight)},[Bn(t.$slots,"headerRight")],2)],2),oe("div",{class:X(r.className),ref:"containerRef"},null,2),oe("div",{class:X([r.CLASSES.PRINT_HIDDEN,r.classes.footer])},[Z(r.DocState,{state:r.state,class:X(r.classes.status)},null,8,["state","class"]),r.isFinished?(we(),Ae(Yn,{key:0},[oe("div",{class:X(r.classes.status)},"用时："+Ft(r.renderingTime),3),e[1]||(e[1]=oe("div",{class:"quickprint-is-fill-w"},null,-1))],64)):sn("v-if",!0),r.state.debug!==!0?(we(),Ae("button",{key:1,type:"button",class:"quickprint-text-btn",title:"进入调试模式",onClick:e[0]||(e[0]=(...o)=>r.startDebug&&r.startDebug(...o))},[Z(r.Icon,{icon:"icon-bug"})])):sn("v-if",!0),r.isFinished?(we(),Ae(Yn,{key:2},[e[2]||(e[2]=oe("button",{type:"button",class:"quickprint-text-btn"},"快捷键",-1)),oe("div",{class:X(r.classes.divider)},null,2),oe("div",{class:X(r.classes.status)},"第1页，共"+Ft(r.totalNum)+"页",3),oe("div",{class:X(r.classes.divider)},null,2)],64)):(we(),Ae("div",ia)),Z(r.Zoom,{class:X(r.classes.zoom),scale:r.state.scale,onZoomIn:r.zoomIn,onZoomOut:r.zoomOut},null,8,["class","scale"])],2),r.enable&&r.docRef?(we(),hr(mi,{key:0,to:"body"},[Z(r.Debug,{doc:r.docRef},null,8,["doc"])])):sn("v-if",!0)],34)}const oa={classes:ra},aa=Nt(jo,[["render",sa],["__cssModules",oa],["__file","/home/dongls/work/quickprint/packages/browser/index.vue"]]),ua=it({__name:"component",props:{ds:{type:Object,required:!0},options:{type:Array,default(){return[]}},local:{type:Array,default:null}},setup(t,{expose:e}){e();const n=t,r=bn("classes"),i=ti(),s=dr(n.local??[]),o=Nn(n.ds.fields.map(l=>f(l))),a=[{label:"文本",value:me.STRING},{label:"数字",value:me.NUMBER},{label:"日期",value:me.DATE},{label:"对象",value:me.OBJECT},{label:"数组",value:me.ARRAY}],u=[{name:"$index"},{name:"$expand"},{name:"type",title:"类型",width:60,formatter(l,p){var v;const d=l[p.name];return((v=a.find(y=>y.value===d))==null?void 0:v.label)??d}},{name:"name",title:"名称",width:150},{name:"title",title:"标题",width:150},{name:"func",title:"数据",width:200,render(l,p){if(l.type===me.OBJECT)return null;if(l.type===me.ARRAY)return Vn(Z("input",{type:"number","onUpdate:modelValue":v=>l.total=v,placeholder:"默认生成10-500行数据",min:"0",step:"1",class:r.input},null),[[Ei,l.total]]);const d=n.options.find(v=>v.classify===l.type);return d==null?null:Vn(Z("select",{"onUpdate:modelValue":v=>l.func=v,class:r.select},[Z("option",{value:"",class:r.placeholder},[Ht("请选择")]),d.rules.map(v=>Z("option",{value:v.func,key:v.func},[v.name]))]),[[vi,l.func]])}}];function f(l,p){const d=p?`${p}.${l.name}`:l.name,v=l.children?l.children.map(h=>f(h,l.name)):void 0,y=s[d];return{type:l.type,name:l.name,title:l.title,children:v,$expand:!0,func:(y==null?void 0:y.func)??"",total:y==null?void 0:y.total}}i==null||i.useHandle("confirm",()=>wi(o));const c={props:n,classes:r,win:i,localRules:s,rules:o,TYPE_OPTIONS:a,columns:u,createRule:f,get Table(){return ni}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),ca="_ds_6a9ph_2",la="_placeholder_6a9ph_8",fa="_select_6a9ph_12",da="_input_6a9ph_13",ha={ds:ca,placeholder:la,select:fa,input:da};function pa(t,e,n,r,i,s){return we(),Ae("div",{class:X(r.classes.ds)},[Z(r.Table,{columns:r.columns,data:r.rules},null,8,["data"])],2)}const ma={classes:ha},ga=Nt(ua,[["render",pa],["__cssModules",ma],["__file","/home/dongls/work/quickprint/packages/document/mock/component.vue"]]);let Rt=null;const or=490;function Fr(){return Rt!=null?Promise.resolve(Rt):si(()=>import("./mock-CzK5OsP_.js"),__vite__mapDeps([0,1,2,3])).then(t=>(Rt=t.default,Rt))}function ar(t,e){switch(e){case me.DATE:return t.randDate();case me.NUMBER:return t.randDecimal();case me.STRING:return t.randName();default:return null}}function wa(t){if((t==null?void 0:t.total)==null)return or;const e=Number(t.total);return Number.isNaN(e)||!Number.isFinite(e)||e<=0?or:Math.round(e)}function hn(t,e,n){if(n==null||rt(n.func))return ar(t,e.type);const r=t[n.func];return typeof r!="function"?ar(t,e.type):r(n)}const Ea=ri(function(t,e,n){const r={ds:e,options:t.rules,local:n},i={pinnable:!1,mask:!0,top:"15vh",width:"720px",height:"600px",minWidth:720,minHeight:600,resizeMode:oi.RESIZE_ONLY,menus:[{label:"确定",handler:s=>s.dispatchConfirm()}]};return ai("创建模拟数据",yi(ga,r),i).promisify()});async function ur(t,e){if(t==null)return[];const n=await Fr(),r=await Ea(n,t,e).catch(ii);return Array.isArray(r)?r:[]}async function At(t,e){if(t==null||!Array.isArray(e)||e.length==0)return{};const n=await Fr(),r=dr(e);return t.fields.reduce((i,s)=>{const o=r[s.name];if(s.name==""||s.name==null)return i;if(s.type===me.OBJECT){const a=s.children??[];return i[s.name]=a.reduce((u,f)=>{if(rt(f.name))return u;const c=`${s.name}.${f.name}`;return u[f.name]=hn(n,f,r[c]),u},{}),i}if(s.type===me.ARRAY){const a=s.children??[],u=wa(o),f=10+Math.round(Math.random()*u);return i[s.name]=Array(f).fill("").map(()=>a.reduce((c,l)=>{if(rt(l.name))return c;const p=`${s.name}.${l.name}`;return c[l.name]=hn(n,l,r[p]),c},{})),i}return i[s.name]=hn(n,s,o),i},{})}const va=it({__name:"index",setup(t,{expose:e}){e();const n={INIT:0,LOADED_CASE:1,READY:2},r=$t(),i=$t(),s=Ot(0),o=Ot(!1),a=be(()=>{var b;return`${((b=r.value)==null?void 0:b.id)??Date.now()}-${s.value}`}),u=Ot(n.INIT),f=be(()=>["viewMode","debug","space",o.value?v:null,"print"]),c=be(()=>u.value===n.INIT?"正在加载...":u.value===n.LOADED_CASE?"已加载模板，正在准备数据...":u.value===n.READY?"开始渲染...":"");function l(){const b=new URLSearchParams(window.location.search).get("id");return gt(b)&&(b==="local"||Hn.some(D=>D.id===b))?b:Hn[0].id}async function p(E){var A,L,C,M;if(E==null)return{};if(E.data)return o.value=!1,E.data;const b=$n(E.id);if(Array.isArray(b)&&b.length>0)return At((A=E.define)==null?void 0:A.ds,b);const D=E.rules;if(Array.isArray(D)&&D.length>0)return At((L=E.define)==null?void 0:L.ds,D);const q=await ur((C=r.value)==null?void 0:C.ds);return Un(q,E.id),At((M=E.define)==null?void 0:M.ds,q)}async function d(){if(r.value==null)return;const E=r.value.id;if(E==null||E=="")return;const b=$n(E),D=await ur(r.value.ds,b);Un(D,r.value.id),i.value=await At(r.value.ds,D),s.value++}function v(E){return Z("button",{type:"button",class:E.button,onClick:d},[Z("span",null,[Ht("模拟数据")])])}async function y(){u.value=n.INIT,o.value=!0;const E=await ui(l());r.value=(E==null?void 0:E.define)??{},u.value=n.LOADED_CASE,i.value=await p(E),u.value=n.READY}y();const h={STEPS:n,define:r,data:i,version:s,allowMock:o,key:a,step:u,buttons:f,loading:c,useId:l,useData:p,onMockData:d,MockButton:v,initialize:y,get Preview(){return aa}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),ya="_preview_17t3s_7",_a="_logs_17t3s_11",ba={preview:ya,logs:_a};function Na(t,e,n,r,i,s){return r.step<r.STEPS.READY?(we(),Ae("div",{key:0,class:X(t.classes.logs)},Ft(r.loading),3)):(we(),hr(r.Preview,{define:r.define,data:r.data,buttons:r.buttons,key:r.key,class:X(t.classes.preview),onMock:r.onMockData},null,8,["define","data","buttons","class"]))}const Da={classes:ba},Ta=Nt(va,[["render",Na],["__cssModules",Da],["__file","/home/dongls/work/quickprint/packages/document/preview/index.vue"]]),On=_i(Ta),Sa=ci();On.use(li,{zIndex:Sa});On.mount("#app");fi(On._context);
